<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>reactè¯¾ç¨‹23-ç»§ç»­åŠŸèƒ½</title>
    <link href="/2024/09/27/react%E8%AF%BE%E7%A8%8B23-%E7%BB%A7%E7%BB%AD%E5%8A%9F%E8%83%BD/"/>
    <url>/2024/09/27/react%E8%AF%BE%E7%A8%8B23-%E7%BB%A7%E7%BB%AD%E5%8A%9F%E8%83%BD/</url>
    
    <content type="html"><![CDATA[<p>k</p><span id="more"></span>]]></content>
    
    
    <categories>
      
      <category>reactè¯¾ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>react</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>reactè¯¾ç¨‹22-å®ç°è¾ƒä¸ºå®Œæ•´çš„ç”¨æˆ·ç®¡ç†åŠŸèƒ½</title>
    <link href="/2024/09/26/react%E8%AF%BE%E7%A8%8B22-%E5%AE%9E%E7%8E%B0%E8%BE%83%E4%B8%BA%E5%AE%8C%E6%95%B4%E7%9A%84%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86%E5%8A%9F%E8%83%BD/"/>
    <url>/2024/09/26/react%E8%AF%BE%E7%A8%8B22-%E5%AE%9E%E7%8E%B0%E8%BE%83%E4%B8%BA%E5%AE%8C%E6%95%B4%E7%9A%84%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86%E5%8A%9F%E8%83%BD/</url>
    
    <content type="html"><![CDATA[<p>æœ¬èŠ‚è´Ÿè´£å®ç°èº«ä»½éªŒè¯å’Œæˆæƒã€ç”¨æˆ·æ³¨å†Œã€ç™»é™†ç™»å‡ºã€ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯çš„åŠŸèƒ½</p><span id="more"></span><h3 id="ä¸€ã€èº«ä»½éªŒè¯å’Œæˆæƒ"><a href="#ä¸€ã€èº«ä»½éªŒè¯å’Œæˆæƒ" class="headerlink" title="ä¸€ã€èº«ä»½éªŒè¯å’Œæˆæƒ"></a>ä¸€ã€èº«ä»½éªŒè¯å’Œæˆæƒ</h3><h4 id="ï¼ˆ1ï¼‰-Authentication"><a href="#ï¼ˆ1ï¼‰-Authentication" class="headerlink" title="ï¼ˆ1ï¼‰ Authentication"></a>ï¼ˆ1ï¼‰ <strong>Authentication</strong></h4><blockquote><p>èº«ä»½éªŒè¯æ˜¯ç¡®è®¤ç”¨æˆ·çš„èº«ä»½çš„è¿‡ç¨‹ï¼Œç›®çš„æ˜¯éªŒè¯ç”¨æˆ·æ˜¯è°ã€‚</p></blockquote><p>é¦–å…ˆæˆ‘ä»¬åœ¨Authenticationä¸­æ–°å»ºäº†ä¸€ä¸ªuserï¼Œç„¶ååˆ°API DOCSä¸­çš„user managementä¸­å¯»æ‰¾<code>Log in with Email/Password</code>è¿™ä¸€æ®µä»£ç ï¼Œcopyä¸‹æ¥æ”¾ç½®è¿›apiAuthä¸­ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">login</span>(<span class="hljs-params">&#123; email, password &#125;</span>) &#123;<br>  <span class="hljs-keyword">const</span> &#123; data, error &#125; = <span class="hljs-keyword">await</span> supabase.<span class="hljs-property">auth</span>.<span class="hljs-title function_">signInWithPassword</span>(&#123;<br>    email,<br>    password,<br>  &#125;);<br><br>  <span class="hljs-keyword">if</span> (error) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(error.<span class="hljs-property">message</span>);<br><br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);<br>  <span class="hljs-keyword">return</span> data;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç„¶åå¯ä»¥æ–°å»ºä¸€ä¸ªuseLoginé’©å­ï¼Œå¾—åˆ°mutationå‡½æ•°æ¥å¤„ç†ç™»é™†ã€‚å¯ä»¥çœ‹å‡ºonSuccesså‡½æ•°å¯ä»¥å¾—åˆ°dataï¼Œäºæ˜¯å¯ä»¥è®°å½•åˆ°æ§åˆ¶å°æŸ¥çœ‹ä¿¡æ¯ã€‚</p><p>è°ƒç”¨ <code>queryClient.setQueryData([&#39;user&#39;], user.user);</code>ï¼šå°†ç™»å½•æˆåŠŸçš„ç”¨æˆ·æ•°æ®ç¼“å­˜åˆ° <code>[&#39;user&#39;]</code> æŸ¥è¯¢ä¸­ï¼Œè¿™æ ·åº”ç”¨çš„å…¶ä»–éƒ¨åˆ†å¯ä»¥ä½¿ç”¨è¿™ä¸ªç”¨æˆ·ä¿¡æ¯ã€‚ï¼ˆuseræ˜¯objectï¼ŒåŒ…å«sessionå’Œuserï¼Œè€Œæˆ‘ä»¬æƒ³è¦çš„åªæ˜¯userï¼šç”¨æˆ·ï¼‰</p><p>replaceæ˜¯ä¸ºäº†æ›¿æ¢æµè§ˆè®°å½•ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useLogin</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> queryClient = <span class="hljs-title function_">useQueryClient</span>();<br>  <span class="hljs-keyword">const</span> navigate = <span class="hljs-title function_">useNavigate</span>();<br><br>  <span class="hljs-keyword">const</span> &#123; <span class="hljs-attr">mutate</span>: login, isLoading &#125; = <span class="hljs-title function_">useMutation</span>(&#123;<br>    <span class="hljs-attr">mutationFn</span>: <span class="hljs-function">(<span class="hljs-params">&#123; email, password &#125;</span>) =&gt;</span> <span class="hljs-title function_">loginApi</span>(&#123; email, password &#125;),<br>    <span class="hljs-attr">onSuccess</span>: <span class="hljs-function">(<span class="hljs-params">user</span>) =&gt;</span> &#123;<br>      queryClient.<span class="hljs-title function_">setQueryData</span>([<span class="hljs-string">&#x27;user&#x27;</span>], user.<span class="hljs-property">user</span>);<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(user);<br>      <span class="hljs-title function_">navigate</span>(<span class="hljs-string">&#x27;/dashboard&#x27;</span>ï¼Œ&#123;<span class="hljs-attr">replace</span>: <span class="hljs-literal">true</span>&#125;);<br>    &#125;,<br>    <span class="hljs-attr">onError</span>: <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(err);<br>      toast.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;Provided email or password are incorrect&#x27;</span>);<br>    &#125;,<br>  &#125;);<br><br>  <span class="hljs-keyword">return</span> &#123; login, isLoading &#125;;<br>&#125;<br></code></pre></td></tr></table></figure><p>è°ƒç”¨ <code>supabase.auth.signInWithPassword(&#123; email, password &#125;)</code> æ—¶ï¼Œ<code>Supabase</code> ä¼šå°†ä½ æä¾›çš„ <code>email</code> å’Œ <code>password</code> å‘é€åˆ°å®ƒçš„èº«ä»½éªŒè¯æœåŠ¡ã€‚</p><p><code>Supabase</code> åœ¨åå°ä¼šå°†æä¾›çš„ <code>email</code> å’Œ <code>password</code> ä¸å…¶æ•°æ®åº“ä¸­å­˜å‚¨çš„ç”¨æˆ·ä¿¡æ¯è¿›è¡Œæ¯”è¾ƒã€‚éªŒè¯æµç¨‹åŒ…æ‹¬ï¼š</p><ul><li><strong>æŸ¥æ‰¾ç”¨æˆ·</strong>ï¼š<code>Supabase</code> ä¼šåœ¨å…¶ç”¨æˆ·æ•°æ®åº“ä¸­æ ¹æ®æä¾›çš„ <code>email</code> æŸ¥æ‰¾ç›¸åº”çš„ç”¨æˆ·è®°å½•ã€‚</li><li><strong>éªŒè¯å¯†ç </strong>ï¼šæ‰¾åˆ°ç”¨æˆ·åï¼Œ<code>Supabase</code> ä¼šå¯¹ä¼ å…¥çš„ <code>password</code> è¿›è¡ŒåŠ å¯†ï¼ˆé€šå¸¸æ˜¯å“ˆå¸Œå¤„ç†ï¼‰ï¼Œç„¶åä¸æ•°æ®åº“ä¸­å­˜å‚¨çš„å“ˆå¸Œå€¼è¿›è¡Œæ¯”è¾ƒã€‚å¯†ç åœ¨å­˜å‚¨æ—¶æ˜¯ç»è¿‡å“ˆå¸ŒåŠ å¯†çš„ï¼Œæ•°æ®åº“ä¸ç›´æ¥å­˜å‚¨æ˜æ–‡å¯†ç ã€‚</li></ul><p>éªŒè¯ç»“æœï¼š</p><ul><li><strong>æˆåŠŸ</strong>ï¼šå¦‚æœé‚®ç®±å­˜åœ¨ä¸”å¯†ç åŒ¹é…ï¼Œ<code>Supabase</code> ä¼šè¿”å›ä¸€ä¸ªåŒ…å«ç”¨æˆ·æ•°æ®çš„å“åº”ï¼ˆå³ <code>data</code> å¯¹è±¡ï¼‰ã€‚è¿™è¡¨ç¤ºç”¨æˆ·èº«ä»½éªŒè¯æˆåŠŸï¼Œç”¨æˆ·å¯ä»¥ç™»å½•ã€‚</li><li><strong>å¤±è´¥</strong>ï¼šå¦‚æœé‚®ç®±ä¸å­˜åœ¨æˆ–è€…å¯†ç ä¸æ­£ç¡®ï¼Œ<code>Supabase</code> ä¼šè¿”å›ä¸€ä¸ª <code>error</code> å¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«é”™è¯¯ä¿¡æ¯ï¼ˆä¾‹å¦‚ â€œInvalid login credentialsâ€ï¼‰ã€‚</li></ul><p>æˆ‘ä»¬ä¼šå‘ç°ç™»é™†æˆåŠŸåï¼Œåœ¨æµè§ˆå™¨storageå‡ºç°äº†tokenã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240926145909054.png" alt="image-20240926145909054"></p><h4 id="ï¼ˆ2ï¼‰Authorization"><a href="#ï¼ˆ2ï¼‰Authorization" class="headerlink" title="ï¼ˆ2ï¼‰Authorization"></a>ï¼ˆ2ï¼‰Authorization</h4><blockquote><p>æˆæƒæ˜¯åœ¨èº«ä»½éªŒè¯æˆåŠŸåï¼Œç¡®å®šç”¨æˆ·å¯¹ç³»ç»Ÿèµ„æºæˆ–æ“ä½œçš„è®¿é—®æƒé™çš„è¿‡ç¨‹ã€‚</p></blockquote><p>å»ºç«‹ä¸€ä¸ª<code>ProtectedRout</code>ç»„ä»¶ï¼Œå¹¶åœ¨<code>App.jsx</code>çš„Routeä¸­æŠŠ<code>Applayout</code>ç»„ä»¶ç”¨å®ƒåŒ…è£¹èµ·æ¥ã€‚ç”±äºå…¶ä»–ç•Œé¢éƒ½åœ¨<code>Applayout</code>ä¸­è¢«æ¸²æŸ“ï¼Œæ‰€ä»¥ç”¨æˆ·å¿…é¡»é€šè¿‡èº«ä»½éªŒè¯ï¼Œæ‰èƒ½è¿›å…¥ä»»ä½•åœ¨ <code>AppLayout</code> ä¸­æ¸²æŸ“çš„é¡µé¢ã€‚ï¼ˆä»£ç ç®€æ´ï¼Œæ€§èƒ½ä¼˜åŒ–ï¼Œæ›´å¥½çš„ç»´æŠ¤æ€§ï¼‰</p><p><code>ProtectedRoute</code> æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰çš„è·¯ç”±ç»„ä»¶ï¼Œä¸»è¦èŒè´£æ˜¯é™åˆ¶å¯¹æŸäº›è·¯ç”±çš„è®¿é—®ï¼Œç”¨æ¥ä¿æŠ¤ä¸€ç»„è·¯ç”±ï¼Œé€šå¸¸æ˜¯æ£€æŸ¥ç”¨æˆ·æ˜¯å¦ç™»å½•æˆ–æ˜¯å¦æœ‰è®¿é—®æƒé™ã€‚</p><h5 id="1ã€ä»supabaseä¸­è·å–ç”¨æˆ·çš„ä¿¡æ¯"><a href="#1ã€ä»supabaseä¸­è·å–ç”¨æˆ·çš„ä¿¡æ¯" class="headerlink" title="1ã€ä»supabaseä¸­è·å–ç”¨æˆ·çš„ä¿¡æ¯"></a>1ã€ä»supabaseä¸­è·å–ç”¨æˆ·çš„ä¿¡æ¯</h5><blockquote><p><strong>ä¼šè¯</strong>ï¼ˆSessionï¼‰æ˜¯æŒ‡åœ¨ä¸€æ®µæ—¶é—´å†…ï¼Œç”¨æˆ·ä¸ç³»ç»Ÿä¹‹é—´çš„æŒç»­äº¤äº’çŠ¶æ€æˆ–è¿æ¥ã€‚ä¼šè¯ç®¡ç†æ˜¯ç°ä»£åº”ç”¨ç¨‹åºå’ŒæœåŠ¡ä¸­çš„é‡è¦æœºåˆ¶ï¼Œç”¨äºè·Ÿè¸ªç”¨æˆ·çš„èº«ä»½å’ŒçŠ¶æ€ã€‚å…·ä½“æ¥è¯´ï¼Œä¼šè¯ä¸èº«ä»½éªŒè¯å’Œæˆæƒå¯†åˆ‡ç›¸å…³ã€‚ä¼šè¯é€šå¸¸åœ¨ç”¨æˆ·ç™»å½•æˆ–è®¿é—®æŸä¸ªç³»ç»Ÿæ—¶å¼€å§‹ï¼Œå¹¶åœ¨ç”¨æˆ·æ³¨é”€æˆ–è¶…æ—¶åç»“æŸï¼ˆè¯¦è§æ–‡æœ«ï¼‰</p></blockquote><p>é€šè¿‡æ£€æŸ¥ç”¨æˆ·çš„å½“å‰ä¼šè¯ï¼Œä»æœ¬åœ°å†…å­˜ä¸­è·å–ç™»å½•ç”¨æˆ·çš„ä¿¡æ¯ã€‚å¦‚æœæ²¡æœ‰ä¼šè¯ï¼ˆå³ç”¨æˆ·æœªç™»å½•ï¼‰ï¼Œè¿”å› <code>null</code>ï¼›å¦‚æœä¼šè¯æœ‰æ•ˆï¼Œåˆ™è·å–å¹¶è¿”å›ç”¨æˆ·ä¿¡æ¯ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getCurrentUser</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> &#123; <span class="hljs-attr">data</span>: session &#125; = <span class="hljs-keyword">await</span> supabase.<span class="hljs-property">auth</span>.<span class="hljs-title function_">getSession</span>();<br>  <span class="hljs-keyword">if</span> (!session.<span class="hljs-property">session</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br><br>  <span class="hljs-keyword">const</span> &#123; data, error &#125; = <span class="hljs-keyword">await</span> supabase.<span class="hljs-property">auth</span>.<span class="hljs-title function_">getUser</span>();<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);<br><br>  <span class="hljs-keyword">if</span> (error) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(error.<span class="hljs-property">message</span>);<br><br>  <span class="hljs-keyword">return</span> data?.<span class="hljs-property">user</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="2ã€useUser-js"><a href="#2ã€useUser-js" class="headerlink" title="2ã€useUser.js"></a>2ã€useUser.js</h5><p>è·å–å½“å‰ç”¨æˆ·å¹¶å°†å…¶å­˜å‚¨åˆ°ç¼“å­˜ä¸­ï¼Œè¿™æ ·å°±ä¸ç”¨æ¯æ¬¡éƒ½é‡æ–°ä¸‹è½½ã€‚ï¼ˆè·å–isAuthenticatedï¼‰</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useUser</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> &#123; isLoading, <span class="hljs-attr">data</span>: user &#125; = <span class="hljs-title function_">useQuery</span>(&#123;<br>    <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">&#x27;user&#x27;</span>],<br>    <span class="hljs-attr">queryFn</span>: getCurrentUser,<br>  &#125;);<br><br>  <span class="hljs-keyword">return</span> &#123; isLoading, user, <span class="hljs-attr">isAuthenticated</span>: user?.<span class="hljs-property">role</span> === <span class="hljs-string">&#x27;authenticated&#x27;</span> &#125;;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸‹å›¾ä¸ºç™»é™†åReact Queryå·¥å…·é‡Œå¾—åˆ°çš„ä¿¡æ¯ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240926153141752.png" alt="image-20240926153141752"></p><h5 id="3ã€åœ¨ProtectRouterä¸­æ¥éªŒè¯æ˜¯å¦éœ€è¦é‡å®šå‘åˆ°loginç•Œé¢"><a href="#3ã€åœ¨ProtectRouterä¸­æ¥éªŒè¯æ˜¯å¦éœ€è¦é‡å®šå‘åˆ°loginç•Œé¢" class="headerlink" title="3ã€åœ¨ProtectRouterä¸­æ¥éªŒè¯æ˜¯å¦éœ€è¦é‡å®šå‘åˆ°loginç•Œé¢"></a>3ã€åœ¨ProtectRouterä¸­æ¥éªŒè¯æ˜¯å¦éœ€è¦é‡å®šå‘åˆ°loginç•Œé¢</h5><blockquote><p><code>navigate</code> å¹¶<strong>ä¸é™äº</strong>å›è°ƒå‡½æ•°æˆ– <code>useEffect</code> ä¸­ä½¿ç”¨ï¼Œä½†è¿™äº›åœºæ™¯æ˜¯æœ€å¸¸è§å’Œå®‰å…¨çš„ä½¿ç”¨æ–¹å¼</p><p>ä¸æ¨èåœ¨ç»„ä»¶é¦–æ¬¡æ¸²æŸ“çš„æ—¶å€™ä½¿ç”¨navigateã€‚è¯¦è§Routerä¸“é¢˜</p></blockquote><ol><li>å¾—åˆ° <code>isAuthenticated</code> </li><li>å¦‚æœæ²¡æœ‰ç™»é™†å°±é‡å®šå‘åˆ°loginç•Œé¢</li><li>å¦‚æœè¿˜åœ¨åŠ è½½å°±è¿”å›ä¸€ä¸ªåŠ è½½æŒ‡ç¤ºå™¨</li><li>å¦‚æœå·²ç»ç™»é™†å°±æ¸²æŸ“App</li></ol><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">ProtectedRoute</span>(<span class="hljs-params">&#123; children &#125;</span>) &#123;<br>  <span class="hljs-keyword">const</span> navigate = <span class="hljs-title function_">useNavigate</span>();<br>  <span class="hljs-keyword">const</span> &#123; isLoading, isAuthenticated &#125; = <span class="hljs-title function_">useUser</span>();<br><br>  <span class="hljs-title function_">useEffect</span>(<br>    <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-keyword">if</span> (!isAuthenticated &amp;&amp; isLoading) <span class="hljs-title function_">navigate</span>(<span class="hljs-string">&#x27;/login&#x27;</span>);<br>    &#125;,<br>    [isAuthenticated, isLoading, navigate]<br>  );<br><br>  <span class="hljs-keyword">if</span> (isLoading)<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">FullPage</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Spinner</span> /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">FullPage</span>&gt;</span></span><br>    );<br><br>  <span class="hljs-keyword">if</span> (isAuthenticated) <span class="hljs-keyword">return</span> children;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ï¼ˆ3ï¼‰Log-out"><a href="#ï¼ˆ3ï¼‰Log-out" class="headerlink" title="ï¼ˆ3ï¼‰Log out"></a>ï¼ˆ3ï¼‰Log out</h4><h5 id="1ã€apiAuth"><a href="#1ã€apiAuth" class="headerlink" title="1ã€apiAuth"></a>1ã€apiAuth</h5><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">logout</span>(<span class="hljs-params">&#123; email, password &#125;</span>) &#123;<br>  <span class="hljs-keyword">const</span> &#123; error &#125; = <span class="hljs-keyword">await</span> supabase.<span class="hljs-property">auth</span>.<span class="hljs-title function_">signOut</span>();<br><br>  <span class="hljs-keyword">if</span> (error) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(error.<span class="hljs-property">message</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="2ã€useLogout"><a href="#2ã€useLogout" class="headerlink" title="2ã€useLogout"></a>2ã€useLogout</h5><p><code>queryClient.removeQueries()</code>ï¼šæ¸…é™¤ <code>react-query</code> ç¼“å­˜ä¸­çš„æ‰€æœ‰æ•°æ®ï¼Œç¡®ä¿ç”¨æˆ·é€€å‡ºåï¼Œåº”ç”¨ä¸å†ä¿ç•™ä¹‹å‰çš„æŸ¥è¯¢æ•°æ®ã€‚</p><p><code>navigate(&#39;/login&#39;, &#123; replace: true &#125;)</code>ï¼šå°†ç”¨æˆ·é‡å®šå‘åˆ°ç™»å½•é¡µé¢ï¼Œå¹¶ä¸”ä½¿ç”¨ <code>replace: true</code> æ›¿æ¢å½“å‰çš„å†å²è®°å½•ï¼Œè¿™æ ·ç”¨æˆ·åœ¨ç‚¹å‡»â€œè¿”å›â€æŒ‰é’®æ—¶ä¸ä¼šå›åˆ°ä¹‹å‰å·²ç™»å‡ºçš„é¡µé¢ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useLogout</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> queryClient = <span class="hljs-title function_">useQueryClient</span>();<br>  <span class="hljs-keyword">const</span> navigate = <span class="hljs-title function_">useNavigate</span>();<br><br>  <span class="hljs-keyword">const</span> &#123; <span class="hljs-attr">mutate</span>: logout, isLoading &#125; = <span class="hljs-title function_">useMutation</span>(&#123;<br>    <span class="hljs-attr">mutationFn</span>: logoutApi,<br>    <span class="hljs-attr">onSuccess</span>: <span class="hljs-function">() =&gt;</span> &#123;<br>      queryClient.<span class="hljs-title function_">removeQueries</span>();<br>      <span class="hljs-title function_">navigate</span>(<span class="hljs-string">&#x27;/login&#x27;</span>, &#123; <span class="hljs-attr">replace</span>: <span class="hljs-literal">true</span> &#125;);<br>    &#125;,<br>  &#125;);<br><br>  <span class="hljs-keyword">return</span> &#123; logout, isLoading &#125;;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="3ã€Logoutç»„ä»¶"><a href="#3ã€Logoutç»„ä»¶" class="headerlink" title="3ã€Logoutç»„ä»¶"></a>3ã€Logoutç»„ä»¶</h5><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Logout</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> &#123; logout, isLoading &#125; = <span class="hljs-title function_">useLogout</span>();<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ButtonIcon</span> <span class="hljs-attr">disabled</span>=<span class="hljs-string">&#123;isLoading&#125;</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;logout&#125;</span>&gt;</span></span><br><span class="language-xml">      &#123;!isLoading ? <span class="hljs-tag">&lt;<span class="hljs-name">HiArrowRightOnRectangle</span> /&gt;</span> : <span class="hljs-tag">&lt;<span class="hljs-name">SpinnerMini</span> /&gt;</span>&#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">ButtonIcon</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="äºŒã€å®ç°æ³¨å†ŒåŠŸèƒ½"><a href="#äºŒã€å®ç°æ³¨å†ŒåŠŸèƒ½" class="headerlink" title="äºŒã€å®ç°æ³¨å†ŒåŠŸèƒ½"></a>äºŒã€å®ç°æ³¨å†ŒåŠŸèƒ½</h3><blockquote><p>åœ¨è¿™ä¸ªAPPä¸­ï¼Œé€»è¾‘æ˜¯åªæœ‰ç™»é™†æˆåŠŸåæ‰èƒ½æ³¨å†Œå…¶ä»–ç”¨æˆ·ã€‚</p></blockquote><h4 id="ï¼ˆ1ï¼‰åˆ›å»ºæ³¨å†Œè¡¨å•"><a href="#ï¼ˆ1ï¼‰åˆ›å»ºæ³¨å†Œè¡¨å•" class="headerlink" title="ï¼ˆ1ï¼‰åˆ›å»ºæ³¨å†Œè¡¨å•"></a>ï¼ˆ1ï¼‰åˆ›å»ºæ³¨å†Œè¡¨å•</h4><h5 id="1ã€éœ€è¦ç”¨åˆ°çš„å·¥å…·"><a href="#1ã€éœ€è¦ç”¨åˆ°çš„å·¥å…·" class="headerlink" title="1ã€éœ€è¦ç”¨åˆ°çš„å·¥å…·"></a>1ã€éœ€è¦ç”¨åˆ°çš„å·¥å…·</h5><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> &#123; register, formState, getValues, handleSubmit &#125; = <span class="hljs-title function_">useForm</span>();<br><span class="hljs-keyword">const</span> &#123; errors &#125; = formState;<br></code></pre></td></tr></table></figure><h5 id="2ã€éªŒè¯ä¿¡æ¯"><a href="#2ã€éªŒè¯ä¿¡æ¯" class="headerlink" title="2ã€éªŒè¯ä¿¡æ¯"></a>2ã€éªŒè¯ä¿¡æ¯</h5><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&#123;...<span class="hljs-title function_">register</span>(<span class="hljs-string">&#x27;fullName&#x27;</span>, &#123; <span class="hljs-attr">required</span>: <span class="hljs-string">&#x27;This field is required&#x27;</span> &#125;)&#125;<br><br>&#123;...<span class="hljs-title function_">register</span>(<span class="hljs-string">&#x27;email&#x27;</span>, &#123;<br>   <span class="hljs-attr">required</span>: <span class="hljs-string">&#x27;This field is required&#x27;</span>,<br>      <span class="hljs-attr">pattern</span>: &#123;<br>      <span class="hljs-attr">value</span>: <span class="hljs-regexp">/\S+@\S+\.\S+/</span>,<br>      <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;Please provide a valid email address&#x27;</span>,<br>   &#125;,<br>&#125;)&#125;<br><br>&#123;...<span class="hljs-title function_">register</span>(<span class="hljs-string">&#x27;password&#x27;</span>, &#123;<br>   <span class="hljs-attr">required</span>: <span class="hljs-string">&#x27;This field is required&#x27;</span>,<br>   <span class="hljs-attr">minLength</span>: &#123;<br>   <span class="hljs-attr">value</span>: <span class="hljs-number">8</span>,<br>       <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;Password needs a minimum of 8 characters&#x27;</span>,<br>   &#125;,<br>&#125;)&#125;<br><br>&#123;...<span class="hljs-title function_">register</span>(<span class="hljs-string">&#x27;passwordConfirm&#x27;</span>, &#123;<br>   <span class="hljs-attr">required</span>: <span class="hljs-string">&#x27;This field is required&#x27;</span>,<br>   <span class="hljs-attr">validate</span>: <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span><br>       value === <span class="hljs-title function_">getValues</span>().<span class="hljs-property">password</span> || <span class="hljs-string">&#x27;Passwords need to match&#x27;</span>,<br>&#125;)&#125;<br></code></pre></td></tr></table></figure><h5 id="3ã€å¦‚ä½•æäº¤è¡¨å•ï¼Ÿé”™è¯¯å¦‚ä½•å±•ç¤º"><a href="#3ã€å¦‚ä½•æäº¤è¡¨å•ï¼Ÿé”™è¯¯å¦‚ä½•å±•ç¤º" class="headerlink" title="3ã€å¦‚ä½•æäº¤è¡¨å•ï¼Ÿé”™è¯¯å¦‚ä½•å±•ç¤º?"></a>3ã€å¦‚ä½•æäº¤è¡¨å•ï¼Ÿé”™è¯¯å¦‚ä½•å±•ç¤º?</h5><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;<span class="hljs-title class_">Form</span> onSubmit=&#123;<span class="hljs-title function_">handleSubmit</span>(onSubmit)&#125;&gt;<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">FormRow</span> <span class="hljs-attr">label</span>=<span class="hljs-string">&quot;Full name&quot;</span> <span class="hljs-attr">error</span>=<span class="hljs-string">&#123;errors?.fullName?.message&#125;</span>&gt;</span>  &#123;/ä»¥æ­¤ç±»æ¨/&#125;</span><br></code></pre></td></tr></table></figure><h4 id="ï¼ˆ2ï¼‰å®ç°æŠŠç”¨æˆ·æ³¨å†Œåˆ°supabase"><a href="#ï¼ˆ2ï¼‰å®ç°æŠŠç”¨æˆ·æ³¨å†Œåˆ°supabase" class="headerlink" title="ï¼ˆ2ï¼‰å®ç°æŠŠç”¨æˆ·æ³¨å†Œåˆ°supabase"></a>ï¼ˆ2ï¼‰å®ç°æŠŠç”¨æˆ·æ³¨å†Œåˆ°supabase</h4><p>ä¼¤åˆ°äº†ï¼Œè°æ‡‚ï¼Œsupabaseç•Œé¢å…¨è‹±æ–‡ï¼Œçœ‹åˆ°æœ‰ä¸€ä¸ªè­¦å‘Šï¼Œä½†æ˜¯çœ‹ä¸æ‡‚ä¹Ÿæ²¡å½“å›äº‹ï¼Œä½†æ˜¯éªŒè¯åˆ›å»ºuserçš„æ—¶å€™å°±å‡ºé—®é¢˜äº†ã€‚åŸæ¥ç°åœ¨éœ€è¦æ‰“å¼€è‡ªå®šä¹‰SMTPçš„å¼€å…³æ‰èƒ½ç”¨éšä¾¿çš„é‚®ç®±å»æ³¨å†Œç”¨æˆ·äº†ã€‚åœ¨è®¾ç½®-Authenticationé‡Œé¢ã€‚è¿™ä¸ªè¡¨å•è¾“å…¥çš„ä¿¡æ¯è¦æ˜¯çœŸå®çš„ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240926172620751.png" alt="image-20240926172620751"></p><p>å¦åˆ™å°±ä¼šæŠ¥é”™ï¼šError: Email address â€œ<a href="mailto:&#x32;&#x37;&#54;&#x38;&#x32;&#54;&#48;&#55;&#x35;&#52;&#64;&#x72;&#114;&#46;&#x63;&#111;&#109;">&#x32;&#x37;&#54;&#x38;&#x32;&#54;&#48;&#55;&#x35;&#52;&#64;&#x72;&#114;&#46;&#x63;&#111;&#109;</a>â€œ cannot be used as it is not authorized    at Object.signup [as mutationFn] </p><p>ä½†æ˜¯è¿™è¿˜æ²¡æœ‰ç»“æŸï¼Œä¸‹ä¸€å°èŠ‚æ˜¯å¦‚ä½•å®ç°é‚®ç®±éªŒè¯ã€‚supabaseä½ å…³é—­SMTPå‘é€çš„åŠŸèƒ½å¥½å·§ä¸å·§ï¼Œæˆ‘ç°åœ¨è¦ç”¨åˆ°ã€‚ã€‚ã€‚ğŸ’”</p><h5 id="1ã€apiAuth-1"><a href="#1ã€apiAuth-1" class="headerlink" title="1ã€apiAuth"></a>1ã€apiAuth</h5><p>ä¼ é€’ç»™signUpçš„objectä¸­å¯ä»¥åŒ…å«ä¸€ä¸ªå¯é€‰é¡¹ï¼Œå› ä¸ºåªæœ‰emailå’Œpasswordæ˜¯å¿…éœ€é¡¹ï¼Œæ‰€ä»¥åå­—å¯ä»¥é€šè¿‡è¿™æ ·çš„æ–¹å¼ä¼ é€’è¿›å»ï¼ŒåŒæ—¶å¯ä»¥å†ä¼ ä¸€ä¸ªç”¨æˆ·çš„å¤´åƒã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">signup</span>(<span class="hljs-params">&#123; fullName, email, password &#125;</span>) &#123;<br>  <span class="hljs-keyword">const</span> &#123; data, error &#125; = <span class="hljs-keyword">await</span> supabase.<span class="hljs-property">auth</span>.<span class="hljs-title function_">signUp</span>(&#123;<br>    email,<br>    password,<br>    <span class="hljs-attr">options</span>: &#123; <span class="hljs-attr">data</span>: &#123; fullName, <span class="hljs-attr">avatar</span>: <span class="hljs-string">&#x27;&#x27;</span> &#125; &#125;,<br>  &#125;);<br>  <span class="hljs-keyword">if</span> (error) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(error.<span class="hljs-property">message</span>);<br>  <span class="hljs-keyword">return</span> data;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="2ã€useSignUp"><a href="#2ã€useSignUp" class="headerlink" title="2ã€useSignUp"></a>2ã€useSignUp</h5><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> &#123; useMutation, useQueryClient &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@tanstack/react-query&#x27;</span>;<br><span class="hljs-keyword">import</span> &#123; signup <span class="hljs-keyword">as</span> signupApi &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../../services/apiAuth&#x27;</span>;<br><span class="hljs-keyword">import</span> &#123; useNavigate &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-router-dom&#x27;</span>;<br><span class="hljs-keyword">import</span> toast <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-hot-toast&#x27;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useSignup</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> queryClient = <span class="hljs-title function_">useQueryClient</span>();<br>  <span class="hljs-keyword">const</span> navigate = <span class="hljs-title function_">useNavigate</span>();<br><br>  <span class="hljs-keyword">const</span> &#123; <span class="hljs-attr">mutate</span>: signup, isLoading &#125; = <span class="hljs-title function_">useMutation</span>(&#123;<br>    <span class="hljs-attr">mutationFn</span>: signupApi,<br>    <span class="hljs-attr">onSuccess</span>: <span class="hljs-function">(<span class="hljs-params">user</span>) =&gt;</span> &#123;<br>      toast.<span class="hljs-title function_">success</span>(<br>        <span class="hljs-string">&quot;Account successfully created!Please verify the new account from the user&#x27;s email address&quot;</span><br>      );<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(user);<br>    &#125;,<br>    <span class="hljs-attr">onError</span>: <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(err);<br>      toast.<span class="hljs-title function_">error</span>(err.<span class="hljs-property">message</span>);<br>    &#125;,<br>  &#125;);<br><br>  <span class="hljs-keyword">return</span> &#123; signup, isLoading &#125;;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="3ã€onSubmit"><a href="#3ã€onSubmit" class="headerlink" title="3ã€onSubmit"></a>3ã€onSubmit</h5><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">onSubmit</span>(<span class="hljs-params">&#123; fullName, email, password &#125;</span>) &#123;<br>  <span class="hljs-title function_">signup</span>(&#123; fullName, email, password &#125;, &#123; <span class="hljs-attr">onSettled</span>: reset &#125;);<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œresetä¼šå¼•å‘é—®é¢˜ã€‚jonasè¿˜æ²¡æ”¹ã€‚</p><h5 id="4ã€å…¶ä»–"><a href="#4ã€å…¶ä»–" class="headerlink" title="4ã€å…¶ä»–"></a>4ã€å…¶ä»–</h5><ul><li>åœ¨Authentication-URL Configurationä¸­çš„ä¸¤ä¸ªURLæ ï¼Œåˆ†åˆ«å¡«å…¥äº†</li></ul><p>(<a href="http://localhost:5173/dashboard">http://localhost:5173/dashboard</a>)   å’Œï¼ˆ<a href="http://localhost:5173ï¼‰æˆ‘ä¸çŸ¥é“æ˜¯å¹²å˜›ç”¨çš„">http://localhost:5173ï¼‰æˆ‘ä¸çŸ¥é“æ˜¯å¹²å˜›ç”¨çš„</a></p><ul><li><p>â€œTemp Mailâ€ï¼ˆä¸´æ—¶é‚®ä»¶ï¼‰æ˜¯æŒ‡ä¸€ç§å¯ä»¥ä¸´æ—¶ä½¿ç”¨çš„ç”µå­é‚®ä»¶æœåŠ¡ï¼Œå…è®¸ç”¨æˆ·ç”Ÿæˆä¸€ä¸ªä¸´æ—¶çš„ç”µå­é‚®ä»¶åœ°å€ã€‚ç”¨æˆ·å¯ä»¥ä½¿ç”¨è¿™ä¸ªåœ°å€æ¥æ”¶é‚®ä»¶ï¼Œè€Œä¸éœ€è¦ä½¿ç”¨è‡ªå·±çš„çœŸå®é‚®ç®±ã€‚</p><p>åœ°å€ï¼š<a href="https://temp-mail.org/en/">https://temp-mail.org/en/</a>          ç•Œé¢ï¼šï¼ˆä¸Šé¢ç”Ÿæˆé‚®ç®±ï¼Œä¸‹é¢æ˜¯æ”¶ä»¶ç®±ï¼‰</p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240926192815075.png" alt="image-20240926192815075"></p><p>ç”±äºæˆ‘ä»¬æ‰“å¼€äº†SMTPçš„éªŒè¯è¦æ±‚ï¼Œæ‰€ä»¥ç”¨æˆ·åœ¨æ³¨å†Œåéƒ½ä¼šåœ¨é‚®ç®±ä¸­æ”¶åˆ°ä¸€å°éœ€è¦éªŒè¯çš„é‚®ä»¶ï¼Œå¦åˆ™è¿˜æ˜¯ä¸èƒ½ç”¨è¿™ä¸ªé‚®ç®±ç™»é™†ã€‚<strong>å¹¶ä¸”åç»­çš„æ›´æ”¹å¯†ç ç­‰åŠŸèƒ½ä¹Ÿæ˜¯éœ€è¦ç”¨åˆ°é‚®ç®±éªŒè¯çš„ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼</strong></p><h4 id="ï¼ˆ3ï¼‰å¦‚ä½•é…ç½®Resendè§£å†³supabaseåœæ­¢å‘é€é‚®ä»¶"><a href="#ï¼ˆ3ï¼‰å¦‚ä½•é…ç½®Resendè§£å†³supabaseåœæ­¢å‘é€é‚®ä»¶" class="headerlink" title="ï¼ˆ3ï¼‰å¦‚ä½•é…ç½®Resendè§£å†³supabaseåœæ­¢å‘é€é‚®ä»¶"></a>ï¼ˆ3ï¼‰å¦‚ä½•é…ç½®Resendè§£å†³supabaseåœæ­¢å‘é€é‚®ä»¶</h4><p>è¿™é‡Œæ˜¯è¿™ä¸ªç´§æ€¥å˜é©çš„è®¨è®ºåŒº<a href="https://github.com/orgs/supabase/discussions/29370">https://github.com/orgs/supabase/discussions/29370</a></p><p>å’±ä»¬ä¹Ÿæ˜¯è·Ÿsupabaseçš„ç»´æŠ¤è€…å¯¹ä¸Šè¯äº†ğŸ˜‚èƒ½å†™è¿›ç®€å†é‡Œå—</p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240927091045026.png" alt="image-20240927091045026" style="zoom:80%;" /><p>ä¸€å¼€å§‹æˆ‘ä»¥ä¸ºåªæœ‰é‚£äº›ä¸“é—¨çš„é‚®ç®±å‘é€æœåŠ¡å•†æ‰å¯ä»¥ï¼Œäºæ˜¯æ‰“ç®—ä½¿ç”¨çœ‹èµ·æ¥å¾ˆé è°±çš„Resendï¼Œä½†æ˜¯ç”±äºå®ƒéœ€è¦è‡ªå·±æœ‰ä¸ªåŸŸåï¼Œç”šè‡³å»åä¸ºä¹°äº†ä¸€ä¸ªï¼ˆé¦–å¹´1å…ƒçš„ï¼‰åŸŸåã€‚ã€‚ã€‚</p><p>ä½†æ˜¯åæ¥å‘ç°Gmailå±…ç„¶ä¹Ÿå¯ä»¥ï¼Ÿï¼</p><h5 id="1ã€è®¾ç½®è‡ªå®šä¹‰SMTP"><a href="#1ã€è®¾ç½®è‡ªå®šä¹‰SMTP" class="headerlink" title="1ã€è®¾ç½®è‡ªå®šä¹‰SMTP"></a>1ã€è®¾ç½®è‡ªå®šä¹‰SMTP</h5><p>åœ¨supabaseçš„è®¾ç½®ä¸­æ‰¾åˆ°Authï¼Œä¸‹æ»‘æ‰¾åˆ°è¿™ä¸ªåœ°æ–¹ï¼Œé¦–å…ˆç‚¹å‡»<em>here</em>ï¼Œè¿›å…¥è®¾ç½®é‚®ç®±limitçš„åœ°æ–¹ï¼ŒæŠŠç¬¬ä¸€æ¡è®¾ç½®æ”¹æˆ3ä»¥ä¸Šï¼ˆæ¯å°æ—¶èƒ½å¤Ÿå‘çš„é‚®ä»¶æ•°ï¼‰ã€‚ä¸‹é¢çš„emailå’Œnameå°±ç›¸åº”å¡«ï¼Œemailä¸€å®šè¦å¡«gmailé‚®ç®±ï¼Œnameå¯ä»¥éšæ„ã€‚</p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-27%20090706.png" alt="img" style="zoom: 50%;" /><p>ä¸‹é¢çš„HOSTå’ŒPOST numberå°±æ˜¯smtp.gmail.comå’Œ465.</p><p><strong>Usernameéœ€è¦å†å¡«ä¸€æ¬¡é‚®ç®±åœ°å€ï¼Œä¸æ˜¯éšä¾¿å¡«çš„ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼</strong></p><p><strong>å¯†ç ä¹Ÿä¸æ˜¯Gmailçš„ç™»é™†å¯†ç </strong>ï¼Œè€Œæ˜¯éœ€è¦ä¸“é—¨çš„å¯†ç ï¼Œåœ¨Gmailè´¦æˆ·ä¸­æ‰“å¼€ä¸¤æ­¥éªŒè¯åæ‰¾åˆ°è®¾ç½®åº”ç”¨ä¸“ç”¨å¯†ç ï¼Œç„¶åç”Ÿæˆä¸€ä¸ªï¼Œæ³¨æ„<strong>ç”Ÿæˆååªä¼šå‡ºç°ä¸€æ¬¡</strong>ï¼Œéœ€è¦ç«‹é©¬å¤åˆ¶ä¸‹æ¥ã€‚</p><p>è¿™é‡Œæ¯æ¬¡æ›´æ”¹å¯†ç å†å›æ¥ä¼šå‘ç°æ²¡æœ‰æ”¹å˜ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘å»é—®supabaseç»´æŠ¤è€…çš„é—®é¢˜ï¼Œä½†æ˜¯å…¶å®æ²¡æœ‰å½±å“çš„ã€‚</p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240927092904298.png" alt="image-20240927092904298" style="zoom:50%;" /><h5 id="2ã€å¦‚æœé‡åˆ°é—®é¢˜æ€ä¹ˆè·å¾—è¯¦ç»†çš„é”™è¯¯åŸå› ï¼Ÿ"><a href="#2ã€å¦‚æœé‡åˆ°é—®é¢˜æ€ä¹ˆè·å¾—è¯¦ç»†çš„é”™è¯¯åŸå› ï¼Ÿ" class="headerlink" title="2ã€å¦‚æœé‡åˆ°é—®é¢˜æ€ä¹ˆè·å¾—è¯¦ç»†çš„é”™è¯¯åŸå› ï¼Ÿ"></a>2ã€å¦‚æœé‡åˆ°é—®é¢˜æ€ä¹ˆè·å¾—è¯¦ç»†çš„é”™è¯¯åŸå› ï¼Ÿ</h5><p>åœ¨æˆ‘ä»¬supabaseçš„é¡¹ç›®sidebarä¸­æœ‰ä¸€ä¸ªæ˜¯<img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240927093243940.png" alt="image-20240927093243940"></p><p>åœ¨é‡Œé¢å¯ä»¥æ‰¾åˆ°å…³äºAuthçš„æ‰€æœ‰æ—¥å¿—ï¼Œæ¯”å¦‚å½“SMTPæ²¡è®¾ç½®å¥½å°±æ˜¯è¿™ä¸ªé”™è¯¯ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240927093406787.png" alt="image-20240927093406787"></p><p>ç‚¹è¿›å»ä¼šæœ‰è¯¦ç»†çš„ä¿¡æ¯ã€‚</p><h5 id="3ã€æˆåŠŸï¼ğŸ¥³"><a href="#3ã€æˆåŠŸï¼ğŸ¥³" class="headerlink" title="3ã€æˆåŠŸï¼ğŸ¥³"></a>3ã€æˆåŠŸï¼ğŸ¥³</h5><p>ç»è¿‡ä¸€ç•ªä¸æ‡ˆçš„åŠªåŠ›ï¼Œæˆ‘ç»ˆäºå®ç°äº†é‚®ç®±éªŒè¯çš„åŠŸèƒ½ï¼Œä¸ºäº†ç¡®è®¤çœŸçš„å¯ä»¥æ”¶åˆ°é‚®ä»¶ï¼Œæˆ‘ä½¿ç”¨äº†Temp emialçš„éšæœºåœ°å€<a href="mailto:&#119;&#x61;&#x6d;&#97;&#x63;&#101;&#x78;&#55;&#x37;&#53;&#x40;&#x65;&#120;&#x77;&#x65;&#109;&#x65;&#46;&#99;&#111;&#109;">&#119;&#x61;&#x6d;&#97;&#x63;&#101;&#x78;&#55;&#x37;&#53;&#x40;&#x65;&#120;&#x77;&#x65;&#109;&#x65;&#46;&#99;&#111;&#109;</a>ï¼ˆä½†æ˜¯åªè¦ä½ ä¸æ›´æ¢ï¼Œæ¯æ¬¡è¿›å»éƒ½ä¼šæ˜¯è¿™ä¸ªåœ°å€ï¼Œæ‰€ä»¥å¾ˆæ–¹ä¾¿ï¼‰ï¼Œå¹¶ä¸”åœ¨æ”¶ä»¶ç®±ä¸­çœŸçš„çœ‹è§äº†é‚®ä»¶ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-27%20092114.png" alt="img"></p><h4 id="ï¼ˆ4ï¼‰ç¡®ä¿å®‰å…¨æ€§"><a href="#ï¼ˆ4ï¼‰ç¡®ä¿å®‰å…¨æ€§" class="headerlink" title="ï¼ˆ4ï¼‰ç¡®ä¿å®‰å…¨æ€§"></a>ï¼ˆ4ï¼‰ç¡®ä¿å®‰å…¨æ€§</h4><p>ä¿®æ”¹Policyï¼Œå¦åˆ™æœªç™»å½•çš„ç”¨æˆ·ä¹Ÿæ˜¯å¯ä»¥è®¿é—®åˆ°è¿™äº›æ•°æ®åº“çš„ä¿¡æ¯çš„ã€‚</p><h3 id="ä¸‰ã€æ„å»ºHeader"><a href="#ä¸‰ã€æ„å»ºHeader" class="headerlink" title="ä¸‰ã€æ„å»ºHeader"></a>ä¸‰ã€æ„å»ºHeader</h3><p>è¿™æ˜¯ç°åœ¨çš„Headerï¼š<img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240927093914593.png" alt="image-20240927093914593"></p><p>æˆ‘ä»¬åœ¨æ³¨å†Œç”¨æˆ·çš„å‡½æ•°ä¸­ï¼Œä¸Šä¼ äº†é™¤å¼€emailå’Œå¯†ç çš„å¯é€‰é¡¹ï¼Œå…¶ä¸­åŒ…å«äº†avatarã€‚è¿™äº›ä¿¡æ¯å¯ä»¥åœ¨React Queryå·¥å…·é‡Œçœ‹åˆ°ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240926224628775.png" alt="image-20240926224628775"></p><p>æˆ‘ä»¬çš„HeaderåŒ…å«å¤´åƒã€è¿˜æœ‰ä¸¤ä¸ªå›¾æ ‡ã€‚å…¶ä¸­UserAvatar.jsxï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">UserAvatar</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> &#123; user &#125; = <span class="hljs-title function_">useUser</span>();<br>  <span class="hljs-keyword">const</span> &#123; fullName, avatar &#125; = user.<span class="hljs-property">user_metadata</span>;<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">StyledUserAvatar</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Avatar</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">src</span>=<span class="hljs-string">&#123;avatar</span> || &#x27;<span class="hljs-attr">default-user.jpg</span>&#x27;&#125;</span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">alt</span>=<span class="hljs-string">&#123;</span>`<span class="hljs-attr">Avatar</span> <span class="hljs-attr">of</span> $&#123;<span class="hljs-attr">fullName</span>&#125;`&#125;</span></span><br><span class="hljs-tag"><span class="language-xml">      /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;fullName&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">StyledUserAvatar</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å››ã€å®ç°æ›´æ”¹å¯†ç å’Œå¤´åƒ"><a href="#å››ã€å®ç°æ›´æ”¹å¯†ç å’Œå¤´åƒ" class="headerlink" title="å››ã€å®ç°æ›´æ”¹å¯†ç å’Œå¤´åƒ"></a>å››ã€å®ç°æ›´æ”¹å¯†ç å’Œå¤´åƒ</h3><h4 id="ï¼ˆ1ï¼‰å‡†å¤‡å·¥ä½œ"><a href="#ï¼ˆ1ï¼‰å‡†å¤‡å·¥ä½œ" class="headerlink" title="ï¼ˆ1ï¼‰å‡†å¤‡å·¥ä½œ"></a>ï¼ˆ1ï¼‰å‡†å¤‡å·¥ä½œ</h4><h5 id="1ã€åœ¨storageä¸­å»ºç«‹è‡ªå·±çš„å¤´åƒåº“ï¼Œå‘½åä¸ºavatars"><a href="#1ã€åœ¨storageä¸­å»ºç«‹è‡ªå·±çš„å¤´åƒåº“ï¼Œå‘½åä¸ºavatars" class="headerlink" title="1ã€åœ¨storageä¸­å»ºç«‹è‡ªå·±çš„å¤´åƒåº“ï¼Œå‘½åä¸ºavatars"></a>1ã€åœ¨storageä¸­å»ºç«‹è‡ªå·±çš„å¤´åƒåº“ï¼Œå‘½åä¸ºavatars</h5><h5 id="2ã€æ·»åŠ Policy"><a href="#2ã€æ·»åŠ Policy" class="headerlink" title="2ã€æ·»åŠ Policy"></a>2ã€æ·»åŠ Policy</h5><p>é€‰æ‹©è¿™ä¸€æ¡ï¼Œç„¶åä¸ºauthç”¨æˆ·æ·»åŠ æ‰€æœ‰çš„æ“ä½œæƒé™</p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240927100812071.png" alt="image-20240927100812071" style="zoom:50%;" /><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240927100757718.png" alt="image-20240927100757718" style="zoom: 50%;" /><h5 id="3ã€å¾—åˆ°avatarsä¸­å›¾ç‰‡çš„URLè·¯å¾„"><a href="#3ã€å¾—åˆ°avatarsä¸­å›¾ç‰‡çš„URLè·¯å¾„" class="headerlink" title="3ã€å¾—åˆ°avatarsä¸­å›¾ç‰‡çš„URLè·¯å¾„"></a>3ã€å¾—åˆ°avatarsä¸­å›¾ç‰‡çš„URLè·¯å¾„</h5><p>éšä¾¿åœ¨å…¶ä¸­ä¸Šä¼ ä¸€å¼ å›¾ç‰‡ï¼Œç‚¹å‡»get urlå¾—åˆ°å…¶URLè·¯å¾„ï¼Œåœ¨åç»­çš„apiAuthä¸­ä¿®æ”¹avatarçš„å‡½æ•°ä¸­éœ€è¦ç”¨åˆ°ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240927101356754.png" alt="image-20240927101356754"></p><h4 id="ï¼ˆ2ï¼‰å»ºç«‹æ›´æ–°ç”¨æˆ·ä¿¡æ¯çš„å‡½æ•°"><a href="#ï¼ˆ2ï¼‰å»ºç«‹æ›´æ–°ç”¨æˆ·ä¿¡æ¯çš„å‡½æ•°" class="headerlink" title="ï¼ˆ2ï¼‰å»ºç«‹æ›´æ–°ç”¨æˆ·ä¿¡æ¯çš„å‡½æ•°"></a>ï¼ˆ2ï¼‰å»ºç«‹æ›´æ–°ç”¨æˆ·ä¿¡æ¯çš„å‡½æ•°</h4><h5 id="1ã€å‡½æ•°å‚æ•°"><a href="#1ã€å‡½æ•°å‚æ•°" class="headerlink" title="1ã€å‡½æ•°å‚æ•°"></a>1ã€å‡½æ•°å‚æ•°</h5><p>å‡½æ•°updateCurrentUseræ¥æ”¶ä¸€ä¸ªobjectï¼ŒåŒ…å«å¯†ç ã€å…¨åå’Œå¤´åƒã€‚</p><p><code>export async function updateCurrentUser(&#123; password, fullName, avatar &#125;)</code></p><h5 id="2ã€æ›´æ–°passwordæˆ–fullName"><a href="#2ã€æ›´æ–°passwordæˆ–fullName" class="headerlink" title="2ã€æ›´æ–°passwordæˆ–fullName"></a>2ã€æ›´æ–°passwordæˆ–fullName</h5><p>ä¹‹æ‰€ä»¥å¯ä»¥æŠŠæ›´æ–°è¿™äº›ä¿¡æ¯çš„å‡½æ•°ç¬¼ç»Ÿåœ°å¼„æˆä¸€ä¸ªï¼Œæ˜¯å› ä¸ºä¿®æ”¹å¯†ç å’Œä¿®æ”¹å…¨åå¹¶ä¸åœ¨ä¸€ä¸ªè¡¨æ ¼ä¸­ï¼Œæ‰€ä»¥å¯ä»¥æ¡ä»¶æ€§åœ°å¾—åˆ°updateDataã€‚è®°ä½fullNameå’Œavataråœ¨æ³¨å†Œçš„æ—¶å€™å°±æ˜¯é€šè¿‡optionsä¸­çš„dataå…³é”®å­—æ³¨å†Œçš„ï¼Œåœ¨ä¼ é€’è¦æ›´æ–°çš„å†…å®¹çš„æ—¶å€™ï¼Œä¹Ÿè¦æŠŠå®ƒä»¬åŒ…è£¹åœ¨ä¸€ä¸ªå¯¹è±¡ä¸­ä¼ é€’ã€‚</p><p>åœ¨æ²¡æœ‰ä¸Šä¼ avatarçš„æ—¶å€™ï¼Œå°±å¯ä»¥ç»“æŸäº†ï¼Œå› ä¸ºä¸‹é¢æ˜¯æœ‰å…³æ›´æ–°avatarçš„å†…å®¹ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">//æ›´æ–°å¯†ç æˆ–è€…å…¨å</span><br><span class="hljs-keyword">let</span> updateData;<br><span class="hljs-keyword">if</span> (password) updateData = &#123; password &#125;;<br><span class="hljs-keyword">if</span> (fullName) updateData = &#123; <span class="hljs-attr">data</span>: &#123; fullName &#125; &#125;;<br><br><span class="hljs-keyword">const</span> &#123; data, error &#125; = <span class="hljs-keyword">await</span> supabase.<span class="hljs-property">auth</span>.<span class="hljs-title function_">updateUser</span>(updateData);<br><br><span class="hljs-keyword">if</span> (error) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(error.<span class="hljs-property">message</span>);<br><span class="hljs-keyword">if</span> (!avatar) <span class="hljs-keyword">return</span> data;<br></code></pre></td></tr></table></figure><h5 id="3ã€ä¸Šä¼ avatar"><a href="#3ã€ä¸Šä¼ avatar" class="headerlink" title="3ã€ä¸Šä¼ avatar"></a>3ã€ä¸Šä¼ avatar</h5><p>è‡ªå®šä¹‰filenameï¼Œä½¿ç”¨ä¸Šé¢çš„æ“ä½œè¿”å›çš„ç”¨æˆ·ä¿¡æ¯å¯ä»¥å¾—åˆ°ç”¨æˆ·idï¼Œä½¿ç”¨random()å‡½æ•°è¿æ¥ï¼Œæ”¾ç½®å›¾åƒåå­—é‡å¤ã€‚æ­¤å¤„ä¸éœ€è¦è¿”å›data,è¿™é‡Œæ˜¯ç›´æ¥æŠŠå›¾åƒä¸Šä¼ åˆ°avatarsåº“ä¸­ã€‚ä¸‹é¢å¥½æ›´æ–°ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> fileName = <span class="hljs-string">`avatar-<span class="hljs-subst">$&#123;data.user.id&#125;</span>-<span class="hljs-subst">$&#123;<span class="hljs-built_in">Math</span>.random()&#125;</span>`</span>;<br><br>  <span class="hljs-keyword">const</span> &#123; <span class="hljs-attr">error</span>: storageError &#125; = <span class="hljs-keyword">await</span> supabase.<span class="hljs-property">storage</span><br>    .<span class="hljs-title function_">from</span>(<span class="hljs-string">&#x27;avatars&#x27;</span>)<br>    .<span class="hljs-title function_">upload</span>(fileName, avatar);<br><br>  <span class="hljs-keyword">if</span> (storageError) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(storageError.<span class="hljs-property">message</span>);<br></code></pre></td></tr></table></figure><h5 id="4ã€åœ¨ç”¨æˆ·ä¿¡æ¯ä¸­æ›´æ–°avatar"><a href="#4ã€åœ¨ç”¨æˆ·ä¿¡æ¯ä¸­æ›´æ–°avatar" class="headerlink" title="4ã€åœ¨ç”¨æˆ·ä¿¡æ¯ä¸­æ›´æ–°avatar"></a>4ã€åœ¨ç”¨æˆ·ä¿¡æ¯ä¸­æ›´æ–°avatar</h5><p>å¾—åˆ°ä¸Šé¢çš„URLä¸­ï¼ŒæŠŠç›¸åº”ä¿¡æ¯åšä¸€ä¸ªæ›¿æ¢ï¼Œå°±å¯ä»¥æ›´æ–°äº†ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs jsx">  <span class="hljs-keyword">const</span> &#123; <span class="hljs-attr">data</span>: updatedUser, <span class="hljs-attr">error</span>: error2 &#125; = <span class="hljs-keyword">await</span> supabase.<span class="hljs-property">auth</span>.<span class="hljs-title function_">updateUser</span>(&#123;<br>    <span class="hljs-attr">data</span>: &#123;<br>      <span class="hljs-attr">avatar</span>: <span class="hljs-string">`<span class="hljs-subst">$&#123;supabaseUrl&#125;</span>/storage/v1/object/public/avatars/<span class="hljs-subst">$&#123;fileName&#125;</span>`</span>,<br>    &#125;,<br>  &#125;);<br><br>  <span class="hljs-keyword">if</span> (error2) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(error2.<span class="hljs-property">message</span>);<br><br>  <span class="hljs-keyword">return</span> updatedUser;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ï¼ˆ3ï¼‰useUpdate"><a href="#ï¼ˆ3ï¼‰useUpdate" class="headerlink" title="ï¼ˆ3ï¼‰useUpdate"></a>ï¼ˆ3ï¼‰useUpdate</h4><p>onSuccessä¸­ï¼Œ<code>queryClient.setQueryData([&#39;user&#39;], user);</code><strong>æŸ¥è¯¢å‚æ•°å¿…é¡»æ˜¯å­—ç¬¦ä¸²</strong>ï¼Œå¦åˆ™å°±ä¼šæŠ¥ä¸‹å›¾çš„é”™è¯¯ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useUpdateUser</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> queryClient = <span class="hljs-title function_">useQueryClient</span>();<br><br>  <span class="hljs-keyword">const</span> &#123; <span class="hljs-attr">mutate</span>: updateUser, <span class="hljs-attr">isLoading</span>: isUpdating &#125; = <span class="hljs-title function_">useMutation</span>(&#123;<br>    <span class="hljs-attr">mutationFn</span>: updateCurrentUser,<br>    <span class="hljs-attr">onSuccess</span>: <span class="hljs-function">(<span class="hljs-params">&#123;user&#125;</span>) =&gt;</span> &#123;<br>      toast.<span class="hljs-title function_">success</span>(<span class="hljs-string">&#x27;User account successfully updated&#x27;</span>);<br>      queryClient.<span class="hljs-title function_">setQueryData</span>([<span class="hljs-string">&#x27;user&#x27;</span>], user);<br>      queryClient.<span class="hljs-title function_">invalidateQueries</span>(&#123;<br>        <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">&#x27;user&#x27;</span>],<br>      &#125;);<br>    &#125;,<br>    <span class="hljs-attr">onError</span>: <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> toast.<span class="hljs-title function_">error</span>(err.<span class="hljs-property">message</span>),<br>  &#125;);<br><br>  <span class="hljs-keyword">return</span> &#123; isUpdating, updateUser &#125;;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240927105001683.png" alt="image-20240927105001683"></p><p>åŸå› æ˜¯ï¼š</p><ul><li><strong>æ•°æ®ç»“æ„</strong>ï¼šReact Query åœ¨å†…éƒ¨ç»´æŠ¤æŸ¥è¯¢ç¼“å­˜æ—¶ï¼ŒæœŸæœ›æŸ¥è¯¢é”®ï¼ˆæ¯”å¦‚ <code>[&#39;user&#39;]</code>ï¼‰æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå› ä¸ºæ•°ç»„å¯ä»¥åŒ…å«å¤šä¸ªå±‚æ¬¡çš„é”®åå’Œå‚æ•°ã€‚ç›´æ¥ä½¿ç”¨å­—ç¬¦ä¸² <code>&#39;user&#39;</code> ä¼šå¯¼è‡´å®ƒæ— æ³•æ­£ç¡®å¤„ç†æŸ¥è¯¢æ•°æ®çš„ç»“æ„ã€‚</li><li><strong>æŸ¥è¯¢æ•°æ®æ ¼å¼</strong>ï¼šå½“ä½ ä½¿ç”¨ <code>queryClient.setQueryData</code> è®¾ç½®æ•°æ®æ—¶ï¼Œå®ƒå¸Œæœ›èƒ½åœ¨å†…éƒ¨ç»´æŠ¤ä¸€ä¸ªå¯¹è±¡ç»“æ„ã€‚å¦‚æœä½ åªä¼ é€’äº†ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå®ƒæ— æ³•åˆ›å»ºæˆ–ä¿®æ”¹å¿…è¦çš„å†…éƒ¨å±æ€§ã€‚</li></ul><h3 id="ï¼Ÿ-æ¶‰åŠåˆ°çš„çŸ¥è¯†ç‚¹è¯¦ç»†åˆ†æï¼ˆCOPYï¼‰"><a href="#ï¼Ÿ-æ¶‰åŠåˆ°çš„çŸ¥è¯†ç‚¹è¯¦ç»†åˆ†æï¼ˆCOPYï¼‰" class="headerlink" title="ï¼Ÿ.æ¶‰åŠåˆ°çš„çŸ¥è¯†ç‚¹è¯¦ç»†åˆ†æï¼ˆCOPYï¼‰"></a>ï¼Ÿ.æ¶‰åŠåˆ°çš„çŸ¥è¯†ç‚¹è¯¦ç»†åˆ†æï¼ˆCOPYï¼‰</h3><h4 id="ï¼ˆ1ï¼‰sessionï¼ˆä¼šè¯ï¼‰"><a href="#ï¼ˆ1ï¼‰sessionï¼ˆä¼šè¯ï¼‰" class="headerlink" title="ï¼ˆ1ï¼‰sessionï¼ˆä¼šè¯ï¼‰"></a>ï¼ˆ1ï¼‰sessionï¼ˆä¼šè¯ï¼‰</h4><p><strong>ä¼šè¯</strong>æ˜¯ç”¨æˆ·ä¸ç³»ç»Ÿä¹‹é—´çš„æŒç»­äº¤äº’çŠ¶æ€ï¼Œå®ƒä¿å­˜ç”¨æˆ·çš„èº«ä»½å’ŒçŠ¶æ€ä¿¡æ¯ï¼Œä»¥ä¾¿åœ¨å¤šæ¬¡è¯·æ±‚ä¸­ç»´æŒç”¨æˆ·çš„ç™»å½•çŠ¶æ€å’Œæ“ä½œæƒé™ã€‚åœ¨ä½ æä¾›çš„ä»£ç ä¸­ï¼Œ<code>session</code> æ˜¯ Supabase é€šè¿‡ JWT æ¥ç®¡ç†çš„ä¼šè¯ï¼Œå®ƒè®°å½•äº†ç”¨æˆ·çš„ç™»å½•çŠ¶æ€ï¼Œå¹¶ç”¨æ¥ç¡®å®šç”¨æˆ·æ˜¯å¦æœ‰æƒé™è®¿é—®æŸäº›èµ„æºã€‚</p><h5 id="1-ä¼šè¯çš„å®šä¹‰ï¼š"><a href="#1-ä¼šè¯çš„å®šä¹‰ï¼š" class="headerlink" title="1. ä¼šè¯çš„å®šä¹‰ï¼š"></a>1. <strong>ä¼šè¯çš„å®šä¹‰</strong>ï¼š</h5><ul><li>ä¼šè¯æ˜¯ç”¨æˆ·åœ¨ä¸€æ®µæ—¶é—´å†…ä¸åº”ç”¨ç¨‹åºæˆ–æœåŠ¡å™¨ä¹‹é—´è¿›è¡Œçš„äº¤äº’è¿‡ç¨‹ã€‚å®ƒå¯ä»¥æŒç»­å‡ ç§’é’Ÿåˆ°æ•°å°æ—¶ï¼Œç”šè‡³æ›´ä¹…ï¼Œå–å†³äºä¼šè¯çš„ç®¡ç†æ–¹å¼å’Œåº”ç”¨ç¨‹åºçš„é…ç½®ã€‚</li><li>ä¼šè¯é€šå¸¸åœ¨ç”¨æˆ·ç™»å½•æˆ–è®¿é—®æŸä¸ªç³»ç»Ÿæ—¶å¼€å§‹ï¼Œå¹¶åœ¨ç”¨æˆ·æ³¨é”€æˆ–è¶…æ—¶åç»“æŸã€‚</li></ul><h5 id="2-ä¼šè¯çš„ä½œç”¨ï¼š"><a href="#2-ä¼šè¯çš„ä½œç”¨ï¼š" class="headerlink" title="2. ä¼šè¯çš„ä½œç”¨ï¼š"></a>2. <strong>ä¼šè¯çš„ä½œç”¨</strong>ï¼š</h5><ul><li><strong>ç»´æŒç”¨æˆ·çš„èº«ä»½éªŒè¯çŠ¶æ€</strong>ï¼šä¼šè¯å…è®¸ç³»ç»Ÿåœ¨å¤šæ¬¡è¯·æ±‚ä¹‹é—´è®°ä½ç”¨æˆ·çš„èº«ä»½ã€‚ä¾‹å¦‚ï¼Œç”¨æˆ·ç™»å½•åï¼Œä¼šè¯ç”¨äºä¿å­˜ç™»å½•çŠ¶æ€ï¼Œä»¥å…ç”¨æˆ·æ¯æ¬¡è®¿é—®é¡µé¢æ—¶éƒ½éœ€è¦é‡æ–°ç™»å½•ã€‚</li><li><strong>å­˜å‚¨ç”¨æˆ·çš„ä¸´æ—¶ä¿¡æ¯</strong>ï¼šä¼šè¯å¯ä»¥ç”¨æ¥åœ¨ä¸åŒé¡µé¢é—´å…±äº«ç”¨æˆ·çš„ä¸´æ—¶æ•°æ®ï¼Œä¾‹å¦‚è´­ç‰©è½¦ä¿¡æ¯ã€ç”¨æˆ·é¦–é€‰é¡¹ç­‰ã€‚</li><li><strong>ç¡®ä¿å®‰å…¨æ€§</strong>ï¼šé€šè¿‡ä¼šè¯ï¼Œç³»ç»Ÿå¯ä»¥è·Ÿè¸ªå’ŒéªŒè¯ç”¨æˆ·çš„æ“ä½œï¼Œé˜²æ­¢æœªç»æˆæƒçš„è®¿é—®ã€‚</li></ul><h5 id="3-ä¼šè¯æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼š"><a href="#3-ä¼šè¯æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼š" class="headerlink" title="3. ä¼šè¯æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼š"></a>3. <strong>ä¼šè¯æ˜¯å¦‚ä½•å·¥ä½œçš„</strong>ï¼š</h5><ul><li>å½“ç”¨æˆ·ç™»å½•ç³»ç»Ÿæ—¶ï¼ŒæœåŠ¡å™¨ä¼šä¸ºè¯¥ç”¨æˆ·åˆ›å»ºä¸€ä¸ªå”¯ä¸€çš„ä¼šè¯ IDï¼Œå¹¶å°†ä¼šè¯ä¿¡æ¯ï¼ˆå¦‚ç”¨æˆ·èº«ä»½ã€æƒé™ç­‰ï¼‰ä¸è¯¥ä¼šè¯ ID å…³è”ã€‚</li><li>ä¼šè¯ ID é€šå¸¸é€šè¿‡ <strong>Cookies</strong>ã€<strong>Token</strong>ï¼ˆä¾‹å¦‚ JWTï¼ŒJSON Web Tokenï¼‰ï¼Œæˆ–å…¶ä»–æœºåˆ¶ï¼ˆå¦‚ URL å‚æ•°ï¼‰å­˜å‚¨åœ¨å®¢æˆ·ç«¯ã€‚</li><li>åœ¨æ¯æ¬¡ç”¨æˆ·å‘é€è¯·æ±‚æ—¶ï¼Œå®¢æˆ·ç«¯ä¼šå°†ä¼šè¯ ID ä¼ é€’ç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨æ ¹æ®è¿™ä¸ª ID æŸ¥æ‰¾ä¸ä¹‹å…³è”çš„ä¼šè¯æ•°æ®ï¼Œç¡®è®¤ç”¨æˆ·çš„èº«ä»½å’Œæƒé™ã€‚</li></ul><h5 id="4-ä¼šè¯çš„ç”Ÿå‘½å‘¨æœŸï¼š"><a href="#4-ä¼šè¯çš„ç”Ÿå‘½å‘¨æœŸï¼š" class="headerlink" title="4. ä¼šè¯çš„ç”Ÿå‘½å‘¨æœŸï¼š"></a>4. <strong>ä¼šè¯çš„ç”Ÿå‘½å‘¨æœŸ</strong>ï¼š</h5><ul><li><strong>åˆ›å»º</strong>ï¼šä¼šè¯é€šå¸¸åœ¨ç”¨æˆ·æˆåŠŸç™»å½•åç”±æœåŠ¡å™¨åˆ›å»ºï¼Œåˆ†é…ä¸€ä¸ªå”¯ä¸€çš„ä¼šè¯ IDã€‚</li><li><strong>ç»´æŒ</strong>ï¼šåœ¨ä¼šè¯å­˜ç»­æœŸé—´ï¼Œç”¨æˆ·çš„æ¯æ¬¡è¯·æ±‚éƒ½ä½¿ç”¨åŒä¸€ä¼šè¯ IDï¼ŒæœåŠ¡å™¨æ ¹æ®è¿™ä¸ª ID ç¡®è®¤ç”¨æˆ·èº«ä»½ã€‚</li><li><strong>é”€æ¯</strong>ï¼šä¼šè¯å¯ä»¥é€šè¿‡ç”¨æˆ·ä¸»åŠ¨æ³¨é”€ã€ä¼šè¯è¶…æ—¶ï¼ˆä¾‹å¦‚é•¿æ—¶é—´ä¸æ´»åŠ¨ï¼‰æˆ–æœåŠ¡å™¨å¼ºåˆ¶ç»“æŸè€Œé”€æ¯ã€‚å½“ä¼šè¯é”€æ¯åï¼Œç”¨æˆ·éœ€è¦é‡æ–°ç™»å½•ä»¥ç»§ç»­è®¿é—®ç³»ç»Ÿã€‚</li></ul><h5 id="5-ä¼šè¯åœ¨å‰ç«¯å’Œåç«¯çš„è§’è‰²ï¼š"><a href="#5-ä¼šè¯åœ¨å‰ç«¯å’Œåç«¯çš„è§’è‰²ï¼š" class="headerlink" title="5. ä¼šè¯åœ¨å‰ç«¯å’Œåç«¯çš„è§’è‰²ï¼š"></a>5. <strong>ä¼šè¯åœ¨å‰ç«¯å’Œåç«¯çš„è§’è‰²</strong>ï¼š</h5><ul><li><strong>å‰ç«¯</strong>ï¼šå‰ç«¯é€šè¿‡ Cookies æˆ– Local Storage æ¥å­˜å‚¨ä¼šè¯ ID æˆ– Tokenã€‚åœ¨æ¯æ¬¡å‘æœåŠ¡å™¨å‘å‡ºè¯·æ±‚æ—¶ï¼Œå‰ç«¯ä¼šè‡ªåŠ¨æºå¸¦è¿™äº›å‡­æ®æ¥éªŒè¯ç”¨æˆ·èº«ä»½ã€‚</li><li><strong>åç«¯</strong>ï¼šåç«¯è´Ÿè´£ç”Ÿæˆå’Œç®¡ç†ä¼šè¯ï¼Œä¿å­˜ä¼šè¯ç›¸å…³çš„ç”¨æˆ·çŠ¶æ€ã€ä¿¡æ¯ï¼Œå¹¶åœ¨æ¯æ¬¡è¯·æ±‚æ—¶éªŒè¯ç”¨æˆ·çš„ä¼šè¯æ˜¯å¦æœ‰æ•ˆã€‚</li></ul><h5 id="6-ä¼šè¯ä¸-Tokenï¼ˆå¦‚-JWTï¼‰çš„å…³ç³»ï¼š"><a href="#6-ä¼šè¯ä¸-Tokenï¼ˆå¦‚-JWTï¼‰çš„å…³ç³»ï¼š" class="headerlink" title="6. ä¼šè¯ä¸ Tokenï¼ˆå¦‚ JWTï¼‰çš„å…³ç³»ï¼š"></a>6. <strong>ä¼šè¯ä¸ Tokenï¼ˆå¦‚ JWTï¼‰çš„å…³ç³»</strong>ï¼š</h5><ul><li><strong>ä¼ ç»Ÿä¼šè¯</strong>ï¼šä¼šè¯ ID ç”±æœåŠ¡å™¨ç”Ÿæˆï¼Œå¹¶ä¸”æœåŠ¡å™¨éœ€è¦å­˜å‚¨ä¼šè¯ä¿¡æ¯ã€‚è¿™ç§æ–¹å¼é€šå¸¸éœ€è¦ç»´æŠ¤ä¸€ä¸ªä¼šè¯å­˜å‚¨ï¼Œé€‚ç”¨äºåŸºäºæœåŠ¡å™¨çš„åº”ç”¨ç¨‹åºã€‚</li><li><strong>Tokenï¼ˆå¦‚ JWTï¼‰</strong>ï¼šJWT æ˜¯ä¸€ç§å¸¸ç”¨çš„æ— çŠ¶æ€ä¼šè¯æœºåˆ¶ï¼Œå…¶ä¸­ç”¨æˆ·çš„èº«ä»½ä¿¡æ¯é€šè¿‡åŠ å¯†åä¿å­˜åœ¨ Token ä¸­ã€‚æœåŠ¡å™¨ä¸éœ€è¦å­˜å‚¨ä¼šè¯ä¿¡æ¯ï¼Œè€Œæ˜¯é€šè¿‡éªŒè¯å’Œè§£ç  Token æ¥è¯†åˆ«ç”¨æˆ·ã€‚</li></ul><h5 id="7-Supabase-ä¸­çš„ä¼šè¯ï¼š"><a href="#7-Supabase-ä¸­çš„ä¼šè¯ï¼š" class="headerlink" title="7. Supabase ä¸­çš„ä¼šè¯ï¼š"></a>7. <strong>Supabase ä¸­çš„ä¼šè¯</strong>ï¼š</h5><p>åœ¨ä½ ä½¿ç”¨çš„ <code>Supabase</code> ä¸­ï¼Œä¼šè¯æ˜¯é€šè¿‡ <strong>JWTï¼ˆJSON Web Tokenï¼‰</strong> è¿›è¡Œç®¡ç†çš„ã€‚å½“ç”¨æˆ·ç™»å½•æ—¶ï¼Œ<code>Supabase</code> ä¼šç”Ÿæˆä¸€ä¸ª JWTï¼Œå¹¶å°†å…¶ä¿å­˜åœ¨å®¢æˆ·ç«¯ã€‚æ¯æ¬¡è¯·æ±‚éƒ½ä¼šå¸¦ä¸Šè¿™ä¸ª Tokenï¼Œä»¥è¯æ˜ç”¨æˆ·çš„èº«ä»½ã€‚</p><ul><li><code>supabase.auth.getSession()</code>ï¼šè¯¥æ–¹æ³•ç”¨äºè·å–å½“å‰ä¼šè¯ä¿¡æ¯ï¼ˆåŒ…æ‹¬ JWTï¼‰ã€‚å¦‚æœç”¨æˆ·å½“å‰ç™»å½•äº†ï¼Œè¿™ä¸ªä¼šè¯å°±ä¼šè¿”å›æœ‰æ•ˆçš„ JWTã€‚</li><li><code>supabase.auth.getUser()</code>ï¼šåœ¨æœ‰æœ‰æ•ˆä¼šè¯æ—¶ï¼Œä½¿ç”¨è¯¥æ–¹æ³•è·å–å½“å‰ä¼šè¯ä¸­çš„ç”¨æˆ·è¯¦ç»†ä¿¡æ¯ã€‚</li></ul>]]></content>
    
    
    <categories>
      
      <category>reactè¯¾ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>react</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>reactè¯¾ç¨‹21-å®Œå–„tableçš„æ˜¾ç¤ºåŠŸèƒ½ä»¥åŠbookingçš„çŠ¶æ€æ›´æ”¹</title>
    <link href="/2024/09/25/react%E8%AF%BE%E7%A8%8B21-%E5%AE%8C%E5%96%84table%E7%9A%84%E6%98%BE%E7%A4%BA%E5%8A%9F%E8%83%BD%E4%BB%A5%E5%8F%8Abooking%E7%9A%84%E7%8A%B6%E6%80%81%E6%9B%B4%E6%94%B9/"/>
    <url>/2024/09/25/react%E8%AF%BE%E7%A8%8B21-%E5%AE%8C%E5%96%84table%E7%9A%84%E6%98%BE%E7%A4%BA%E5%8A%9F%E8%83%BD%E4%BB%A5%E5%8F%8Abooking%E7%9A%84%E7%8A%B6%E6%80%81%E6%9B%B4%E6%94%B9/</url>
    
    <content type="html"><![CDATA[<p>æœ¬èŠ‚å®ç°åœ¨cabinã€bookingç•Œé¢çš„è¿‡æ»¤ã€æ’åºã€åˆ†é¡µçš„åŠŸèƒ½ï¼Œå¹¶å®ç°ä¿®æ”¹bookingçŠ¶æ€ã€‚</p><span id="more"></span><h3 id="ä¸€ã€åœ¨å®¢æˆ·ç«¯å®ç°è¿‡æ»¤cabinï¼ˆå¯é‡ç”¨ï¼Œæ’åºåŠŸèƒ½ï¼‰"><a href="#ä¸€ã€åœ¨å®¢æˆ·ç«¯å®ç°è¿‡æ»¤cabinï¼ˆå¯é‡ç”¨ï¼Œæ’åºåŠŸèƒ½ï¼‰" class="headerlink" title="ä¸€ã€åœ¨å®¢æˆ·ç«¯å®ç°è¿‡æ»¤cabinï¼ˆå¯é‡ç”¨ï¼Œæ’åºåŠŸèƒ½ï¼‰"></a>ä¸€ã€åœ¨å®¢æˆ·ç«¯å®ç°è¿‡æ»¤cabinï¼ˆå¯é‡ç”¨ï¼Œæ’åºåŠŸèƒ½ï¼‰</h3><p>æ·»åŠ ä¸€ä¸ªæŒ‰é’®ï¼Œå®ç°æŸ¥çœ‹å…¨éƒ¨&#x2F;æœ‰æŠ˜æ‰£çš„&#x2F;æ²¡æœ‰æŠ˜æ‰£çš„cabinã€‚å¹¶ä¸”åœ¨é€‰æ‹©åéœ€è¦ç›¸åº”åœ°æ”¹å˜urlã€‚</p><p>æ–°å»ºäº†CabinTableOperationç»„ä»¶ï¼ŒæŠŠå®ƒä»£æ›¿ä¹‹å‰çš„æ–‡æœ¬ï¼Œæ”¾åœ¨æ ‡é¢˜çš„å³è¾¹ã€‚è¿™ä¸ªç»„ä»¶åŒ…å«Filterç»„ä»¶ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬è¦å®ç°çš„è¿‡æ»¤åŠŸèƒ½ã€‚</p><h4 id="ï¼ˆ1ï¼‰åˆ›å»ºFilter"><a href="#ï¼ˆ1ï¼‰åˆ›å»ºFilter" class="headerlink" title="ï¼ˆ1ï¼‰åˆ›å»ºFilter"></a>ï¼ˆ1ï¼‰åˆ›å»ºFilter</h4><p>ğŸ”¥ã€Š10.28ã€‹ä¿®æ”¹bugï¼šæ¯æ¬¡è¿‡æ»¤åè¦æŠŠpageè®¾ç½®ä¸º1ï¼Œå¦åˆ™ä¼šè®¿é—®ä¸å­˜åœ¨çš„é¡µæ•°çš„æ•°æ®</p><hr><h5 id="1ã€Filter-jsx"><a href="#1ã€Filter-jsx" class="headerlink" title="1ã€Filter.jsx"></a>1ã€Filter.jsx</h5><p>åœ¨è¿™ä¸ªç»„ä»¶é‡Œï¼Œæˆ‘ä»¬è¦ç”¨åˆ°useParams Hookã€‚ï¼ˆåˆšå¥½ä¹‹å‰ä¸å¤ªæ‡‚ï¼‰</p><p>Filteræ¥æ”¶ä¸¤ä¸ªpropï¼Œä¸€ä¸ªæ˜¯filterFieldï¼Œä¸€ä¸ªæ˜¯optionsæ•°ç»„ã€‚</p><ul><li>filterFieldè´Ÿè´£è¢«è®¾ç½®æˆURLä¸­æŸ¥è¯¢å‚æ•°çš„é”®ï¼Œå¹¶å°†å…¶å€¼è®¾ç½®ä¸ºvalueï¼Œéšå<code>setSearchParams</code>å‡½æ•°æ›´æ–°æŸ¥è¯¢å‚æ•°å¯¹è±¡ï¼Œä½¿å¾—URLåæ˜ å‡ºä¿®æ”¹åçš„æŸ¥è¯¢å‚æ•°</li><li>optionsæ˜¯ä¸€ä¸ªå¯¹è±¡æ•°ç»„ï¼Œå«æœ‰valueå’Œlabelä¸¤ä¸ªå±æ€§ã€‚valueå°±æ˜¯ä¼ é€’ç»™handleClickå‚æ•°çš„é”®å€¼ï¼Œlabelæ˜¯è¿‡æ»¤å™¨æ˜¾ç¤ºåœ¨å±å¹•ä¸Šçš„æ–‡æœ¬ã€‚</li></ul><p>æ ¹æ®ä¼ é€’çš„optionsæ•°ç»„æ¥mapå‡ºFilterButtonï¼Œä½¿å¾—ä»£ç æ›´å…·æœ‰é‡ç”¨æ€§ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Filter</span>(<span class="hljs-params">&#123; filterField, options &#125;</span>) &#123;<br>  <span class="hljs-keyword">const</span> [searchParams, setSearchParams] = <span class="hljs-title function_">useSearchParams</span>();<br>  <span class="hljs-keyword">const</span> currentFilter = searchParams.<span class="hljs-title function_">get</span>(filterField) || options.<span class="hljs-title function_">at</span>(<span class="hljs-number">0</span>).<span class="hljs-property">value</span>;<br><br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleClick</span>(<span class="hljs-params">value</span>) &#123;<br>    searchParams.<span class="hljs-title function_">set</span>(filterField, value);<br>    <span class="hljs-title function_">setSearchParams</span>(searchParams);<br>  &#125;<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">StyledFilter</span>&gt;</span></span><br><span class="language-xml">      &#123;options.map((option) =&gt; (</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">FilterButton</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> handleClick(option.value)&#125;</span><br><span class="language-xml">          key=&#123;option.value&#125;</span><br><span class="language-xml">          active=&#123;option.value === currentFilter&#125;</span><br><span class="language-xml">          disabled=&#123;option.value === currentFilter&#125;</span><br><span class="language-xml">        &gt;</span><br><span class="language-xml">          &#123;option.label&#125;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">FilterButton</span>&gt;</span></span><br><span class="language-xml">      ))&#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">StyledFilter</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="2ã€CabinTableOperations-jsx"><a href="#2ã€CabinTableOperations-jsx" class="headerlink" title="2ã€CabinTableOperations.jsx"></a>2ã€CabinTableOperations.jsx</h5><p>è¿™ä¸ªç»„ä»¶çš„ç›®çš„å°±æ˜¯ç»™Filterä¸€ä¸ªé€ å‹ä¸Šçš„ä½œç”¨ï¼Œå¹¶ä¸”æŠŠç›¸åº”çš„å‚æ•°ä¼ é€’</p><h5 id="3ã€CabinTable-jsx"><a href="#3ã€CabinTable-jsx" class="headerlink" title="3ã€CabinTable.jsx"></a>3ã€CabinTable.jsx</h5><p>è¿™ä¸ªç»„ä»¶ä¹‹å‰çš„ä½œç”¨å°±æ˜¯å‘ˆç°å‡ºcabin tableçš„headerå’Œä¸‹é¢çš„åˆ—è¡¨ã€‚ä½†æ˜¯ç”±äºæˆ‘ä»¬æƒ³è¦åŠ å…¥è¿‡æ»¤çš„åŠŸèƒ½ï¼Œæ‰€ä»¥æ˜¾ç¤ºçš„cabinåˆ—è¡¨å°±è¦éšç€è¿‡æ»¤å™¨è€Œæ”¹å˜ã€‚è€Œæ–¹æ³•å°±æ˜¯é€šè¿‡è¯»å–URLä¸Šçš„æŸ¥è¯¢å‚æ•°çš„å€¼ï¼Œæ¥æ¡ä»¶æ›´æ–°åº”è¯¥å±•ç¤ºçš„cabinsã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> [searchParams] = <span class="hljs-title function_">useSearchParams</span>();<br><br><span class="hljs-keyword">const</span> filterValue = searchParams.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;discount&#x27;</span>) || <span class="hljs-string">&#x27;all&#x27;</span>;<br><br><span class="hljs-keyword">let</span> filteredCabins;<br><span class="hljs-keyword">if</span> (filterValue === <span class="hljs-string">&#x27;all&#x27;</span>) filteredCabins = cabins;<br><span class="hljs-keyword">if</span> (filterValue === <span class="hljs-string">&#x27;no-discount&#x27;</span>)<br>    filteredCabins = cabins.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">cabin</span>) =&gt;</span> cabin.<span class="hljs-property">discount</span> === <span class="hljs-number">0</span>);<br><span class="hljs-keyword">if</span> (filterValue === <span class="hljs-string">&#x27;with-discount&#x27;</span>)<br>    filteredCabins = cabins.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">cabin</span>) =&gt;</span> cabin.<span class="hljs-property">discount</span> &gt; <span class="hljs-number">0</span>);<br></code></pre></td></tr></table></figure><p>è¿™é‡Œçš„è¦ç‚¹æœ‰ä¸€ä¸ªæ˜¯ï¼šå½“åˆæ¬¡è¿›å…¥cabinç•Œé¢çš„æ—¶å€™ï¼Œæˆ‘ä»¬æƒ³è¦å±•ç¤ºæ‰€æœ‰çš„cabinï¼ˆallï¼‰ï¼Œä½†æ˜¯æ­¤æ—¶æŸ¥è¯¢å‚æ•°æ˜¯ç©ºçš„ï¼Œæ‰€ä»¥å°±å¯ä»¥é€šè¿‡||çŸ­è·¯è¿ç®—ç¬¦ï¼Œä½¿å¾—é»˜è®¤å€¼æ˜¯â€œallâ€ã€‚</p><h4 id="ï¼ˆ2ï¼‰å®ç°æ’åºåŠŸèƒ½"><a href="#ï¼ˆ2ï¼‰å®ç°æ’åºåŠŸèƒ½" class="headerlink" title="ï¼ˆ2ï¼‰å®ç°æ’åºåŠŸèƒ½"></a>ï¼ˆ2ï¼‰å®ç°æ’åºåŠŸèƒ½</h4><h5 id="1ã€CabinTableOperationsä¼ é€’ç»™sortByçš„å‚æ•°"><a href="#1ã€CabinTableOperationsä¼ é€’ç»™sortByçš„å‚æ•°" class="headerlink" title="1ã€CabinTableOperationsä¼ é€’ç»™sortByçš„å‚æ•°"></a>1ã€CabinTableOperationsä¼ é€’ç»™sortByçš„å‚æ•°</h5><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs jsx">options=&#123;[<br>     &#123; <span class="hljs-attr">value</span>: <span class="hljs-string">&#x27;name-asc&#x27;</span>, <span class="hljs-attr">label</span>: <span class="hljs-string">&#x27;Sort by name (A-Z)&#x27;</span> &#125;,<br>     &#123; <span class="hljs-attr">value</span>: <span class="hljs-string">&#x27;name-desc&#x27;</span>, <span class="hljs-attr">label</span>: <span class="hljs-string">&#x27;Sort by name (Z-A)&#x27;</span> &#125;,<br>     &#123; <span class="hljs-attr">value</span>: <span class="hljs-string">&#x27;regularPrice-asc&#x27;</span>, <span class="hljs-attr">label</span>: <span class="hljs-string">&#x27;Sort by Price (low first)&#x27;</span> &#125;,<br>     &#123; <span class="hljs-attr">value</span>: <span class="hljs-string">&#x27;regularPrice-desc&#x27;</span>, <span class="hljs-attr">label</span>: <span class="hljs-string">&#x27;Sort by Price (high first)&#x27;</span> &#125;,<br>     &#123; <span class="hljs-attr">value</span>: <span class="hljs-string">&#x27;maxCapacity-asc&#x27;</span>, <span class="hljs-attr">label</span>: <span class="hljs-string">&#x27;Sort by capacity (low first)&#x27;</span> &#125;,<br>     &#123; <span class="hljs-attr">value</span>: <span class="hljs-string">&#x27;maxCapacity-desc&#x27;</span>, <span class="hljs-attr">label</span>: <span class="hljs-string">&#x27;Sort by capacity (high first)&#x27;</span> &#125;,<br>]&#125;<br></code></pre></td></tr></table></figure><p>è¿™å°±æ˜¯æ’åºé€‰é¡¹ä¸­çš„valueå’Œlabelæ•°ç»„ï¼Œæ³¨æ„valueçš„å‰å€¼éœ€è¦å’Œcabinçš„å±æ€§ä¿æŒä¸€è‡´ã€‚ascè¡¨ç¤ºæ­£åºï¼Œdescè¡¨ç¤ºå€’åºã€‚</p><h5 id="2ã€sortByï¼ˆå¯é‡ç”¨ï¼‰"><a href="#2ã€sortByï¼ˆå¯é‡ç”¨ï¼‰" class="headerlink" title="2ã€sortByï¼ˆå¯é‡ç”¨ï¼‰"></a>2ã€sortByï¼ˆå¯é‡ç”¨ï¼‰</h5><p>è¿™ä¸ªç»„ä»¶çš„åŠŸèƒ½å’Œåˆšåˆšçš„Filterå¾ˆåƒï¼Œä¹Ÿæ˜¯æŠŠç›¸åº”çš„valueè®¾ç½®åˆ°æŸ¥è¯¢å‚æ•°ä¸­ï¼Œä½¿å¾—CabinTableå¯ä»¥è¯»å–å¹¶è·å¾—ç›¸åº”çš„å‚æ•°ã€‚è¿™ä¸ªä¸ç”¨ä¼ é€’é”®çš„åå­—ï¼Œå› ä¸ºä¸ç®¡è°ç”¨ï¼Œé”®çš„åå­—éƒ½æ˜¯â€œsortByâ€ã€‚åœ¨è¿™ä¸ªå‡½æ•°ä¸­å¾—åˆ°é”®å€¼å¹¶ä¼ é€’ç»™Selectç»„ä»¶ï¼Œæ˜¯ä¸ºäº†ä¼ é€’æ­£åœ¨è¢«é€‰ä¸­çš„valueçš„å‚æ•°ã€‚ç„¶åæŠŠonChangeå‡½æ•°ä¼ é€’è¿‡å»ï¼Œä½¿å¾—æ”¹å˜è¢«é€‰å…ƒç´ æ—¶æ”¹å˜æŸ¥è¯¢å‚æ•°ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">SortBy</span>(<span class="hljs-params">&#123; options &#125;</span>) &#123;<br>  <span class="hljs-keyword">const</span> [searchParams, setSearchParams] = <span class="hljs-title function_">useSearchParams</span>();<br>  <span class="hljs-keyword">const</span> sortBy = searchParams.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;sortBy&#x27;</span>) || <span class="hljs-string">&#x27;&#x27;</span>;<br><br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleChange</span>(<span class="hljs-params">e</span>) &#123;<br>    searchParams.<span class="hljs-title function_">set</span>(<span class="hljs-string">&#x27;sortBy&#x27;</span>, e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>);<br>    <span class="hljs-title function_">setSearchParams</span>(searchParams);<br>  &#125;<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Select</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">options</span>=<span class="hljs-string">&#123;options&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;white&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;sortBy&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;handleChange&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">    /&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="3ã€Select-jsx"><a href="#3ã€Select-jsx" class="headerlink" title="3ã€Select.jsx"></a>3ã€Select.jsx</h5><p>â­<code>&quot;...props&quot;</code>æ¥æ”¶æ‰€æœ‰å‰©ä½™propã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Select</span>(<span class="hljs-params">&#123; options, value, onChange, ...props &#125;</span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">StyledSelect</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;value&#125;</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;onChange&#125;</span> &#123;<span class="hljs-attr">...props</span>&#125;&gt;</span></span><br><span class="language-xml">      &#123;options.map((option) =&gt; (</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;option.value&#125;</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;option.value&#125;</span>&gt;</span></span><br><span class="language-xml">          &#123;option.label&#125;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span></span><br><span class="language-xml">      ))&#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">StyledSelect</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="4ã€CabinTable"><a href="#4ã€CabinTable" class="headerlink" title="4ã€CabinTable"></a>4ã€CabinTable</h5><p>ç¬¬ä¸€æ­¥å½“ç„¶æ˜¯å¾—åˆ°æŸ¥è¯¢å‚æ•°çš„å€¼ã€‚</p><p>ä½†æ˜¯ç”±äºå®ƒæ˜¯ç”±â€œ-â€è¿æ¥ï¼Œä¸”ä¸¤éƒ¨åˆ†å€¼éƒ½éœ€è¦ï¼Œæ‰€ä»¥å¯ä»¥ç”¨splitå‡½æ•°åˆ†å¼€ã€‚</p><p>sortå‡½æ•°å¤ä¹ ï¼ša-bæ˜¯æ­£åºï¼Œb-aæ˜¯å€’åºã€‚å› æ­¤è¿™é‡Œç”¨äº†ä¸€ä¸ªå·§å¦™çš„å°æŠ€å·§ï¼Œå°±æ˜¯ä½¿ç”¨modifierç¬¦å·ï¼Œå¦‚æœæ˜¯ascå°±æ˜¯1ï¼Œå¦åˆ™ä¸º-1ï¼Œä¹˜ä»¥ç›¸åº”é€»è¾‘ï¼Œå®ç°ä¸åŒæ’åºåŠŸèƒ½ã€‚</p><p>è¿™é‡Œnameæ˜¯stringï¼Œå®ƒçš„æ’åºéœ€è¦æ¢ä¸€ç§æ–¹å¼ï¼Œå¦åˆ™æ— æ³•å®ç°ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> sortBy = searchParams.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;sortBy&#x27;</span>) || <span class="hljs-string">&#x27;name-asc&#x27;</span>;<br><span class="hljs-keyword">const</span> [field, direction] = sortBy.<span class="hljs-title function_">split</span>(<span class="hljs-string">&#x27;-&#x27;</span>);<br><br><span class="hljs-keyword">const</span> modifier = direction === <span class="hljs-string">&#x27;asc&#x27;</span> ? <span class="hljs-number">1</span> : -<span class="hljs-number">1</span>;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title class_">SortedCabins</span> = filteredCabins.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> &#123;<br>   <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> a[field] === <span class="hljs-string">&#x27;string&#x27;</span>) &#123;<br>       <span class="hljs-keyword">return</span> a[field].<span class="hljs-title function_">localeCompare</span>(b[field]) * modifier;<br>   &#125; <span class="hljs-keyword">else</span> &#123;<br>       <span class="hljs-keyword">return</span> (a[field] - b[field]) * modifier;<br>   &#125;<br>&#125;);<br></code></pre></td></tr></table></figure><p>ï¼ˆæ€ä¹ˆç°åœ¨æ¯ä¸ªè§†é¢‘éƒ½æ˜¯20åˆ†é’Ÿäº†ğŸ˜¨ğŸ˜¨ğŸ˜¨ğŸ˜¨ğŸ˜¨ğŸ˜¨è¦ç–¯äº†æˆ‘ï¼‰</p><blockquote><p>æ­¤å¤„ç©¿æ’ä¸€æ¡å–œæŠ¥ï¼Œæˆ‘å‘ç°äº†ä¸€æ¡Jonaséƒ½æ²¡å‘ç°çš„bugï¼Œå°±æ˜¯regularPrice å’Œ discountçš„å€¼ä¸º300 80çš„æ—¶å€™ç«Ÿç„¶ä¼šæŠ¥é”™è¯´discountåº”è¯¥å°äºregularPriceã€‚ç™¾æ€ä¸å¾—å…¶è§£åï¼Œæ„Ÿè§‰åº”è¯¥æ˜¯å®ƒä»¬ä¿©è¢«å½“ä½œå­—ç¬¦ä¸²æ¯”è¾ƒäº†ã€‚ä½†æ˜¯æˆ‘è¿˜æ˜¯å¾ˆç–‘æƒ‘ï¼Œäºæ˜¯GPTè¿™æ ·è¯´ï¼š</p><p>å³ä½¿åœ¨è¡¨å•è¾“å…¥ä¸­å°† <code>type</code> è®¾ç½®ä¸º <code>number</code>ï¼Œåœ¨ JavaScript ä¸­è·å–åˆ°çš„å€¼ä»ç„¶æ˜¯å­—ç¬¦ä¸²ã€‚è¿™æ˜¯å› ä¸º HTML è¡¨å•å…ƒç´ åœ¨æäº¤æ—¶ä¼šå°†æ‰€æœ‰è¾“å…¥çš„å€¼ä»¥å­—ç¬¦ä¸²çš„å½¢å¼ä¼ é€’ç»™ JavaScriptã€‚</p></blockquote><h3 id="äºŒã€å»ºç«‹Booking-Table"><a href="#äºŒã€å»ºç«‹Booking-Table" class="headerlink" title="äºŒã€å»ºç«‹Booking Table"></a>äºŒã€å»ºç«‹Booking Table</h3><p>âœ…fetching dataçš„æ—¶å€™ï¼Œå’ŒgetCabinsä¸åŒï¼Œå› ä¸ºbookingsè¿æ¥äº†cabinså’Œguestsï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥è·å–è¿™ä¸¤ä¸ªè¡¨å•çš„ä¿¡æ¯ï¼šï¼ˆæ‹¬å·å†…å¯ä»¥å†™è¿›ä»»ä½•æƒ³è¦è·å–çš„ä¿¡æ¯ï¼Œæ­¤å¤„æŒ‘é€‰éœ€è¦çš„ï¼‰</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> &#123; data, error &#125; = <span class="hljs-keyword">await</span> supabase<br>   .<span class="hljs-title function_">from</span>(<span class="hljs-string">&#x27;bookings&#x27;</span>)<br>   .<span class="hljs-title function_">select</span>(<span class="hljs-string">&#x27;*,cabins(name),guests(fullName,email)&#x27;</span>);<br></code></pre></td></tr></table></figure><p>æŠŠdataæ–‡ä»¶å¤¹ä¸­çš„UpLoaderç»„ä»¶åŒ…å«åœ¨SideBarä¸­å°±ä¼šå‡ºç°è¿™æ ·ä¸€ä¸ªå¯ä»¥ä¸Šä¼ æ ·æœ¬ä¿¡æ¯åˆ°è¡¨å•ä¸­ï¼Œè¿™æ ·å°±ä¸ç”¨æ‰‹åŠ¨åˆ›å»ºã€‚ï¼ˆè®°å¾—ä¿®æ”¹Policyï¼‰ï¼ˆæµ…æµ…çœ‹äº†ä¸€ä¸‹ï¼Œè¿™ä¸ªå‡½æ•°é€»è¾‘ç®—æ˜¯æ¯”è¾ƒç®€å•ï¼‰</p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240925171213178.png" alt="image-20240925171213178" style="zoom: 67%;" /><h4 id="ï¼ˆ1ï¼‰å®ç°è¿‡æ»¤booking"><a href="#ï¼ˆ1ï¼‰å®ç°è¿‡æ»¤booking" class="headerlink" title="ï¼ˆ1ï¼‰å®ç°è¿‡æ»¤booking"></a>ï¼ˆ1ï¼‰å®ç°è¿‡æ»¤booking</h4><h5 id="1ã€å®ç°"><a href="#1ã€å®ç°" class="headerlink" title="1ã€å®ç°"></a>1ã€å®ç°</h5><p>æ¢ä¸€ç§æ–¹å¼ï¼šä¸åœ¨å®¢æˆ·ç«¯è¿‡æ»¤ï¼Œè€Œæ˜¯åœ¨æœåŠ¡ç«¯</p><p>operationç»„ä»¶å·²ç»å†™å¥½ï¼Œè¿‡æ»¤æ˜¯é€šè¿‡statusçš„çŠ¶æ€ï¼Œè€Œæ’åºæ˜¯æ ¹æ®é¢„å®šçš„å¼€å§‹æ—¥æœŸå’Œæ€»ä»·æ ¼ã€‚</p><p>æ—¢ç„¶è¦åœ¨æ¥æ”¶æ•°æ®çš„æ—¶å€™å°±è¿‡æ»¤ï¼Œé‚£ä¹ˆéš¾é“åº”è¯¥åœ¨apiBookingsçš„å‡½æ•°ä¸­å®ç°å—ï¼Ÿä¸å°½ç„¶ã€‚å› ä¸ºæ—¢ç„¶è¦è¿‡æ»¤ï¼Œæˆ‘ä»¬å°±è¦ä»URLè¯»å–æ•°æ®ï¼Œè¦ä½¿ç”¨useParamsï¼Œåœ¨å¼‚æ­¥fetching dataé˜¶æ®µï¼Œæ˜¯ä¸å…è®¸ä½¿ç”¨è¿™ç§é’©å­çš„ã€‚ï¼ˆ <strong>Hooks åªèƒ½åœ¨å‡½æ•°ç»„ä»¶æˆ–è‡ªå®šä¹‰ Hooks ä¸­è¢«è°ƒç”¨</strong>ï¼‰</p><p>å› æ­¤æˆ‘ä»¬å¯ä»¥åœ¨useBookingsç»„ä»¶ï¼Œä¹Ÿå°±æ˜¯è°ƒç”¨getBookingså‡½æ•°çš„åœ°æ–¹å¾—åˆ°æŸ¥è¯¢å‚æ•°çš„é”®å’Œå€¼ï¼Œå†ä¼ é€’ç»™getBookingså‡½æ•°ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> filterValue = searchParams.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;status&#x27;</span>);<br><span class="hljs-keyword">const</span> filter =<br>  !filterValue || filterValue === <span class="hljs-string">&#x27;all&#x27;</span><br>    ? <span class="hljs-literal">null</span><br>    : &#123; <span class="hljs-attr">field</span>: <span class="hljs-string">&#x27;status&#x27;</span>, <span class="hljs-attr">value</span>: filterValue, <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;eq&#x27;</span> &#125;;<br><br><span class="hljs-keyword">const</span> &#123;<br>  isLoading,<br>  <span class="hljs-attr">data</span>: bookings,<br>  error,<br>&#125; = <span class="hljs-title function_">useQuery</span>(&#123;<br>  <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">&#x27;bookings&#x27;</span>, filter],<br>  <span class="hljs-attr">queryFn</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">getBookings</span>(&#123; filter &#125;),<br>&#125;);<br></code></pre></td></tr></table></figure><p>ç„¶ågetBookingså‡½æ•°ä¸­åœ¨æ¥æ”¶æ•°æ®çš„æ—¶å€™æ ¹æ®é”®å’Œå€¼è¿›è¡Œè¿‡æ»¤ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">let</span> query = supabase<br>    .<span class="hljs-title function_">from</span>(<span class="hljs-string">&#x27;bookings&#x27;</span>)<br>    .<span class="hljs-title function_">select</span>(<span class="hljs-string">&#x27;*,cabins(name),guests(fullName,email)&#x27;</span>);<br><span class="hljs-keyword">if</span> (filter !== <span class="hljs-literal">null</span>)<br>    query = query[filter.<span class="hljs-property">method</span> || <span class="hljs-string">&#x27;eq&#x27;</span>](filter.<span class="hljs-property">field</span>, filter.<span class="hljs-property">value</span>);<br></code></pre></td></tr></table></figure><h5 id="2ã€è¦ç‚¹"><a href="#2ã€è¦ç‚¹" class="headerlink" title="2ã€è¦ç‚¹"></a>2ã€è¦ç‚¹</h5><p>ä¼ é€’çš„filteræ˜¯ä¸€ä¸ªobjectï¼Œé™¤å¼€é”®å’Œå€¼ä»¥å¤–è¿˜æœ‰ä¸€ä¸ªmethodï¼Œå› ä¸ºqueryæ˜¯æ ¹æ®methodã€é”®ã€å€¼æ¥è¿›è¡Œè¿‡æ»¤å¤„ç†çš„ã€‚eqæ˜¯ç­‰äºï¼Œè¿˜æœ‰gteæ˜¯å¤§äºç­‰äºçš„æ„æ€ã€‚</p><p>è¿™é‡ŒqueryKeyå˜æˆäº†ä¸€ä¸ªå¯¹è±¡ï¼Œé™¤å¼€å…³é”®å­—â€œbookingsâ€ä»¥å¤–è¿˜æœ‰filterã€‚è¿™æ˜¯å› ä¸ºReact Queryå¹¶ä¸çŸ¥é“ä¼šåœ¨æ”¹å˜è¿‡æ»¤çš„å†…å®¹æ—¶å°±é‡æ–°è·å–æ•°æ®ï¼Œäºæ˜¯æˆ‘ä»¬åˆ‡æ¢è¿‡æ»¤é€‰é¡¹ï¼Œé¡µé¢ä¸å˜ï¼Œä½†URLä¼šç›¸åº”æ”¹å˜ï¼Œåˆ·æ–°åæ‰ä¼šæ˜¾ç¤ºè¿‡æ»¤åçš„é¡¹ç›®ã€‚äºæ˜¯æŠŠfilterå¡«è¿›queryKeyï¼Œç±»ä¼¼äºä¾èµ–æ•°ç»„çš„ä½œç”¨ï¼Œæ¯å½“filterå‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œéƒ½ä¼šé‡æ–°fetchä¸€æ¬¡dataã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240925190720412.png" alt="image-20240925190720412"></p><p>ï¼ˆReact Queryçš„ä½œç”¨ï¼‰</p><h4 id="ï¼ˆ2ï¼‰å®ç°Sort-Booking"><a href="#ï¼ˆ2ï¼‰å®ç°Sort-Booking" class="headerlink" title="ï¼ˆ2ï¼‰å®ç°Sort Booking"></a>ï¼ˆ2ï¼‰å®ç°Sort Booking</h4><h5 id="1ã€useBookings"><a href="#1ã€useBookings" class="headerlink" title="1ã€useBookings"></a>1ã€useBookings</h5><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> sortByRaw = searchParams.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;sortBy&#x27;</span>) || <span class="hljs-string">&#x27;startDate-desc&#x27;</span>;<br><span class="hljs-keyword">const</span> [field, direction] = sortByRaw.<span class="hljs-title function_">split</span>(<span class="hljs-string">&#x27;-&#x27;</span>);<br><span class="hljs-keyword">const</span> sortBy = &#123; field, direction &#125;;<br></code></pre></td></tr></table></figure><p>æ¯”è¾ƒç®€å•</p><h5 id="2ã€getBookings"><a href="#2ã€getBookings" class="headerlink" title="2ã€getBookings"></a>2ã€getBookings</h5><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">if</span> (sortBy)<br>    query = query.<span class="hljs-title function_">order</span>(sortBy.<span class="hljs-property">field</span>, &#123;<br>      <span class="hljs-attr">ascending</span>: sortBy.<span class="hljs-property">direction</span> === <span class="hljs-string">&#x27;asc&#x27;</span>,<br>&#125;);<br></code></pre></td></tr></table></figure><p>orderå‡½æ•°æ˜¯ä½œç”¨äºç‰¹å®šåº“æ¥æ’åºçš„ï¼ŒåŒ…æ‹¬supabaseï¼Œå› æ­¤å¾ˆæ–¹ä¾¿ã€‚ç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’æ ¹æ®ä»€ä¹ˆæ¥æ’åºï¼Œç¬¬äºŒä¸ªå‚æ•°ä¼ é€’æ˜¯å¦æ˜¯æ ¹æ®å‡åºæ’åˆ—ã€‚ascå°±æ˜¯ascendingçš„ç®€ç§°ã€‚</p><h4 id="ï¼ˆ3ï¼‰å®ç°Pagination"><a href="#ï¼ˆ3ï¼‰å®ç°Pagination" class="headerlink" title="ï¼ˆ3ï¼‰å®ç°Pagination"></a>ï¼ˆ3ï¼‰å®ç°Pagination</h4><blockquote><p>éœ€è¦å…ˆçœ‹ä¸‹ä¸€å¤§èŠ‚ï¼šå¦‚ä½•å»ºç«‹<code>Pagination</code></p></blockquote><h5 id="1ã€ä»apiä¸­è·å–count"><a href="#1ã€ä»apiä¸­è·å–count" class="headerlink" title="1ã€ä»apiä¸­è·å–count"></a>1ã€ä»apiä¸­è·å–count</h5><p>æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨<code>bookingtable</code>ä¸­å¾—åˆ°<code>bookings.length</code>ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªæ›´å¥½çš„åŠæ³•ï¼Œæ˜¯åœ¨è·å–æ•°æ®çš„æ—¶å€™åŠ ä¸Šcountã€‚ï¼Œç„¶åå°†å®ƒè¿”å›ï¼Œè¿™æ ·å°±å¯ä»¥å®¹æ˜“å¾—åˆ°è·å¾—çš„ç»“æœæ•°äº†ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx">.<span class="hljs-title function_">select</span>(<span class="hljs-string">&#x27;*,cabins(name),guests(fullName,email)&#x27;</span>, &#123; <span class="hljs-attr">count</span>: <span class="hljs-string">&#x27;exact&#x27;</span> &#125;);<br></code></pre></td></tr></table></figure><h5 id="2ã€useBookings"><a href="#2ã€useBookings" class="headerlink" title="2ã€useBookings"></a>2ã€useBookings</h5><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> page = !searchParams.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;page&#x27;</span>) ? <span class="hljs-number">1</span> : <span class="hljs-title class_">Number</span>(searchParams.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;page&#x27;</span>));<br></code></pre></td></tr></table></figure><p>è·Ÿåˆ†é¡µç»„ä»¶ä¸­çš„é€»è¾‘ä¸€æ ·ï¼Œä¸å¤šè¨€ã€‚è®°å¾—ä¼ é€’pageå¹¶å°†å…¶åŠ å…¥queryKeyã€‚</p><h5 id="3ã€getBookings"><a href="#3ã€getBookings" class="headerlink" title="3ã€getBookings"></a>3ã€getBookings</h5><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">if</span> (page) &#123;<br>    <span class="hljs-keyword">const</span> <span class="hljs-keyword">from</span> = (page - <span class="hljs-number">1</span>) * <span class="hljs-variable constant_">PAGE_SIZE</span>;<br>    <span class="hljs-keyword">const</span> to = <span class="hljs-keyword">from</span> + <span class="hljs-variable constant_">PAGE_SIZE</span> - <span class="hljs-number">1</span>;<br>    query = query.<span class="hljs-title function_">range</span>(<span class="hljs-keyword">from</span>, to);<br>&#125;<br></code></pre></td></tr></table></figure><p>rangeä¹Ÿæ˜¯supabaseçš„ç‰¹æ®Šå‡½æ•°ï¼Œå®ƒä¼šè‡ªåŠ¨æ¥æ”¶ä»fromåˆ°toçš„æ•°æ®ã€‚ç”±äºæ•°ç»„ç¬¬ä¸€ä½æ˜¯0ä½ï¼Œæ‰€ä»¥fromä¸å¿…åŠ 1.è¿™é‡Œçš„å°æŠ€å·§æ˜¯toå¯ä»¥ç›´æ¥ç”¨from+PAGE_SIZEï¼ˆè®°å¾—-1ï¼‰ï¼Œå°±ç®—è¶…è¿‡äº†countï¼Œä¹Ÿä¸ä¼šæœ‰é”™è¯¯ï¼Œåªä¼šè¿”å›èŒƒå›´å†…çš„ç»“æœã€‚</p><h3 id="ä¸‰ã€å»ºç«‹å¯é‡ç”¨çš„Paginationï¼ˆåˆ†é¡µï¼‰ç»„ä»¶"><a href="#ä¸‰ã€å»ºç«‹å¯é‡ç”¨çš„Paginationï¼ˆåˆ†é¡µï¼‰ç»„ä»¶" class="headerlink" title="ä¸‰ã€å»ºç«‹å¯é‡ç”¨çš„Paginationï¼ˆåˆ†é¡µï¼‰ç»„ä»¶"></a>ä¸‰ã€å»ºç«‹å¯é‡ç”¨çš„Paginationï¼ˆåˆ†é¡µï¼‰ç»„ä»¶</h3><p>ç»„ä»¶æ¥æ”¶count propï¼Œè¡¨ç¤ºç»“æœæ•°ã€‚</p><h4 id="ï¼ˆ1ï¼‰ç»„ä»¶éƒ¨åˆ†"><a href="#ï¼ˆ1ï¼‰ç»„ä»¶éƒ¨åˆ†" class="headerlink" title="ï¼ˆ1ï¼‰ç»„ä»¶éƒ¨åˆ†"></a>ï¼ˆ1ï¼‰ç»„ä»¶éƒ¨åˆ†</h4><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240925195151800.png" alt="image-20240925195151800"></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;<span class="hljs-title class_">StyledPagination</span>&gt;<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">P</span>&gt;</span></span><br><span class="language-xml">        Showing <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;(currentPage - 1) * PAGE_SIZE + 1&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> to&#123;&#x27; &#x27;&#125;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">           &#123;currentPage === pageCount ? count : currentPage * PAGE_SIZE&#125;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>&#123;&#x27; &#x27;&#125;</span><br><span class="language-xml">        of <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;count&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> results</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">P</span>&gt;</span></span><br><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Buttons</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">PaginationButton</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;prevPage&#125;</span> <span class="hljs-attr">disabled</span>=<span class="hljs-string">&#123;currentPage</span> === <span class="hljs-string">1&#125;</span>&gt;</span></span><br><span class="language-xml">           <span class="hljs-tag">&lt;<span class="hljs-name">HiChevronLeft</span> /&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>Previous<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">PaginationButton</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">PaginationButton</span></span></span><br><span class="hljs-tag"><span class="language-xml">            <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;nextPage&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">disabled</span>=<span class="hljs-string">&#123;currentPage</span> === <span class="hljs-string">pageCount&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        &gt;</span></span><br><span class="language-xml">           <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>Next<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">           <span class="hljs-tag">&lt;<span class="hljs-name">HiChevronRight</span> /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">PaginationButton</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">Buttons</span>&gt;</span></span><br>&lt;/<span class="hljs-title class_">StyledPagination</span>&gt;<br></code></pre></td></tr></table></figure><p>å¦‚æœåœ¨æœ€åä¸€é¡µçš„è¯ï¼Œtoåçš„æ•°å­—å°±åº”è¯¥æ˜¯countï¼Œé˜²æ­¢å‡ºé”™ã€‚å‘å‰ç¿»é¡µå’Œå‘åç¿»é¡µçš„æŒ‰é’®æ¡ä»¶ç¦ç”¨ï¼ŒåŸç†æ¯”è¾ƒæ˜“æ‡‚ã€‚</p><h4 id="ï¼ˆ2ï¼‰å˜é‡å’Œå‡½æ•°éƒ¨åˆ†"><a href="#ï¼ˆ2ï¼‰å˜é‡å’Œå‡½æ•°éƒ¨åˆ†" class="headerlink" title="ï¼ˆ2ï¼‰å˜é‡å’Œå‡½æ•°éƒ¨åˆ†"></a>ï¼ˆ2ï¼‰å˜é‡å’Œå‡½æ•°éƒ¨åˆ†</h4><p>é¦–å…ˆå®šä¹‰åœ¨å‡½æ•°ä½“å¤–ä¸€ä¸ªå¸¸é‡ï¼šæ¯é¡µçš„ç»“æœæ•°ã€‚<code>const PAGE_SIZE = 10;</code></p><p>âœ…æ ¹æ®ä¸Šä¸€å¤§èŠ‚çš„å†…å®¹ï¼Œæˆ‘ä»¬çŸ¥é“è¿™ä¸ªå¸¸é‡è¿˜éœ€è¦åœ¨<code>apiBookings</code>æ–‡ä»¶ä¸­ä½¿ç”¨ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥åœ¨utilsæ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼š<code>Constants.jsx</code>æ¥å­˜å‚¨è¿™æ ·çš„å¸¸é‡ï¼Œæ¯æ¬¡ä½¿ç”¨åªéœ€å¯¼å…¥å³å¯ã€‚</p><p>ç„¶åæ˜¯å…¶ä»–ä»£ç ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> [searchParams, setSearchParams] = <span class="hljs-title function_">useSearchParams</span>();<br><br>  <span class="hljs-keyword">if</span> (count &lt;= <span class="hljs-variable constant_">PAGE_SIZE</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br><br>  <span class="hljs-keyword">const</span> currentPage = !searchParams.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;page&#x27;</span>)<br>    ? <span class="hljs-number">1</span><br>    : <span class="hljs-title class_">Number</span>(searchParams.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;page&#x27;</span>));<br><br>  <span class="hljs-keyword">const</span> pageCount = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">ceil</span>(count / <span class="hljs-variable constant_">PAGE_SIZE</span>);<br><br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">nextPage</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> next = currentPage === pageCount ? currentPage : currentPage + <span class="hljs-number">1</span>;<br><br>    searchParams.<span class="hljs-title function_">set</span>(<span class="hljs-string">&#x27;page&#x27;</span>, next);<br>    <span class="hljs-title function_">setSearchParams</span>(searchParams);<br>  &#125;<br><br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">prevPage</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> prev = currentPage === <span class="hljs-number">1</span> ? currentPage : currentPage - <span class="hljs-number">1</span>;<br><br>    searchParams.<span class="hljs-title function_">set</span>(<span class="hljs-string">&#x27;page&#x27;</span>, prev);<br>    <span class="hljs-title function_">setSearchParams</span>(searchParams);<br>&#125;<br></code></pre></td></tr></table></figure><p>ä»æ—§æ˜¯é€šè¿‡å¼ºå¤§çš„Paramæ¥å¾—åˆ°å½“å‰çš„é¡µæ•°ã€‚å½“ç„¶åˆšè¿›å…¥è¿™ä¸ªç•Œé¢çš„æ—¶å€™ä¸å­˜åœ¨é‚£ä¸ªæŸ¥è¯¢å‚æ•°ï¼Œäºæ˜¯æŠŠå½“å‰é¡µæ•°è®¾ç½®ä¸º1ï¼Œå¦åˆ™å¯ä»¥æ ¹æ®æŸ¥è¯¢å‚æ•°å¾—åˆ°ã€‚</p><p>å¦‚æœæ€»ç»“æœæ•°è¿˜æ²¡ä¸€é¡µçš„ç»“æœå¤šï¼Œé‚£ä¹ˆç›´æ¥ä¸è¿”å›è¿™ä¸ªç»„ä»¶ã€‚</p><p>pageCountä¿ç•™æœ€å¤§çš„é¡µæ•°ã€‚</p><p>æ¯æ¬¡ç¿»é¡µçš„æ—¶å€™éƒ½ç›¸åº”åœ°æ›´æ–°æŸ¥è¯¢å‚æ•°ã€‚</p><h4 id="ï¼ˆ3ï¼‰Prefetching"><a href="#ï¼ˆ3ï¼‰Prefetching" class="headerlink" title="ï¼ˆ3ï¼‰Prefetching"></a>ï¼ˆ3ï¼‰Prefetching</h4><p><code>Prefetching</code> æ˜¯ä¸€ç§ä¼˜åŒ–æŠ€æœ¯ï¼Œç”¨äºåœ¨ç”¨æˆ·éœ€è¦æ•°æ®ä¹‹å‰æå‰è·å–å’ŒåŠ è½½æ•°æ®ï¼Œä»¥åŠ é€Ÿåº”ç”¨ç¨‹åºçš„å“åº”é€Ÿåº¦ã€‚å®ƒå¸¸ç”¨äºæé«˜ç”¨æˆ·ä½“éªŒï¼Œå‡å°‘ç­‰å¾…æ—¶é—´ï¼Œç‰¹åˆ«æ˜¯åœ¨ç½‘é¡µåº”ç”¨å’Œæ•°æ®é©±åŠ¨çš„åº”ç”¨ä¸­ã€‚</p><p>ç°åœ¨è¦åšçš„å¾ˆç®€å•ï¼Œå°±æ˜¯æˆ‘ä»¬å†åˆ‡æ¢é¡µé¢çš„æ—¶å€™ï¼Œä¸ç®¡æ˜¯å‰ç¿»è¿˜æ˜¯åç¿»ï¼Œæ€»ä¼šå‡ºç°ä¸€ä¸ªåŠ è½½é¡µé¢ã€‚ä½†æ˜¯æˆ‘ä»¬æƒ³è¦æ•°æ®å¯ä»¥ä¸æ»‘åœ°å‡ºç°åœ¨ç•Œé¢ä¸Šï¼Œäºæ˜¯ï¼Œåœ¨useBookingsç»„ä»¶ä¸­ï¼š</p><p>é¦–å…ˆè·å¾—ï¼š<code>const queryClient = useQueryClient();</code></p><p>ç„¶ååœ¨useQueryæŸ¥è¯¢æ•°æ®ä¹‹åï¼Œè¿”å›æ‰€æœ‰æ•°æ®ä¹‹å‰ï¼šï¼ˆæœ‰ç‚¹ç®€å•ä¸å¤šè¯´äº†ï¼‰</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> pageCount = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">ceil</span>(count / <span class="hljs-variable constant_">PAGE_SIZE</span>);<br><br>  <span class="hljs-keyword">if</span> (page &lt; pageCount)<br>    queryClient.<span class="hljs-title function_">prefetchQuery</span>(&#123;<br>      <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">&#x27;bookings&#x27;</span>, filter, sortBy, page + <span class="hljs-number">1</span>],<br>      <span class="hljs-attr">queryFn</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">getBookings</span>(&#123; filter, sortBy, <span class="hljs-attr">page</span>: page + <span class="hljs-number">1</span> &#125;),<br>    &#125;);<br><br>  <span class="hljs-keyword">if</span> (page &gt; <span class="hljs-number">1</span>)<br>    queryClient.<span class="hljs-title function_">prefetchQuery</span>(&#123;<br>      <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">&#x27;bookings&#x27;</span>, filter, sortBy, page - <span class="hljs-number">1</span>],<br>      <span class="hljs-attr">queryFn</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">getBookings</span>(&#123; filter, sortBy, <span class="hljs-attr">page</span>: page - <span class="hljs-number">1</span> &#125;),<br>    &#125;);<br></code></pre></td></tr></table></figure><h3 id="å››ã€å»ºç«‹Bookingçš„Detailç•Œé¢"><a href="#å››ã€å»ºç«‹Bookingçš„Detailç•Œé¢" class="headerlink" title="å››ã€å»ºç«‹Bookingçš„Detailç•Œé¢"></a>å››ã€å»ºç«‹Bookingçš„Detailç•Œé¢</h3><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240925232925950.png" alt="image-20240925232925950"></p><p>é¦–å…ˆåœ¨App.jsçš„Routerä¸­åŠ ä¸Šè¿™æ ·ä¸€æ¡ï¼š</p><p><code>&lt;Route path=&quot;bookings/:bookingId&quot; element=&#123;&lt;Booking /&gt;&#125; /&gt;</code></p><p>æˆ‘ä»¬æ–°åˆ›å»ºäº†ä¸€ä¸ªç•Œé¢ï¼šBookingï¼Œé‡Œé¢ç›´æ¥è¿”å›<code>BookingDetial</code>ç»„ä»¶ï¼Œè€Œè¿™ä¸ªç»„ä»¶éœ€è¦æ¥æ”¶ç›¸åº”çš„bookingæ•°æ®ï¼Œè¿™ä¸ªæ•°æ®æ˜¯ç”±æˆ‘ä»¬æ–°åˆ›å»ºçš„é’©å­ä¸­è·å¾—ã€‚</p><h4 id="ï¼ˆ1ï¼‰useBooking"><a href="#ï¼ˆ1ï¼‰useBooking" class="headerlink" title="ï¼ˆ1ï¼‰useBooking"></a>ï¼ˆ1ï¼‰useBooking</h4><p>è¦ç‚¹æœ‰äºŒï¼š</p><ul><li>é€šè¿‡URLè·å¾—bookingIdï¼Œä½¿ç”¨äº†<code>useParams</code>é’©å­å¯ç›´æ¥è·å¾—</li><li>æŠŠidä¼ é€’ç»™getBookingå‡½æ•°ä¸­</li></ul><h4 id="ï¼ˆ2ï¼‰getBooking"><a href="#ï¼ˆ2ï¼‰getBooking" class="headerlink" title="ï¼ˆ2ï¼‰getBooking"></a>ï¼ˆ2ï¼‰getBooking</h4><p>è¿™ä¸ªå‡½æ•°ä½äºapiä¸­ï¼Œä½œç”¨æ˜¯è¿”å›ç›¸åº”idçš„Bookingçš„æ‰€æœ‰è¯¦ç»†ä¿¡æ¯</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getBooking</span>(<span class="hljs-params">id</span>) &#123;<br>  <span class="hljs-keyword">const</span> &#123; data, error &#125; = <span class="hljs-keyword">await</span> supabase<br>    .<span class="hljs-title function_">from</span>(<span class="hljs-string">&#x27;bookings&#x27;</span>)<br>    .<span class="hljs-title function_">select</span>(<span class="hljs-string">&#x27;*, cabins(*), guests(*)&#x27;</span>)<br>    .<span class="hljs-title function_">eq</span>(<span class="hljs-string">&#x27;id&#x27;</span>, id)    <span class="hljs-comment">//æå–ç­‰äºidçš„bookingå†…å®¹</span><br>    .<span class="hljs-title function_">single</span>();<br><br>  <span class="hljs-keyword">if</span> (error) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(error);<br>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&#x27;Booking not found&#x27;</span>);<br>  &#125;<br><br>  <span class="hljs-keyword">return</span> data;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ï¼ˆ3ï¼‰BookingRow"><a href="#ï¼ˆ3ï¼‰BookingRow" class="headerlink" title="ï¼ˆ3ï¼‰BookingRow"></a>ï¼ˆ3ï¼‰BookingRow</h4><p>ç”¨åˆ°äº†å…ˆå‰åˆ›å»ºçš„Menuå¤åˆç»„ä»¶ã€‚ç‚¹å‡»æŒ‰é’®ä¼šå¯¼èˆªç•Œé¢åˆ°ç›¸åº”çš„detailç•Œé¢ï¼Œå› æ­¤æŠŠç›¸åº”çš„idæ”¾å…¥URLä¸­æ–¹ä¾¿è¢«æå–ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;<span class="hljs-title class_">Menus</span>.<span class="hljs-property">Menu</span>&gt;<br>     <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Menus.Toggle</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&#123;bookingId&#125;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Menus.Toggle</span>&gt;</span></span><br>        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Menus.List</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&#123;bookingId&#125;</span>&gt;</span></span><br><span class="language-xml">           <span class="hljs-tag">&lt;<span class="hljs-name">Menus.Button</span></span></span><br><span class="hljs-tag"><span class="language-xml">              <span class="hljs-attr">icon</span>=<span class="hljs-string">&#123;</span>&lt;<span class="hljs-attr">HiEye</span> /&gt;</span>&#125;</span><br><span class="language-xml">              onClick=&#123;() =&gt; navigate(`/bookings/$&#123;bookingId&#125;`)&#125;</span><br><span class="language-xml">           &gt;</span><br><span class="language-xml">              See details</span><br><span class="language-xml">           <span class="hljs-tag">&lt;/<span class="hljs-name">Menus.Button</span>&gt;</span></span><br><span class="language-xml">     <span class="hljs-tag">&lt;/<span class="hljs-name">Menus.List</span>&gt;</span></span><br>&lt;/<span class="hljs-title class_">Menus</span>.<span class="hljs-property">Menu</span>&gt;<br></code></pre></td></tr></table></figure><h4 id="ï¼ˆ4ï¼‰BookingDetail"><a href="#ï¼ˆ4ï¼‰BookingDetail" class="headerlink" title="ï¼ˆ4ï¼‰BookingDetail"></a>ï¼ˆ4ï¼‰BookingDetail</h4><p>ä»¥ä¸‹å‡ è¡Œæœ‰ä¸€ä¸ªè¦ç‚¹ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> &#123; booking, isLoading &#125; = <span class="hljs-title function_">useBooking</span>();<br><span class="hljs-keyword">const</span> moveBack = <span class="hljs-title function_">useMoveBack</span>();<br><br><span class="hljs-keyword">if</span> (isLoading) <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Spinner</span> /&gt;</span></span>;<br><br><span class="hljs-keyword">const</span> &#123; status, <span class="hljs-attr">id</span>: bookingId &#125; = booking;<br></code></pre></td></tr></table></figure><p>ç¬¬ä¸€<code>useMoveBack</code>é’©å­ä¸èƒ½æ”¾åœ¨<code>if</code>è¯­å¥ä¹‹åï¼›</p><p>ç¬¬äºŒè¯»å–<code>&#123; status, id: bookingId &#125;</code>å¿…é¡»æ”¾åœ¨åˆ¤æ–­æ˜¯å¦åœ¨åŠ è½½è¯­å¥ä¹‹åï¼Œå¦åˆ™æˆ‘ä»¬ä¼šåœ¨æ•°æ®è¿˜æ²¡æœ‰åŠ è½½å®Œæˆçš„æ—¶å€™å°±è¯•å›¾è¯»å–ï¼Œå°±ä¼šæŠ¥é”™ã€‚ï¼ˆè¿˜è®©äººç™¾æ€ä¸å¾—å…¶è§£ï¼‰</p><h3 id="äº”ã€å®ç°Checkinã€Checkoutã€Deleteçš„åŠŸèƒ½"><a href="#äº”ã€å®ç°Checkinã€Checkoutã€Deleteçš„åŠŸèƒ½" class="headerlink" title="äº”ã€å®ç°Checkinã€Checkoutã€Deleteçš„åŠŸèƒ½"></a>äº”ã€å®ç°Checkinã€Checkoutã€Deleteçš„åŠŸèƒ½</h3><h4 id="ï¼ˆ1ï¼‰å®ç°åŸºæœ¬checkinåŠŸèƒ½"><a href="#ï¼ˆ1ï¼‰å®ç°åŸºæœ¬checkinåŠŸèƒ½" class="headerlink" title="ï¼ˆ1ï¼‰å®ç°åŸºæœ¬checkinåŠŸèƒ½"></a>ï¼ˆ1ï¼‰å®ç°åŸºæœ¬checkinåŠŸèƒ½</h4><p>æ–°å»ºäº†checkin&#x2F;ï¼šbookingIdçš„ç•Œé¢ã€‚</p><p>åœ¨BookingRowå’ŒBookingDetialä¸­éƒ½åŠ å…¥äº†â€œcheckinâ€æŒ‰é’®ï¼Œå¯ä»¥å¯¼èˆªåˆ°checkinç•Œé¢ã€‚è¿™ä¸ªç•Œé¢ä¸­è¿˜æœ‰ä¸€ä¸ªç¡®è®¤checkinçš„æŒ‰é’®ï¼Œä½œç”¨æ˜¯éœ€è¦ä¿®æ”¹bookingçš„statuå˜æˆcheckinï¼Œæ˜¯å¦ä»˜é’±å˜ä¸ºPaidã€‚ï¼ˆåªæœ‰çŠ¶æ€ä¸ºunconfirmedçš„bookingæ‰èƒ½è¢«checkinï¼‰</p><p><code>useCheckinï¼š</code></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useCheckin</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> queryClient = <span class="hljs-title function_">useQueryClient</span>();<br>  <span class="hljs-keyword">const</span> navigate = <span class="hljs-title function_">useNavigate</span>();<br><br>  <span class="hljs-keyword">const</span> &#123; <span class="hljs-attr">mutate</span>: checkin, <span class="hljs-attr">isLoading</span>: isCheckingIn &#125; = <span class="hljs-title function_">useMutation</span>(&#123;<br>    <span class="hljs-attr">mutationFn</span>: <span class="hljs-function">(<span class="hljs-params">bookingId</span>) =&gt;</span><br>      <span class="hljs-title function_">updateBooking</span>(bookingId, &#123; <span class="hljs-attr">status</span>: <span class="hljs-string">&#x27;checked-in&#x27;</span>, <span class="hljs-attr">isPaid</span>: <span class="hljs-literal">true</span> &#125;),<br><br>    <span class="hljs-attr">onSuccess</span>: <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> &#123;<br>      toast.<span class="hljs-title function_">success</span>(<span class="hljs-string">`Booking #<span class="hljs-subst">$&#123;data.id&#125;</span> successfully checked in`</span>);<br>      queryClient.<span class="hljs-title function_">invalidateQueries</span>(&#123;<br>        <span class="hljs-attr">active</span>: <span class="hljs-literal">true</span>,<br>      &#125;);<br>      <span class="hljs-title function_">navigate</span>(<span class="hljs-string">&#x27;/&#x27;</span>);<br>    &#125;,<br><br>    <span class="hljs-attr">onError</span>: <span class="hljs-function">() =&gt;</span> toast.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;There was an error while checking in&#x27;</span>),<br>  &#125;);<br><br>  <span class="hljs-keyword">return</span> &#123; checkin, isCheckingIn &#125;;<br>&#125;<br></code></pre></td></tr></table></figure><p>é€šè¿‡ä»£ç å¯ä»¥çœ‹åˆ°ï¼ŒonSuccesså‡½æ•°æ˜¯å¯ä»¥æ¥æ”¶åˆ°è¿”å›çš„dataæ•°æ®çš„ã€‚</p><p><code>queryClient.invalidateQueries(&#123;&#125;);</code>ä¹‹å‰æ˜¯æ”¾ç½®queryIdï¼Œç°åœ¨æ”¾ç½®activeè®¾ç½®ä¸ºtrue</p><p>â­<code>queryClient.invalidateQueries()</code> æ˜¯ React Query ä¸­ç”¨äºä½¿ç¼“å­˜å¤±æ•ˆå¹¶è§¦å‘é‡æ–°è·å–æ•°æ®çš„æ–¹æ³•ã€‚åœ¨è¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ªé…ç½®å¯¹è±¡ <code>&#123; active: true &#125;</code>ï¼Œè¿™è¡¨ç¤ºä½¿æ‰€æœ‰å½“å‰ â€œactiveâ€ï¼ˆå³æ­£åœ¨è¢«è§‚å¯Ÿæˆ–ä½¿ç”¨ï¼‰çš„æŸ¥è¯¢å¤±æ•ˆã€‚</p><h4 id="ï¼ˆ2ï¼‰å®ç°æ·»åŠ æ—©é¥­çš„åŠŸèƒ½"><a href="#ï¼ˆ2ï¼‰å®ç°æ·»åŠ æ—©é¥­çš„åŠŸèƒ½" class="headerlink" title="ï¼ˆ2ï¼‰å®ç°æ·»åŠ æ—©é¥­çš„åŠŸèƒ½"></a>ï¼ˆ2ï¼‰å®ç°æ·»åŠ æ—©é¥­çš„åŠŸèƒ½</h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&#123;!hasBreakfast &amp;&amp; (<br>   <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Box</span>&gt;</span></span><br><span class="language-xml">       <span class="hljs-tag">&lt;<span class="hljs-name">Checkbox</span></span></span><br><span class="hljs-tag"><span class="language-xml">            <span class="hljs-attr">checked</span>=<span class="hljs-string">&#123;addBreakfast&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">            <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> &#123;</span><br><span class="language-xml">                setAddBreakfast((addBreakfast) =&gt; !addBreakfast);</span><br><span class="language-xml">                setConfirmPaid(false);</span><br><span class="language-xml">           &#125;&#125;</span><br><span class="language-xml">             id=&quot;Breakfast&quot;</span><br><span class="language-xml">          &gt;</span><br><span class="language-xml">             Want to add breakfast for &#123;formatCurrency(optionalBreakfastPrice)&#125;?</span><br><span class="language-xml">       <span class="hljs-tag">&lt;/<span class="hljs-name">Checkbox</span>&gt;</span></span><br><span class="language-xml">   <span class="hljs-tag">&lt;/<span class="hljs-name">Box</span>&gt;</span></span><br>)&#125;<br></code></pre></td></tr></table></figure><p>é™¤æ­¤ä¹‹å¤–ç¡®å®šä»˜é’±çš„checkboxä¹Ÿè¦æŠŠæ€»é’±æ•°ä¿®æ”¹ä¸€ä¸‹ã€‚</p><p>è¿™ä¸ªæ—¶å€™ï¼Œåœ¨checkinçš„æ—¶å€™å°±è¦åˆ†æƒ…å†µè®¨è®ºæ˜¯å¦æœ‰æ·»åŠ æ—©é¤ï¼Œä¼ é€’ç»™checkinå‡½æ•°çš„å°±ä¸ä»…ä»…æ˜¯bookingIdäº†ï¼Œè€Œä¸”éœ€è¦æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-title function_">checkin</span>(&#123;<br>    bookingId,<br>    <span class="hljs-attr">breakfast</span>: &#123;<br>        <span class="hljs-attr">hasBreakfast</span>: <span class="hljs-literal">true</span>,<br>        <span class="hljs-attr">extrasPrice</span>: optionalBreakfastPrice,<br>        <span class="hljs-attr">totalPrice</span>: totalPrice + optionalBreakfastPrice,<br>&#125;,<br></code></pre></td></tr></table></figure><p>useCheckinä¸­ä¹Ÿéœ€è¦å‘ç”Ÿæ”¹å˜ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-attr">mutationFn</span>: <span class="hljs-function">(<span class="hljs-params">&#123; bookingId, breakfast &#125;</span>) =&gt;</span><br>   <span class="hljs-title function_">updateBooking</span>(bookingId, &#123;<br>   <span class="hljs-attr">status</span>: <span class="hljs-string">&#x27;checked-in&#x27;</span>,<br>      <span class="hljs-attr">isPaid</span>: <span class="hljs-literal">true</span>,<br>      ...breakfast,<br>&#125;),<br></code></pre></td></tr></table></figure><h4 id="ï¼ˆ3ï¼‰checkoutå’Œdelete"><a href="#ï¼ˆ3ï¼‰checkoutå’Œdelete" class="headerlink" title="ï¼ˆ3ï¼‰checkoutå’Œdelete"></a>ï¼ˆ3ï¼‰checkoutå’Œdelete</h4><p>deleteä¸­åªæœ‰ä¸€ä¸ªåœ°æ–¹ï¼Œå°±æ˜¯åœ¨detailç•Œé¢æƒ³è¦åˆ æ‰åå°±è¿”å›bookingç•Œé¢ã€‚æ‰€ä»¥åœ¨è¿™é‡Œä¼ é€’ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«æƒ³è¦å‘ç”Ÿçš„äº‹æƒ…ï¼Œè¿™é‡Œä¼ é€’çš„onSettledæ„æ€æ˜¯ä¸ç®¡æˆåŠŸæˆ–å¤±è´¥å‡æ‰§è¡Œã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;<span class="hljs-title class_">Modal</span>.<span class="hljs-property">Window</span> name=<span class="hljs-string">&quot;delete&quot;</span>&gt;<br>   <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ConfirmDelete</span></span></span><br><span class="hljs-tag"><span class="language-xml">       <span class="hljs-attr">resourceName</span>=<span class="hljs-string">&quot;booking&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">       <span class="hljs-attr">disabled</span>=<span class="hljs-string">&#123;isDeletingBooking&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">       <span class="hljs-attr">onConfirm</span>=<span class="hljs-string">&#123;()</span> =&gt;</span></span><br><span class="language-xml">           deleteBooking(bookingId, &#123; onSettled: () =&gt; navigate(-1) &#125;)</span><br><span class="language-xml">       &#125;</span><br><span class="language-xml">   /&gt;</span><br>&lt;/<span class="hljs-title class_">Modal</span>.<span class="hljs-property">Window</span>&gt;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>reactè¯¾ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>react</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>reactè¯¾ç¨‹20-Advanced React Patterns</title>
    <link href="/2024/09/24/react%E8%AF%BE%E7%A8%8B20-Advanced-React-Patterns/"/>
    <url>/2024/09/24/react%E8%AF%BE%E7%A8%8B20-Advanced-React-Patterns/</url>
    
    <content type="html"><![CDATA[<p>æœ¬èŠ‚è¯¾è¦ç‚¹ï¼š1ã€render props patern   2ã€HOC   3ã€Compound Component Pattern   </p><p>4ã€React Portal  5ã€react portal   5ã€javascriptäº‹ä»¶ä¼ æ’­é¡ºåº  6ã€æ£€æµ‹åœ¨çª—ä½“å¤–çš„ç‚¹å‡»è¡Œä¸º</p><span id="more"></span><p>â€œè¿™èŠ‚è¯¾çœ‹èµ·æ¥å¾ˆé«˜çº§ï¼Œæ˜¯å› ä¸ºå®ƒç¡®å®å¾ˆé«˜çº§ğŸ¤«â€œ</p><p>Jonasæ¯æ¬¡æ•™æ–°çš„çŸ¥è¯†éƒ½æ¿€åŠ¨çš„å¾ˆï¼Œæå¾—æˆ‘ä¹Ÿå¾ˆæ¿€åŠ¨ï¼Œç¬‘é¼ ã€‚ã€‚ã€‚æˆ‘å€’è¦çœ‹çœ‹è¿™èŠ‚è¯¾è®²çš„å†…å®¹åˆ°åº•å¤šä¹ˆé«˜çº§ğŸ˜‹ğŸ˜‹ğŸ˜‹ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240924153709168.png" alt="image-20240924153709168"></p><p>ï¼ˆä»€ä¹ˆç©æ„è¿›æˆ‘è„‘å­é‡Œäº†ï¼Ÿï¼Ÿï¼‰</p><p>ï¼ˆæ€ä¹ˆç°åœ¨vite å’Œ creatreact appéƒ½ä¸ä¼šè‡ªåŠ¨é…ç½®prettieräº†ï¼‰</p><h3 id="ä¸€ã€render-props-patern"><a href="#ä¸€ã€render-props-patern" class="headerlink" title="ä¸€ã€render props patern"></a>ä¸€ã€render props patern</h3><h3 id="äºŒã€HOC"><a href="#äºŒã€HOC" class="headerlink" title="äºŒã€HOC"></a>äºŒã€HOC</h3><h3 id="ä¸‰ã€Compound-Component-Pattern"><a href="#ä¸‰ã€Compound-Component-Pattern" class="headerlink" title="ä¸‰ã€Compound Component Pattern"></a>ä¸‰ã€Compound Component Pattern</h3><p><code>Compound Component Pattern</code>ï¼ˆå¤åˆç»„ä»¶æ¨¡å¼ï¼‰ æ˜¯ä¸€ç§ React è®¾è®¡æ¨¡å¼ï¼Œå®ƒå…è®¸ä½ åˆ›å»ºä¸€ç»„ç»„ä»¶ï¼Œè¿™äº›ç»„ä»¶å¯ä»¥ä¸€èµ·å·¥ä½œå¹¶å…±äº«çŠ¶æ€ã€‚è¿™ç§æ¨¡å¼é€šè¿‡å°†çŠ¶æ€ç®¡ç†å’Œ UI é€»è¾‘åˆ†ç¦»ï¼Œä½¿å¾—ç»„ä»¶çš„ç»„åˆæ›´åŠ çµæ´»å’Œå¯é‡ç”¨ã€‚</p><h4 id="ï¼ˆ1ï¼‰ä¸»è¦ç‰¹å¾"><a href="#ï¼ˆ1ï¼‰ä¸»è¦ç‰¹å¾" class="headerlink" title="ï¼ˆ1ï¼‰ä¸»è¦ç‰¹å¾"></a>ï¼ˆ1ï¼‰ä¸»è¦ç‰¹å¾</h4><ol><li><strong>çŠ¶æ€å…±äº«</strong>ï¼šçˆ¶ç»„ä»¶ç®¡ç†çŠ¶æ€ï¼Œå¹¶é€šè¿‡ä¸Šä¸‹æ–‡ï¼ˆ<code>Context</code>ï¼‰æä¾›ç»™å­ç»„ä»¶ï¼Œä½¿å®ƒä»¬å¯ä»¥è®¿é—®å’Œæ“ä½œè¯¥çŠ¶æ€ã€‚</li><li><strong>æ˜“äºç»„åˆ</strong>ï¼šå­ç»„ä»¶å¯ä»¥çµæ´»åœ°ç»„åˆåœ¨ä¸€èµ·ï¼Œå½¢æˆå¤æ‚çš„ UIï¼Œè€Œä¸éœ€è¦å…³å¿ƒçŠ¶æ€çš„ç®¡ç†ã€‚</li><li><strong>æ¸…æ™°çš„ API</strong>ï¼šä½¿ç”¨è€…å¯ä»¥æ¸…æ¥šåœ°çŸ¥é“å¦‚ä½•ä½¿ç”¨è¿™äº›ç»„ä»¶ï¼Œç»„ä»¶ä¹‹é—´çš„å…³ç³»ä¸€ç›®äº†ç„¶ã€‚</li></ol><h4 id="ï¼ˆ2ï¼‰ä½¿ç”¨ç¤ºä¾‹"><a href="#ï¼ˆ2ï¼‰ä½¿ç”¨ç¤ºä¾‹" class="headerlink" title="ï¼ˆ2ï¼‰ä½¿ç”¨ç¤ºä¾‹"></a>ï¼ˆ2ï¼‰ä½¿ç”¨ç¤ºä¾‹</h4><h5 id="1-App-js"><a href="#1-App-js" class="headerlink" title="1.App.js"></a>1.<code>App.js</code></h5><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;<span class="hljs-title class_">Counter</span>&gt;<br>   <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Counter.Decrease</span> <span class="hljs-attr">icon</span>=<span class="hljs-string">&quot;-&quot;</span> /&gt;</span></span><br>   <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Counter.Count</span> /&gt;</span></span><br>   <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Counter.Increase</span> <span class="hljs-attr">icon</span>=<span class="hljs-string">&quot;+&quot;</span> /&gt;</span></span><br>   <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Counter.Label</span>&gt;</span>My super flexible counter<span class="hljs-tag">&lt;/<span class="hljs-name">Counter.Label</span>&gt;</span></span><br>&lt;/<span class="hljs-title class_">Counter</span>&gt;<br></code></pre></td></tr></table></figure><h5 id="2-Couter-js"><a href="#2-Couter-js" class="headerlink" title="2.Couter.js"></a>2.<code>Couter.js</code></h5><p>å±…ç„¶ä½¿ç”¨åˆ°äº†å°˜å°çš„contextAPIï¼Œå·²ç»è¢«æˆ‘å¿˜å¾—ä¸€å¹²äºŒå‡€äº†hhh</p><p>æ ¹æ®æˆ‘çš„ç†è§£ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>åˆ›å»ºä¸€ä¸ªcontext</li><li>åˆ›å»ºä¸€ä¸ªçˆ¶ç»„ä»¶ï¼Œç”¨ä»¥æä¾›çŠ¶æ€æˆ–æ›´å¤šä¸œè¥¿</li><li>åˆ›é€ å­ç»„ä»¶ï¼Œå­ç»„ä»¶æ¥æ”¶æƒ³è¦çš„çŠ¶æ€</li><li>æŠŠå­ç»„ä»¶è¿æ¥åˆ°çˆ¶ç»„ä»¶ä¸Š</li></ol><p>ç„¶åå­ç»„ä»¶å°±å¯ä»¥çµæ´»åœ°ç»„åˆï¼Œè¿˜å¯ä»¥çµæ´»åœ°ä¿®æ”¹ğŸ˜‹ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> &#123; createContext, useContext, useState &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;<br><br><span class="hljs-comment">//1.create a context</span><br><span class="hljs-keyword">const</span> <span class="hljs-title class_">CounterContext</span> = <span class="hljs-title function_">createContext</span>();<br><br><span class="hljs-comment">//2.create parent component</span><br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Counter</span>(<span class="hljs-params">&#123; children &#125;</span>) &#123;<br>  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);<br>  <span class="hljs-keyword">const</span> <span class="hljs-title function_">increase</span> = (<span class="hljs-params"></span>) =&gt; <span class="hljs-title function_">setCount</span>(<span class="hljs-function">(<span class="hljs-params">c</span>) =&gt;</span> c + <span class="hljs-number">1</span>);<br>  <span class="hljs-keyword">const</span> <span class="hljs-title function_">decrease</span> = (<span class="hljs-params"></span>) =&gt; <span class="hljs-title function_">setCount</span>(<span class="hljs-function">(<span class="hljs-params">c</span>) =&gt;</span> c - <span class="hljs-number">1</span>);<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">CounterContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;&#123;</span> <span class="hljs-attr">count</span>, <span class="hljs-attr">increase</span>, <span class="hljs-attr">decrease</span> &#125;&#125;&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;children&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">CounterContext.Provider</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-comment">//3.create child component to help implementing the common task</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Count</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> &#123; count &#125; = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">CounterContext</span>);<br>  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;count&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>;<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Label</span>(<span class="hljs-params">&#123; children &#125;</span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;children&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>;<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Increase</span>(<span class="hljs-params">&#123; icon &#125;</span>) &#123;<br>  <span class="hljs-keyword">const</span> &#123; increase &#125; = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">CounterContext</span>);<br>  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;increase&#125;</span>&gt;</span>&#123;icon&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>;<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Decrease</span>(<span class="hljs-params">&#123; icon &#125;</span>) &#123;<br>  <span class="hljs-keyword">const</span> &#123; decrease &#125; = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">CounterContext</span>);<br>  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;decrease&#125;</span>&gt;</span>&#123;icon&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>;<br>&#125;<br><br><span class="hljs-comment">//4.add child components as proeprties to parent compontent</span><br><span class="hljs-title class_">Counter</span>.<span class="hljs-property">Count</span> = <span class="hljs-title class_">Count</span>;<br><span class="hljs-title class_">Counter</span>.<span class="hljs-property">Label</span> = <span class="hljs-title class_">Label</span>;<br><span class="hljs-title class_">Counter</span>.<span class="hljs-property">Increase</span> = <span class="hljs-title class_">Increase</span>;<br><span class="hljs-title class_">Counter</span>.<span class="hljs-property">Decrease</span> = <span class="hljs-title class_">Decrease</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Counter</span>;<br></code></pre></td></tr></table></figure><p>ï¼ˆâ€æ­å–œä½ æˆä¸ºå°‘æ•°å‡ ä¸ªçŸ¥é“è¿™ç§æ¨¡å¼çš„Reactå¼€å‘äººå‘˜ä¹‹ä¸€â€œ ï¼Œhhhï¼ŒJonasä½ æ˜¯æ‡‚å¾—æ§æ€çš„ï¼‰</p><h3 id="ä¸‰ã€ä½¿ç”¨React-Portalåˆ›å»ºä¸€ä¸ªModal-Window"><a href="#ä¸‰ã€ä½¿ç”¨React-Portalåˆ›å»ºä¸€ä¸ªModal-Window" class="headerlink" title="ä¸‰ã€ä½¿ç”¨React Portalåˆ›å»ºä¸€ä¸ªModal Window"></a>ä¸‰ã€ä½¿ç”¨React Portalåˆ›å»ºä¸€ä¸ªModal Window</h3><h4 id="ï¼ˆ1ï¼‰è‡ªç„¶åˆ›å»º"><a href="#ï¼ˆ1ï¼‰è‡ªç„¶åˆ›å»º" class="headerlink" title="ï¼ˆ1ï¼‰è‡ªç„¶åˆ›å»º"></a>ï¼ˆ1ï¼‰è‡ªç„¶åˆ›å»º</h4><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240924193002270.png" alt="image-20240924193002270" style="zoom: 33%;" /><p>è¿™æ ·çš„è¡¨å•æ˜¯ä¸æ˜¯å¥½çœ‹å¤šäº†ï¼Ÿ</p><h5 id="1ã€Modalç»„ä»¶"><a href="#1ã€Modalç»„ä»¶" class="headerlink" title="1ã€Modalç»„ä»¶"></a>1ã€Modalç»„ä»¶</h5><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Modal</span>(<span class="hljs-params">&#123; children, onClose &#125;</span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Overlay</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">StyledModal</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;onClose&#125;</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">HiXMark</span> /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>   &#123;/*è¿™é‡Œæ˜¯ä¸€ä¸ªåˆ é™¤æŒ‰é’®ï¼Œæ¥å—çš„å‡½æ•°å°±æ˜¯éšè—è¡¨å•çš„å‡½æ•° */&#125;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>&#123;children&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>   &#123;/*è¿™é‡Œæ¥æ”¶childrenï¼Œæ˜¾ç¤ºç›¸åº”è¡¨å•*/&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">StyledModal</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">Overlay</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="2ã€AddCabinç»„ä»¶"><a href="#2ã€AddCabinç»„ä»¶" class="headerlink" title="2ã€AddCabinç»„ä»¶"></a>2ã€AddCabinç»„ä»¶</h5><p>è¿™é‡Œæˆ‘ä»¬æŠŠä¹‹å‰åœ¨cabin.jsxï¼ˆpageé¡µï¼‰çš„çŠ¶æ€ã€æŒ‰é’®å’Œè¡¨å•ç»„ä»¶éƒ½æ‹¿è¿‡æ¥äº†ï¼›</p><p>æŠŠ<code>onCloseModal</code>ä¼ é€’ç»™è¡¨å•ç»„ä»¶æ˜¯ä¸ºäº†ç‚¹å‡»cancelå’Œåˆ›å»ºå®Œcabinçš„æ—¶å€™éƒ½èƒ½å…³é—­è¡¨å•ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">AddCabin</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> [isOpenModal, setIsOpenModal] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> setIsOpenModal((show) =&gt; !show)&#125;&gt;</span><br><span class="language-xml">        Add new cabin</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">      &#123;isOpenModal &amp;&amp; (</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Modal</span> <span class="hljs-attr">onClose</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> setIsOpenModal(false)&#125;&gt;</span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">CreateCabinForm</span> <span class="hljs-attr">onCloseModal</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> setIsOpenModal(false)&#125; /&gt;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">Modal</span>&gt;</span></span><br><span class="language-xml">      )&#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="3ã€createCabinFormä¸­æ‰€åšçš„ä¿®æ”¹"><a href="#3ã€createCabinFormä¸­æ‰€åšçš„ä¿®æ”¹" class="headerlink" title="3ã€createCabinFormä¸­æ‰€åšçš„ä¿®æ”¹"></a>3ã€<code>createCabinForm</code>ä¸­æ‰€åšçš„ä¿®æ”¹</h5><p>åœ¨åˆ›å»ºcabinçš„onSubmitçš„å‡½æ•°ä¸­çš„onSuccesså›è°ƒå‡½æ•°ä¸­åŠ å…¥<code>onCloseModal?.()</code>ï¼Œä½¿å¾—åˆ›å»ºcabinæˆåŠŸåå…³é—­è¡¨å•ã€‚åŒæ—¶cacelæŒ‰é’®çš„onClickå‡½æ•°ä¸­ä¹ŸåŠ å…¥ã€‚ï¼ˆï¼Ÿ.å¾ˆé‡è¦ï¼‰</p><p>Formç»„ä»¶æ¥æ”¶typeé“å…·ï¼Œå› ä¸ºè¿™ä¸ªè¡¨å•ä¹Ÿå¯èƒ½åœ¨å…¶ä»–åœ°æ–¹è¢«é‡ç”¨ã€‚æ‰€ä»¥å¦‚æœå«æœ‰onCloseModalå°±è¯´æ˜è¿™æ˜¯modalç»„ä»¶ï¼Œtypeè®¾ç½®ä¸ºmodalï¼Œå¦åˆ™ä¸ºregularã€‚ä»¥æ˜¾ç¤ºä¸åŒçš„styleï¼š<code>type=&#123;onCloseModal ? &#39;modal&#39; : &#39;regular&#39;</code></p><h4 id="ï¼ˆ2ï¼‰ä½¿ç”¨React-Portal"><a href="#ï¼ˆ2ï¼‰ä½¿ç”¨React-Portal" class="headerlink" title="ï¼ˆ2ï¼‰ä½¿ç”¨React Portal"></a>ï¼ˆ2ï¼‰ä½¿ç”¨React Portal</h4><p><code>React Portal</code> æ˜¯ React ä¸­çš„ä¸€ç§æœºåˆ¶ï¼Œå…è®¸ä½ å°†å­ç»„ä»¶æ¸²æŸ“åˆ°çˆ¶ç»„ä»¶ä»¥å¤–çš„ DOM èŠ‚ç‚¹ä¸­ã€‚ä½¿ç”¨ Portalï¼Œä½ å¯ä»¥åœ¨åº”ç”¨çš„æŸä¸ªéƒ¨åˆ†ä»¥å¤–çš„åœ°æ–¹å‘ˆç°å­ç»„ä»¶ï¼Œè€Œä¸éœ€è¦æ›´æ”¹ç»„ä»¶çš„å±‚æ¬¡ç»“æ„ã€‚</p><h5 id="1ã€ä¸»è¦ç‰¹æ€§"><a href="#1ã€ä¸»è¦ç‰¹æ€§" class="headerlink" title="1ã€ä¸»è¦ç‰¹æ€§"></a>1ã€ä¸»è¦ç‰¹æ€§</h5><ol><li><strong>DOM èŠ‚ç‚¹åˆ†ç¦»</strong>ï¼šPortal å…è®¸ä½ åœ¨ React ç»„ä»¶æ ‘ä¹‹å¤–æ¸²æŸ“å­ç»„ä»¶ï¼Œè¿™å¯¹äºæ¨¡æ€æ¡†ã€å¼¹å‡ºèœå•ã€å·¥å…·æç¤ºç­‰ UI ç»„ä»¶éå¸¸æœ‰ç”¨ã€‚</li><li><strong>ä¿æŒçˆ¶ç»„ä»¶çš„ä¸Šä¸‹æ–‡</strong>ï¼šå³ä½¿å­ç»„ä»¶è¢«æ¸²æŸ“åˆ°ä¸åŒçš„ DOM èŠ‚ç‚¹ä¸­ï¼Œå®ƒä»ç„¶å¯ä»¥è®¿é—®çˆ¶ç»„ä»¶çš„ä¸Šä¸‹æ–‡ã€‚</li><li><strong>ä¸æ”¹å˜ React ç»„ä»¶å±‚çº§</strong>ï¼šPortal çš„ä½¿ç”¨ä¸ä¼šå½±å“ç»„ä»¶çš„å±‚æ¬¡ç»“æ„ï¼Œè¿™ä½¿å¾—ç»„ç»‡å’Œç»´æŠ¤ä»£ç å˜å¾—æ›´åŠ æ¸…æ™°ã€‚</li></ol><h5 id="2ã€é‡è¦ç‰¹ç‚¹"><a href="#2ã€é‡è¦ç‰¹ç‚¹" class="headerlink" title="2ã€é‡è¦ç‰¹ç‚¹"></a>2ã€é‡è¦ç‰¹ç‚¹</h5><p>é€šè¿‡ä½¿ç”¨ Portal æ¸²æŸ“çš„ç»„ä»¶å¯ä»¥é¿å…åœ¨å…¶çˆ¶å®¹å™¨æˆ–å…¶ä»–åŒ…å«å®ƒçš„å…ƒç´ æœ‰ <code>overflow: hidden</code> æˆ– <code>overflow: scroll</code> ç­‰æ ·å¼æ—¶è¢«è£å‰ªæˆ–é®æŒ¡ã€‚</p><p>å½“ä¸€ä¸ªç»„ä»¶ï¼ˆæ¯”å¦‚æ¨¡æ€æ¡†ã€ä¸‹æ‹‰èœå•ã€å·¥å…·æç¤ºç­‰ï¼‰è¢«æ¸²æŸ“åœ¨å®ƒçš„çˆ¶ç»„ä»¶å†…éƒ¨ï¼Œå¦‚æœçˆ¶ç»„ä»¶æœ‰ä»¥ä¸‹ CSS å±æ€§ï¼š<code>overflow: hidden</code> æˆ– <code>overflow: scroll</code>ï¼Œé‚£ä¹ˆåœ¨çˆ¶ç»„ä»¶çš„è¾¹ç•Œä¹‹å¤–çš„éƒ¨åˆ†å†…å®¹ä¼šè¢«è£å‰ªæ‰æˆ–æ»šåŠ¨éšè—æ‰ã€‚è¿™æ„å‘³ç€å¦‚æœä½ çš„æ¨¡æ€æ¡†æˆ–èœå•è¶…å‡ºçˆ¶ç»„ä»¶çš„è¾¹ç•Œï¼Œå®ƒå°±ä¼šè¢«é®æŒ¡ï¼Œç”¨æˆ·æ— æ³•çœ‹åˆ°å…¨éƒ¨å†…å®¹ã€‚</p><p>é€šè¿‡ <strong>React Portal</strong>ï¼Œä½ å¯ä»¥å°†ç»„ä»¶æ¸²æŸ“åˆ°æ ¹èŠ‚ç‚¹æˆ–å…¶ä»–ç‹¬ç«‹çš„ DOM èŠ‚ç‚¹ä¸­ï¼Œè€Œä¸æ˜¯å½“å‰çš„çˆ¶ç»„ä»¶å†…éƒ¨ã€‚è¿™æ ·ï¼Œå®ƒçš„æ¸²æŸ“ä½ç½®å°±ä¸å†å—åˆ°çˆ¶ç»„ä»¶çš„ <code>overflow</code> æ ·å¼çš„é™åˆ¶ï¼Œè€Œæ˜¯å¯ä»¥è‡ªç”±åœ°æ˜¾ç¤ºåœ¨é¡µé¢çš„ä»»ä½•åœ°æ–¹ã€‚</p><h5 id="3ã€å¦‚ä½•ä½¿ç”¨"><a href="#3ã€å¦‚ä½•ä½¿ç”¨" class="headerlink" title="3ã€å¦‚ä½•ä½¿ç”¨"></a>3ã€å¦‚ä½•ä½¿ç”¨</h5><p>å¯ä»¥çœ‹åˆ°ç›¸è¾ƒä¸Šé¢çš„ç‰ˆæœ¬ï¼Œä¸€å…±åªåšäº†ä¸¤å±‚ä¿®æ”¹ï¼š</p><p>return åé¢æ·»åŠ <code>creatPortal</code>ï¼›è¿”å›å€¼ç»“å°¾åŠ ä¸Š<code>document.</code>{æƒ³è¦æ”¾ç½®çš„ä½ç½®}</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Modal</span>(<span class="hljs-params">&#123; children, onClose &#125;</span>) &#123;<br>  <span class="hljs-keyword">return</span> createPortal (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Overlay</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">StyledModal</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;onClose&#125;</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">HiXMark</span> /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>   &#123;/*è¿™é‡Œæ˜¯ä¸€ä¸ªåˆ é™¤æŒ‰é’®ï¼Œæ¥å—çš„å‡½æ•°å°±æ˜¯éšè—è¡¨å•çš„å‡½æ•° */&#125;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>&#123;children&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>   &#123;/*è¿™é‡Œæ¥æ”¶childrenï¼Œæ˜¾ç¤ºç›¸åº”è¡¨å•*/&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">StyledModal</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">Overlay</span>&gt;</span></span>,<br>     <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ï¼ˆ3ï¼‰ä½¿ç”¨å¤åˆç»„ä»¶æ¨¡å¼æ¥åˆ›å»ºModal"><a href="#ï¼ˆ3ï¼‰ä½¿ç”¨å¤åˆç»„ä»¶æ¨¡å¼æ¥åˆ›å»ºModal" class="headerlink" title="ï¼ˆ3ï¼‰ä½¿ç”¨å¤åˆç»„ä»¶æ¨¡å¼æ¥åˆ›å»ºModal"></a>ï¼ˆ3ï¼‰ä½¿ç”¨å¤åˆç»„ä»¶æ¨¡å¼æ¥åˆ›å»ºModal</h4><p>æˆ‘å’‹å¬ä¸æ‡‚å‘¢ï¼šè¿™ä¸ªmodalæ˜¯æ ¹æ®isOpenModalçŠ¶æ€å˜é‡æ¥æ§åˆ¶æ˜¯å¦æ‰“å¼€çš„ï¼Œä½†æ˜¯è¿™ä¸ªmodalæœ¬èº«åº”è¯¥çŸ¥é“å®ƒå½“å‰æ˜¯å¦æ‰“å¼€ã€‚</p><h5 id="1ã€ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å¤åˆç»„ä»¶æ¨¡å¼"><a href="#1ã€ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å¤åˆç»„ä»¶æ¨¡å¼" class="headerlink" title="1ã€ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å¤åˆç»„ä»¶æ¨¡å¼"></a>1ã€ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å¤åˆç»„ä»¶æ¨¡å¼</h5><p>ğŸ˜¶å½“å‰ç‰ˆæœ¬çš„é—®é¢˜ï¼ˆç®€å•çŠ¶æ€æ§åˆ¶ï¼‰</p><ol><li><strong>çŠ¶æ€å’Œé€»è¾‘ç´§è€¦åˆ</strong>ï¼š<code>isOpenModal</code> çŠ¶æ€å­˜åœ¨äº <code>AddCabin</code> ç»„ä»¶ä¸­ï¼ŒModal ç»„ä»¶ä¸çŸ¥é“è‡ªå·±æ˜¯å¦æ‰“å¼€ï¼Œæ‰€æœ‰çŠ¶æ€éƒ½å¿…é¡»é€šè¿‡çˆ¶ç»„ä»¶æ§åˆ¶ã€‚è¿™ç§æ–¹å¼å¯¹äºç®€å•åœºæ™¯æ˜¯å¯ä»¥çš„ï¼Œä½†å¦‚æœæœ‰æ›´å¤šçš„äº¤äº’éœ€æ±‚ï¼Œä»£ç ä¼šå˜å¾—å¤æ‚ã€‚</li><li><strong>éš¾ä»¥æ‰©å±•</strong>ï¼šå¦‚æœä½ éœ€è¦ä¸º <code>Modal</code> æ·»åŠ æ›´å¤šåŠŸèƒ½ï¼Œæ¯”å¦‚é¢å¤–çš„å­ç»„ä»¶æˆ–æ§åˆ¶å¤šä¸ª modalï¼Œè¿™ç§ç»“æ„ä¸å¤Ÿçµæ´»ã€‚</li></ol><p>ğŸ˜²ä¸ºä»€ä¹ˆä½¿ç”¨å¤åˆç»„ä»¶æ¨¡å¼ï¼Ÿ</p><p>å¤åˆç»„ä»¶æ¨¡å¼å…è®¸ä½ æŠŠä¸åŒéƒ¨åˆ†çš„é€»è¾‘å’Œ UI åˆ†ç¦»å¼€ï¼Œä½¿å¾—çŠ¶æ€æ§åˆ¶å’Œ UI å±•ç¤ºæ›´åŠ è§£è€¦ã€‚å¯ä»¥å°† <code>Modal</code> ç»„ä»¶å†…éƒ¨çš„çŠ¶æ€äº¤ç»™ <code>Modal</code> è‡ªå·±ç®¡ç†ï¼Œè€Œä¸æ˜¯å®Œå…¨ä¾èµ–çˆ¶ç»„ä»¶ã€‚è¿™æ ·å¯ä»¥å¸¦æ¥ä»¥ä¸‹å¥½å¤„ï¼š</p><ol><li><strong>å¢å¼ºçµæ´»æ€§</strong>ï¼šé€šè¿‡å¤åˆç»„ä»¶æ¨¡å¼ï¼Œ<code>Modal</code> å¯ä»¥æœ‰æ›´å¤šå­ç»„ä»¶ï¼ˆæ¯”å¦‚æ ‡é¢˜ã€å†…å®¹ã€å…³é—­æŒ‰é’®ç­‰ï¼‰ï¼Œè¿™äº›å­ç»„ä»¶å¯ä»¥æ ¹æ®éœ€è¦è‡ªç”±ç»„åˆï¼Œé¿å…å°†æ‰€æœ‰é€»è¾‘å’Œæ ·å¼ç¡¬ç¼–ç åœ¨ <code>AddCabin</code> ä¸­ã€‚</li><li><strong>çŠ¶æ€ç®¡ç†è§£è€¦</strong>ï¼šModal å†…éƒ¨å¯ä»¥è‡ªå·±çŸ¥é“å®ƒçš„çŠ¶æ€ï¼ˆæ˜¯å¦æ‰“å¼€ï¼‰ï¼Œä»è€Œè®©çˆ¶ç»„ä»¶ä¸ç”¨è¿‡åº¦ç®¡ç† Modal çš„å†…éƒ¨é€»è¾‘ã€‚ä½ åªéœ€è¦ç®¡ç†æ˜¯å¦è°ƒç”¨ <code>Modal</code>ï¼Œä¸å¿…å…³å¿ƒ Modal å†…éƒ¨æ˜¯å¦‚ä½•å…³é—­æˆ–æ˜¾ç¤ºçš„ã€‚</li></ol><h5 id="2ã€ä½¿ç”¨å¤åˆç»„ä»¶æ¨¡å¼æ¥åˆ›å»ºModal"><a href="#2ã€ä½¿ç”¨å¤åˆç»„ä»¶æ¨¡å¼æ¥åˆ›å»ºModal" class="headerlink" title="2ã€ä½¿ç”¨å¤åˆç»„ä»¶æ¨¡å¼æ¥åˆ›å»ºModal"></a>2ã€ä½¿ç”¨å¤åˆç»„ä»¶æ¨¡å¼æ¥åˆ›å»ºModal</h5><p>é¦–å…ˆçœ‹ä¸€ä¸‹AddCabin.jsç°åœ¨å˜æˆäº†ä»€ä¹ˆæ ·ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">AddCabin</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Modal</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Modal.Open</span> <span class="hljs-attr">opens</span>=<span class="hljs-string">&quot;cabin-form&quot;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>&gt;</span>Add new cabin<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">Modal.Open</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Modal.Window</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;cabin-form&quot;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">CreateCabinForm</span> /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">Modal.Window</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Modal.Open</span> <span class="hljs-attr">opens</span>=<span class="hljs-string">&quot;table&quot;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>&gt;</span>Show table<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">Modal.Open</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Modal.Window</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;table&quot;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">CabinTable</span> /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">Modal.Window</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">Modal</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°å®ƒéå¸¸çš„ç®€æ´ï¼Œåªæœ‰å­ç»„ä»¶å’Œä¼ é€’ç»™å­ç»„ä»¶çš„childrenç»„ä»¶ï¼Œä»¥åŠä¼ é€’ç»™å­ç»„ä»¶çš„å¿…è¦propã€‚ç»è¿‡åˆ†æå¯ä»¥å¾—å‡ºä¸€å…±æœ‰ä¸¤ä¸ªå­ç»„ä»¶ï¼šOpenå’ŒWindowï¼ŒOpenä¼ é€’è¦æ‰“å¼€çš„windowåå­—ï¼Œå¹¶ä¸”ä¼šä¼ é€’ä¸€ä¸ªæŒ‰é’®ï¼Œè‡³äºè¿™ä¸ªæŒ‰é’®å¦‚ä½•å®ç°onClickå‡½æ•°ï¼Œéœ€è¦çœ‹Mortalç»„ä»¶ï¼›Windowä¼ é€’æœ¬çª—ä½“çš„åå­—ï¼Œå¹¶åŒ…è£¹éœ€è¦æ˜¾ç¤ºçš„è¡¨å•ã€‚ä¸¤ä¸ªwindowè¢«æ¡ä»¶æ¸²æŸ“ã€‚</p><p>ä¸‹é¢æ˜¯Mortal.jsxçš„ä¸»è¦å†…å®¹ï¼Œå®ç°å¤åˆç»„ä»¶çš„æ­¥éª¤ä¸ä¸Šé¢ç›¸åŒã€‚ï¼ˆè®°å¾—çˆ¶ç»„ä»¶è¦è¿”å›Provideræ¥æä¾›ç»™å­ç»„ä»¶å¿…è¦ä¿¡æ¯å‘€ï¼ŒJonasç¾ç¾å¿˜è®°ï¼Œå½“ç„¶æˆ‘ä¹Ÿæ²¡è®°ä½ï¼‰ æŒ‰é’®çš„æŒ‰åŠ¨å¯¼è‡´openNameè¢«è®¾ç½®ä¸ºå„ä¸ªä¼ é€’çš„åå­—ï¼Œå¹¶åœ¨windowå‡½æ•°ä¸­ä¸æ¥æ”¶åˆ°çš„çª—ä½“åå­—éªŒè¯ï¼Œå¦‚æœç›¸åŒå°±æ¸²æŸ“ï¼Œå¦åˆ™ä¸æ¸²æŸ“ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> <span class="hljs-title class_">ModalContext</span> = <span class="hljs-title function_">createContext</span>();<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Modal</span>(<span class="hljs-params">&#123; children &#125;</span>) &#123;<br>  <span class="hljs-keyword">const</span> [openName, setOpenName] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">&#x27;&#x27;</span>);<br><br>  <span class="hljs-keyword">const</span> <span class="hljs-title function_">close</span> = (<span class="hljs-params"></span>) =&gt; <span class="hljs-title function_">setOpenName</span>(<span class="hljs-string">&#x27;&#x27;</span>);<br>  <span class="hljs-keyword">const</span> open = setOpenName;<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ModalContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;&#123;</span> <span class="hljs-attr">openName</span>, <span class="hljs-attr">close</span>, <span class="hljs-attr">open</span> &#125;&#125;&gt;</span></span><br><span class="language-xml">      &#123;children&#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">ModalContext.Provider</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Open</span>(<span class="hljs-params">&#123; children, opens: opensWindowName &#125;</span>) &#123;<br>  <span class="hljs-keyword">const</span> &#123; open &#125; = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">ModalContext</span>);<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">cloneElement</span>(children, &#123; <span class="hljs-attr">onClick</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">open</span>(opensWindowName) &#125;);<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Window</span>(<span class="hljs-params">&#123; children, name &#125;</span>) &#123;<br>  <span class="hljs-keyword">const</span> &#123; openName, close &#125; = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">ModalContext</span>);<br>  <span class="hljs-keyword">if</span> (name !== openName) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br><br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">createPortal</span>(<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Overlay</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">StyledModal</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;close&#125;</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">HiXMark</span> /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>&#123;cloneElement(children, &#123; onCloseModal: close &#125;)&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">StyledModal</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">Overlay</span>&gt;</span></span>,<br><br>    <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span><br>  );<br>&#125;<br><br><span class="hljs-title class_">Modal</span>.<span class="hljs-property">Open</span> = <span class="hljs-title class_">Open</span>;<br><span class="hljs-title class_">Modal</span>.<span class="hljs-property">Window</span> = <span class="hljs-title class_">Window</span>;<br></code></pre></td></tr></table></figure><p>ğŸ’¡æ¥ä¸‹æ¥æ˜¯è¦ç‚¹ï¼ï¼ï¼ï¼æ—¢ç„¶AddCabinç»„ä»¶ä¸­æ²¡æ³•ä¼ é€’å…³é—­è¿˜æ˜¯æ‰“å¼€çª—ä½“çš„ä¿¡æ¯äº†ï¼Œé‚£æŒ‰é’®æŒ‰åŠ¨çš„å‡½æ•°å¦‚ä½•ç»‘å®šï¼Œåˆå¦‚ä½•æŠŠonClseModalä¼ é€’ç»™createCabinFormç»„ä»¶å‘¢ï¼Ÿç­”æ¡ˆåœ¨ä¸‹é¢â¬‡ï¸</p><h4 id="ï¼ˆ4ï¼‰cloneElement"><a href="#ï¼ˆ4ï¼‰cloneElement" class="headerlink" title="ï¼ˆ4ï¼‰cloneElement"></a>ï¼ˆ4ï¼‰cloneElement</h4><p>åœ¨ React ä¸­ï¼Œ<code>cloneElement</code> æ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„å·¥å…·ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤åˆç»„ä»¶æ¨¡å¼ä¸­ï¼Œå®ƒå…è®¸ä½ <strong>å…‹éš†ä¸€ä¸ª React å…ƒç´ å¹¶å‘å…¶æ·»åŠ æ–°çš„å±æ€§æˆ–ä¿®æ”¹ç°æœ‰çš„å±æ€§</strong>ï¼Œè€Œä¸æ”¹å˜åŸå§‹å…ƒç´ çš„å¤–è§‚å’Œè¡Œä¸ºã€‚å®ƒå¯ä»¥å¸®åŠ©ä½ åœ¨ä¸ç›´æ¥ä¿®æ”¹å­ç»„ä»¶çš„æƒ…å†µä¸‹ï¼Œçµæ´»åœ°ä¼ é€’é¢å¤–çš„ props æˆ–ç»‘å®šæ–°çš„äº‹ä»¶ã€‚</p><h5 id="1ã€è¦ç‚¹"><a href="#1ã€è¦ç‚¹" class="headerlink" title="1ã€è¦ç‚¹"></a>1ã€è¦ç‚¹</h5><ul><li><strong>å…‹éš†å…ƒç´ </strong>ï¼šå®ƒä¼šåŸºäºä¸€ä¸ªç°æœ‰çš„ React å…ƒç´ ï¼ˆå­ç»„ä»¶ï¼‰åˆ›å»ºä¸€ä¸ªæ–°çš„å…ƒç´ ã€‚è¿™ä¸ªå…‹éš†åçš„å…ƒç´ å¯ä»¥æ¥æ”¶æ–°çš„ <code>props</code> æˆ–è¦†ç›–ç°æœ‰çš„ <code>props</code>ã€‚</li><li><strong>ä¿æŒåŸå§‹ç»“æ„</strong>ï¼šå…‹éš†çš„å…ƒç´ ä»ç„¶ä¿æŒä¸åŸå§‹å…ƒç´ ç›¸åŒçš„å­ç»„ä»¶å±‚æ¬¡ç»“æ„å’Œæ¸²æŸ“æ–¹å¼ï¼Œä¸ä¼šå½±å“ç°æœ‰çš„ JSX ç»“æ„ã€‚</li><li>**ä¼ é€’é¢å¤–çš„ <code>props</code>**ï¼šä½ å¯ä»¥åœ¨å…‹éš†çš„è¿‡ç¨‹ä¸­å‘å…ƒç´ ä¼ é€’æ–°çš„ <code>props</code>ï¼Œæ¯”å¦‚ä¼ é€’ <code>onClick</code> äº‹ä»¶å¤„ç†å‡½æ•°æˆ–çŠ¶æ€ä¿¡æ¯ã€‚è¿™æ˜¯å¢å¼ºç»„ä»¶çš„ä¸€ä¸ªå¼ºå¤§å·¥å…·ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤åˆç»„ä»¶æ¨¡å¼ä¸­ã€‚</li></ul><h5 id="2ã€è¯­æ³•"><a href="#2ã€è¯­æ³•" class="headerlink" title="2ã€è¯­æ³•"></a>2ã€è¯­æ³•</h5><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-title class_">React</span>.<span class="hljs-title function_">cloneElement</span>(<br>  element,  <span class="hljs-comment">// éœ€è¦å…‹éš†çš„ React å…ƒç´ </span><br>  [props],  <span class="hljs-comment">// å¯é€‰ï¼šè¦æ·»åŠ æˆ–è¦†ç›–çš„ props</span><br>  [...children]  <span class="hljs-comment">// å¯é€‰ï¼šå¯ä»¥æŒ‡å®šæ–°çš„å­ç»„ä»¶</span><br>)<br></code></pre></td></tr></table></figure><h5 id="3ã€ä¼˜ç‚¹"><a href="#3ã€ä¼˜ç‚¹" class="headerlink" title="3ã€ä¼˜ç‚¹"></a>3ã€ä¼˜ç‚¹</h5><ul><li><strong>é¿å…ç›´æ¥ä¿®æ”¹å­ç»„ä»¶</strong>ï¼šä½ ä¸éœ€è¦åœ¨å­ç»„ä»¶çš„å®šä¹‰ä¸­æ˜ç¡®å¤„ç†æŸäº› propsï¼Œè€Œæ˜¯å¯ä»¥åŠ¨æ€åœ°é€šè¿‡ <code>cloneElement</code> ä¼ é€’é¢å¤–çš„å±æ€§ã€‚è¿™ç§æ–¹å¼å¯ä»¥è®©ç»„ä»¶æ›´åŠ çµæ´»ã€å¯å¤ç”¨ã€‚</li><li><strong>ä¿æŒç»„ä»¶å°è£…æ€§</strong>ï¼šçˆ¶ç»„ä»¶å¯ä»¥åœ¨ä¸æ”¹å˜å­ç»„ä»¶å†…éƒ¨å®ç°çš„æƒ…å†µä¸‹ï¼Œæ³¨å…¥æ–°çš„è¡Œä¸ºï¼Œæ¯”å¦‚æ·»åŠ  <code>onClick</code> æˆ–å…¶ä»–äº‹ä»¶å¤„ç†å™¨ã€‚</li><li><strong>åŠ¨æ€æ‰©å±•ç»„ä»¶</strong>ï¼šä½¿ç”¨ <code>cloneElement</code>ï¼Œä½ å¯ä»¥æ ¹æ®ä¸Šä¸‹æ–‡æˆ–è€…çŠ¶æ€åŠ¨æ€ä¿®æ”¹ç»„ä»¶çš„è¡Œä¸ºï¼Œè€Œä¸éœ€è¦é‡æ–°å®šä¹‰æˆ–é‡æ–°æ¸²æŸ“æ•´ä¸ªç»„ä»¶ã€‚</li></ul><h4 id="ï¼ˆ5ï¼‰æ£€æµ‹åœ¨çª—ä½“å¤–çš„ç‚¹å‡»è¡Œä¸º"><a href="#ï¼ˆ5ï¼‰æ£€æµ‹åœ¨çª—ä½“å¤–çš„ç‚¹å‡»è¡Œä¸º" class="headerlink" title="ï¼ˆ5ï¼‰æ£€æµ‹åœ¨çª—ä½“å¤–çš„ç‚¹å‡»è¡Œä¸º"></a>ï¼ˆ5ï¼‰æ£€æµ‹åœ¨çª—ä½“å¤–çš„ç‚¹å‡»è¡Œä¸º</h4><p>æˆ‘ä»¬æƒ³è¦å®ç°ä¸€ä¸ªåŠŸèƒ½ï¼šç‚¹å‡»formå¤–çš„åŒºåŸŸä¼šå…³é—­çª—ä½“ï¼Œå†æŠŠåŠŸèƒ½æŠ½è±¡æˆäº†ä¸€ä¸ªcustom hookã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> &#123; useEffect, useRef &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useHandleClickOutside</span>(<span class="hljs-params">handler, listenCapturing = <span class="hljs-literal">true</span></span>) &#123;<br>  <span class="hljs-keyword">const</span> ref = <span class="hljs-title function_">useRef</span>();<br>  <span class="hljs-title function_">useEffect</span>(<br>    <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleClick</span>(<span class="hljs-params">e</span>) &#123;<br>        <span class="hljs-keyword">if</span> (ref.<span class="hljs-property">current</span> &amp;&amp; !ref.<span class="hljs-property">current</span>.<span class="hljs-title function_">contains</span>(e.<span class="hljs-property">target</span>)) &#123;<br>          <span class="hljs-title function_">handler</span>();<br>        &#125;<br>      &#125;<br>      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;click&#x27;</span>, handleClick, listenCapturing);<br>      <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span><br>        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">&#x27;click&#x27;</span>, handleClick, listenCapturing);<br>    &#125;,<br>    [handler, listenCapturing]<br>  );<br><br>  <span class="hljs-keyword">return</span> ref;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç„¶ååœ¨<code>Modal.js</code>ä¸­çš„<code>window</code>å‡½æ•°ä¸­ä½¿ç”¨è¯¥<code>hook</code>ï¼Œå¹¶æŠŠrefç»‘å®šåˆ°ç»„ä»¶æ ‘ä¸Šï¼š<StyledModal ref={ref}></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> ref = <span class="hljs-title function_">useHandleClickOutside</span>(close);<br></code></pre></td></tr></table></figure><p><strong>è¦ç‚¹è§£æï¼š</strong></p><h5 id="1ã€listenCapturingçš„å¿…è¦æ€§"><a href="#1ã€listenCapturingçš„å¿…è¦æ€§" class="headerlink" title="1ã€listenCapturingçš„å¿…è¦æ€§"></a>1ã€<code>listenCapturing</code>çš„å¿…è¦æ€§</h5><p>è½¬ç§»è‡³æœ¬èŠ‚æœ€åä¸€ä¸ªæ¨¡å—è®²è§£ã€‚</p><h5 id="2ã€if-ref-current-ref-current-contains-e-target"><a href="#2ã€if-ref-current-ref-current-contains-e-target" class="headerlink" title="2ã€if (ref.current &amp;&amp; !ref.current.contains(e.target))"></a>2ã€<code>if (ref.current &amp;&amp; !ref.current.contains(e.target))</code></h5><ul><li><code>ref.current</code> æ˜¯é€šè¿‡ React çš„ <code>useRef</code> hook è·å–åˆ°çš„ DOM å…ƒç´ çš„å¼•ç”¨ã€‚é€šå¸¸æˆ‘ä»¬ä¼šä½¿ç”¨ <code>useRef</code> æ¥ä¿å­˜ä¸€ä¸ªå¯¹ DOM å…ƒç´ çš„å¼•ç”¨ï¼Œä»è€Œèƒ½å¤Ÿåœ¨ React çš„å‡½æ•°ç»„ä»¶ä¸­è®¿é—®å®ƒã€‚<code>ref.current</code> æŒ‡å‘ä½ æƒ³æ£€æµ‹æ˜¯å¦è¢«ç‚¹å‡»çš„å…ƒç´ ï¼ˆæ¯”å¦‚æ¨¡æ€æ¡†ã€å¼¹çª—ç­‰ï¼‰ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>ref</code> ä¼šä¿å­˜æ¨¡æ€æ¡†çš„å¼•ç”¨ã€‚</li></ul><p>å¦‚æœ <code>ref.current</code> å­˜åœ¨ï¼Œè¯´æ˜å…ƒç´ å·²ç»æ¸²æŸ“åˆ°é¡µé¢ä¸Šï¼Œå¹¶ä¸” <code>ref</code> æ­£å¸¸æŒ‡å‘è¯¥ DOM å…ƒç´ ã€‚</p><ul><li><code>e.target</code> æ˜¯è§¦å‘ç‚¹å‡»äº‹ä»¶çš„å…ƒç´ ï¼Œå³ç”¨æˆ·ç‚¹å‡»çš„å…·ä½“ DOM å…ƒç´ ã€‚</li><li><code>ref.current.contains(e.target)</code> æ˜¯ç”¨æ¥æ£€æŸ¥è¿™ä¸ª <code>e.target</code> æ˜¯å¦åœ¨ <code>ref.current</code> æ‰€å¼•ç”¨çš„å…ƒç´ å†…éƒ¨ã€‚</li></ul><h3 id="å››ã€ä½¿ç”¨å¤åˆç»„ä»¶æ¨¡å¼åˆ›å»ºå¯é‡ç”¨çš„table"><a href="#å››ã€ä½¿ç”¨å¤åˆç»„ä»¶æ¨¡å¼åˆ›å»ºå¯é‡ç”¨çš„table" class="headerlink" title="å››ã€ä½¿ç”¨å¤åˆç»„ä»¶æ¨¡å¼åˆ›å»ºå¯é‡ç”¨çš„table"></a>å››ã€ä½¿ç”¨å¤åˆç»„ä»¶æ¨¡å¼åˆ›å»ºå¯é‡ç”¨çš„table</h3><h4 id="ï¼ˆ1ï¼‰åˆ›å»ºå¯å¤åˆä½¿ç”¨çš„Tableç»„ä»¶"><a href="#ï¼ˆ1ï¼‰åˆ›å»ºå¯å¤åˆä½¿ç”¨çš„Tableç»„ä»¶" class="headerlink" title="ï¼ˆ1ï¼‰åˆ›å»ºå¯å¤åˆä½¿ç”¨çš„Tableç»„ä»¶"></a>ï¼ˆ1ï¼‰åˆ›å»ºå¯å¤åˆä½¿ç”¨çš„Tableç»„ä»¶</h4><p>é‡ç‚¹ï¼š1ã€ä¼ é€’columnså‚æ•°  2ã€Bodyæ¥å—çš„propæ˜¯dataå’Œrender</p><p>å­ç»„ä»¶æ¥å—columnsé“å…·æ˜¯ä¸ºäº†æä¾›ç»™å®ƒä»¬çš„æ¡ä»¶æ¸²æŸ“é£æ ¼ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> <span class="hljs-title class_">TableContext</span> = <span class="hljs-title function_">createContext</span>();<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Table</span>(<span class="hljs-params">&#123; columns, children &#125;</span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">TableContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;&#123;</span> <span class="hljs-attr">columns</span> &#125;&#125;&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">StyledTable</span> <span class="hljs-attr">role</span>=<span class="hljs-string">&quot;table&quot;</span>&gt;</span>&#123;children&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">StyledTable</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">TableContext.Provider</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Header</span>(<span class="hljs-params">&#123; children &#125;</span>) &#123;<br>  <span class="hljs-keyword">const</span> &#123; columns &#125; = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">TableContext</span>);<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">StyledHeader</span> <span class="hljs-attr">as</span>=<span class="hljs-string">&quot;header&quot;</span> <span class="hljs-attr">role</span>=<span class="hljs-string">&quot;row&quot;</span> <span class="hljs-attr">columns</span>=<span class="hljs-string">&#123;columns&#125;</span>&gt;</span></span><br><span class="language-xml">      &#123;children&#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">StyledHeader</span>&gt;</span></span><br>  );<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Row</span>(<span class="hljs-params">&#123; children &#125;</span>) &#123;<br>  <span class="hljs-keyword">const</span> &#123; columns &#125; = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">TableContext</span>);<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">StyledRow</span> <span class="hljs-attr">role</span>=<span class="hljs-string">&quot;row&quot;</span> <span class="hljs-attr">columns</span>=<span class="hljs-string">&#123;columns&#125;</span>&gt;</span></span><br><span class="language-xml">      &#123;children&#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">StyledRow</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Body</span>(<span class="hljs-params">&#123; data, render &#125;</span>) &#123;<br>  <span class="hljs-keyword">if</span> (!data.<span class="hljs-property">length</span>) <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Empty</span>&gt;</span> No data to show at the moment<span class="hljs-tag">&lt;/<span class="hljs-name">Empty</span>&gt;</span></span>;<br><br>  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">StyledBody</span>&gt;</span>&#123;data.map(render)&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">StyledBody</span>&gt;</span></span>;<br>&#125;<br><br><span class="hljs-title class_">Table</span>.<span class="hljs-property">Header</span> = <span class="hljs-title class_">Header</span>;<br><span class="hljs-title class_">Table</span>.<span class="hljs-property">Row</span> = <span class="hljs-title class_">Row</span>;<br><span class="hljs-title class_">Table</span>.<span class="hljs-property">Body</span> = <span class="hljs-title class_">Body</span>;<br><span class="hljs-title class_">Table</span>.<span class="hljs-property">Footer</span> = <span class="hljs-title class_">Footer</span>;<br></code></pre></td></tr></table></figure><h4 id="ï¼ˆ2ï¼‰ä¿®æ”¹Tableç»„ä»¶"><a href="#ï¼ˆ2ï¼‰ä¿®æ”¹Tableç»„ä»¶" class="headerlink" title="ï¼ˆ2ï¼‰ä¿®æ”¹Tableç»„ä»¶"></a>ï¼ˆ2ï¼‰ä¿®æ”¹Tableç»„ä»¶</h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;<span class="hljs-title class_">Table</span> columns=<span class="hljs-string">&quot;0.6fr 1.8fr 2.2fr 1fr 1fr 1fr&quot;</span>&gt;<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Table.Header</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Cabin<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Capacity<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Price<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Discount<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">Table.Header</span>&gt;</span></span><br><br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Table.Body</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">data</span>=<span class="hljs-string">&#123;cabins&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">render</span>=<span class="hljs-string">&#123;(cabin)</span> =&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">CabinRow</span> <span class="hljs-attr">cabin</span>=<span class="hljs-string">&#123;cabin&#125;</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;cabin.id&#125;</span> /&gt;</span>&#125;</span><br><span class="language-xml">      /&gt;</span><br>&lt;/<span class="hljs-title class_">Table</span>&gt;<br></code></pre></td></tr></table></figure><p>åˆ©ç”¨åˆ°äº†renderå±æ€§ã€‚</p><h3 id="äº”ã€ä½¿ç”¨å¤åˆç»„ä»¶æ¨¡å¼åˆ›å»ºå¯é‡ç”¨çš„æ–‡å­—èœå•"><a href="#äº”ã€ä½¿ç”¨å¤åˆç»„ä»¶æ¨¡å¼åˆ›å»ºå¯é‡ç”¨çš„æ–‡å­—èœå•" class="headerlink" title="äº”ã€ä½¿ç”¨å¤åˆç»„ä»¶æ¨¡å¼åˆ›å»ºå¯é‡ç”¨çš„æ–‡å­—èœå•"></a>äº”ã€ä½¿ç”¨å¤åˆç»„ä»¶æ¨¡å¼åˆ›å»ºå¯é‡ç”¨çš„æ–‡å­—èœå•</h3><p>çœŸçš„æœ‰é‚£ä¹ˆä¸€ä¸¢ä¸¢å¤æ‚ã€‚ã€‚ã€‚ä¸çŸ¥é“ä»ä½•ä¸‹æ‰‹æ¥è®°å½•äº†æˆ‘éƒ½</p><p>é¦–å…ˆè®©æˆ‘ä»¬çœ‹çœ‹è¿™ä¸ªMenué•¿ä»€ä¹ˆæ ·ï¼š</p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240925105934378.png" alt="image-20240925105934378" style="zoom: 67%;" /><h4 id="ï¼ˆ1ï¼‰Menu-jsx"><a href="#ï¼ˆ1ï¼‰Menu-jsx" class="headerlink" title="ï¼ˆ1ï¼‰Menu.jsx"></a>ï¼ˆ1ï¼‰Menu.jsx</h4><h5 id="1ã€çˆ¶ç»„ä»¶Menus"><a href="#1ã€çˆ¶ç»„ä»¶Menus" class="headerlink" title="1ã€çˆ¶ç»„ä»¶Menus"></a>1ã€çˆ¶ç»„ä»¶Menus</h5><p>ä¸¤ä¸ªçŠ¶æ€å˜é‡ï¼šopenIdï¼šæ§åˆ¶æ‰“å¼€èœå•çš„cabinï¼Œpositionï¼šæ§åˆ¶èœå•çš„ä½ç½®ï¼ŒListçš„styleçš„æ§åˆ¶å˜é‡ï¼Œå› æ­¤éœ€è¦é€šè¿‡è®¡ç®—å¾—å‡ºï¼Œå¹¶ä¼ é€’ç»™StyledList</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Menus</span>(<span class="hljs-params">&#123; children &#125;</span>) &#123;<br>  <span class="hljs-keyword">const</span> [openId, setOpenId] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">&#x27;&#x27;</span>);<br>  <span class="hljs-keyword">const</span> [position, setPosition] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);<br><br>  <span class="hljs-keyword">const</span> <span class="hljs-title function_">close</span> = (<span class="hljs-params"></span>) =&gt; <span class="hljs-title function_">setOpenId</span>(<span class="hljs-string">&#x27;&#x27;</span>);<br>  <span class="hljs-keyword">const</span> open = setOpenId;<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">MenuContext.Provider</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;&#123;</span> <span class="hljs-attr">openId</span>, <span class="hljs-attr">close</span>, <span class="hljs-attr">open</span>, <span class="hljs-attr">position</span>, <span class="hljs-attr">setPosition</span> &#125;&#125;</span></span><br><span class="hljs-tag"><span class="language-xml">    &gt;</span></span><br><span class="language-xml">      &#123;children&#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">MenuContext.Provider</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="2ã€å­ç»„ä»¶Toggle-jsxï¼ˆå¼€å…³-åˆ‡æ¢ï¼‰"><a href="#2ã€å­ç»„ä»¶Toggle-jsxï¼ˆå¼€å…³-åˆ‡æ¢ï¼‰" class="headerlink" title="2ã€å­ç»„ä»¶Toggle.jsxï¼ˆå¼€å…³&#x2F;åˆ‡æ¢ï¼‰"></a>2ã€å­ç»„ä»¶Toggle.jsxï¼ˆå¼€å…³&#x2F;åˆ‡æ¢ï¼‰</h5><p>rectå¸¸é‡æ˜¯å¾—åˆ°äº†Toggleçš„ä½ç½®ï¼Œç„¶åå†æ ¹æ®å®ƒçš„å€¼æ¥è®¾ç½®position</p><p>è¿™é‡Œçš„é€»è¾‘è¿ç®—çš„æ„æ€æ˜¯ï¼šå¦‚æœç‚¹å‡»äº†è¿™ä¸ªå¼€å…³ï¼Œæ­¤æ—¶å¦‚æœæ²¡æœ‰openIdï¼ˆä¹Ÿå°±æ˜¯æ²¡æœ‰Listè¢«æ‰“å¼€ï¼‰æˆ–è€…å½“å‰çš„openIdä¸æ­¤cabinçš„idä¸åŒï¼ˆå¦å¤–ä¸€ä¸ªListç°åœ¨æ­£æ‰“å¼€ï¼‰ï¼Œå°±æŠŠopenIdè®¾ç½®ä¸ºæ­¤cabinçš„idï¼›å¦åˆ™çš„è¯ï¼Œä¹Ÿå°±æ˜¯è¯´openId&#x3D;&#x3D;&#x3D;idï¼ˆå½“å‰æ‰“å¼€çš„Listå°±æ˜¯è¿™ä¸ªcabinçš„ï¼‰ï¼Œå°±æŠŠListå…³ä¸Šï¼ˆå°†openIdè®¾ç½®ä¸ºç©ºï¼‰</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Toggle</span>(<span class="hljs-params">&#123; id &#125;</span>) &#123;<br>  <span class="hljs-keyword">const</span> &#123; openId, close, open, setPosition &#125; = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">MenuContext</span>);<br><br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleClick</span>(<span class="hljs-params">e</span>) &#123;<br>    <span class="hljs-keyword">const</span> rect = e.<span class="hljs-property">target</span>.<span class="hljs-title function_">closest</span>(<span class="hljs-string">&#x27;button&#x27;</span>).<span class="hljs-title function_">getBoundingClientRect</span>();<br>    <span class="hljs-title function_">setPosition</span>(&#123;<br>      <span class="hljs-attr">x</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span> - rect.<span class="hljs-property">width</span> - rect.<span class="hljs-property">x</span>,<br>      <span class="hljs-attr">y</span>: rect.<span class="hljs-property">y</span> + rect.<span class="hljs-property">height</span> + <span class="hljs-number">8</span>,<br>    &#125;);<br><br>    openId === <span class="hljs-string">&#x27;&#x27;</span> || openId !== id ? <span class="hljs-title function_">open</span>(id) : <span class="hljs-title function_">close</span>();<br>  &#125;<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">StyledToggle</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;handleClick&#125;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">HiEllipsisVertical</span> /&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">StyledToggle</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="3ã€å­ç»„ä»¶List"><a href="#3ã€å­ç»„ä»¶List" class="headerlink" title="3ã€å­ç»„ä»¶List"></a>3ã€å­ç»„ä»¶List</h5><p>æ¥æ”¶positionå¹¶ä¼ é€’ç»™styledListç»„ä»¶ï¼Œå¹¶ä¸”ä½¿ç”¨<code>useHandleClickOutside</code>  hookï¼Œæ¥ä½¿å¾—å®ƒåœ¨æ£€æµ‹åˆ°Listå¤–çš„ç‚¹å‡»åå…³é—­ã€‚å¹¶ä¸”ä½¿ç”¨Portalï¼Œå°†ç»„ä»¶å‘ˆç°åœ¨bodyå±‚æ¬¡ã€‚</p><p>æ¥æ”¶cabinçš„idï¼Œå¦‚æœå’ŒopenIdä¸ç›¸åŒåˆ™ä¸è¿›è¡Œæ¸²æŸ“ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">List</span>(<span class="hljs-params">&#123; id, children &#125;</span>) &#123;<br>  <span class="hljs-keyword">const</span> &#123; openId, position, close &#125; = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">MenuContext</span>);<br>  <span class="hljs-keyword">const</span> ref = <span class="hljs-title function_">useHandleClickOutside</span>(close);<br><br>  <span class="hljs-keyword">if</span> (openId !== id) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">createPortal</span>(<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">StyledList</span> <span class="hljs-attr">position</span>=<span class="hljs-string">&#123;position&#125;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&#123;ref&#125;</span>&gt;</span></span><br><span class="language-xml">      &#123;children&#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">StyledList</span>&gt;</span></span>,<br>    <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="4ã€å­ç»„ä»¶Button"><a href="#4ã€å­ç»„ä»¶Button" class="headerlink" title="4ã€å­ç»„ä»¶Button"></a>4ã€å­ç»„ä»¶Button</h5><p>æ¥æ”¶CabinRowä¼ é€’çš„iconå’ŒonClickå‡½æ•°ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Button</span>(<span class="hljs-params">&#123; children, icon, onClick &#125;</span>) &#123;<br>  <span class="hljs-keyword">const</span> &#123; close &#125; = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">MenuContext</span>);<br><br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleClick</span>(<span class="hljs-params"></span>) &#123;<br>    onClick?.();<br>    <span class="hljs-title function_">close</span>();<br>  &#125;<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">StyledButton</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;handleClick&#125;</span>&gt;</span></span><br><span class="language-xml">        &#123;icon&#125;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;children&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">StyledButton</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="5ã€å­ç»„ä»¶Menu"><a href="#5ã€å­ç»„ä»¶Menu" class="headerlink" title="5ã€å­ç»„ä»¶Menu"></a>5ã€å­ç»„ä»¶Menu</h5><p>ç›´æ¥ç­‰äºstyled componentï¼Œä¸è¿”å›å®é™…å†…å®¹ã€‚</p><h4 id="ï¼ˆ2ï¼‰å¾ˆä¸ä¸€æ ·çš„CabinRow-jsx"><a href="#ï¼ˆ2ï¼‰å¾ˆä¸ä¸€æ ·çš„CabinRow-jsx" class="headerlink" title="ï¼ˆ2ï¼‰å¾ˆä¸ä¸€æ ·çš„CabinRow.jsx"></a>ï¼ˆ2ï¼‰å¾ˆä¸ä¸€æ ·çš„CabinRow.jsx</h4><p>å› ä¸ºæˆ‘ä»¬çš„æŒ‰é’®æ‰“å¼€çš„çª—å£ä¹Ÿéœ€è¦æœ‰Modalçš„å½¢å¼ï¼Œå› æ­¤æˆ‘ä»¬å°†ä¸¤ä¸ªå¤åˆç»„ä»¶æ¨¡å¼ç»„åˆåœ¨äº†ä¸€èµ·ã€‚</p><p>ä»”ç»†çœ‹ä¼šå‘ç°ï¼ŒModalæ˜¯åœ¨æœ€å¤–å±‚ï¼Œä½¿å¾—æ•´ä¸ªMenuéƒ½æ˜¯å…¶å­ç»„ä»¶ï¼Œç„¶åå†ç”¨Menus.MenuåŒ…è£¹ï¼Œé¦–å…ˆè¦æ¸²æŸ“çš„æ˜¯Toggleï¼ˆå›ºå®šåœ¨å±å¹•ä¸Šï¼‰ï¼Œç„¶åæ˜¯Menus.ListåŒ…è£¹ä½ç›¸åº”çš„æŒ‰é’®ï¼Œå…¶ä¸­ç¼–è¾‘å’Œåˆ›å»ºçš„æŒ‰é’®è¢«Modal.OpenåŒ…è£¹ä½ï¼Œä½¿å¾—æŒ‰é’®æŒ‰åŠ¨åæ‰“å¼€çš„çª—æˆ·æ˜¯Mortalå½¢å¼çš„ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs jsx"> &lt;<span class="hljs-title class_">Modal</span>&gt;<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Menus.Menu</span>&gt;</span></span><br><span class="language-xml">         <span class="hljs-tag">&lt;<span class="hljs-name">Menus.Toggle</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&#123;cabinId&#125;</span> /&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">         <span class="hljs-tag">&lt;<span class="hljs-name">Menus.List</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&#123;cabinId&#125;</span>&gt;</span></span><br><span class="language-xml">              <span class="hljs-tag">&lt;<span class="hljs-name">Menus.Button</span> <span class="hljs-attr">icon</span>=<span class="hljs-string">&#123;</span>&lt;<span class="hljs-attr">HiSquare2Stack</span> /&gt;</span>&#125; onClick=&#123;handleDuplicate&#125;&gt;</span><br><span class="language-xml">                  Duplicate</span><br><span class="language-xml">              <span class="hljs-tag">&lt;/<span class="hljs-name">Menus.Button</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">              <span class="hljs-tag">&lt;<span class="hljs-name">Modal.Open</span> <span class="hljs-attr">opens</span>=<span class="hljs-string">&quot;edit&quot;</span>&gt;</span></span><br><span class="language-xml">                 <span class="hljs-tag">&lt;<span class="hljs-name">Menus.Button</span> <span class="hljs-attr">icon</span>=<span class="hljs-string">&#123;</span>&lt;<span class="hljs-attr">HiPencil</span> /&gt;</span>&#125;&gt;Edit<span class="hljs-tag">&lt;/<span class="hljs-name">Menus.Button</span>&gt;</span></span><br><span class="language-xml">              <span class="hljs-tag">&lt;/<span class="hljs-name">Modal.Open</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">              <span class="hljs-tag">&lt;<span class="hljs-name">Modal.Open</span> <span class="hljs-attr">opens</span>=<span class="hljs-string">&quot;delete&quot;</span>&gt;</span></span><br><span class="language-xml">                 <span class="hljs-tag">&lt;<span class="hljs-name">Menus.Button</span> <span class="hljs-attr">icon</span>=<span class="hljs-string">&#123;</span>&lt;<span class="hljs-attr">HiTrash</span> /&gt;</span>&#125;&gt;Delete<span class="hljs-tag">&lt;/<span class="hljs-name">Menus.Button</span>&gt;</span></span><br><span class="language-xml">              <span class="hljs-tag">&lt;/<span class="hljs-name">Modal.Open</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;/<span class="hljs-name">Menus.List</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">Modal.Window</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;edit&quot;</span>&gt;</span></span><br><span class="language-xml">              <span class="hljs-tag">&lt;<span class="hljs-name">CreateCabinForm</span> <span class="hljs-attr">cabinToEdit</span>=<span class="hljs-string">&#123;cabin&#125;</span> /&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;/<span class="hljs-name">Modal.Window</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">Modal.Window</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;delete&quot;</span>&gt;</span></span><br><span class="language-xml">              <span class="hljs-tag">&lt;<span class="hljs-name">ConfirmDelete</span></span></span><br><span class="hljs-tag"><span class="language-xml">                  <span class="hljs-attr">resourceName</span>=<span class="hljs-string">&quot;cabins&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">                  <span class="hljs-attr">disabled</span>=<span class="hljs-string">&#123;isDeleting&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">                  <span class="hljs-attr">onConfirm</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> deleteCabin(&#123; id: cabinId &#125;)&#125;</span><br><span class="language-xml">              /&gt;</span><br><span class="language-xml">          <span class="hljs-tag">&lt;/<span class="hljs-name">Modal.Window</span>&gt;</span></span><br><span class="language-xml">     <span class="hljs-tag">&lt;/<span class="hljs-name">Menus.Menu</span>&gt;</span></span><br>&lt;/<span class="hljs-title class_">Modal</span>&gt;<br></code></pre></td></tr></table></figure><h3 id="ï¼Ÿã€äº‹ä»¶è§¦å‘é˜¶æ®µ"><a href="#ï¼Ÿã€äº‹ä»¶è§¦å‘é˜¶æ®µ" class="headerlink" title="ï¼Ÿã€äº‹ä»¶è§¦å‘é˜¶æ®µ"></a>ï¼Ÿã€äº‹ä»¶è§¦å‘é˜¶æ®µ</h3><p>åœ¨<code>useHandleClickOutside</code> Hook ä¸­ï¼Œ<code>listenCapturing</code> å‚æ•°æ§åˆ¶äº‹ä»¶ç›‘å¬çš„æ–¹å¼ï¼ˆæ•è·é˜¶æ®µæˆ–å†’æ³¡é˜¶æ®µï¼‰ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå°† <code>listenCapturing</code> è®¾ç½®ä¸º <code>true</code>ï¼Œè¡¨ç¤ºäº‹ä»¶æ˜¯åœ¨æ•è·é˜¶æ®µè¢«å¤„ç†çš„ã€‚å¦‚æœä¸ä¼ é€’ <code>true</code>ï¼Œåˆ™ä¼šä½¿ç”¨å†’æ³¡é˜¶æ®µç›‘å¬äº‹ä»¶ã€‚</p><h4 id="ï¼ˆ1ï¼‰è¯¦ç»†åŸå› "><a href="#ï¼ˆ1ï¼‰è¯¦ç»†åŸå› " class="headerlink" title="ï¼ˆ1ï¼‰è¯¦ç»†åŸå› "></a>ï¼ˆ1ï¼‰è¯¦ç»†åŸå› </h4><h5 id="1-äº‹ä»¶ä¼ æ’­æœºåˆ¶ï¼š"><a href="#1-äº‹ä»¶ä¼ æ’­æœºåˆ¶ï¼š" class="headerlink" title="1. äº‹ä»¶ä¼ æ’­æœºåˆ¶ï¼š"></a>1. äº‹ä»¶ä¼ æ’­æœºåˆ¶ï¼š</h5><ul><li><strong>æ•è·é˜¶æ®µï¼ˆCapturing Phaseï¼‰</strong>ï¼šäº‹ä»¶ä»é¡¶å±‚å…ƒç´ ï¼ˆå¦‚ <code>document</code>ï¼‰å¼€å§‹ï¼Œä¸€è·¯å‘ä¸‹ä¼ æ’­åˆ°äº‹ä»¶ç›®æ ‡å…ƒç´ ï¼ˆä½ ç‚¹å‡»çš„å…ƒç´ ï¼‰ã€‚</li><li><strong>ç›®æ ‡é˜¶æ®µï¼ˆTarget Phaseï¼‰</strong>ï¼šäº‹ä»¶åœ¨ç›®æ ‡å…ƒç´ ä¸Šè§¦å‘ã€‚</li><li><strong>å†’æ³¡é˜¶æ®µï¼ˆBubbling Phaseï¼‰</strong>ï¼šäº‹ä»¶ä»ç›®æ ‡å…ƒç´ å¼€å§‹ï¼Œå‘ä¸Šä¼ æ’­å›é¡¶å±‚å…ƒç´ ã€‚</li></ul><h5 id="2-ä»£ç ä¸­çš„äº‹ä»¶ç›‘å¬å™¨ï¼š"><a href="#2-ä»£ç ä¸­çš„äº‹ä»¶ç›‘å¬å™¨ï¼š" class="headerlink" title="2. ä»£ç ä¸­çš„äº‹ä»¶ç›‘å¬å™¨ï¼š"></a>2. ä»£ç ä¸­çš„äº‹ä»¶ç›‘å¬å™¨ï¼š</h5><p>åœ¨ <code>useHandleClickOutside</code> ä¸­ï¼Œå½“ <code>listenCapturing</code> ä¸º <code>false</code>ï¼ˆé»˜è®¤å€¼ï¼‰æ—¶ï¼Œ<code>document.addEventListener(&#39;click&#39;, handleClick)</code> ä¼šåœ¨<strong>å†’æ³¡é˜¶æ®µ</strong>æ·»åŠ äº‹ä»¶ç›‘å¬å™¨ã€‚</p><h5 id="3-äº‹ä»¶è§¦å‘çš„é¡ºåºï¼š"><a href="#3-äº‹ä»¶è§¦å‘çš„é¡ºåºï¼š" class="headerlink" title="3. äº‹ä»¶è§¦å‘çš„é¡ºåºï¼š"></a>3. äº‹ä»¶è§¦å‘çš„é¡ºåºï¼š</h5><p>å½“ä½ ç‚¹å‡»æ‰“å¼€æŒ‰é’®æ—¶ï¼š</p><ol><li><strong>ç›®æ ‡å…ƒç´ çš„äº‹ä»¶å¤„ç†å™¨</strong>ï¼šé¦–å…ˆè§¦å‘æŒ‰é’®çš„ <code>onClick</code> äº‹ä»¶å¤„ç†å™¨ï¼Œè°ƒç”¨ <code>open</code> å‡½æ•°ï¼Œæ‰“å¼€æ¨¡æ€æ¡†ã€‚</li><li>**äº‹ä»¶å†’æ³¡åˆ° <code>document</code>**ï¼šæ¥ä¸‹æ¥ï¼Œäº‹ä»¶å†’æ³¡åˆ° <code>document</code>ï¼Œè§¦å‘åœ¨ <code>document</code> ä¸Šæ³¨å†Œçš„å†’æ³¡é˜¶æ®µçš„äº‹ä»¶ç›‘å¬å™¨ï¼Œå³ä½ çš„ <code>handleClick</code> å‡½æ•°ã€‚</li></ol><p>åœ¨ <code>handleClick</code> ä¸­å‘ç”Ÿäº†ä»€ä¹ˆï¼š</p><ul><li>æ­¤æ—¶ï¼Œæ¨¡æ€æ¡†å·²ç»è¢«æ‰“å¼€ï¼Œ<code>ref.current</code> å·²ç»è¢«èµ‹å€¼ä¸ºæ¨¡æ€æ¡†çš„ DOM å…ƒç´ ã€‚</li><li><code>handleClick</code>æ£€æŸ¥ <code>if (ref.current &amp;&amp; !ref.current.contains(e.target))</code><ul><li><code>e.target</code> æ˜¯ç‚¹å‡»çš„æ‰“å¼€æŒ‰é’®ï¼Œå®ƒä¸åœ¨æ¨¡æ€æ¡†å†…éƒ¨ã€‚</li><li>å› æ­¤æ¡ä»¶ä¸º <code>true</code>ï¼Œ<code>handleClick</code> è°ƒç”¨ <code>close</code> å‡½æ•°ï¼Œå…³é—­æ¨¡æ€æ¡†ã€‚</li></ul></li></ul><h5 id="4-ç»“æœï¼š"><a href="#4-ç»“æœï¼š" class="headerlink" title="4. ç»“æœï¼š"></a>4. ç»“æœï¼š</h5><ul><li>æ¨¡æ€æ¡†è¢«æ‰“å¼€åï¼Œç«‹å³åˆè¢«å…³é—­ã€‚</li><li>ç”¨æˆ·ä½“éªŒä¸Šè¡¨ç°ä¸ºæ¨¡æ€æ¡†æ— æ³•è¢«æ‰“å¼€ã€‚</li></ul><h4 id="ï¼ˆ2ï¼‰ä¸ºä»€ä¹ˆè®¾ç½®-listenCapturing-ä¸º-true-å¯ä»¥è§£å†³é—®é¢˜ï¼š"><a href="#ï¼ˆ2ï¼‰ä¸ºä»€ä¹ˆè®¾ç½®-listenCapturing-ä¸º-true-å¯ä»¥è§£å†³é—®é¢˜ï¼š" class="headerlink" title="ï¼ˆ2ï¼‰ä¸ºä»€ä¹ˆè®¾ç½® listenCapturing ä¸º true å¯ä»¥è§£å†³é—®é¢˜ï¼š"></a>ï¼ˆ2ï¼‰ä¸ºä»€ä¹ˆè®¾ç½® <code>listenCapturing</code> ä¸º <code>true</code> å¯ä»¥è§£å†³é—®é¢˜ï¼š</h4><p>å½“å°† <code>listenCapturing</code> è®¾ç½®ä¸º <code>true</code>ï¼Œäº‹ä»¶ç›‘å¬å™¨ä¼šåœ¨<strong>æ•è·é˜¶æ®µ</strong>è§¦å‘ã€‚äº‹ä»¶ä¼ æ’­é¡ºåºå˜ä¸ºï¼š</p><ol><li><strong>äº‹ä»¶æ•è·é˜¶æ®µ</strong>ï¼š<ul><li>äº‹ä»¶ä» <code>document</code> å¼€å§‹ï¼Œå‘ä¸‹ä¼ æ’­ã€‚</li><li>åœ¨ <code>document</code> ä¸Šçš„æ•è·é˜¶æ®µï¼Œè§¦å‘ <code>handleClick</code>ã€‚</li><li><strong>æ­¤æ—¶æ¨¡æ€æ¡†è¿˜æœªè¢«æ‰“å¼€</strong>ï¼ˆå› ä¸ºæŒ‰é’®çš„ <code>onClick</code> è¿˜æœªæ‰§è¡Œï¼‰ã€‚</li><li><code>ref.current</code> å°šæœªå®šä¹‰ï¼Œ<code>ref.current &amp;&amp; !ref.current.contains(e.target)</code> ä¸º <code>false</code>ï¼Œ<code>handleClick</code> ä¸æ‰§è¡Œä»»ä½•æ“ä½œã€‚</li></ul></li><li><strong>ç›®æ ‡å…ƒç´ çš„äº‹ä»¶å¤„ç†å™¨</strong>ï¼š<ul><li>äº‹ä»¶åˆ°è¾¾ç›®æ ‡å…ƒç´ ï¼ˆæ‰“å¼€æŒ‰é’®ï¼‰ã€‚</li><li>è§¦å‘æŒ‰é’®çš„ <code>onClick</code>ï¼Œè°ƒç”¨ <code>open</code>ï¼Œæ¨¡æ€æ¡†è¢«æ‰“å¼€ã€‚</li></ul></li><li><strong>äº‹ä»¶å†’æ³¡é˜¶æ®µ</strong>ï¼š<ul><li>äº‹ä»¶ä»ç›®æ ‡å…ƒç´ å‘ä¸Šå†’æ³¡ï¼Œä½†å› ä¸ºä½ çš„äº‹ä»¶ç›‘å¬å™¨åªåœ¨æ•è·é˜¶æ®µï¼Œä¸ä¼šå†æ¬¡è§¦å‘ <code>handleClick</code>ã€‚</li></ul></li></ol><p><strong>ç»“æœï¼š</strong></p><ul><li>æ¨¡æ€æ¡†æˆåŠŸæ‰“å¼€ã€‚</li><li><code>handleClick</code> ä¸ä¼šåœ¨æ¨¡æ€æ¡†æ‰“å¼€åç«‹å³è°ƒç”¨ <code>close</code>ã€‚</li></ul>]]></content>
    
    
    <categories>
      
      <category>reactè¯¾ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>react</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>reactè¯¾ç¨‹19-ReactQuery</title>
    <link href="/2024/09/22/react%E8%AF%BE%E7%A8%8B19-ReactQuery/"/>
    <url>/2024/09/22/react%E8%AF%BE%E7%A8%8B19-ReactQuery/</url>
    
    <content type="html"><![CDATA[<p>æœ¬èŠ‚è¯¾å­¦ä¹ èƒ½å¤Ÿè¿œç¨‹ç®¡ç†supabaseçš„React QueryğŸ¤“</p><span id="more"></span><p>ï¼ˆJonasç»ˆäºèƒ½æ•™ä»–æœ€çˆ±çš„åº“äº†ï¼Œä»–å¾ˆæ¿€åŠ¨ğŸ™‰ï¼‰</p><h3 id="ä¸€Â·ã€ä»€ä¹ˆæ˜¯React-Query"><a href="#ä¸€Â·ã€ä»€ä¹ˆæ˜¯React-Query" class="headerlink" title="ä¸€Â·ã€ä»€ä¹ˆæ˜¯React Query"></a>ä¸€Â·ã€ä»€ä¹ˆæ˜¯React Query</h3><h4 id="ï¼ˆ1ï¼‰ç‰¹ç‚¹"><a href="#ï¼ˆ1ï¼‰ç‰¹ç‚¹" class="headerlink" title="ï¼ˆ1ï¼‰ç‰¹ç‚¹"></a>ï¼ˆ1ï¼‰ç‰¹ç‚¹</h4><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240922103715683.png" alt="image-20240922103715683" style="zoom: 33%;" /><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240922103801784.png" alt="image-20240922103801784" style="zoom: 33%;" /></p><p><strong>âœ…æ•°æ®è·å–</strong>ï¼šæä¾›ç®€æ´çš„ API æ¥å‘èµ·å¼‚æ­¥è¯·æ±‚ï¼Œæ”¯æŒ REST APIã€GraphQL ç­‰æ•°æ®æºã€‚</p><p>âœ…<strong>ç¼“å­˜ç®¡ç†</strong>ï¼šè‡ªåŠ¨ç¼“å­˜æ•°æ®ï¼Œé¿å…ä¸å¿…è¦çš„ç½‘ç»œè¯·æ±‚ï¼Œæé«˜æ€§èƒ½ã€‚</p><p>âœ…<strong>å®æ—¶æ›´æ–°</strong>ï¼šæ”¯æŒå®æ—¶æ•°æ®æ›´æ–°ï¼Œé€šè¿‡è½®è¯¢ã€WebSocket æˆ–åå°åˆ·æ–°æœºåˆ¶æ¥ä¿æŒæ•°æ®çš„æ–°é²œåº¦ã€‚</p><p><strong>âœ…è‡ªåŠ¨é‡è¯•</strong>ï¼šå½“è¯·æ±‚å¤±è´¥æ—¶ï¼Œå¯ä»¥è‡ªåŠ¨é‡è¯•è¯·æ±‚ï¼Œå¢å¼ºåº”ç”¨çš„ç¨³å®šæ€§ã€‚</p><p><strong>âœ…æŸ¥è¯¢å’Œå˜æ›´</strong>ï¼šä½¿ç”¨ <code>useQuery</code> æ¥è·å–æ•°æ®ï¼Œä½¿ç”¨ <code>useMutation</code> æ¥å¤„ç†æ•°æ®çš„å¢åˆ æ”¹æ“ä½œã€‚</p><p>âœ…<strong>çŠ¶æ€ç®¡ç†</strong>ï¼šæä¾›ä¸°å¯Œçš„çŠ¶æ€ç®¡ç†ï¼Œå…è®¸å¼€å‘è€…è½»æ¾å¤„ç†åŠ è½½ã€é”™è¯¯å’ŒæˆåŠŸçŠ¶æ€ã€‚</p><p><strong>âœ…æ˜“äºé›†æˆ</strong>ï¼šå¯ä»¥ä¸ç°æœ‰çš„ React åº”ç”¨è½»æ¾é›†æˆï¼Œæ— éœ€é‡æ„ä»£ç ã€‚</p><h4 id="ï¼ˆ2ï¼‰ä¸å…¶ä»–ç±»ä¼¼çš„åº“ç›¸æ¯”çš„ä¼˜ç‚¹"><a href="#ï¼ˆ2ï¼‰ä¸å…¶ä»–ç±»ä¼¼çš„åº“ç›¸æ¯”çš„ä¼˜ç‚¹" class="headerlink" title="ï¼ˆ2ï¼‰ä¸å…¶ä»–ç±»ä¼¼çš„åº“ç›¸æ¯”çš„ä¼˜ç‚¹"></a>ï¼ˆ2ï¼‰ä¸å…¶ä»–ç±»ä¼¼çš„åº“ç›¸æ¯”çš„ä¼˜ç‚¹</h4><p>React Query ç›¸å¯¹äºå…¶ä»–ç±»ä¼¼åº“ï¼ˆå¦‚ Reduxã€Apollo Clientã€SWR ç­‰ï¼‰æœ‰å‡ ä¸ªç‹¬ç‰¹çš„ä¼˜åŠ¿å’Œç‰¹ç‚¹ï¼š</p><ol><li><strong>æ•°æ®è·å–ä¸ç¼“å­˜åˆ†ç¦»</strong></li></ol><p>React Query ä¸“æ³¨äºæ•°æ®è·å–å’Œç¼“å­˜ç®¡ç†ï¼Œè€Œä¸æ˜¯å…¨å±€çŠ¶æ€ç®¡ç†ã€‚è¿™ä½¿å¾—å®ƒæ›´åŠ ç®€æ´å’Œé«˜æ•ˆï¼Œä¸“æ³¨äºå¼‚æ­¥æ•°æ®çš„æµåŠ¨ï¼Œè€Œä¸éœ€è¦ç®¡ç†å…¶ä»–çŠ¶æ€ã€‚</p><ol start="2"><li><strong>è‡ªåŠ¨ç¼“å­˜å’Œæ— ç¼æ›´æ–°</strong></li></ol><p>React Query ä¼šè‡ªåŠ¨ç¼“å­˜è¯·æ±‚çš„æ•°æ®ï¼Œå¹¶åœ¨æ•°æ®è¿‡æœŸæ—¶è‡ªåŠ¨é‡æ–°è·å–ã€‚å®ƒæä¾›äº†å¼ºå¤§çš„æ•°æ®åŒæ­¥æœºåˆ¶ï¼Œå…è®¸å®æ—¶æ›´æ–°å’Œåå°åˆ·æ–°ï¼Œä¿æŒæ•°æ®çš„æ–°é²œåº¦ã€‚</p><ol start="3"><li><strong>è½»é‡çº§çš„ API</strong></li></ol><p>ä¸ Redux ç­‰åº“ç›¸æ¯”ï¼ŒReact Query æä¾›äº†æ›´ç®€å•çš„ APIã€‚ä½¿ç”¨ <code>useQuery</code> å’Œ <code>useMutation</code> è¿›è¡Œæ•°æ®æ“ä½œï¼Œæ— éœ€ç¼–å†™å¤æ‚çš„ reducer å’Œ actionã€‚</p><ol start="4"><li><strong>å†…ç½®çš„çŠ¶æ€ç®¡ç†</strong></li></ol><p>React Query å†…ç½®äº†åŠ è½½ã€é”™è¯¯å’ŒæˆåŠŸç­‰çŠ¶æ€ç®¡ç†ï¼Œæ— éœ€é¢å¤–å¤„ç†ã€‚å¼€å‘è€…å¯ä»¥è½»æ¾è·å–è¯·æ±‚çŠ¶æ€ï¼Œä»è€Œæ›´å¥½åœ°å¤„ç† UI æ¸²æŸ“ã€‚</p><ol start="5"><li><strong>è‡ªåŠ¨é‡è¯•å’Œé”™è¯¯å¤„ç†</strong></li></ol><p>å®ƒå¯ä»¥è‡ªåŠ¨é‡è¯•å¤±è´¥çš„è¯·æ±‚ï¼Œå¹¶å…è®¸å¼€å‘è€…è‡ªå®šä¹‰é‡è¯•é€»è¾‘ã€‚è¿™ç§æœºåˆ¶æé«˜äº†åº”ç”¨çš„é²æ£’æ€§ã€‚</p><ol start="6"><li><strong>æ— ç¼é›†æˆ</strong></li></ol><p>React Query å¯ä»¥ä¸ä»»ä½•åç«¯ APIï¼ˆRESTã€GraphQL ç­‰ï¼‰æ— ç¼é›†æˆï¼Œæ— éœ€ç‰¹å®šçš„é…ç½®ã€‚è¿™ç§çµæ´»æ€§ä½¿å¾—å®ƒé€‚ç”¨äºå„ç§é¡¹ç›®ã€‚</p><ol start="7"><li><strong>æ”¯æŒæœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰</strong></li></ol><p>React Query æä¾›äº†æœåŠ¡ç«¯æ¸²æŸ“æ”¯æŒï¼Œå…è®¸åœ¨æœåŠ¡å™¨ç«¯é¢„å–æ•°æ®ï¼Œå¹¶åœ¨å®¢æˆ·ç«¯ä½¿ç”¨ï¼Œæå‡é¡µé¢åŠ è½½æ€§èƒ½ã€‚</p><ol start="8"><li><strong>å¼€ç®±å³ç”¨çš„ DevTools</strong></li></ol><p>React Query æä¾›äº†å¼€å‘è€…å·¥å…·ï¼Œæ–¹ä¾¿æŸ¥çœ‹å½“å‰çš„æŸ¥è¯¢çŠ¶æ€ã€ç¼“å­˜å’Œæ•°æ®ã€‚è¿™å¯¹äºè°ƒè¯•å’Œä¼˜åŒ–åº”ç”¨éå¸¸æœ‰å¸®åŠ©ã€‚</p><h3 id="äºŒã€set-up-React-Queryâœ…"><a href="#äºŒã€set-up-React-Queryâœ…" class="headerlink" title="äºŒã€set up React Queryâœ…"></a>äºŒã€set up React Queryâœ…</h3><blockquote><p><code>npm i date-fns</code>  æ—¥æœŸåŠŸèƒ½ï¼ˆè·Ÿè§†é¢‘ä¸ä¸€æ ·äº†ï¼Œå¯¼å…¥æ–¹å¼ï¼Œé—®GPTå§ï¼‰</p></blockquote><h4 id="ï¼ˆ1ï¼‰å®‰è£…é…ç½®"><a href="#ï¼ˆ1ï¼‰å®‰è£…é…ç½®" class="headerlink" title="ï¼ˆ1ï¼‰å®‰è£…é…ç½®"></a>ï¼ˆ1ï¼‰å®‰è£…é…ç½®</h4><p>â­•<code>npm i @tanstack/react-query@4</code>       <a href="https://tanstack.com/query/v3">https://tanstack.com/query/v3</a></p><p>ï¼ˆ23å¹´æ˜¯v4ï¼Œç°åœ¨å·²ç»æ˜¯v5äº†ğŸ™‰ï¼‰</p><p> â­•<code>npm i @tanstack/react-query-devtools@4</code>å®‰è£…Dev Toolï¼ˆè¿™æ¬¡ä¸ç”¨æµè§ˆå™¨å†…å®‰è£…ï¼‰</p><h4 id="ï¼ˆ2ï¼‰åˆæ­¥ä½¿ç”¨"><a href="#ï¼ˆ2ï¼‰åˆæ­¥ä½¿ç”¨" class="headerlink" title="ï¼ˆ2ï¼‰åˆæ­¥ä½¿ç”¨"></a>ï¼ˆ2ï¼‰åˆæ­¥ä½¿ç”¨</h4><p>åœ¨App.jsä¸­å†™å…¥<code>const queryClient = new QueryClient(&#123;ï¼ˆå¯é€‰é¡¹ï¼‰&#125;ï¼‰</code></p><p>ç”¨<code>&lt;QueryClientProvider client=&#123;queryClient&#125;&gt;</code>åŒ…è£¹æ•´ä¸ªApp</p><p>å­ç»„ä»¶ä¸­å†™å…¥<code>&lt;ReactQueryDevtools initialIsOpen=&#123;false&#125; /&gt;</code></p><h4 id="ï¼ˆ3ï¼‰ç¤ºä¾‹"><a href="#ï¼ˆ3ï¼‰ç¤ºä¾‹" class="headerlink" title="ï¼ˆ3ï¼‰ç¤ºä¾‹"></a>ï¼ˆ3ï¼‰ç¤ºä¾‹</h4><p>è·å–æ•°æ®çš„æ–¹å¼ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> &#123;<br>  isLoading,<br>  <span class="hljs-attr">data</span>: cabins,<br>  error,<br>&#125; = <span class="hljs-title function_">useQuery</span>(&#123;<br>  <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">&#x27;cabins&#x27;</span>],<br>  <span class="hljs-attr">queryFn</span>: getCabins,<br>&#125;);<br></code></pre></td></tr></table></figure><p>è®¾ç½®æ•°æ®ç”±freshåˆ°staleçš„æ—¶é—´ï¼šï¼ˆåœ¨App.jsï¼‰</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> queryClient = <span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryClient</span>(&#123;<br>  <span class="hljs-attr">defaultOptions</span>: &#123;<br>    <span class="hljs-attr">queries</span>: &#123;<br>      <span class="hljs-attr">staleTime</span>: <span class="hljs-number">0</span>,<br>    &#125;,<br>  &#125;,<br>&#125;);<br></code></pre></td></tr></table></figure><p><code>getCabins:</code>ï¼ˆä»API Docsä¸­æŸ¥çœ‹ç›¸åº”ä»£ç ï¼‰ï¼ˆè®°å¾—ä¿®æ”¹ç›¸åº”Policyæƒé™ï¼‰</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getCabins</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> &#123; data, error &#125; = <span class="hljs-keyword">await</span> supabase.<span class="hljs-title function_">from</span>(<span class="hljs-string">&#x27;cabins&#x27;</span>).<span class="hljs-title function_">select</span>(<span class="hljs-string">&#x27;*&#x27;</span>);<br>  <span class="hljs-keyword">if</span> (error) &#123;<br>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&#x27;cabins could not be loaded&#x27;</span>);<br>  &#125;<br>  <span class="hljs-keyword">return</span> data;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ä¸‰ã€mutatingï¼ˆå˜å¼‚ï¼‰æ•°æ®"><a href="#ä¸‰ã€mutatingï¼ˆå˜å¼‚ï¼‰æ•°æ®" class="headerlink" title="ä¸‰ã€mutatingï¼ˆå˜å¼‚ï¼‰æ•°æ®"></a>ä¸‰ã€mutatingï¼ˆå˜å¼‚ï¼‰æ•°æ®</h3><p>å½“åœ¨supabaseä¸­ä¿®æ”¹æ•°æ®åï¼Œç½‘ç«™ä¸ŠåŠ è½½å‡ºçš„è¡¨å•ä¼šè·ŸéšstaleTimeæ”¹å˜ã€‚</p><p>ä½†æ˜¯å¦‚æœæ˜¯è¿œç¨‹ä¿®æ”¹æ•°æ®å‘¢ï¼Ÿï¼ˆæ¯”å¦‚åˆ é™¤ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼‰</p><h4 id="ï¼ˆ1ï¼‰åˆ é™¤æ–¹ç¨‹ï¼ˆæ”¾ç½®åœ¨apiCabinsä¸­ï¼‰"><a href="#ï¼ˆ1ï¼‰åˆ é™¤æ–¹ç¨‹ï¼ˆæ”¾ç½®åœ¨apiCabinsä¸­ï¼‰" class="headerlink" title="ï¼ˆ1ï¼‰åˆ é™¤æ–¹ç¨‹ï¼ˆæ”¾ç½®åœ¨apiCabinsä¸­ï¼‰"></a>ï¼ˆ1ï¼‰åˆ é™¤æ–¹ç¨‹ï¼ˆæ”¾ç½®åœ¨apiCabinsä¸­ï¼‰</h4><p>ä¿®æ”¹äº†eqï¼ˆï¼‰ä¸­çš„å†…å®¹ï¼Œå¯ä»¥å’ŒDocsä¸­çš„ä»£ç åšç…§åº”</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">deleteCabin</span>(<span class="hljs-params">&#123; id &#125;</span>) &#123;<br>  <span class="hljs-keyword">const</span> &#123; data, error &#125; = <span class="hljs-keyword">await</span> supabase.<span class="hljs-title function_">from</span>(<span class="hljs-string">&#x27;cabins&#x27;</span>).<span class="hljs-title function_">delete</span>().<span class="hljs-title function_">eq</span>(<span class="hljs-string">&#x27;id&#x27;</span>, id);<br>  <span class="hljs-keyword">if</span> (error) &#123;<br>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&#x27;cabins could not be deleted&#x27;</span>);<br>  &#125;<br>  <span class="hljs-keyword">return</span> data;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ç¬¬ä¸€ä¸ªå€¼</strong> <code>&#39;id&#39;</code>ï¼š</p><ul><li>è¿™ä¸ªå€¼æ˜¯æ•°æ®åº“è¡¨ä¸­çš„åˆ—åï¼Œè¡¨ç¤ºä½ è¦åŒ¹é…çš„å­—æ®µã€‚åœ¨è¿™é‡Œï¼Œå®ƒæŒ‡çš„æ˜¯å°å±‹è¡¨ä¸­çš„ <code>id</code> åˆ—ã€‚</li></ul><p><strong>ç¬¬äºŒä¸ªå€¼</strong> <code>id</code>ï¼š</p><ul><li>è¿™ä¸ªå€¼æ˜¯ä½ æƒ³åˆ é™¤çš„å…·ä½“è®°å½•çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚å®ƒæ˜¯ä»ä¼ å…¥çš„å¯¹è±¡ä¸­è§£æ„å‡ºæ¥çš„ <code>id</code> å€¼ï¼Œä»£è¡¨è¦åˆ é™¤çš„å°å±‹çš„ IDã€‚</li></ul><h4 id="ï¼ˆ2ï¼‰è¿æ¥åˆ é™¤ç»„ä»¶"><a href="#ï¼ˆ2ï¼‰è¿æ¥åˆ é™¤ç»„ä»¶" class="headerlink" title="ï¼ˆ2ï¼‰è¿æ¥åˆ é™¤ç»„ä»¶"></a>ï¼ˆ2ï¼‰è¿æ¥åˆ é™¤ç»„ä»¶</h4><p>è¦ç‚¹è§£æåœ¨ä»£ç æ³¨é‡Šä¸­ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">CabinRow</span>(<span class="hljs-params">&#123; cabin &#125;</span>) &#123;<br>  <span class="hljs-keyword">const</span> &#123;<br>    <span class="hljs-attr">id</span>: cabinId,  <span class="hljs-comment">//è¿™é‡Œé‡æ„äº†åç§°ï¼Œå› æ­¤åœ¨onClickå‡½æ•°ä¸­ä¸èƒ½åªä¼ é€’ä¸€ä¸ªå‚æ•°è€Œæ˜¯éœ€è¦ä¼ é€’å¯¹è±¡</span><br>    name,<br>    maxCapacity,<br>    regularPrice,<br>    discount,<br>    image,<br>  &#125; = cabin;<br><br>  <span class="hljs-keyword">const</span> queryClient = <span class="hljs-title function_">useQueryClient</span>(); <span class="hljs-comment">//é€šè¿‡è¿™ä¸ªè‡ªå®šä¹‰hookæ¥è·å–App.Jsä¸­å»ºç«‹çš„Client</span><br><br>  <span class="hljs-keyword">const</span> &#123; <span class="hljs-attr">isLoading</span>: isDeleting, mutate &#125; = <span class="hljs-title function_">useMutation</span>(&#123;  <span class="hljs-comment">//çœ‹è¿™ä¸ªhookï¼ï¼ï¼ï¼</span><br>    <span class="hljs-attr">mutationFn</span>: deleteCabin,  <span class="hljs-comment">//è¿™æ˜¯å˜å¼‚æ•°æ®çš„æ–¹ç¨‹</span><br>    <span class="hljs-attr">onSuccess</span>: <span class="hljs-function">() =&gt;</span> &#123;       <span class="hljs-comment">//è¿™æ˜¯ç¼–è¯‘æˆåŠŸçš„å›è°ƒå‡½æ•°</span><br>      <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;Cabin successfully deleted&#x27;</span>);<br>      queryClient.<span class="hljs-title function_">invalidateQueries</span>(&#123;<br>        <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">&#x27;cabins&#x27;</span>],<br>      &#125;);   <span class="hljs-comment">//è¿™é‡Œçš„ç›®çš„æ˜¯å¼ºåˆ¶è§¦å‘é‡æ–°è·å–æ•°æ®ä»¥æ›´æ–°ç•Œé¢ï¼Œinvalidateçš„æ„æ€å°±æ˜¯æ›´æ–°</span><br>    &#125;,<br>    <span class="hljs-attr">onError</span>: <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> <span class="hljs-title function_">alert</span>(err.<span class="hljs-property">message</span>),  <span class="hljs-comment">//è¿™é‡Œæ˜¯å¤±è´¥åçš„å›è°ƒå‡½æ•°ï¼Œæ˜¾ç¤ºé”™è¯¯</span><br>  &#125;);<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">TableRow</span> <span class="hljs-attr">role</span>=<span class="hljs-string">&quot;row&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&#123;image&#125;</span> /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Cabin</span>&gt;</span>&#123;name&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">Cabin</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Fits up to &#123;maxCapacity&#125; guests<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Price</span>&gt;</span>&#123;formatCurrency(regularPrice)&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">Price</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Discount</span>&gt;</span>&#123;formatCurrency(discount)&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">Discount</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> mutate(&#123; id: cabinId &#125;)&#125; disabled=&#123;isDeleting&#125;&gt;</span><br><span class="language-xml">        delete         &#123;/*å°±æ˜¯è¿™é‡Œçš„å‡½æ•°ï¼Œå‚æ•°ä½¿ç”¨&#123;idï¼šcabinId&#125;è€Œä¸æ˜¯ç›´æ¥æ˜¯cabinId*/&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">TableRow</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ï¼ˆ3ï¼‰è£…é¥°é€šçŸ¥ï¼ˆReact-Toastï¼‰"><a href="#ï¼ˆ3ï¼‰è£…é¥°é€šçŸ¥ï¼ˆReact-Toastï¼‰" class="headerlink" title="ï¼ˆ3ï¼‰è£…é¥°é€šçŸ¥ï¼ˆReact Toastï¼‰"></a>ï¼ˆ3ï¼‰è£…é¥°é€šçŸ¥ï¼ˆReact Toastï¼‰</h4><p>â­•<code>npm i react-hot-toast</code>     <a href="https://react-hot-toast.com/%EF%BC%88%E5%A5%BD%E5%8F%AF%E7%88%B1%E7%9A%84%E7%95%8C%E9%9D%A2hhh%EF%BC%89">https://react-hot-toast.com/ï¼ˆå¥½å¯çˆ±çš„ç•Œé¢hhhï¼‰</a></p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240922164720981.png" alt="image-20240922164720981"></p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240922164746787.png" alt="image-20240922164746787"></p><h5 id="1ã€é¦–å…ˆï¼šï¼ˆå…ˆå»æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼‰åœ¨App-jsçš„æ¶æ„ä¸­ï¼Œåœ¨å­ç»„ä»¶çš„æœ€åå†™ä¸Šï¼š"><a href="#1ã€é¦–å…ˆï¼šï¼ˆå…ˆå»æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼‰åœ¨App-jsçš„æ¶æ„ä¸­ï¼Œåœ¨å­ç»„ä»¶çš„æœ€åå†™ä¸Šï¼š" class="headerlink" title="1ã€é¦–å…ˆï¼šï¼ˆå…ˆå»æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼‰åœ¨App.jsçš„æ¶æ„ä¸­ï¼Œåœ¨å­ç»„ä»¶çš„æœ€åå†™ä¸Šï¼š"></a>1ã€é¦–å…ˆï¼šï¼ˆå…ˆå»æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼‰åœ¨App.jsçš„æ¶æ„ä¸­ï¼Œåœ¨å­ç»„ä»¶çš„æœ€åå†™ä¸Šï¼š</h5><p>ï¼ˆçƒ¤é¢åŒ…æœºå½“é€šçŸ¥ä¹Ÿå¤ªå¥½ç¬‘äº†å§hhhhï¼‰</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;<span class="hljs-title class_">Toaster</span><br>        position=<span class="hljs-string">&quot;top-center&quot;</span>  <span class="hljs-comment">//ä½ç½®</span><br>        gutter=&#123;<span class="hljs-number">12</span>&#125;          <span class="hljs-comment">//å„ä¸ªtoastçš„é—´è·</span><br>        containerStyle=&#123;&#123; <span class="hljs-attr">margin</span>: <span class="hljs-string">&#x27;8px&#x27;</span> &#125;&#125;    <span class="hljs-comment">//å¤–è¾¹è·</span><br>        toastOptions=&#123;&#123;   <span class="hljs-comment">//å®šä¹‰äº†ä¸åŒç±»å‹ toast çš„æ˜¾ç¤ºé€‰é¡¹ã€‚</span><br>          <span class="hljs-attr">success</span>: &#123; <br>            <span class="hljs-attr">duration</span>: <span class="hljs-number">3000</span>ï¼Œ    <span class="hljs-comment">//æŒç»­æ—¶é—´</span><br>          &#125;,<br>          <span class="hljs-attr">error</span>: &#123;<br>            <span class="hljs-attr">duration</span>: <span class="hljs-number">5000</span>,<br>          &#125;,<br>          <span class="hljs-attr">style</span>: &#123;<br>            <span class="hljs-attr">fontSize</span>: <span class="hljs-string">&#x27;16px&#x27;</span>,<br>            <span class="hljs-attr">maxWidth</span>: <span class="hljs-string">&#x27;500px&#x27;</span>,<br>            <span class="hljs-attr">padding</span>: <span class="hljs-string">&#x27;16px 24px&#x27;</span>,<br>            <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">&#x27;var(--color-grey-0)&#x27;</span>,<br>            <span class="hljs-attr">color</span>: <span class="hljs-string">&#x27;var(--color-grey-700)&#x27;</span>,<br>          &#125;,<br>        &#125;&#125;<br>      /&gt;<br></code></pre></td></tr></table></figure><h5 id="2ã€ä½¿ç”¨"><a href="#2ã€ä½¿ç”¨" class="headerlink" title="2ã€ä½¿ç”¨"></a>2ã€ä½¿ç”¨</h5><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx">toast.<span class="hljs-title function_">success</span>(<span class="hljs-string">&#x27;Cabin successfully deleted&#x27;</span>);<br></code></pre></td></tr></table></figure><h3 id="å››ã€React-Hook-Form"><a href="#å››ã€React-Hook-Form" class="headerlink" title="å››ã€React Hook Form"></a>å››ã€React Hook Form</h3><p>â­•<code>npm i react-hook-form@7</code></p><h4 id="ï¼ˆ1ï¼‰å…¥é—¨"><a href="#ï¼ˆ1ï¼‰å…¥é—¨" class="headerlink" title="ï¼ˆ1ï¼‰å…¥é—¨"></a>ï¼ˆ1ï¼‰å…¥é—¨</h4><p>éå¸¸å¥½çš„åº“ï¼Œä½¿æäº¤è¡¨æ ¼æ–¹ä¾¿ã€‚</p><h5 id="1ã€const-register-handleSubmit-useForm"><a href="#1ã€const-register-handleSubmit-useForm" class="headerlink" title="1ã€const { register, handleSubmit } = useForm();"></a>1ã€<code>const &#123; register, handleSubmit &#125; = useForm();</code></h5><ul><li>**<code>register</code>**ï¼šè¿™æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºå°†è¡¨å•å­—æ®µæ³¨å†Œåˆ° React Hook Form ä¸­ï¼Œä»¥ä¾¿å®ƒèƒ½å¤Ÿè·Ÿè¸ªå…¶çŠ¶æ€å’ŒéªŒè¯ã€‚</li><li>**<code>handleSubmit</code>**ï¼šè¿™æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºå¤„ç†è¡¨å•æäº¤äº‹ä»¶ã€‚å½“ç”¨æˆ·æäº¤è¡¨å•æ—¶ï¼Œå®ƒä¼šè°ƒç”¨ä½ æä¾›çš„æäº¤å¤„ç†å‡½æ•°ã€‚</li></ul><h5 id="2ã€åœ¨inputå­—æ®µä¸­åŠ å…¥registerï¼š"><a href="#2ã€åœ¨inputå­—æ®µä¸­åŠ å…¥registerï¼š" class="headerlink" title="2ã€åœ¨inputå­—æ®µä¸­åŠ å…¥registerï¼š"></a>2ã€åœ¨inputå­—æ®µä¸­åŠ å…¥registerï¼š</h5><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;<span class="hljs-title class_">Input</span> type=<span class="hljs-string">&quot;text&quot;</span> id=<span class="hljs-string">&quot;name&quot;</span> &#123;...<span class="hljs-title function_">register</span>(<span class="hljs-string">&#x27;name&#x27;</span>)&#125; /&gt;<br></code></pre></td></tr></table></figure><h5 id="3ã€æ·»åŠ æäº¤å‡½æ•°"><a href="#3ã€æ·»åŠ æäº¤å‡½æ•°" class="headerlink" title="3ã€æ·»åŠ æäº¤å‡½æ•°"></a>3ã€æ·»åŠ æäº¤å‡½æ•°</h5><p>è¿™æ˜¯æˆ‘ä»¬è‡ªå·±åˆ›å»ºçš„Formç»„ä»¶ï¼Œæ·»åŠ onSubmitå‡½æ•°ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;<span class="hljs-title class_">Form</span> onSubmit=&#123;<span class="hljs-title function_">handleSubmit</span>(onSubmit)&#125;&gt;  <br></code></pre></td></tr></table></figure><p>è¿™é‡Œæ˜¯onSubmitå‡½æ•°ï¼šï¼ˆç„¶åè¡¨æ ¼é‡Œçš„æ•°æ®å°±å®Œç¾å‡ºç°äº†ï¼‰</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">onSubmit</span>(<span class="hljs-params">data</span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);<br> &#125;<br></code></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯è¢«registeråçš„inputå­—æ®µçš„propï¼Œå¤šäº†ä¸ä¸€æ ·çš„ä¸œè¥¿ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240922182919583.png" alt="image-20240922182919583"></p><h5 id="4ã€ä½¿ç”¨Formåˆ›å»ºæ–°çš„Cabin"><a href="#4ã€ä½¿ç”¨Formåˆ›å»ºæ–°çš„Cabin" class="headerlink" title="4ã€ä½¿ç”¨Formåˆ›å»ºæ–°çš„Cabin"></a>4ã€ä½¿ç”¨Formåˆ›å»ºæ–°çš„Cabin</h5><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">createCabin</span>(<span class="hljs-params">newCabin</span>) &#123;<br>  <span class="hljs-keyword">const</span> &#123; data, error &#125; = <span class="hljs-keyword">await</span> supabase<br>    .<span class="hljs-title function_">from</span>(<span class="hljs-string">&#x27;cabins&#x27;</span>)<br>    .<span class="hljs-title function_">insert</span>([newCabin])<br>    .<span class="hljs-title function_">select</span>();<br>  <span class="hljs-keyword">if</span> (error) &#123;<br>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&#x27;cabins could not be created&#x27;</span>);<br>  &#125;<br>  <span class="hljs-keyword">return</span> data;<br>&#125;<br></code></pre></td></tr></table></figure><p>å…¶å®æ²¡å•¥ç‰¹åˆ«çš„ï¼Œæ³¨æ„è¡¨å•çš„å†…å®¹å’Œcabinçš„ç»“æ„ä¸€è‡´å°±è¡Œã€‚</p><h4 id="ï¼ˆ2ï¼‰è¡¨å•çš„é”™è¯¯å¤„ç†"><a href="#ï¼ˆ2ï¼‰è¡¨å•çš„é”™è¯¯å¤„ç†" class="headerlink" title="ï¼ˆ2ï¼‰è¡¨å•çš„é”™è¯¯å¤„ç†"></a>ï¼ˆ2ï¼‰è¡¨å•çš„é”™è¯¯å¤„ç†</h4><blockquote><p>â€React Hook Formæœ€é—ªäº®è€€çœ¼çš„åœ°æ–¹æ˜¯è¡¨å•é”™è¯¯éªŒè¯â€œ</p></blockquote><h5 id="1ã€"><a href="#1ã€" class="headerlink" title="1ã€"></a>1ã€</h5><p>å…ˆçœ‹çœ‹æˆ‘ä»¬é€šè¿‡useFormè·å¾—äº†ä»€ä¹ˆï¼š</p><p>â­<code>const &#123; register, handleSubmit, reset, getValues, formState &#125; = useForm();</code></p><ul><li>**<code>reset</code>**ï¼šç”¨äºé‡ç½®è¡¨å•çš„å€¼åˆ°åˆå§‹çŠ¶æ€ï¼Œé€šå¸¸åœ¨æäº¤æˆåŠŸåè°ƒç”¨ã€‚</li><li>**<code>getValues</code>**ï¼šè·å–å½“å‰è¡¨å•å­—æ®µçš„å€¼ï¼Œå¯ä»¥åœ¨éœ€è¦æ—¶è·å–å­—æ®µçš„æœ€æ–°å€¼ã€‚</li><li>**<code>formState</code>**ï¼šåŒ…å«è¡¨å•çš„çŠ¶æ€ä¿¡æ¯ï¼Œå¦‚ <code>isSubmitting</code>ã€<code>isValid</code> å’Œ <code>errors</code> ç­‰ï¼Œæ–¹ä¾¿è¿›è¡Œè¡¨å•çŠ¶æ€çš„ç®¡ç†å’Œå±•ç¤ºã€‚</li></ul><p>äºæ˜¯â€¦â€¦</p><ul><li>å¯ä»¥åœ¨onSuccessçš„å›è°ƒå‡½æ•°ä¸­æ·»åŠ  reset()ï¼Œæ¸…ç©ºè¡¨å•</li><li>const { errors } &#x3D; formState;æ¥è·å¾—é”™è¯¯ä¿¡æ¯ä»¥æ˜¾ç¤ºåœ¨uiç•Œé¢ï¼ŒFormçš„onSubmitå‡½æ•°ä¸­æ·»åŠ onErrorï¼š <code>&lt;Form onSubmit=&#123;handleSubmit(onSubmit, onError)&#125;&gt;</code>ï¼Œå¦‚æœè¡¨å•æäº¤ä¸æˆåŠŸå°±ä¼šè°ƒç”¨onErrorå‡½æ•°ï¼Œå®ƒçš„å‚æ•°æ˜¯errors</li></ul><h5 id="2ã€è¡¨å•éªŒè¯"><a href="#2ã€è¡¨å•éªŒè¯" class="headerlink" title="2ã€è¡¨å•éªŒè¯"></a>2ã€è¡¨å•éªŒè¯</h5><p>éªŒè¯å†…å®¹åœ¨registerä¸­æ·»åŠ ï¼Œä¾‹å¦‚</p><ul><li>maxCapacityè¡¨å•ï¼š</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&#123;...<span class="hljs-title function_">register</span>(<span class="hljs-string">&#x27;maxCapacity&#x27;</span>, &#123;<br>   <span class="hljs-attr">required</span>: <span class="hljs-string">&#x27;This field is requied&#x27;</span>,<br>   <span class="hljs-attr">min</span>: &#123;<br>     <span class="hljs-attr">value</span>: <span class="hljs-number">1</span>,<br>     <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;Capacity should be at least 1&#x27;</span>,<br>     &#125;,<br>&#125;)&#125;<br></code></pre></td></tr></table></figure><ul><li>discountè¡¨å•ï¼šï¼ˆvalidateå…³é”®å­—ï¼šè‡ªå®šä¹‰éªŒè¯ï¼‰âœ…åº”ç”¨getValueså‡½æ•°è®¿é—®è¡¨å†…æ•°æ®</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&#123;...<span class="hljs-title function_">register</span>(<span class="hljs-string">&#x27;discount&#x27;</span>, &#123;<br>   <span class="hljs-attr">required</span>: <span class="hljs-string">&#x27;This field is requied&#x27;</span>,<br>   <span class="hljs-attr">validate</span>: <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span><br>      value &lt;= <span class="hljs-title function_">getValues</span>().<span class="hljs-property">regularPrice</span> ||<br>      <span class="hljs-string">&#x27;DisCount should be less than regular price &#x27;</span>,<br>&#125;)&#125;<br></code></pre></td></tr></table></figure><h3 id="äº”ã€ä¸Šä¼ å›¾ç‰‡åˆ°supabase"><a href="#äº”ã€ä¸Šä¼ å›¾ç‰‡åˆ°supabase" class="headerlink" title="äº”ã€ä¸Šä¼ å›¾ç‰‡åˆ°supabase"></a>äº”ã€ä¸Šä¼ å›¾ç‰‡åˆ°supabase</h3><p>â­•<a href="https://supabase.com/docs/reference/javascript/storage-from-upload%E8%AE%BF%E9%97%AE%E6%AD%A4%E7%BD%91%E7%AB%99%E6%89%BE%E5%AF%BB%E8%AF%A6%E7%BB%86%E4%BF%A1%E6%81%AF">https://supabase.com/docs/reference/javascript/storage-from-uploadè®¿é—®æ­¤ç½‘ç«™æ‰¾å¯»è¯¦ç»†ä¿¡æ¯</a></p><p>é¦–å…ˆéœ€è¦è®¾ç½®rlpï¼ˆPolicyï¼‰</p><h4 id="ï¼ˆ1ï¼‰å»ºç«‹å‡½æ•°"><a href="#ï¼ˆ1ï¼‰å»ºç«‹å‡½æ•°" class="headerlink" title="ï¼ˆ1ï¼‰å»ºç«‹å‡½æ•°"></a>ï¼ˆ1ï¼‰å»ºç«‹å‡½æ•°</h4><h5 id="1ã€å¾—åˆ°å›¾ç‰‡åå’Œå›¾ç‰‡è·¯å¾„"><a href="#1ã€å¾—åˆ°å›¾ç‰‡åå’Œå›¾ç‰‡è·¯å¾„" class="headerlink" title="1ã€å¾—åˆ°å›¾ç‰‡åå’Œå›¾ç‰‡è·¯å¾„"></a>1ã€å¾—åˆ°å›¾ç‰‡åå’Œå›¾ç‰‡è·¯å¾„</h5><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> imageName = <span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-built_in">Math</span>.random()&#125;</span>-<span class="hljs-subst">$&#123;newCabin.image.name&#125;</span>`</span>.<span class="hljs-title function_">replaceAll</span>(<span class="hljs-string">&#x27;/&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>);<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>Math.random()</code> ç”Ÿæˆéšæœºæ•°ï¼Œä»¥é˜²æ­¢å›¾ç‰‡åç§°å†²çªï¼Œå¹¶å°†å…¶ä¸åŸå›¾ç‰‡åç§°æ‹¼æ¥ã€‚<code>replaceAll</code> ç”¨äºå»é™¤ <code>/</code> å­—ç¬¦ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> imagePath = <span class="hljs-string">`<span class="hljs-subst">$&#123;supabaseUrl&#125;</span>/storage/v1/object/public/cabin-images/<span class="hljs-subst">$&#123;imageName&#125;</span>`</span>;<br></code></pre></td></tr></table></figure><p><code>supabaseUrl</code>æ˜¯åœ¨<code>supabase.js</code>ä¸­å®šä¹‰çš„ã€‚è‡³äºè·¯å¾„ï¼Œæˆ‘ä»¬åœ¨å‰é¢åˆ›å»ºäº†ä¸¤ä¸ªBuketï¼Œå…¶ä¸­ä¸€ä¸ªæ˜¯cabin-imagesï¼Œå­˜å‚¨cabinå›¾åƒï¼Œä»é‚£é‡Œå¤åˆ¶è€Œæ¥ã€‚</p><h5 id="2ã€create-cabin"><a href="#2ã€create-cabin" class="headerlink" title="2ã€create cabin"></a>2ã€create cabin</h5><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> &#123; data, error &#125; = <span class="hljs-keyword">await</span> supabase<br>    .<span class="hljs-title function_">from</span>(<span class="hljs-string">&#x27;cabins&#x27;</span>)<br>    .<span class="hljs-title function_">insert</span>([&#123; ...newCabin, <span class="hljs-attr">image</span>: imagePath &#125;]);<br><br>  <span class="hljs-keyword">if</span> (error) &#123;<br>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&#x27;Cabin could not be created&#x27;</span>);<br>  &#125;<br></code></pre></td></tr></table></figure><p>â“â“åœ¨è¿™æ®µä»£ç ä¸­ï¼Œå°† <code>image</code> å•ç‹¬åˆ—å‡ºæ¥çš„åŸå› ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š</p><ol><li><p><strong>å­˜å‚¨è·¯å¾„çš„åŠ¨æ€æ€§</strong>ï¼š</p><ul><li>å›¾ç‰‡çš„è·¯å¾„æ˜¯é€šè¿‡ç”Ÿæˆéšæœºåç§°å’Œæ„é€ å®Œæ•´ URL åŠ¨æ€åˆ›å»ºçš„ã€‚åœ¨æ’å…¥åˆ°æ•°æ®åº“ä¹‹å‰ï¼Œè·¯å¾„éœ€è¦å…ˆç¡®å®šã€‚å› æ­¤ï¼Œåœ¨æ’å…¥æ•°æ®æ—¶ï¼Œä½¿ç”¨ç”Ÿæˆçš„ <code>imagePath</code> ä½œä¸ºå­—æ®µçš„ä¸€éƒ¨åˆ†ã€‚</li></ul></li><li><p><strong>è§£è€¦æ•°æ®é€»è¾‘</strong>ï¼š</p><ul><li>å°† <code>image</code> å•ç‹¬åˆ—å‡ºå¯ä»¥æ¸…æ™°åœ°åˆ†éš”å°å±‹çš„åŸºæœ¬ä¿¡æ¯å’Œå›¾ç‰‡ä¿¡æ¯ï¼Œä½¿æ•°æ®ç»“æ„æ›´æ¸…æ™°ã€‚åœ¨æ•°æ®è¡¨ä¸­ï¼Œé€šå¸¸ä¸ç›´æ¥å­˜å‚¨æ–‡ä»¶çš„å†…å®¹ï¼Œè€Œæ˜¯å­˜å‚¨æ–‡ä»¶çš„ URL æˆ–è·¯å¾„ã€‚</li></ul></li><li><p><strong>ç¡®ä¿æ•°æ®å®Œæ•´æ€§</strong>ï¼š</p><ul><li>åœ¨åˆ›å»ºå°å±‹çš„è¿‡ç¨‹ä¸­ï¼Œé¦–å…ˆæ’å…¥å°å±‹ä¿¡æ¯ï¼Œå†ä¸Šä¼ å›¾ç‰‡ã€‚å¦‚æœä¸Šä¼ å¤±è´¥ï¼Œå¯ä»¥æ ¹æ®å­˜å‚¨çš„ <code>id</code> åˆ é™¤å¯¹åº”çš„å°å±‹è®°å½•ã€‚è¿™ç§åˆ†æ­¥éª¤å¤„ç†çš„æ–¹å¼ä½¿å¾—åœ¨å‘ç”Ÿé”™è¯¯æ—¶èƒ½å¤Ÿæ›´å®¹æ˜“åœ°å›æ»šæ“ä½œã€‚</li></ul></li><li><p><strong>æ–¹ä¾¿åç»­å¤„ç†</strong>ï¼š</p><ul><li>å¦‚æœå°† <code>image</code> ä¸å…¶ä»–å°å±‹ä¿¡æ¯åˆå¹¶åœ¨ä¸€èµ·ï¼Œåç»­å¤„ç†æ—¶å¯èƒ½ä¼šå˜å¾—å¤æ‚ã€‚ä¾‹å¦‚ï¼Œå¦‚æœéœ€è¦ä»…æ›´æ–°æˆ–åˆ é™¤å›¾ç‰‡ï¼Œå•ç‹¬å­˜å‚¨å¯ä»¥æ›´åŠ æ–¹ä¾¿ã€‚</li></ul></li></ol><h5 id="3ã€upload-image"><a href="#3ã€upload-image" class="headerlink" title="3ã€upload image"></a>3ã€upload image</h5><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> &#123; <span class="hljs-attr">error</span>: storageError &#125; = <span class="hljs-keyword">await</span> supabase.<span class="hljs-property">storage</span><br>    .<span class="hljs-title function_">from</span>(<span class="hljs-string">&#x27;cabin-images&#x27;</span>)  <span class="hljs-comment">//è¿™é‡Œå†™buketçš„åå­—</span><br>    .<span class="hljs-title function_">upload</span>(imageName, newCabin.<span class="hljs-property">image</span>);   <span class="hljs-comment">//æ‹¬å·å‰é¢å†™æ–‡ä»¶åï¼Œåé¢æ˜¯ä¸Šä¼ çš„æ–‡ä»¶æœ¬èº«</span><br></code></pre></td></tr></table></figure><h5 id="4ã€Delete-the-cabin-if-there-was-an-error-uploading-image"><a href="#4ã€Delete-the-cabin-if-there-was-an-error-uploading-image" class="headerlink" title="4ã€Delete the cabin if there was an error uploading image"></a>4ã€Delete the cabin if there was an error uploading image</h5><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">if</span> (storageError) &#123;<br>    <span class="hljs-keyword">await</span> supabase.<span class="hljs-title function_">from</span>(<span class="hljs-string">&#x27;cabins&#x27;</span>).<span class="hljs-title function_">delete</span>().<span class="hljs-title function_">eq</span>(<span class="hljs-string">&#x27;id&#x27;</span>, data.<span class="hljs-property">id</span>);<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(storageError);<br>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<br>      <span class="hljs-string">&#x27;Cabin image could not be uploaded and the cabin was not created&#x27;</span><br>    );<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ï¼ˆ2ï¼‰ä¿®æ”¹submitå‡½æ•°"><a href="#ï¼ˆ2ï¼‰ä¿®æ”¹submitå‡½æ•°" class="headerlink" title="ï¼ˆ2ï¼‰ä¿®æ”¹submitå‡½æ•°"></a>ï¼ˆ2ï¼‰ä¿®æ”¹submitå‡½æ•°</h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">onSubmit</span>(<span class="hljs-params">data</span>) &#123;<br>  <span class="hljs-title function_">mutate</span>(&#123; ...data, <span class="hljs-attr">image</span>: data.<span class="hljs-property">image</span>[<span class="hljs-number">0</span>] &#125;);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å…­ã€ä¿®æ”¹cabinä¿¡æ¯"><a href="#å…­ã€ä¿®æ”¹cabinä¿¡æ¯" class="headerlink" title="å…­ã€ä¿®æ”¹cabinä¿¡æ¯"></a>å…­ã€ä¿®æ”¹cabinä¿¡æ¯</h3><p>æ”¹bugæ”¹çš„æƒ³é¼ ã€‚ã€‚ã€‚ğŸ’€ğŸ’€ğŸ’€ğŸ’€ğŸ’€ğŸ’€ï¼ˆæŠŠJonasæ²¡æ‰¾åˆ°çš„bugæ‰¾å‡ºæ¥äº†ï¼Œæˆ‘çœŸæ£’ï¼‰</p><p>è¿™ä¸€éƒ¨åˆ†æœ‰ç‚¹å„¿éš¾ç†è§£ï¼Œè®©æˆ‘ä»”ç»†åœ°æ‹ä¸€ä¸‹ã€‚</p><h4 id="ï¼ˆ1ï¼‰ä¼ é€’è¡¨å•åŸæœ‰ä¿¡æ¯"><a href="#ï¼ˆ1ï¼‰ä¼ é€’è¡¨å•åŸæœ‰ä¿¡æ¯" class="headerlink" title="ï¼ˆ1ï¼‰ä¼ é€’è¡¨å•åŸæœ‰ä¿¡æ¯"></a>ï¼ˆ1ï¼‰ä¼ é€’è¡¨å•åŸæœ‰ä¿¡æ¯</h4><p>åœ¨ä¿®æ”¹ä¿¡æ¯çš„æ—¶å€™ï¼Œå¾ˆæ˜æ˜¾æˆ‘ä»¬æ˜¯éœ€è¦åŸæœ‰çš„ä¿¡æ¯çš„ï¼Œç„¶ååœ¨æ­¤åŸºç¡€ä¸ŠåŠ ä»¥ä¿®æ”¹ã€‚ç”±äºè¿™ä¸ªä¿®æ”¹ä¿¡æ¯çš„è¡¨å•åº”è¯¥å’Œåˆ›å»ºä¿¡æ¯çš„è¡¨å•ä¸€æ ·ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å·æ‡’ç›´æ¥å€Ÿç”¨ã€‚äºæ˜¯åœ¨CabinRowè¿™ä¸ªç»„ä»¶é‡Œï¼Œæˆ‘ä»¬å¯ä»¥æ·»åŠ ä¸€ä¸ªæŒ‰é’®ï¼š<code>edit</code>ï¼ŒonClickå‡½æ•°æ§åˆ¶showFormçŠ¶æ€å˜é‡ï¼Œç„¶åå°±å¯ä»¥åœ¨cabinRowçš„è¦ä¿®æ”¹çš„é‚£ä¸€è¡Œä¸‹é¢æ˜¾ç¤ºCreateCabinFormç»„ä»¶äº†ã€‚ï¼ˆä¼ é€’ç»™å®ƒcabinçš„æ‰€æœ‰ä¿¡æ¯ï¼‰</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&#123;showForm &amp;&amp; <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">CreateCabinForm</span> <span class="hljs-attr">cabinToEdit</span>=<span class="hljs-string">&#123;cabin&#125;</span> /&gt;</span></span>&#125;<br></code></pre></td></tr></table></figure><h4 id="ï¼ˆ2ï¼‰æ”¹å˜CreateCabinForm"><a href="#ï¼ˆ2ï¼‰æ”¹å˜CreateCabinForm" class="headerlink" title="ï¼ˆ2ï¼‰æ”¹å˜CreateCabinForm"></a>ï¼ˆ2ï¼‰æ”¹å˜CreateCabinForm</h4><h5 id="1ã€æ¥æ”¶åŸæœ‰çš„cabinä¿¡æ¯"><a href="#1ã€æ¥æ”¶åŸæœ‰çš„cabinä¿¡æ¯" class="headerlink" title="1ã€æ¥æ”¶åŸæœ‰çš„cabinä¿¡æ¯"></a>1ã€æ¥æ”¶åŸæœ‰çš„cabinä¿¡æ¯</h5><p>ç»„ä»¶å‡½æ•°æ¥æ”¶object propï¼š<code>&#123; cabinToEdit = &#123;&#125; &#125;</code></p><p><code>=&#123;&#125;</code>æ˜¯ç»™å®ƒä¸€ä¸ªdefaultå€¼ï¼Œå› ä¸ºåˆ›å»ºcabinçš„æ—¶å€™æ²¡æœ‰ä¼ é€’cabinToEditï¼Œæ‰€ä»¥å°±æ˜¯ç©ºã€‚</p><h5 id="2ã€è¿ç”¨åŸæœ‰çš„cabinä¿¡æ¯"><a href="#2ã€è¿ç”¨åŸæœ‰çš„cabinä¿¡æ¯" class="headerlink" title="2ã€è¿ç”¨åŸæœ‰çš„cabinä¿¡æ¯"></a>2ã€è¿ç”¨åŸæœ‰çš„cabinä¿¡æ¯</h5><ul><li>é¦–å…ˆè¿›è¡Œæ‹†è§£ï¼š<code>const &#123; id: editId, ...editValues &#125; = cabinToEdit;</code></li></ul><p>è¿™é‡ŒæŠŠidé‡å‘½åä¸ºeditIdæ˜¯ä¸ºäº†ä¸‹é¢ä¼ é€’å‚æ•°æ›´åŠ æ–¹ä¾¿ã€‚</p><ul><li>ç„¶åå®šä¹‰å˜é‡ï¼š<code>const isEditSession = Boolean(editId);</code></li></ul><p>æ²¡æœ‰editIdè¯´æ˜æ˜¯åˆ›å»ºcabinï¼Œè¿™ä¸ªå˜é‡å†³å®šäº†åœ¨mutateæ•°æ®çš„æ—¶å€™ç©¶ç«Ÿæ˜¯åˆ›å»ºcabinè¿˜æ˜¯ä¿®æ”¹cabinï¼Œå› ä¸ºä¸¤ä¸ªåŠ¨ä½œæ¥å—çš„å‚æ•°ä¹Ÿä¸æ„¿æ„ã€‚</p><ul><li>æ¥ç€ç»™äºˆè¡¨å•defaultValuesï¼š<code>const &#123; register, handleSubmit, reset, getValues, formState &#125; = useForm(&#123;defaultValues: isEditSession ? editValues : &#123;&#125;, &#125;);</code></li></ul><p>è¿™é‡Œä¹Ÿæ¯”è¾ƒå¥½ç†è§£ï¼Œå¦‚æœä¸æ˜¯ç¼–è¾‘é»˜è®¤å€¼å°±ä¸ºç©ºã€‚</p><h5 id="3ã€åˆ›å»ºmutate"><a href="#3ã€åˆ›å»ºmutate" class="headerlink" title="3ã€åˆ›å»ºmutate"></a>3ã€åˆ›å»ºmutate</h5><p>è¿™é‡Œè·ŸcreateCabinçš„é€»è¾‘å¾ˆåƒï¼Œåªæ˜¯æ”¹å˜äº†åå­—å’Œæ¥æ”¶çš„å‚æ•°è€Œå·²ã€‚</p><p><code>mutationFn: (&#123; newCabinData, id &#125;) =&gt; createEditCabin(newCabinData, id)</code>å…¶ä¸­è¿™ä¸€è¡Œç€é‡çœ‹ã€‚</p><p>ï¼ˆâš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸è¯·æ³¨æ„è¯·æ³¨æ„è¿™é‡ŒonSuccessåä¸èƒ½resetï¼ˆï¼‰ï¼ï¼ï¼å¦åˆ™imageå°±å˜æˆç©ºï¼ˆundefinedï¼‰çš„äº†ï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Œå…¶ä»–æ•°æ®éƒ½æ²¡é—®é¢˜ã€‚ã€‚ã€‚ï¼‰</p><p>åˆ¤æ–­å¤±è¯¯ï¼Œæ±—æµæµƒèƒŒäº†ï¼ŒåŸæ¥åªæ˜¯å› ä¸ºapié‡Œé‚£ä¸ªå‡½æ•°å†™é”™äº†ï¼Œæœ‰ä¸ªå°bugï¼ŒstartsWithè€Œä¸æ˜¯startWithã€‚ã€‚ã€‚çœŸçš„æ±—æµæµƒèƒŒäº†ï¼Œæˆ‘å°±è¯´Jonasé‚£é‡Œæ€ä¹ˆæ²¡é—®é¢˜ã€‚ã€‚ä½†æ˜¯æˆ‘çœŸçš„å¾ˆå¥‡æ€ªä¸ºä»€ä¹ˆåœ¨onSubmitå‡½æ•°é‡Œconsole.logï¼ˆimageï¼‰ä¸ºä»€ä¹ˆæ˜¯undifinedã€‚ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> &#123; <span class="hljs-attr">mutate</span>: editCabin, <span class="hljs-attr">isLoading</span>: isEditing &#125; = <span class="hljs-title function_">useMutation</span>(&#123;<br>  <span class="hljs-attr">mutationFn</span>: <span class="hljs-function">(<span class="hljs-params">&#123; newCabinData, id &#125;</span>) =&gt;</span> <span class="hljs-title function_">createEditCabin</span>(newCabinData, id),<br>  <span class="hljs-attr">onSuccess</span>: <span class="hljs-function">() =&gt;</span> &#123;<br>    toast.<span class="hljs-title function_">success</span>(<span class="hljs-string">&#x27;Cabin successfully edited&#x27;</span>);<br>    queryClient.<span class="hljs-title function_">invalidateQueries</span>(&#123;<br>      <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">&#x27;cabins&#x27;</span>],<br>    &#125;);<br>  &#125;,<br>  <span class="hljs-attr">onError</span>: <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> toast.<span class="hljs-title function_">error</span>(err.<span class="hljs-property">message</span>),<br>&#125;);<br></code></pre></td></tr></table></figure><h5 id="4ã€ä¿®æ”¹è¡¨å•disabledé€»è¾‘"><a href="#4ã€ä¿®æ”¹è¡¨å•disabledé€»è¾‘" class="headerlink" title="4ã€ä¿®æ”¹è¡¨å•disabledé€»è¾‘"></a>4ã€ä¿®æ”¹è¡¨å•disabledé€»è¾‘</h5><p><code>const isWorking = isCreating || isEditing;</code>ç”¨æ–°å˜é‡å¤„ç†</p><h5 id="5ã€ä¿®æ”¹onSubmitå‡½æ•°"><a href="#5ã€ä¿®æ”¹onSubmitå‡½æ•°" class="headerlink" title="5ã€ä¿®æ”¹onSubmitå‡½æ•°"></a>5ã€ä¿®æ”¹onSubmitå‡½æ•°</h5><p>å¦‚æœå›¾ç‰‡æ˜¯æ–°ä¸Šä¼ çš„ï¼Œé‚£ä¹ˆå®ƒåº”è¯¥æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬éœ€è¦å¾—åˆ°å¾—åˆ°çš„æ˜¯å®ƒçš„åå­—æ¥ç»™å®ƒå»ºç«‹urlï¼Œå¦‚æœæ˜¯æ—§çš„ä¿¡æ¯ï¼Œé‚£ä¹ˆå®ƒåº”è¯¥æ˜¯stringï¼Œç›´æ¥è¿”å›å®ƒæœ¬èº«å°±å¥½ã€‚</p><p>è¿™é‡Œä¸¤ä¸ªå‡½æ•°çš„å‚æ•°ä¸å¤ªä¸€æ ·ï¼Œå¯ä»¥è§‚å¯Ÿä¸€ä¸‹ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">onSubmit</span>(<span class="hljs-params">data</span>) &#123;<br>    <span class="hljs-comment">// console.log(data);</span><br>    <span class="hljs-keyword">const</span> image = <span class="hljs-keyword">typeof</span> data.<span class="hljs-property">image</span> === <span class="hljs-string">&#x27;string&#x27;</span> ? data.<span class="hljs-property">image</span> : data.<span class="hljs-property">image</span>[<span class="hljs-number">0</span>];<br>    <span class="hljs-comment">// console.log(image);</span><br><br>    <span class="hljs-keyword">if</span> (isEditSession)<br>      <span class="hljs-title function_">editCabin</span>(&#123; <span class="hljs-attr">newCabinData</span>: &#123; ...data, image &#125;, <span class="hljs-attr">id</span>: editId &#125;);<br>    <span class="hljs-keyword">else</span> <span class="hljs-title function_">createCabin</span>(&#123; ...data, <span class="hljs-attr">image</span>: image &#125;);<br>  &#125;<br></code></pre></td></tr></table></figure><h4 id="ï¼ˆ3ï¼‰åˆ›å»ºã€ä¿®æ”¹Cabinå‡½æ•°åˆäºŒä¸ºä¸€"><a href="#ï¼ˆ3ï¼‰åˆ›å»ºã€ä¿®æ”¹Cabinå‡½æ•°åˆäºŒä¸ºä¸€" class="headerlink" title="ï¼ˆ3ï¼‰åˆ›å»ºã€ä¿®æ”¹Cabinå‡½æ•°åˆäºŒä¸ºä¸€"></a>ï¼ˆ3ï¼‰åˆ›å»ºã€ä¿®æ”¹Cabinå‡½æ•°åˆäºŒä¸ºä¸€</h4><p>ä»ä¸Šåˆ°ä¸‹è®²ä¸€ä¸‹è¦ç‚¹ï¼š</p><h5 id="1ã€é€šè¿‡ä¸€ä¸ªå¾ˆå·§å¦™çš„å‡½æ•°æ¥åˆ¤å®šå›¾ç‰‡éœ€ä¸éœ€è¦é‡æ–°åˆ›å»ºUrl"><a href="#1ã€é€šè¿‡ä¸€ä¸ªå¾ˆå·§å¦™çš„å‡½æ•°æ¥åˆ¤å®šå›¾ç‰‡éœ€ä¸éœ€è¦é‡æ–°åˆ›å»ºUrl" class="headerlink" title="1ã€é€šè¿‡ä¸€ä¸ªå¾ˆå·§å¦™çš„å‡½æ•°æ¥åˆ¤å®šå›¾ç‰‡éœ€ä¸éœ€è¦é‡æ–°åˆ›å»ºUrl"></a>1ã€é€šè¿‡ä¸€ä¸ªå¾ˆå·§å¦™çš„å‡½æ•°æ¥åˆ¤å®šå›¾ç‰‡éœ€ä¸éœ€è¦é‡æ–°åˆ›å»ºUrl</h5><p>æ¥æ”¶åˆ°ä¼ è¿‡æ¥çš„æ•°æ®æ—¶ï¼Œå¦‚æœimageæ˜¯æ—§çš„ï¼Œé‚£ä¹ˆå®ƒçš„å¼€å¤´åº”è¯¥æ˜¯supabaseUrlï¼Œæ‰€ä»¥é€šè¿‡è¿™ä¸ªæ¥åˆ¤æ–­æ˜¯æ²¿ç”¨è¿™ä¸ªimageè¿˜æ˜¯é€šè¿‡å®ƒæ–°å»ºUrlã€‚</p><h5 id="2ã€ifï¼ˆï¼‰æ¡ä»¶è¯­å¥ä¸‹ï¼Œéœ€è¦æ¢ä¸€ç§æ–¹å¼æ¥æ”¶æ•°æ®"><a href="#2ã€ifï¼ˆï¼‰æ¡ä»¶è¯­å¥ä¸‹ï¼Œéœ€è¦æ¢ä¸€ç§æ–¹å¼æ¥æ”¶æ•°æ®" class="headerlink" title="2ã€ifï¼ˆï¼‰æ¡ä»¶è¯­å¥ä¸‹ï¼Œéœ€è¦æ¢ä¸€ç§æ–¹å¼æ¥æ”¶æ•°æ®"></a>2ã€ifï¼ˆï¼‰æ¡ä»¶è¯­å¥ä¸‹ï¼Œéœ€è¦æ¢ä¸€ç§æ–¹å¼æ¥æ”¶æ•°æ®</h5><p><code>await supabase.from(&#39;cabins&#39;)</code> æœ¬èº«æ˜¯ä¸€ä¸ªæŸ¥è¯¢æ“ä½œï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªæŸ¥è¯¢å¯¹è±¡ã€‚å¦‚æœç›´æ¥åœ¨ <code>if</code> è¯­å¥ä¸­ä½¿ç”¨å®ƒï¼Œå¯èƒ½å¯¼è‡´æ§åˆ¶æµä¸æ¸…æ™°ã€‚ä½ éœ€è¦å…ˆæ„å»ºæŸ¥è¯¢ï¼Œå†æ‰§è¡Œå®ƒã€‚æ‰€ä»¥æˆ‘ä»¬åœ¨è¿™é‡Œå…ˆåˆ›å»ºäº†queryæ¥æ¥æ”¶æ•°æ®</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">createEditCabin</span>(<span class="hljs-params">newCabin, id</span>) &#123;<br> <span class="hljs-comment">// console.log(newCabin, id);</span><br>  <span class="hljs-keyword">const</span> hasImagePath = newCabin.<span class="hljs-property">image</span>?.<span class="hljs-property">startsWith</span>?.(supabaseUrl);<br><br>  <span class="hljs-keyword">const</span> imageName = <span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-built_in">Math</span>.random()&#125;</span>-<span class="hljs-subst">$&#123;newCabin.image.name&#125;</span>`</span>.<span class="hljs-title function_">replaceAll</span>(<br>    <span class="hljs-string">&#x27;/&#x27;</span>,<br>    <span class="hljs-string">&#x27;&#x27;</span><br>  );<br>  <span class="hljs-keyword">const</span> imagePath = hasImagePath<br>    ? newCabin.<span class="hljs-property">image</span><br>    : <span class="hljs-string">`<span class="hljs-subst">$&#123;supabaseUrl&#125;</span>/storage/v1/object/public/cabin-images/<span class="hljs-subst">$&#123;imageName&#125;</span>`</span>;<br><br>  <span class="hljs-comment">//1.create/edit cabin</span><br>  <span class="hljs-keyword">let</span> query = supabase.<span class="hljs-title function_">from</span>(<span class="hljs-string">&#x27;cabins&#x27;</span>);<br><br>  <span class="hljs-comment">//a)create</span><br>  <span class="hljs-keyword">if</span> (!id) query = query.<span class="hljs-title function_">insert</span>([&#123; ...newCabin, <span class="hljs-attr">image</span>: imagePath &#125;]);<br><br>  <span class="hljs-comment">//b)edit</span><br>  <span class="hljs-keyword">if</span> (id) query = query.<span class="hljs-title function_">update</span>(&#123; ...newCabin, <span class="hljs-attr">image</span>: imagePath &#125;).<span class="hljs-title function_">eq</span>(<span class="hljs-string">&#x27;id&#x27;</span>, id);<br><br>  <span class="hljs-keyword">const</span> &#123; data, error &#125; = <span class="hljs-keyword">await</span> query.<span class="hljs-title function_">select</span>().<span class="hljs-title function_">single</span>();<br><br>  <span class="hljs-keyword">if</span> (error) &#123;<br>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&#x27;Cabin could not be created&#x27;</span>);<br>  &#125;<br><br>  <span class="hljs-comment">//2.upload image</span><br>  <span class="hljs-keyword">const</span> &#123; <span class="hljs-attr">error</span>: storageError &#125; = <span class="hljs-keyword">await</span> supabase.<span class="hljs-property">storage</span><br>    .<span class="hljs-title function_">from</span>(<span class="hljs-string">&#x27;cabin-images&#x27;</span>)<br>    .<span class="hljs-title function_">upload</span>(imageName, newCabin.<span class="hljs-property">image</span>);<br><br>  <span class="hljs-comment">//3.Delete the cabin if there was an error uploading image</span><br>  <span class="hljs-keyword">if</span> (storageError) &#123;<br>    <span class="hljs-keyword">await</span> supabase.<span class="hljs-title function_">from</span>(<span class="hljs-string">&#x27;cabins&#x27;</span>).<span class="hljs-title function_">delete</span>().<span class="hljs-title function_">eq</span>(<span class="hljs-string">&#x27;id&#x27;</span>, data.<span class="hljs-property">id</span>);<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(storageError);<br>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<br>      <span class="hljs-string">&#x27;Cabin image could not be uploaded and the cabin was not created&#x27;</span><br>    );<br>  &#125;<br><br>  <span class="hljs-keyword">return</span> data;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ä¸ƒã€å¤åˆ¶cabins"><a href="#ä¸ƒã€å¤åˆ¶cabins" class="headerlink" title="ä¸ƒã€å¤åˆ¶cabins"></a>ä¸ƒã€å¤åˆ¶cabins</h3><h4 id="ï¼ˆ1ï¼‰åˆ›å»ºcustom-hook"><a href="#ï¼ˆ1ï¼‰åˆ›å»ºcustom-hook" class="headerlink" title="ï¼ˆ1ï¼‰åˆ›å»ºcustom hook"></a>ï¼ˆ1ï¼‰åˆ›å»ºcustom hook</h4><p>ä¸€å…±åˆ›å»ºäº†å››ä¸ªï¼š</p><ul><li>useCabinsï¼šå¾—åˆ°cabinæ•°æ®</li><li>useCreateCabinï¼šå¾—åˆ°åˆ›å»ºcabinçš„å‡½æ•°</li><li>useDeleteCabinï¼šå¾—åˆ°åˆ é™¤cabinçš„å‡½æ•°</li><li>useEditCabinï¼šå¾—åˆ°ä¿®æ”¹cabinçš„å‡½æ•°</li></ul><p>resetï¼ˆï¼‰å‡½æ•°ä¸èƒ½æ”¾åœ¨è¿™äº›æ–‡ä»¶é‡Œï¼Œä½†æ˜¯å¯ä»¥æ”¾åœ¨onSubmitä¸­ï¼Œåœ¨è°ƒç”¨mutateå‡½æ•°æ—¶é€šè¿‡onSuccesså½“ä½œå‚æ•°ä¼ é€’</p><h4 id="ï¼ˆ2ï¼‰å¤åˆ¶Cabin"><a href="#ï¼ˆ2ï¼‰å¤åˆ¶Cabin" class="headerlink" title="ï¼ˆ2ï¼‰å¤åˆ¶Cabin"></a>ï¼ˆ2ï¼‰å¤åˆ¶Cabin</h4><p>åªéœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„æŒ‰é’®ï¼ŒæŠŠonClickå‡½æ•°å†™ä¸ºcreatCabinï¼Œä¼ é€’çš„å‚æ•°å°±æ˜¯cabinRowä¸­çš„cabinä¿¡æ¯ï¼ŒæŠŠåå­—æ›´æ”¹ä¸º<code>copy of $&#123;name&#125;</code>å³å¯ã€‚</p><h3 id="å…«ã€ä¿®æ”¹è®¾ç½®"><a href="#å…«ã€ä¿®æ”¹è®¾ç½®" class="headerlink" title="å…«ã€ä¿®æ”¹è®¾ç½®"></a>å…«ã€ä¿®æ”¹è®¾ç½®</h3><p>ç”±äºåªæœ‰ä¸€è¡Œè®¾ç½®ï¼Œå› æ­¤å¯¹å®ƒçš„æ”¹å˜æ¯”è¾ƒç®€å•ã€‚ä¸‹é¢åªè®²ä¸€ä¸‹è¦ç‚¹ã€‚</p><p>ä¸‹é¢æ˜¯å…¶ä¸­ä¸€ä¸ªä¿®æ”¹æ¡†ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;<span class="hljs-title class_">FormRow</span> label=<span class="hljs-string">&quot;Minimum nights/booking&quot;</span>&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Input</span></span></span><br><span class="hljs-tag"><span class="language-xml">     <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;number&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">     <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;min-nights&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">     <span class="hljs-attr">disabled</span>=<span class="hljs-string">&#123;isUpdating&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">     <span class="hljs-attr">defaultValue</span>=<span class="hljs-string">&#123;minBookingLength&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">     <span class="hljs-attr">onBlur</span>=<span class="hljs-string">&#123;(e)</span> =&gt;</span> handleUpdate(e, &#x27;minBookingLength&#x27;)&#125;</span><br><span class="language-xml">  /&gt;</span><br>&lt;/<span class="hljs-title class_">FormRow</span>&gt;<br></code></pre></td></tr></table></figure><p>åœ¨ <code>onBlur</code>ï¼ˆå¤±å»ç„¦ç‚¹ï¼‰æ—¶è§¦å‘ <code>handleUpdate</code>ï¼Œå¹¶å°†ç”¨æˆ·è¾“å…¥çš„å€¼ä¸å­—æ®µå <code>&#39;minBookingLength&#39;</code> ä¸€èµ·ä¼ é€’ç»™ <code>handleUpdate</code> å‡½æ•°ã€‚</p><p>ä¸‹é¢æ˜¯handleUpdateå‡½æ•°ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs jsx"> <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleUpdate</span>(<span class="hljs-params">e, field</span>) &#123;<br>    <span class="hljs-keyword">const</span> &#123; value &#125; = e.<span class="hljs-property">target</span>;   <span class="hljs-comment">//è§£æ„èµ‹å€¼</span><br>    <span class="hljs-keyword">if</span> (!value) <span class="hljs-keyword">return</span>;<br>    <span class="hljs-title function_">updateSetting</span>(&#123; [field]: value &#125;);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ä¹ã€é›¶ç¢"><a href="#ä¹ã€é›¶ç¢" class="headerlink" title="ä¹ã€é›¶ç¢"></a>ä¹ã€é›¶ç¢</h3><h4 id="ï¼ˆ1ï¼‰æ»šåŠ¨æ¡"><a href="#ï¼ˆ1ï¼‰æ»šåŠ¨æ¡" class="headerlink" title="ï¼ˆ1ï¼‰æ»šåŠ¨æ¡"></a>ï¼ˆ1ï¼‰æ»šåŠ¨æ¡</h4><h5 id="1ã€ä½¿å¾—sidebarå›ºå®šï¼Œåªæœ‰mainçš„éƒ¨åˆ†æ»‘åŠ¨"><a href="#1ã€ä½¿å¾—sidebarå›ºå®šï¼Œåªæœ‰mainçš„éƒ¨åˆ†æ»‘åŠ¨" class="headerlink" title="1ã€ä½¿å¾—sidebarå›ºå®šï¼Œåªæœ‰mainçš„éƒ¨åˆ†æ»‘åŠ¨"></a>1ã€ä½¿å¾—sidebarå›ºå®šï¼Œåªæœ‰mainçš„éƒ¨åˆ†æ»‘åŠ¨</h5><p>åœ¨Mainçš„æ ·å¼ä¸­åŠ å…¥ï¼š <code>overflow: scroll;</code></p><h5 id="2ã€éšè—å…¨å±€æ»šåŠ¨æ¡ï¼ˆçœŸçš„å¾ˆä¸‘ï¼‰"><a href="#2ã€éšè—å…¨å±€æ»šåŠ¨æ¡ï¼ˆçœŸçš„å¾ˆä¸‘ï¼‰" class="headerlink" title="2ã€éšè—å…¨å±€æ»šåŠ¨æ¡ï¼ˆçœŸçš„å¾ˆä¸‘ï¼‰"></a>2ã€éšè—å…¨å±€æ»šåŠ¨æ¡ï¼ˆçœŸçš„å¾ˆä¸‘ï¼‰</h5><p>åœ¨<code>GlobalStyles.js</code>ä¸­æ‰¾åˆ°&#x2F;æ–°å»ºä¸€ä¸ªbodyå…ƒç´ ï¼Œå†™å…¥ï¼š <code>overflow: hidden;</code></p><h4 id="ï¼ˆ2ï¼‰childrençš„propä¹Ÿå¯ä»¥è®¿é—®"><a href="#ï¼ˆ2ï¼‰childrençš„propä¹Ÿå¯ä»¥è®¿é—®" class="headerlink" title="ï¼ˆ2ï¼‰childrençš„propä¹Ÿå¯ä»¥è®¿é—®"></a>ï¼ˆ2ï¼‰childrençš„propä¹Ÿå¯ä»¥è®¿é—®</h4><p>ä¾‹å¦‚æˆ‘ä»¬ä¼šåˆ›å»ºcabinè¡¨æ–°å»ºçš„å¯é‡ç”¨ç»„ä»¶ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">FormRow</span>(<span class="hljs-params">&#123; label, error, children &#125;</span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">StyledFormRow</span>&gt;</span></span><br><span class="language-xml">      &#123;label &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">Label</span> <span class="hljs-attr">htmlFor</span>=<span class="hljs-string">&#123;children.props.id&#125;</span>&gt;</span>&#123;label&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">Label</span>&gt;</span>&#125;</span><br><span class="language-xml">      &#123;children&#125;</span><br><span class="language-xml">      &#123;error &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">Error</span>&gt;</span>&#123;error&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">Error</span>&gt;</span>&#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">StyledFormRow</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ï¼ˆ3ï¼‰è¿æ¥èµ·æ¥çš„ä¸¤ä¸ªè¡¨å•ä¸èƒ½ç›´æ¥åˆ é™¤å…ƒç´ å“¦"><a href="#ï¼ˆ3ï¼‰è¿æ¥èµ·æ¥çš„ä¸¤ä¸ªè¡¨å•ä¸èƒ½ç›´æ¥åˆ é™¤å…ƒç´ å“¦" class="headerlink" title="ï¼ˆ3ï¼‰è¿æ¥èµ·æ¥çš„ä¸¤ä¸ªè¡¨å•ä¸èƒ½ç›´æ¥åˆ é™¤å…ƒç´ å“¦"></a>ï¼ˆ3ï¼‰è¿æ¥èµ·æ¥çš„ä¸¤ä¸ªè¡¨å•ä¸èƒ½ç›´æ¥åˆ é™¤å…ƒç´ å“¦</h4><p>{    â€œcodeâ€: â€œ23503â€,    â€œdetailsâ€: â€œKey is still referenced from table &quot;booking&quot;.â€,    â€œhintâ€: null,    â€œmessageâ€: â€œupdate or delete on table &quot;cabins&quot; violates <strong>foreign key</strong> constraint &quot;booking_cabinId_fkey&quot; on table &quot;booking&quot;â€œ }</p><p>æƒ³è¦åˆ é™¤ä¸€ä¸ªcabinçš„æ—¶å€™æŠ¥é”™äº†ï¼Œå› ä¸ºå®ƒå’Œå¦ä¸€å¼ è¡¨å•ï¼ˆbookingï¼‰çš„å†…å®¹è¿æ¥èµ·æ¥äº†ã€‚</p><p>9&#x2F;24ï¼šç»ˆäºå®Œæˆè¿™ä¸€èŠ‚äº†å‘œå‘œå‘œå‘œå‘œï¼ŒçœŸä¸å®¹æ˜“ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­</p>]]></content>
    
    
    <categories>
      
      <category>reactè¯¾ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>react</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>reactè¯¾ç¨‹18-Supabase</title>
    <link href="/2024/09/21/react%E8%AF%BE%E7%A8%8B18-Supabase/"/>
    <url>/2024/09/21/react%E8%AF%BE%E7%A8%8B18-Supabase/</url>
    
    <content type="html"><![CDATA[<p>æœ¬èŠ‚è¯¾æ¥å­¦ä¹ SupabaseğŸ˜˜</p><span id="more"></span><p>ï¼ˆJonasä¸ºä»€ä¹ˆè¿™ä¹ˆæç¬‘ï¼Œä¸€è¾¹æ•™å­¦ä¸€è¾¹è®¤çœŸåœ°æç¬‘ğŸ˜‚ï¼‰</p><p>ï¼ˆè¿„ä»Šä¸ºæ­¢å­¦ä¹ äº†52hçš„è§†é¢‘ï¼Œè¿˜å‰©32hï¼Œèµ¶è¿›åº¦å•Šå•Šå•Šå•Šå•Šå•Šï¼‰</p><h3 id="ä¸€ã€ä»€ä¹ˆæ˜¯Supabase"><a href="#ä¸€ã€ä»€ä¹ˆæ˜¯Supabase" class="headerlink" title="ä¸€ã€ä»€ä¹ˆæ˜¯Supabase"></a>ä¸€ã€ä»€ä¹ˆæ˜¯Supabase</h3><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240921165507718.png" alt="image-20240921165507718"></p><p>Supabase æ˜¯ä¸€ä¸ªå¼€æºçš„åç«¯å³æœåŠ¡ï¼ˆBackend-as-a-Service, BaaSï¼‰å¹³å°ï¼Œæ—¨åœ¨å¸®åŠ©å¼€å‘è€…å¿«é€Ÿæ„å»ºç°ä»£å…¨æ ˆåº”ç”¨ç¨‹åºã€‚å®ƒåŸºäº PostgreSQL æ•°æ®åº“æ„å»ºï¼Œæä¾›äº†ç±»ä¼¼ Firebase çš„åŠŸèƒ½ï¼Œä½†ä¿æŒäº†å¯¹å¼€å‘è€…å‹å¥½çš„å¼€æºç‰¹æ€§ã€‚</p><h4 id="1-æ•°æ®åº“"><a href="#1-æ•°æ®åº“" class="headerlink" title="1. æ•°æ®åº“"></a>1. <strong>æ•°æ®åº“</strong></h4><p>Supabase çš„æ ¸å¿ƒæ˜¯åŸºäº PostgreSQLï¼Œè¿™æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„å…³ç³»å‹æ•°æ®åº“ã€‚Supabase åœ¨ PostgreSQL çš„åŸºç¡€ä¸Šæä¾›äº†ä»¥ä¸‹æ‰©å±•å’Œä¼˜åŒ–ï¼š</p><ul><li><strong>SQL æ”¯æŒ</strong>ï¼šå¼€å‘è€…å¯ä»¥ç›´æ¥é€šè¿‡ SQL æŸ¥è¯¢å’Œæ“ä½œæ•°æ®åº“ï¼Œè€Œä¸ä»…ä»…ä¾èµ–äº ORM å·¥å…·ã€‚</li><li><strong>æ‰©å±•æ€§</strong>ï¼šå¯ä»¥ä½¿ç”¨ PostgreSQL çš„åŠŸèƒ½ï¼Œå¦‚è§¦å‘å™¨ã€å­˜å‚¨è¿‡ç¨‹å’Œè‡ªå®šä¹‰å‡½æ•°ï¼Œæ”¯æŒå¤æ‚æŸ¥è¯¢å’Œæ“ä½œã€‚</li><li><strong>è‡ªåŠ¨ç”Ÿæˆçš„ API</strong>ï¼šSupabase ä¼šä¸ºæ•°æ®åº“ä¸­çš„æ¯ä¸ªè¡¨è‡ªåŠ¨ç”Ÿæˆ RESTful APIï¼Œæ”¯æŒ CRUD æ“ä½œï¼Œæ— éœ€é¢å¤–ç¼–å†™åç«¯ä»£ç å³å¯æ“ä½œæ•°æ®ã€‚</li></ul><h4 id="2-å­˜å‚¨"><a href="#2-å­˜å‚¨" class="headerlink" title="2. å­˜å‚¨"></a>2. <strong>å­˜å‚¨</strong></h4><p>Supabase æä¾›äº†ç±»ä¼¼ Amazon S3 çš„æ–‡ä»¶å­˜å‚¨åŠŸèƒ½ï¼Œå¸®åŠ©å¼€å‘è€…ç®¡ç†å’Œå­˜å‚¨æ–‡ä»¶ã€‚å­˜å‚¨åŠŸèƒ½åŒ…æ‹¬ï¼š</p><ul><li><strong>å¯¹è±¡å­˜å‚¨</strong>ï¼šå¯ä»¥å­˜å‚¨å›¾åƒã€è§†é¢‘ã€æ–‡æ¡£ç­‰ä»»æ„ç±»å‹çš„æ–‡ä»¶ã€‚</li><li><strong>æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½</strong>ï¼šå†…ç½® API æ”¯æŒæ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½æ“ä½œã€‚</li><li><strong>CDN é›†æˆ</strong>ï¼šé€šè¿‡å†…ç½®çš„ CDN åŠ é€Ÿæ–‡ä»¶çš„ä¼ è¾“é€Ÿåº¦ï¼Œæé«˜ç”¨æˆ·è®¿é—®ä½“éªŒã€‚</li><li><strong>è®¿é—®æ§åˆ¶</strong>ï¼šå¯ä»¥è®¾ç½®æ–‡ä»¶çš„å…¬å¼€æˆ–ç§æœ‰è®¿é—®æƒé™ã€‚</li></ul><h4 id="3-å®æ—¶åŠŸèƒ½"><a href="#3-å®æ—¶åŠŸèƒ½" class="headerlink" title="3. å®æ—¶åŠŸèƒ½"></a>3. <strong>å®æ—¶åŠŸèƒ½</strong></h4><p>Supabase çš„å®æ—¶åŠŸèƒ½åŸºäº PostgreSQL çš„å¤åˆ¶æœºåˆ¶ï¼Œå¹¶é€šè¿‡ WebSockets å®ç°ï¼Œå…è®¸å®¢æˆ·ç«¯å®æ—¶è·å–æ•°æ®åº“ä¸­çš„æ•°æ®å˜åŒ–ã€‚æ­¤åŠŸèƒ½é€‚åˆéœ€è¦é«˜å®æ—¶æ€§çš„æ•°æ®åŒæ­¥åº”ç”¨ï¼Œå¦‚èŠå¤©åº”ç”¨ã€åä½œå·¥å…·æˆ–å®æ—¶æ•°æ®ç›‘æ§ï¼š</p><ul><li><strong>æ•°æ®å˜åŒ–ç›‘å¬</strong>ï¼šå½“æ•°æ®åº“ä¸­çš„æŸæ¡è®°å½•å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå®¢æˆ·ç«¯å¯ä»¥å®æ—¶æ¥æ”¶åˆ°æ•°æ®æ›´æ–°ã€‚</li><li><strong>å®æ—¶è®¢é˜…</strong>ï¼šé€šè¿‡è®¢é˜…è¡¨ã€è¡Œæˆ–äº‹ä»¶ï¼Œå®¢æˆ·ç«¯å¯ä»¥éšæ—¶ä¿æŒä¸åç«¯çš„å®æ—¶åŒæ­¥ã€‚</li><li><strong>ä½å»¶è¿Ÿ</strong>ï¼šå¾—ç›Šäº WebSockets å’Œ PostgreSQL çš„å¼ºå¤§æ€§èƒ½ï¼Œæ•°æ®å˜åŒ–å‡ ä¹æ˜¯ç¬æ—¶ä¼ é€’ã€‚</li></ul><h4 id="4-è‡ªåŠ¨ç”Ÿæˆçš„-API"><a href="#4-è‡ªåŠ¨ç”Ÿæˆçš„-API" class="headerlink" title="4. è‡ªåŠ¨ç”Ÿæˆçš„ API"></a>4. <strong>è‡ªåŠ¨ç”Ÿæˆçš„ API</strong></h4><p>Supabase ä¼šä¸ºæ•°æ®åº“ä¸­çš„æ¯ä¸ªè¡¨è‡ªåŠ¨ç”Ÿæˆ RESTful å’Œ GraphQL APIï¼Œå¼€å‘è€…å¯ä»¥é€šè¿‡è¿™äº› API ç›´æ¥ä¸æ•°æ®åº“äº¤äº’ã€‚è¿™å‡å°‘äº†å¼€å‘è€…ç¼–å†™å¤æ‚åç«¯ä»£ç çš„éœ€æ±‚ã€‚API ä¸»è¦ç‰¹æ€§åŒ…æ‹¬ï¼š</p><ul><li><strong>å…¨è‡ªåŠ¨</strong>ï¼šAPI åœ¨æ•°æ®åº“åˆ›å»ºåå³è‡ªåŠ¨ç”Ÿæˆã€‚</li><li><strong>RESTful</strong>ï¼šæ¯ä¸ªè¡¨å¯¹åº”ä¸€ä¸ªå®Œæ•´çš„ CRUD APIï¼ˆåˆ›å»ºã€è¯»å–ã€æ›´æ–°ã€åˆ é™¤ï¼‰ã€‚</li><li><strong>åˆ†é¡µã€æ’åºã€è¿‡æ»¤</strong>ï¼šAPI æ”¯æŒä¸°å¯Œçš„æŸ¥è¯¢å‚æ•°ï¼Œå¯ä»¥é€šè¿‡ç®€å•çš„ URL å®ç°åˆ†é¡µã€æ’åºã€æ•°æ®ç­›é€‰ç­‰é«˜çº§åŠŸèƒ½ã€‚</li></ul><h4 id="5-æ‰˜ç®¡æœåŠ¡"><a href="#5-æ‰˜ç®¡æœåŠ¡" class="headerlink" title="5. æ‰˜ç®¡æœåŠ¡"></a>5. <strong>æ‰˜ç®¡æœåŠ¡</strong></h4><p>è™½ç„¶ Supabase æ˜¯å¼€æºçš„ï¼Œä½†å®ƒæä¾›äº†æ‰˜ç®¡æœåŠ¡ï¼Œå¯ä»¥å…å»æœåŠ¡å™¨è¿ç»´å’Œç®¡ç†çš„å¤æ‚æ€§ã€‚æ‰˜ç®¡æœåŠ¡æä¾›çš„åŠŸèƒ½åŒ…æ‹¬ï¼š</p><ul><li><strong>å¼¹æ€§æ‰©å±•</strong>ï¼šå¯ä»¥æ ¹æ®åº”ç”¨è§„æ¨¡è‡ªåŠ¨è°ƒæ•´èµ„æºï¼Œé¿å…æœåŠ¡å™¨è¿‡è½½ã€‚</li><li><strong>è‡ªåŠ¨å¤‡ä»½</strong>ï¼šSupabase æä¾›äº†æ•°æ®åº“çš„å®šæœŸå¤‡ä»½åŠŸèƒ½ï¼Œç¡®ä¿æ•°æ®å®‰å…¨ã€‚</li><li><strong>ç›‘æ§å’Œåˆ†æ</strong>ï¼šå¯ä»¥æŸ¥çœ‹æ•°æ®åº“çš„è¿è¡ŒçŠ¶æ€ã€æŸ¥è¯¢æ€§èƒ½ã€é”™è¯¯æ—¥å¿—ç­‰ã€‚</li></ul><h4 id="6-å®¢æˆ·ç«¯-SDK-å’Œ-API"><a href="#6-å®¢æˆ·ç«¯-SDK-å’Œ-API" class="headerlink" title="6. å®¢æˆ·ç«¯ SDK å’Œ API"></a>6. <strong>å®¢æˆ·ç«¯ SDK å’Œ API</strong></h4><p>Supabase æä¾›äº†å¤šç§å®¢æˆ·ç«¯ SDKï¼Œæ”¯æŒä¸åŒçš„ç¼–ç¨‹è¯­è¨€å’Œæ¡†æ¶ï¼š</p><ul><li><strong>JavaScript&#x2F;TypeScript SDK</strong>ï¼šæœ€å¸¸ç”¨çš„ SDKï¼Œé€‚ç”¨äº Reactã€Vueã€Next.js ç­‰ç°ä»£å‰ç«¯æ¡†æ¶ã€‚</li><li><strong>Flutter SDK</strong>ï¼šé€‚ç”¨äºç§»åŠ¨ç«¯å¼€å‘ï¼Œæ”¯æŒ iOS å’Œ Androidã€‚</li><li><strong>REST API</strong>ï¼šå¯ä»¥é€šè¿‡ä»»ä½• HTTP å®¢æˆ·ç«¯è®¿é—® RESTful APIï¼Œé€‚ç”¨äºè·¨å¹³å°åº”ç”¨å¼€å‘ã€‚</li></ul><h4 id="7-å®‰å…¨ä¸æƒé™"><a href="#7-å®‰å…¨ä¸æƒé™" class="headerlink" title="7. å®‰å…¨ä¸æƒé™"></a>7. <strong>å®‰å…¨ä¸æƒé™</strong></h4><p>Supabase æä¾›äº†è¯¦ç»†çš„å®‰å…¨å’Œæƒé™ç®¡ç†åŠŸèƒ½ï¼š</p><ul><li>**åŸºäºè¡Œçº§åˆ«çš„å®‰å…¨æ€§ (RLS)**ï¼šå…è®¸å¼€å‘è€…åŸºäºç”¨æˆ·èº«ä»½æ§åˆ¶æ¯ä¸ªç”¨æˆ·å¯¹ç‰¹å®šè¡Œçš„è®¿é—®æƒé™ã€‚</li><li><strong>è§’è‰²ç®¡ç†</strong>ï¼šå¯ä»¥ä¸ºç”¨æˆ·åˆ†é…ä¸åŒçš„è§’è‰²ï¼Œä»¥å®ç°å¤æ‚çš„æƒé™ç®¡ç†ä½“ç³»ã€‚</li></ul><h4 id="8-å¼€æºä¸ç¤¾åŒº"><a href="#8-å¼€æºä¸ç¤¾åŒº" class="headerlink" title="8. å¼€æºä¸ç¤¾åŒº"></a>8. <strong>å¼€æºä¸ç¤¾åŒº</strong></h4><p>Supabase çš„æœ€å¤§ç‰¹ç‚¹ä¹‹ä¸€æ˜¯å…¶å¼€æºæ€§ï¼Œæ‰€æœ‰æ ¸å¿ƒä»£ç å‡å¯åœ¨ GitHub ä¸Šè·å–ï¼Œå¼€å‘è€…å¯ä»¥è‡ªç”±åœ°ä¿®æ”¹ã€æ‰©å±•å’Œè´¡çŒ®ä»£ç ã€‚å¼€æºçš„ä¼˜åŠ¿åŒ…æ‹¬ï¼š</p><ul><li><strong>è‡ªç”±æ‰˜ç®¡</strong>ï¼šå¼€å‘è€…å¯ä»¥é€‰æ‹©åœ¨è‡ªå·±çš„æœåŠ¡å™¨ä¸Šæ‰˜ç®¡ Supabaseï¼Œå®Œå…¨è‡ªä¸»æ§åˆ¶æ•°æ®å’ŒæœåŠ¡ã€‚</li><li><strong>æ´»è·ƒç¤¾åŒº</strong>ï¼šSupabase æ‹¥æœ‰ä¸€ä¸ªæ´»è·ƒçš„å¼€å‘è€…ç¤¾åŒºï¼Œæä¾›ä¸°å¯Œçš„å­¦ä¹ èµ„æºã€ç¤ºä¾‹é¡¹ç›®å’Œæ”¯æŒã€‚</li></ul><h4 id="9-é€‚ç”¨åœºæ™¯"><a href="#9-é€‚ç”¨åœºæ™¯" class="headerlink" title="9. é€‚ç”¨åœºæ™¯"></a>9. é€‚ç”¨åœºæ™¯</h4><p>Supabase éå¸¸é€‚åˆéœ€è¦å¿«é€Ÿå¼€å‘åŸå‹ã€MVPï¼ˆæœ€å°å¯è¡Œäº§å“ï¼‰æˆ–å…¨æ ˆåº”ç”¨çš„å¼€å‘è€…ã€‚å…¶ä¸»è¦é€‚ç”¨åœºæ™¯åŒ…æ‹¬ï¼š</p><ul><li><strong>æ•°æ®é©±åŠ¨åº”ç”¨</strong>ï¼šä¾‹å¦‚ä»ªè¡¨æ¿ã€å®æ—¶ç›‘æ§ã€æ•°æ®å¯è§†åŒ–ç­‰ã€‚</li><li><strong>ç”¨æˆ·ç®¡ç†å’Œç¤¾äº¤åº”ç”¨</strong>ï¼šéœ€è¦å¤æ‚çš„ç”¨æˆ·ç®¡ç†å’Œè®¤è¯åŠŸèƒ½ã€‚</li><li><strong>ç§»åŠ¨ç«¯åº”ç”¨</strong>ï¼šé€šè¿‡ Flutter SDK å¿«é€Ÿæ„å»ºç§»åŠ¨åº”ç”¨çš„åç«¯ã€‚</li><li><strong>å®æ—¶åŠŸèƒ½éœ€æ±‚</strong>ï¼šä¾‹å¦‚èŠå¤©åº”ç”¨ã€åä½œå·¥å…·æˆ–å…¶ä»–éœ€è¦æ•°æ®å®æ—¶åŒæ­¥çš„åº”ç”¨ã€‚</li></ul><h3 id="äºŒã€ä½¿ç”¨supabaseåˆ›å»ºtables"><a href="#äºŒã€ä½¿ç”¨supabaseåˆ›å»ºtables" class="headerlink" title="äºŒã€ä½¿ç”¨supabaseåˆ›å»ºtables"></a>äºŒã€ä½¿ç”¨supabaseåˆ›å»ºtables</h3><ol><li><p>ç”¨GitHubè´¦å·ç™»é™†ååˆ›å»ºä¸€ä¸ªproject</p></li><li><p>æ€è€ƒéœ€è¦çš„data tableï¼ˆæœ¬æ¬¡é¡¹ç›®å‡ ä¹æ²¡æœ‰ui stateè€Œéƒ½æ˜¯global stateï¼‰</p></li><li><p>åˆ›å»ºtableï¼Œå¹¶ä¸”æ€è€ƒtableä¹‹é—´çš„è¿æ¥ï¼ˆæ¯”å¦‚bookingè¦å°†guestå’Œcabinè¿æ¥èµ·æ¥ï¼‰</p></li><li><p>åœ¨Authenticationä¸­çš„Policiesé€‰é¡¹ä¸­å¯ä»¥è®¾ç½®æ¯ä¸ªtableçš„è®¿é—®æƒé™</p></li><li><p>åœ¨API Docsä¸­å¯ä»¥æŸ¥çœ‹è®¿é—®tableçš„api</p></li></ol><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240921205233405.png" alt="image-20240921205233405"></p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240921205658958.png" alt="image-20240921205658958"></p><h3 id="ä¸‰ã€è¿æ¥Reacté¡¹ç›®å’Œsupabase"><a href="#ä¸‰ã€è¿æ¥Reacté¡¹ç›®å’Œsupabase" class="headerlink" title="ä¸‰ã€è¿æ¥Reacté¡¹ç›®å’Œsupabase"></a>ä¸‰ã€è¿æ¥Reacté¡¹ç›®å’Œsupabase</h3><p>â­•<code>npm install @supabase/supabase-js</code></p><p>â­•åœ¨servicesæ–‡ä»¶å¤¹ä¸­æ–°å»ºsupabase.jsï¼Œå†…å®¹å¦‚ä¸‹ï¼šï¼ˆä»api docsæ¬è¿ï¼‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; createClient &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@supabase/supabase-js&#x27;</span>;<br><span class="hljs-keyword">const</span> supabaseUrl = <span class="hljs-string">&#x27;https://mmyxdnpmmlqmyjxjypmw.supabase.co&#x27;</span>;<br><span class="hljs-keyword">const</span> supabaseKey = process.<span class="hljs-property">env</span>.<span class="hljs-property">SUPABASE_KEY</span>;<br><span class="hljs-keyword">const</span> supabase = <span class="hljs-title function_">createClient</span>(supabaseUrl, supabaseKey);<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> supabase;<br></code></pre></td></tr></table></figure><p>âœ…å°†supabaseKeyçš„å†…å®¹æ›¿æ¢æˆsettings-&gt;API-&gt;Project API keys-&gt;(anon public)çš„key</p><p>â­•åœ¨servicesæ–‡ä»¶å¤¹ä¸­å»ºç«‹apiCabins.jsï¼ˆä¸ºæ¯ä¸ªtableéƒ½å»ºç«‹ä¸€ä¸ªè¿™æ ·çš„æ–‡ä»¶ï¼Œæ”¾ç½®ä¸apiè·å–æ•°æ®æœ‰å…³çš„å‡½æ•°ï¼‰ã€‚æŸ¥è¯¢api Docsç›®å½•é€‰æ‹©æƒ³è¦æŸ¥è¯¢çš„å†…å®¹ï¼Œcopyç›¸åº”jsä»£ç æ®µåˆ°å‡½æ•°ä¸­ã€‚</p><p>ï¼ˆè¿æ¥æˆåŠŸï¼Œå¥½é¡ºåˆ©â€¦â€¦æ–°æŠ€æœ¯å°±æ˜¯å¥½å•ŠğŸ¤—ï¼‰</p><p>â­•åœ¨supabaseç½‘ç«™ï¼ˆä¸ªäººé¡¹ç›®ä¸»é¡µçš„ï¼‰çš„Storageä¸­ç‚¹å‡»<img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240922095908254.png" alt="image-20240922095908254" style="zoom: 67%;" />ï¼Œåˆ›å»ºä¸¤ä¸ªBucketsï¼šavatarsï¼ˆå­˜å‚¨ç”¨æˆ·å¤´åƒï¼‰ï¼›cabin-imagesï¼ˆå­˜å‚¨æœ¨å±‹å›¾ç‰‡ï¼‰ã€‚å‡è®¾ç½®ä¸ºpublicã€‚å›¾ç‰‡å¯ç›´æ¥æ‹–åŠ¨è¿‡å»ï¼Œç‚¹å‡»å›¾ç‰‡ï¼Œç‚¹å‡»<img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240922100118322.png" alt="image-20240922100118322" style="zoom:67%;" />ï¼Œå°±å¯ä»¥ç›´æ¥åœ¨é¡¹ç›®ä¸­è®¿é—®å®ƒã€‚åœ¨tableä¸­ä¹Ÿå¯ä»¥å°†ç›¸åº”çš„urlæ’å…¥è¡¨å•ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>reactè¯¾ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>react</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>reactè¯¾ç¨‹17-Thewildoasisé¡¹ç›®èµ·æ­¥</title>
    <link href="/2024/09/20/react%E8%AF%BE%E7%A8%8B17-Thewildoasis%E9%A1%B9%E7%9B%AE%E8%B5%B7%E6%AD%A5/"/>
    <url>/2024/09/20/react%E8%AF%BE%E7%A8%8B17-Thewildoasis%E9%A1%B9%E7%9B%AE%E8%B5%B7%E6%AD%A5/</url>
    
    <content type="html"><![CDATA[<p>å…¨æ–°çš„é¡¹ç›®ğŸ˜¼ğŸ˜¼ğŸ˜¼ æœ¬èŠ‚é‡ç‚¹ï¼šstyled component</p><span id="more"></span><h3 id="ä¸€ã€é¡¹ç›®åˆ†æï¼ˆæ‡’å¾—æ‰“å­—ç‰ˆï¼‰"><a href="#ä¸€ã€é¡¹ç›®åˆ†æï¼ˆæ‡’å¾—æ‰“å­—ç‰ˆï¼‰" class="headerlink" title="ä¸€ã€é¡¹ç›®åˆ†æï¼ˆæ‡’å¾—æ‰“å­—ç‰ˆï¼‰"></a>ä¸€ã€é¡¹ç›®åˆ†æï¼ˆæ‡’å¾—æ‰“å­—ç‰ˆï¼‰</h3><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240920165341339.png" alt="image-20240920165341339"></p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240920165419677.png" alt="image-20240920165419677"></p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240920165504593.png" alt="image-20240920165504593"></p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240920165522320.png" alt="image-20240920165522320"></p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240920165545636.png" alt="image-20240920165545636"></p><p>âœ…å®‰è£…eslintå’Œrouterè§è¯¾ç¨‹åå››</p><h3 id="äºŒã€Styled-Components"><a href="#äºŒã€Styled-Components" class="headerlink" title="äºŒã€Styled Components"></a>äºŒã€Styled Components</h3><blockquote><p>æ€ä¹ˆprettieréœ€è¦è‡ªå·±é…ç½®æ–‡ä»¶äº†å‘€ï¼Œä¸ç„¶å°±ä¸èƒ½ç”¨ï¼Œè§£å†³äº†åŠå¤©ï¼Œæ “Qâ€¦â€¦</p><p>è¦å…ˆåœ¨æ ¹ç›®å½•åˆ›å»ºä¸€ä¸ª.prettierrcå¹¶æä¾›åŸºæœ¬é…ç½®:{  â€œsingleQuoteâ€: true,  â€œtrailingCommaâ€: â€œes5â€ }</p></blockquote><p>â­• <code>npm i styled-components</code></p><p>â­•å®‰è£…<code>vscode-styled-components</code>æ‹“å±•ä½¿å¾—cssä»£ç é«˜äº®</p><p>â­•<a href="https://styled-components.com/">https://styled-components.com/</a></p><h4 id="ï¼ˆ1ï¼‰åŸºæœ¬ç”¨æ³•"><a href="#ï¼ˆ1ï¼‰åŸºæœ¬ç”¨æ³•" class="headerlink" title="ï¼ˆ1ï¼‰åŸºæœ¬ç”¨æ³•"></a>ï¼ˆ1ï¼‰åŸºæœ¬ç”¨æ³•</h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> <span class="hljs-title class_">Main</span> = styled.<span class="hljs-property">main</span><span class="hljs-string">`</span><br><span class="hljs-string">  background-color: var(--color-grey-200);</span><br><span class="hljs-string">  padding: 4rem 4.8rem 6.4rem;</span><br><span class="hljs-string">`</span>;<br></code></pre></td></tr></table></figure><h4 id="ï¼ˆ2ï¼‰å±æ€§"><a href="#ï¼ˆ2ï¼‰å±æ€§" class="headerlink" title="ï¼ˆ2ï¼‰å±æ€§"></a>ï¼ˆ2ï¼‰å±æ€§</h4><h5 id="1ã€-as-å±æ€§-ï¼š"><a href="#1ã€-as-å±æ€§-ï¼š" class="headerlink" title="1ã€**as å±æ€§**ï¼š"></a>1ã€**<code>as</code> å±æ€§**ï¼š</h5><ul><li><code>as</code> å±æ€§å…è®¸ä½ æ›´æ”¹ç»„ä»¶çš„æ ¹å…ƒç´ ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æœ‰ä¸€ä¸ª <code>styled.button</code>ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>as=&quot;a&quot;</code> å°†å…¶æ¸²æŸ“ä¸ºä¸€ä¸ªé“¾æ¥ï¼Œè€Œä¸æ˜¯æŒ‰é’®ã€‚</li><li><code>as</code> å¯ä»¥åŠ¨æ€åœ°æ ¹æ®éœ€è¦æ›´æ”¹æ¸²æŸ“çš„ HTML å…ƒç´ ï¼Œéå¸¸çµæ´»ã€‚</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> <span class="hljs-title class_">StyledButton</span> = styled.<span class="hljs-property">button</span><span class="hljs-string">`</span><br><span class="hljs-string">  background-color: blue;</span><br><span class="hljs-string">  color: white;</span><br><span class="hljs-string">`</span>;<br><br><span class="hljs-comment">// ä½¿ç”¨ as å±æ€§</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">StyledButton</span> <span class="hljs-attr">as</span>=<span class="hljs-string">&quot;a&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/home&quot;</span>&gt;</span>Go Home<span class="hljs-tag">&lt;/<span class="hljs-name">StyledButton</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h5 id="2ã€-type-å±æ€§-ï¼š"><a href="#2ã€-type-å±æ€§-ï¼š" class="headerlink" title="2ã€**type å±æ€§**ï¼š"></a>2ã€**<code>type</code> å±æ€§**ï¼š</h5><ul><li><code>type</code> å±æ€§é€šå¸¸ç”¨äºåŸç”Ÿ HTML å…ƒç´ ï¼ˆå¦‚ <code>&lt;input&gt;</code> æˆ– <code>&lt;button&gt;</code>ï¼‰ï¼ŒæŒ‡å®šå…ƒç´ çš„ç±»å‹ã€‚ä¾‹å¦‚ï¼ŒæŒ‰é’®çš„ç±»å‹å¯ä»¥æ˜¯ <code>button</code>ã€<code>submit</code> æˆ– <code>reset</code>ã€‚</li><li><code>type</code> å±æ€§æ˜¯ä¸€ä¸ª HTML å±æ€§ï¼Œå¹¶ä¸æ¶‰åŠ styled-components çš„æ ·å¼å¤„ç†ã€‚</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;<span class="hljs-title class_">StyledButton</span> type=<span class="hljs-string">&quot;submit&quot;</span>&gt;<span class="hljs-title class_">Submit</span>&lt;/<span class="hljs-title class_">StyledButton</span>&gt;<br></code></pre></td></tr></table></figure><h5 id="3ã€roleå±æ€§"><a href="#3ã€roleå±æ€§" class="headerlink" title="3ã€roleå±æ€§"></a>3ã€<code>role</code>å±æ€§</h5><p><code>role</code> æ˜¯ä¸€ä¸ªæ ‡å‡†çš„ HTML å±æ€§ï¼Œç”¨äºæŒ‡å®šå…ƒç´ çš„è§’è‰²ï¼Œé€šå¸¸ä¸æ— éšœç¢è®¿é—®ï¼ˆAccessibilityï¼Œç®€ç§° a11yï¼‰ç›¸å…³ã€‚å®ƒå‘Šè¯‰å±å¹•é˜…è¯»å™¨ç­‰è¾…åŠ©æŠ€æœ¯ï¼Œè¿™ä¸ªå…ƒç´ åº”è¯¥å¦‚ä½•è¢«è§£è¯»æˆ–äº¤äº’ã€‚</p><p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼š</p><ol><li>ä½¿ç”¨ <code>as</code> å¯ä»¥åœ¨åŒä¸€ä¸ª styled ç»„ä»¶ä¸Šè¿›è¡Œå¤šç§è¡¨ç°å½¢å¼çš„æ¸²æŸ“ï¼Œå¢åŠ äº†ç»„ä»¶çš„å¤ç”¨æ€§ã€‚</li><li><code>type</code> ç”¨äºæ§åˆ¶å…ƒç´ çš„è¡Œä¸ºï¼Œé€šå¸¸åœ¨è¡¨å•ç›¸å…³ç»„ä»¶ä¸­ä½¿ç”¨ã€‚</li></ol><p>æ€»çš„æ¥è¯´ï¼Œ<code>as</code> æä¾›äº†æ›´å¤§çš„çµæ´»æ€§å’Œå¤ç”¨æ€§ï¼Œè€Œ <code>type</code> åˆ™æ˜¯ä¸å…ƒç´ è¡Œä¸ºç›¸å…³çš„æ ‡å‡† HTML å±æ€§ã€‚é€‰æ‹©ä½¿ç”¨ <code>as</code> è€Œä¸æ˜¯ <code>type</code> ä¸»è¦æ˜¯å› ä¸ºå®ƒä¸ styled-components çš„è®¾è®¡ç†å¿µç›¸å¥‘åˆï¼Œå…è®¸æ›´å¥½åœ°æ§åˆ¶ç»„ä»¶çš„å‘ˆç°å½¢å¼ã€‚</p><h4 id="ï¼ˆ3ï¼‰é»˜è®¤props"><a href="#ï¼ˆ3ï¼‰é»˜è®¤props" class="headerlink" title="ï¼ˆ3ï¼‰é»˜è®¤props"></a>ï¼ˆ3ï¼‰é»˜è®¤props</h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-title class_">Row</span>.<span class="hljs-property">defaultProps</span> = &#123;<br>  <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;vertical&#x27;</span>,<br>&#125;;<br></code></pre></td></tr></table></figure><h4 id="ï¼ˆ4ï¼‰è£…é¥°ç¬¬ä¸‰æ–¹åŒ…å†…ç»„ä»¶"><a href="#ï¼ˆ4ï¼‰è£…é¥°ç¬¬ä¸‰æ–¹åŒ…å†…ç»„ä»¶" class="headerlink" title="ï¼ˆ4ï¼‰è£…é¥°ç¬¬ä¸‰æ–¹åŒ…å†…ç»„ä»¶"></a>ï¼ˆ4ï¼‰è£…é¥°ç¬¬ä¸‰æ–¹åŒ…å†…ç»„ä»¶</h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> <span class="hljs-title class_">StyledNavLink</span> = <span class="hljs-title function_">styled</span>(<span class="hljs-title class_">NavLink</span>)<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨æ‹¬å·é“¾æ¥ç¬¬ä¸‰æ–¹åŒ…å†…ç»„ä»¶</p><h4 id="ï¼ˆ5ï¼‰æ•°ç»„props"><a href="#ï¼ˆ5ï¼‰æ•°ç»„props" class="headerlink" title="ï¼ˆ5ï¼‰æ•°ç»„props"></a>ï¼ˆ5ï¼‰æ•°ç»„props</h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> styled, &#123; css &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;styled-components&#x27;</span>;<br><br><span class="hljs-keyword">const</span> sizes = &#123;<br>  <span class="hljs-attr">small</span>: css`<span class="language-css"></span><br><span class="language-css">    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.2rem</span>;</span><br><span class="language-css">    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0.4rem</span> <span class="hljs-number">0.8rem</span>;</span><br><span class="language-css">    <span class="hljs-attribute">text-transform</span>: uppercase;</span><br><span class="language-css">    <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">600</span>;</span><br><span class="language-css">    <span class="hljs-attribute">text-align</span>: center;</span><br><span class="language-css">  `</span>,<br>  <span class="hljs-attr">medium</span>: css`<span class="language-css"></span><br><span class="language-css">    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.4rem</span>;</span><br><span class="language-css">    <span class="hljs-attribute">padding</span>: <span class="hljs-number">1.2rem</span> <span class="hljs-number">1.6rem</span>;</span><br><span class="language-css">    <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">500</span>;</span><br><span class="language-css">  `</span>,<br>  <span class="hljs-attr">large</span>: css`<span class="language-css"></span><br><span class="language-css">    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.6rem</span>;</span><br><span class="language-css">    <span class="hljs-attribute">padding</span>: <span class="hljs-number">1.2rem</span> <span class="hljs-number">2.4rem</span>;</span><br><span class="language-css">    <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">500</span>;</span><br><span class="language-css">  `</span>,<br>&#125;;<br><br><span class="hljs-keyword">const</span> variations = &#123;<br>  <span class="hljs-attr">primary</span>: css`<span class="language-css"></span><br><span class="language-css">    <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--color-brand-<span class="hljs-number">50</span>);</span><br><span class="language-css">    <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">var</span>(--color-brand-<span class="hljs-number">600</span>);</span><br><span class="language-css"></span><br><span class="language-css">    &amp;<span class="hljs-selector-pseudo">:hover</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">var</span>(--color-brand-<span class="hljs-number">700</span>);</span><br><span class="language-css">    &#125;</span><br><span class="language-css">  `</span>,<br>  <span class="hljs-attr">secondary</span>: css`<span class="language-css"></span><br><span class="language-css">    <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--color-grey-<span class="hljs-number">600</span>);</span><br><span class="language-css">    <span class="hljs-attribute">background</span>: <span class="hljs-built_in">var</span>(--color-grey-<span class="hljs-number">0</span>);</span><br><span class="language-css">    <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-built_in">var</span>(--color-grey-<span class="hljs-number">200</span>);</span><br><span class="language-css"></span><br><span class="language-css">    &amp;<span class="hljs-selector-pseudo">:hover</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">var</span>(--color-grey-<span class="hljs-number">50</span>);</span><br><span class="language-css">    &#125;</span><br><span class="language-css">  `</span>,<br>  <span class="hljs-attr">danger</span>: css`<span class="language-css"></span><br><span class="language-css">    <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--color-red-<span class="hljs-number">100</span>);</span><br><span class="language-css">    <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">var</span>(--color-red-<span class="hljs-number">700</span>);</span><br><span class="language-css"></span><br><span class="language-css">    &amp;<span class="hljs-selector-pseudo">:hover</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">var</span>(--color-red-<span class="hljs-number">800</span>);</span><br><span class="language-css">    &#125;</span><br><span class="language-css">  `</span>,<br>&#125;;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title class_">Button</span> = styled.<span class="hljs-property">button</span><span class="hljs-string">`</span><br><span class="hljs-string">  border: none;</span><br><span class="hljs-string">  border-radius: var(--border-radius-sm);</span><br><span class="hljs-string">  box-shadow: var(--shadow-sm);</span><br><span class="hljs-string"></span><br><span class="hljs-string">  <span class="hljs-subst">$&#123;(props) =&gt; sizes[props.size]&#125;</span></span><br><span class="hljs-string">  <span class="hljs-subst">$&#123;(props) =&gt; variations[props.variation]&#125;</span></span><br><span class="hljs-string">`</span>;<br><br><span class="hljs-title class_">Button</span>.<span class="hljs-property">defaultProps</span> = &#123;<br>  <span class="hljs-attr">variation</span>: <span class="hljs-string">&#x27;primary&#x27;</span>,<br>  <span class="hljs-attr">size</span>: <span class="hljs-string">&#x27;medium&#x27;</span>,<br>&#125;;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Button</span>;<br></code></pre></td></tr></table></figure><h3 id="ä¸‰ã€é›¶ç¢"><a href="#ä¸‰ã€é›¶ç¢" class="headerlink" title="ä¸‰ã€é›¶ç¢"></a>ä¸‰ã€é›¶ç¢</h3><h4 id="ï¼ˆ1ï¼‰"><a href="#ï¼ˆ1ï¼‰" class="headerlink" title="ï¼ˆ1ï¼‰"></a>ï¼ˆ1ï¼‰</h4><p>â­•<code>npm i react-icons</code>  å›¾æ ‡é›†ï¼š <a href="https://react-icons.github.io/react-icons/">https://react-icons.github.io/react-icons/</a></p><h4 id="ï¼ˆ2ï¼‰"><a href="#ï¼ˆ2ï¼‰" class="headerlink" title="ï¼ˆ2ï¼‰"></a>ï¼ˆ2ï¼‰</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">element</span>=<span class="hljs-string">&#123;</span>&lt;<span class="hljs-attr">AppLayout</span> /&gt;</span>&#125;&gt;<br>    <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">index</span> <span class="hljs-attr">element</span>=<span class="hljs-string">&#123;</span>&lt;<span class="hljs-attr">Navigate</span> <span class="hljs-attr">replace</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;dashboard&quot;</span> /&gt;</span>&#125; /&gt;<br><span class="hljs-tag">&lt;/<span class="hljs-name">Route</span>&gt;</span><br></code></pre></td></tr></table></figure><p>å°†layoutç»„ä»¶åŒ…è£¹ä½å…¶ä»–çš„Routeï¼Œä½¿ç”¨<Outlet />ç»„ä»¶æ‰¿æ¥å…¶ä»–ç»„ä»¶å†…å®¹</p><p>indexå…³é”®å­—è®¤è¯ä¸»é¡µé¢ï¼Œreplaceå…³é”®å­—æ›¿ä»£å†å²url</p><h4 id="ï¼ˆ3ï¼‰styled-componentçš„å…¶ä»–é‡è¦å±æ€§"><a href="#ï¼ˆ3ï¼‰styled-componentçš„å…¶ä»–é‡è¦å±æ€§" class="headerlink" title="ï¼ˆ3ï¼‰styled componentçš„å…¶ä»–é‡è¦å±æ€§"></a>ï¼ˆ3ï¼‰styled componentçš„å…¶ä»–é‡è¦å±æ€§</h4><h5 id="1ã€-ref-å±æ€§-ï¼š"><a href="#1ã€-ref-å±æ€§-ï¼š" class="headerlink" title="1ã€**ref å±æ€§**ï¼š"></a>1ã€**<code>ref</code> å±æ€§**ï¼š</h5><ul><li><code>ref</code> å±æ€§å…è®¸ä½ è®¿é—®ç»„ä»¶çš„ DOM èŠ‚ç‚¹æˆ– class å®ä¾‹ï¼Œç”¨äºç›´æ¥æ“ä½œ DOMï¼Œå¸¸è§äºéœ€è¦è·å–å…ƒç´ å¼•ç”¨çš„åœºæ™¯ï¼Œä¾‹å¦‚ç„¦ç‚¹ç®¡ç†ã€åŠ¨ç”»ã€æ»šåŠ¨ç­‰ã€‚</li></ul><h5 id="2ã€-key-å±æ€§-ï¼š"><a href="#2ã€-key-å±æ€§-ï¼š" class="headerlink" title="2ã€**key å±æ€§**ï¼š"></a>2ã€**<code>key</code> å±æ€§**ï¼š</h5><ul><li><code>key</code> æ˜¯ React ç”¨æ¥æ ‡è¯†å“ªäº›å…ƒç´ è¢«ä¿®æ”¹ã€æ·»åŠ æˆ–ç§»é™¤çš„ç‰¹æ®Šå±æ€§ï¼Œå°¤å…¶åœ¨æ¸²æŸ“åˆ—è¡¨æ—¶éå¸¸é‡è¦ã€‚<code>styled-components</code> å†…çš„ç»„ä»¶åŒæ ·éµå¾ªè¿™ä¸ªè§„åˆ™ã€‚</li></ul><h5 id="3ã€-className-å±æ€§-ï¼š"><a href="#3ã€-className-å±æ€§-ï¼š" class="headerlink" title="3ã€**className å±æ€§**ï¼š"></a>3ã€**<code>className</code> å±æ€§**ï¼š</h5><ul><li><code>className</code> å±æ€§å…è®¸ä½ ç»™ <code>styled-component</code> ç»„ä»¶æ·»åŠ é¢å¤–çš„ class åï¼Œè¿™å¯¹äºåœ¨ä¸€ä¸ªç»„ä»¶ä¸­åº”ç”¨å¤šä¸ªæ ·å¼è§„åˆ™æˆ–ä¸å¤–éƒ¨ CSS é›†æˆæ—¶ç‰¹åˆ«æœ‰ç”¨ã€‚</li></ul><h5 id="4ã€-style-å±æ€§-ï¼š"><a href="#4ã€-style-å±æ€§-ï¼š" class="headerlink" title="4ã€**style å±æ€§**ï¼š"></a>4ã€**<code>style</code> å±æ€§**ï¼š</h5><ul><li><code>style</code> å±æ€§æ˜¯å†…è”æ ·å¼ï¼Œå¯ä»¥ç›´æ¥åœ¨ç»„ä»¶ä¸Šè®¾ç½®è¡Œå†…æ ·å¼ï¼Œç”¨äºä¸€äº›åŠ¨æ€æ ·å¼çš„è®¾ç½®ï¼Œä½†ä¸å»ºè®®ä¸ <code>styled-components</code> çš„æ ·å¼ç³»ç»Ÿå¤§é‡æ··ç”¨ã€‚</li></ul><h5 id="5ã€-style-å±æ€§-ï¼š"><a href="#5ã€-style-å±æ€§-ï¼š" class="headerlink" title="5ã€**style å±æ€§**ï¼š"></a>5ã€**<code>style</code> å±æ€§**ï¼š</h5><ul><li><code>style</code> å±æ€§æ˜¯å†…è”æ ·å¼ï¼Œå¯ä»¥ç›´æ¥åœ¨ç»„ä»¶ä¸Šè®¾ç½®è¡Œå†…æ ·å¼ï¼Œç”¨äºä¸€äº›åŠ¨æ€æ ·å¼çš„è®¾ç½®ï¼Œä½†ä¸å»ºè®®ä¸ <code>styled-components</code> çš„æ ·å¼ç³»ç»Ÿå¤§é‡æ··ç”¨ã€‚</li></ul><h5 id="6ã€childrenã€onClickã€defaultvalueç­‰"><a href="#6ã€childrenã€onClickã€defaultvalueç­‰" class="headerlink" title="6ã€childrenã€onClickã€defaultvalueç­‰"></a>6ã€childrenã€onClickã€defaultvalueç­‰</h5>]]></content>
    
    
    <categories>
      
      <category>reactè¯¾ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>react</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>reactè¯¾ç¨‹16-ç»§ç»­ä½¿ç”¨Reduxæ„å»ºpizzaé¡¹ç›®</title>
    <link href="/2024/09/19/react%E8%AF%BE%E7%A8%8B16-%E7%BB%A7%E7%BB%AD%E4%BD%BF%E7%94%A8Redux%E6%9E%84%E5%BB%BApizza%E9%A1%B9%E7%9B%AE/"/>
    <url>/2024/09/19/react%E8%AF%BE%E7%A8%8B16-%E7%BB%A7%E7%BB%AD%E4%BD%BF%E7%94%A8Redux%E6%9E%84%E5%BB%BApizza%E9%A1%B9%E7%9B%AE/</url>
    
    <content type="html"><![CDATA[<p>ç”±äºè¿™éƒ¨åˆ†å†…å®¹æ¯”è¾ƒç®€å•ï¼Œå°±ç®€ç•¥è®°å½•ä¸€ä¸‹é‡ç‚¹å­ï¼ˆReduxå¿«è¢«æˆ‘å¿˜å¾—ä¸€å¹²äºŒå‡€äº†ğŸ¥²ğŸ¥²ï¼‰</p><span id="more"></span><h4 id="ï¼ˆ1ï¼‰useSelector"><a href="#ï¼ˆ1ï¼‰useSelector" class="headerlink" title="ï¼ˆ1ï¼‰useSelector"></a>ï¼ˆ1ï¼‰useSelector</h4><p>åœ¨å‰é¢å¦‚æœæˆ‘ä»¬æƒ³è¦è·å–storeé‡Œçš„çŠ¶æ€ï¼Œéƒ½æ˜¯ç”¨useSelectoråœ¨ç›¸åº”çš„ç»„ä»¶å‡½æ•°é‡Œç›´æ¥è·å–ã€‚ä½†æ˜¯ç°åœ¨å‘ç°å…¶å®æ›´æ¨èåœ¨Sliceæ–‡ä»¶ä¸­é›†ä¸­åœ°å†™å…¥selectorå‡½æ•°ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">getCart</span> = (<span class="hljs-params">state</span>) =&gt; state.<span class="hljs-property">cart</span>.<span class="hljs-property">cart</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">getTotalCartQuantity</span> = (<span class="hljs-params">state</span>) =&gt;<br>  state.<span class="hljs-property">cart</span>.<span class="hljs-property">cart</span>.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">sum, item</span>) =&gt;</span> sum + item.<span class="hljs-property">quantity</span>, <span class="hljs-number">0</span>);<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">getTotalCartPrice</span> = (<span class="hljs-params">state</span>) =&gt;<br>  state.<span class="hljs-property">cart</span>.<span class="hljs-property">cart</span>.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">sum, item</span>) =&gt;</span> sum + item.<span class="hljs-property">totalPrice</span>, <span class="hljs-number">0</span>);<br></code></pre></td></tr></table></figure><p>è¿™æ ·çš„è¯å¦‚æœå°†æ¥éœ€è¦æ”¹å˜æŸä¸ªçŠ¶æ€åå­—ï¼Œå°±å¯ä»¥åªåœ¨è¿™é‡Œä¿®æ”¹ä¸€æ¬¡äº†ã€‚</p><h4 id="ï¼ˆ2ï¼‰ï¼Ÿï¼Ÿè¿ç®—ç¬¦"><a href="#ï¼ˆ2ï¼‰ï¼Ÿï¼Ÿè¿ç®—ç¬¦" class="headerlink" title="ï¼ˆ2ï¼‰ï¼Ÿï¼Ÿè¿ç®—ç¬¦"></a>ï¼ˆ2ï¼‰ï¼Ÿï¼Ÿè¿ç®—ç¬¦</h4><p>ä¾‹å¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">getCurrentQuantityById</span> = (<span class="hljs-params">id</span>) =&gt; <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span><br>  state.<span class="hljs-property">cart</span>.<span class="hljs-property">cart</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> item.<span class="hljs-property">pizzaId</span> === id)?.<span class="hljs-property">quantity</span> ?? <span class="hljs-number">0</span>;<br></code></pre></td></tr></table></figure><p><code>??</code> æ˜¯<strong>ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦</strong>ï¼ˆNullish Coalescing Operatorï¼‰ã€‚å®ƒç”¨äºåœ¨å·¦ä¾§è¡¨è¾¾å¼ä¸º <code>null</code> æˆ– <code>undefined</code> æ—¶ï¼Œè¿”å›å³ä¾§çš„å€¼ã€‚</p><h4 id="ï¼ˆ3ï¼‰caseReducers"><a href="#ï¼ˆ3ï¼‰caseReducers" class="headerlink" title="ï¼ˆ3ï¼‰caseReducers"></a>ï¼ˆ3ï¼‰caseReducers</h4><p>åœ¨è´­ç‰©è½¦ä¸­å®ç°å¢åŠ å’Œå‡å°‘pizzaæ•°é‡çš„æ—¶å€™é‡åˆ°äº†è€é—®é¢˜ï¼Œå°±æ˜¯pizzaçš„æ•°é‡ä¼šå˜æˆè´Ÿå€¼ã€‚æˆ‘è¯•å›¾è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œäºæ˜¯å†™äº†ä¸€è¡Œä»£ç ï¼š<code>if (!quantity) return;</code>è¿™æ ·å¦‚æœpizzaçš„æ•°é‡å‡åˆ°0ä¹‹åå°±ä¸ä¼šå‘ˆç°è¿™ä¸ªpizzaï¼Œä¹Ÿå°±æ— æ³•å†ä½¿å®ƒçš„æ•°é‡å‡ä¸‹å»äº†ã€‚ç„¶è€Œéšååˆé‡åˆ°äº†å¦ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯æŠŠæ‰€æœ‰pizzaæ•°é‡å‡ä¸º0çš„æ—¶å€™ï¼Œæ²¡æœ‰å±•ç¤ºé¢„è®¾çš„ç©ºè´­ç‰©è½¦ç•Œé¢ï¼Œä¹Ÿå°±æ˜¯è¯´cartçš„é•¿åº¦ä¸ä¸º0ï¼Œäºæ˜¯æˆ‘å¾—åˆ°cartpriceï¼Œç”¨å®ƒæ¥å†³å®šæ˜¯å¦å±•ç¤ºç©ºè´­ç‰©è½¦ç•Œé¢ã€‚</p><p>ä½†æ˜¯å¾ˆæ˜æ˜¾ä¸æ˜¯æ­£ç¡®çš„æ–¹æ³•ï¼Œå› ä¸ºåœ¨storeé‡Œï¼Œè¿™æ—¶å€™ä»æ—§æœ‰è¿™äº›quantityä¸º0çš„pizzaçš„å…ƒç´ ï¼Œåªæ˜¯ä¸ªæ•°ä¸º0è€Œå·²ï¼Œæœ€å¥½çš„åŠæ³•æ˜¯åˆ é™¤è¿™äº›å…ƒç´ ã€‚äºæ˜¯å¯ä»¥åœ¨sliceé‡Œçš„dcreaseå‡½æ•°ä¸­æ·»åŠ ä»£ç ï¼š</p><p><code>if (item.quantity === 0) cartSlice.caseReducers.deleteItem(state, action);</code></p><h4 id="ï¼ˆ4ï¼‰creatAsyncThunk"><a href="#ï¼ˆ4ï¼‰creatAsyncThunk" class="headerlink" title="ï¼ˆ4ï¼‰creatAsyncThunk"></a>ï¼ˆ4ï¼‰creatAsyncThunk</h4><p><code>createAsyncThunk</code> æ˜¯ Redux Toolkit æä¾›çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œç”¨æ¥ç®€åŒ–åœ¨ Redux ä¸­å¤„ç†å¼‚æ­¥é€»è¾‘çš„æ“ä½œã€‚å®ƒè‡ªåŠ¨ç”Ÿæˆç›¸åº”çš„ action ç±»å‹å¹¶ç®¡ç†å¼‚æ­¥è¯·æ±‚çš„ç”Ÿå‘½å‘¨æœŸï¼Œå¦‚ <code>pending</code>ã€<code>fulfilled</code> å’Œ <code>rejected</code> çŠ¶æ€ï¼Œå‡å°‘äº†æ‰‹åŠ¨ä¹¦å†™å¼‚æ­¥é€»è¾‘çš„å·¥ä½œé‡ã€‚</p><p><code>createAsyncThunk</code> çš„ä¼˜ç‚¹ï¼š</p><ol><li><strong>è‡ªåŠ¨ç”Ÿæˆ action</strong>ï¼šæ— éœ€æ‰‹åŠ¨ç¼–å†™ <code>pending</code>ã€<code>fulfilled</code> å’Œ <code>rejected</code> actionï¼Œç®€åŒ–äº†ä»£ç ã€‚</li><li><strong>å†…ç½®çš„é”™è¯¯å¤„ç†æœºåˆ¶</strong>ï¼šå¯ä»¥ä½¿ç”¨ <code>rejectWithValue</code> è¿”å›è‡ªå®šä¹‰çš„é”™è¯¯ä¿¡æ¯ã€‚</li><li><strong>ç»Ÿä¸€çš„å¼‚æ­¥é€»è¾‘ç®¡ç†</strong>ï¼šé€šè¿‡ <code>extraReducers</code> æ¥å¤„ç†ä¸åŒçŠ¶æ€çš„é€»è¾‘ï¼Œä½¿ä»£ç æ›´åŠ å¯è¯»ã€‚</li></ol><p>ä¸‹åˆ—è¿™æ®µä»£ç å¯ä»¥å’Œè¯¾ç¨‹13ä¸­çš„Thunkåšå¯¹æ¯”ã€‚</p><p>é¦–å…ˆï¼Œä¼ å…¥åŠ¨ä½œç±»å‹å’Œéœ€è¦æ‰§è¡Œçš„å¼‚æ­¥å‡½æ•°ï¼Œä¸€æ—¦actionè¢«æ´¾é£ï¼Œè¿™é‡Œçš„å‡½æ•°å°±ä¼šè¢«æ‰§è¡Œ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> fetchAddress = <span class="hljs-title function_">createAsyncThunk</span>(<br>  <span class="hljs-string">&#x27;user/fetchAddress&#x27;</span>,<br>  <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">// 1) We get the user&#x27;s geolocation position</span><br>    <span class="hljs-keyword">const</span> positionObj = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getPosition</span>();<br>    <span class="hljs-keyword">const</span> position = &#123;<br>      <span class="hljs-attr">latitude</span>: positionObj.<span class="hljs-property">coords</span>.<span class="hljs-property">latitude</span>,<br>      <span class="hljs-attr">longitude</span>: positionObj.<span class="hljs-property">coords</span>.<span class="hljs-property">longitude</span>,<br>    &#125;;<br><br>    <span class="hljs-comment">// 2) Then we use a reverse geocoding API to get a description of the user&#x27;s address, so we can display it the order form, so that the user can correct it if wrong</span><br>    <span class="hljs-keyword">const</span> addressObj = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getAddress</span>(position);<br>    <span class="hljs-keyword">const</span> address = <span class="hljs-string">`<span class="hljs-subst">$&#123;addressObj?.locality&#125;</span>, <span class="hljs-subst">$&#123;addressObj?.city&#125;</span> <span class="hljs-subst">$&#123;addressObj?.postcode&#125;</span>, <span class="hljs-subst">$&#123;addressObj?.countryName&#125;</span>`</span>;<br><br>    <span class="hljs-comment">// 3) Then we return an object with the data that we are interested in</span><br>    <span class="hljs-keyword">return</span> &#123; position, address &#125;;<br>  &#125;,<br>);<br></code></pre></td></tr></table></figure><h4 id="ï¼ˆ5ï¼‰valueå’ŒdefaultValue"><a href="#ï¼ˆ5ï¼‰valueå’ŒdefaultValue" class="headerlink" title="ï¼ˆ5ï¼‰valueå’ŒdefaultValue"></a>ï¼ˆ5ï¼‰valueå’ŒdefaultValue</h4><p><code>value</code></p><ul><li><strong>å—æ§ç»„ä»¶</strong>ï¼šå½“ä½¿ç”¨ <code>value</code> å±æ€§æ—¶ï¼Œè¡¨å•å…ƒç´ çš„å€¼å®Œå…¨ç”± React ç»„ä»¶çš„çŠ¶æ€æ§åˆ¶ã€‚è¿™ç§æ–¹å¼ç§°ä¸ºâ€œå—æ§ç»„ä»¶â€ï¼ˆcontrolled componentï¼‰ã€‚</li><li><strong>å®æ—¶åŒæ­¥</strong>ï¼š<code>value</code> éœ€è¦ä¸ç»„ä»¶çš„çŠ¶æ€ä¿æŒåŒæ­¥ï¼Œå½“è¾“å…¥å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå¿…é¡»é€šè¿‡çŠ¶æ€æ›´æ–°æ¥æ”¹å˜å€¼ã€‚é€šå¸¸æ­é… <code>onChange</code> äº‹ä»¶æ¥æ›´æ–°çŠ¶æ€ã€‚</li></ul><p><code>defaultValue</code></p><ul><li><strong>éå—æ§ç»„ä»¶</strong>ï¼šä½¿ç”¨ <code>defaultValue</code> æ—¶ï¼Œè¡¨å•å…ƒç´ çš„åˆå§‹å€¼ä»…åœ¨ç»„ä»¶é¦–æ¬¡æ¸²æŸ“æ—¶è®¾ç½®ï¼Œä¹‹åå®ƒçš„å€¼ä¸å†ç”± React æ§åˆ¶ã€‚è¿™ç§æ–¹å¼ç§°ä¸ºâ€œéå—æ§ç»„ä»¶â€ï¼ˆuncontrolled componentï¼‰ã€‚</li><li><strong>ä»…åˆå§‹åŒ–</strong>ï¼š<code>defaultValue</code> ä»…ç”¨äºè®¾ç½®å…ƒç´ çš„åˆå§‹å€¼ï¼Œè¡¨å•æ§ä»¶åœ¨ç”¨æˆ·è¾“å…¥åä¼šè‡ªå·±ç®¡ç†å…¶å€¼ï¼ŒReact ä¸å†è´Ÿè´£åç»­çš„å˜åŒ–ã€‚</li></ul><h4 id="ï¼ˆ6ï¼‰fetcher"><a href="#ï¼ˆ6ï¼‰fetcher" class="headerlink" title="ï¼ˆ6ï¼‰fetcher"></a>ï¼ˆ6ï¼‰fetcher</h4><p>ä½¿ç”¨ <code>useFetcher</code> é’©å­æ¥å¤„ç†éå¯¼èˆªç›¸å…³çš„è¡¨å•æäº¤ï¼Œé€‚åˆéœ€è¦å±€éƒ¨æ›´æ–°æˆ–æ˜¯å¤„ç†èƒŒæ™¯è¯·æ±‚çš„åœºæ™¯ã€‚<code>fetcher.Form</code> åˆ›å»ºäº†ä¸€ä¸ª <code>&lt;form&gt;</code>ï¼Œå¹¶ä¸”ä½¿ç”¨ <code>PATCH</code> æ–¹æ³•æäº¤æ•°æ®ã€‚è¿™ç§æ–¹å¼è®© <code>react-router</code> èƒ½å¤Ÿåœ¨ä¸åˆ·æ–°æ•´ä¸ªé¡µé¢çš„æƒ…å†µä¸‹å±€éƒ¨æäº¤æ•°æ®ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> &#123; useFetcher &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-router-dom&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Button</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../../ui/Button&#x27;</span>;<br><span class="hljs-keyword">import</span> &#123; updateOrder &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../../services/apiRestaurant&#x27;</span>;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">UpdateOrder</span>(<span class="hljs-params">&#123; order &#125;</span>) &#123;<br>  <span class="hljs-keyword">const</span> fetcher = <span class="hljs-title function_">useFetcher</span>();<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">fetcher.Form</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;PATCH&quot;</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;text-right&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;primary&quot;</span>&gt;</span>Make priority<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">fetcher.Form</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">UpdateOrder</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">action</span>(<span class="hljs-params">&#123; request, params &#125;</span>) &#123;<br>  <span class="hljs-comment">// console.log(&#x27;update&#x27;);</span><br>  <span class="hljs-keyword">const</span> data = &#123; <span class="hljs-attr">priority</span>: <span class="hljs-literal">true</span> &#125;;<br>  <span class="hljs-keyword">await</span> <span class="hljs-title function_">updateOrder</span>(params.<span class="hljs-property">orderId</span>, data);<br>  <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>åœ¨æ²¡æœ‰æ•°æ®å¹¶ä¸” <code>fetcher</code> å¤„äºç©ºé—² (<code>idle</code>) çŠ¶æ€æ—¶ï¼Œé€šè¿‡ <code>fetcher.load(&#39;/menu&#39;)</code> æ¥å‘èµ·è¯·æ±‚åŠ è½½èœå•æ•°æ®ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-title function_">useEffect</span>(<br>  <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">if</span> (!fetcher.<span class="hljs-property">data</span> &amp;&amp; fetcher.<span class="hljs-property">state</span> === <span class="hljs-string">&#x27;idle&#x27;</span>) fetcher.<span class="hljs-title function_">load</span>(<span class="hljs-string">&#x27;/menu&#x27;</span>);<br>  &#125;,<br>  [fetcher.<span class="hljs-property">state</span>, fetcher.<span class="hljs-property">data</span>],<br>);<br></code></pre></td></tr></table></figure><h4 id="ï¼ˆ7ï¼‰join"><a href="#ï¼ˆ7ï¼‰join" class="headerlink" title="ï¼ˆ7ï¼‰join"></a>ï¼ˆ7ï¼‰join</h4><p><code>join()</code> å‡½æ•°ä¸»è¦ç”¨äºå°†ä¸€ä¸ªåˆ—è¡¨æˆ–æ•°ç»„ä¸­çš„å…ƒç´ è¿æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²ã€‚å®ƒé€šå¸¸ç”¨äºå°†å¤šä¸ªå­—ç¬¦ä¸²æ‹¼æ¥åœ¨ä¸€èµ·ï¼Œä¸­é—´æ’å…¥æŒ‡å®šçš„åˆ†éš”ç¬¦ã€‚</p><p><code>array.join(separator);</code></p><ul><li>**<code>separator</code>**ï¼šå¯é€‰å‚æ•°ã€‚æŒ‡å®šåˆ†éš”æ•°ç»„å…ƒç´ çš„å­—ç¬¦ã€‚å¦‚æœæœªæŒ‡å®šï¼Œé»˜è®¤ä½¿ç”¨é€—å· <code>,</code> ä½œä¸ºåˆ†éš”ç¬¦ã€‚</li><li>åœ¨æ²¡æœ‰æŒ‡å®š <code>separator</code> æ—¶ï¼Œé»˜è®¤ä½¿ç”¨é€—å· <code>,</code> åˆ†éš”ã€‚</li></ul>]]></content>
    
    
    <categories>
      
      <category>reactè¯¾ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>react</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>reactè¯¾ç¨‹15-ä½¿ç”¨Tailwindè®¾è®¡é¡¹ç›®ç•Œé¢</title>
    <link href="/2024/09/13/react%E8%AF%BE%E7%A8%8B15-%E4%BD%BF%E7%94%A8Tailwind%E8%AE%BE%E8%AE%A1%E9%A1%B9%E7%9B%AE%E7%95%8C%E9%9D%A2/"/>
    <url>/2024/09/13/react%E8%AF%BE%E7%A8%8B15-%E4%BD%BF%E7%94%A8Tailwind%E8%AE%BE%E8%AE%A1%E9%A1%B9%E7%9B%AE%E7%95%8C%E9%9D%A2/</url>
    
    <content type="html"><![CDATA[<p>æœ¬æ¬¡è¯¾ç¨‹å­¦ä¹ Tailwindï¼Œå¹¶ä½¿ç”¨å®ƒæ¥è®¾è®¡fast pizzaçš„ç•Œé¢ğŸ«¡ã€‚</p><span id="more"></span><p>â­•<a href="https://tailwindcss.com/docs/installation">https://tailwindcss.com/docs/installation</a>ï¼ˆå®˜ç½‘ï¼‰</p><p>â­•<a href="https://tailwind.org.cn/docs/installation%EF%BC%88%E4%B8%AD%E6%96%87%E7%BD%91%E5%9D%80%EF%BC%89">https://tailwind.org.cn/docs/installationï¼ˆä¸­æ–‡ç½‘å€ï¼‰</a></p><p>æŒ‰ç…§æ­¥éª¤å»ä½¿ç”¨</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240913103504395.png" alt="image-20240913103504395"></p><p>ä½†æ˜¯åœ¨cssæ–‡ä»¶ä¸­ä¼šæŠ¥é”™ï¼š<code>Unknown at rule @tailwindcss(unknownAtRules)</code></p><p>è§£å†³æ–¹æ³•æ˜¯æ‰“å¼€setting.jsonæ–‡ä»¶ï¼Œåœ¨é‡Œé¢æ·»åŠ ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-attr">&quot;files.associations&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br><br> <span class="hljs-attr">&quot;*.css&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;tailwindcss&quot;</span><br><br><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br></code></pre></td></tr></table></figure><p>ï¼ˆæ€è€ƒäº†ä¸€ä¸ªå°æ—¶çš„é—®é¢˜ğŸ˜‡ï¼Œä¸–ç•Œä¸Šè¿˜æ˜¯èªæ˜çš„äººå¤šå“ˆï¼‰</p><p>â­•å®‰è£…Tailwind CSSæ‹“å±•</p><p>â­•<a href="https://github.com/tailwindlabs/prettier-plugin-tailwindcss?tab=readme-ov-file">https://github.com/tailwindlabs/prettier-plugin-tailwindcss?tab=readme-ov-file</a></p><p>å®‰è£…prettier-plugin-tailwindcssæ’ä»¶ï¼š</p><p><code>npm install -D prettier prettier-plugin-tailwindcss</code></p><p>ç„¶åè¿›è¡Œé…ç½®ï¼Œæ–°å»ºprettier.config.cjsæ–‡ä»¶ï¼Œåœ¨é‡Œé¢é…ç½®ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs json">module.exports = <span class="hljs-punctuation">&#123;</span><br>  plugins<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;prettier-plugin-tailwindcss&quot;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br> <span class="hljs-comment">// singleQuote: true,</span><br><span class="hljs-punctuation">&#125;</span>;<br></code></pre></td></tr></table></figure><p>è¿™æ ·å¯ä»¥è‡ªåŠ¨æ’åºç±»å</p><p>ï¼ˆæˆ‘æ€ä¹ˆé…ç½®äº†ä¸¤ä¸ªå°æ—¶â€¦â€¦æˆ‘çœŸçš„æµæ³ªäº†ã€‚ã€‚ã€‚ã€‚ï¼‰</p><p>ğŸ†’<a href="https://css-tricks.com/emoji-as-a-favicon/">https://css-tricks.com/emoji-as-a-favicon/</a></p><h3 id="ä¸€ã€å­¦ä¹ åˆæ­¥ä½¿ç”¨"><a href="#ä¸€ã€å­¦ä¹ åˆæ­¥ä½¿ç”¨" class="headerlink" title="ä¸€ã€å­¦ä¹ åˆæ­¥ä½¿ç”¨"></a>ä¸€ã€å­¦ä¹ åˆæ­¥ä½¿ç”¨</h3><h4 id="ï¼ˆ1ï¼‰color"><a href="#ï¼ˆ1ï¼‰color" class="headerlink" title="ï¼ˆ1ï¼‰color"></a>ï¼ˆ1ï¼‰color</h4><p>åœ¨tailwindçš„å®˜ç½‘ä¸­æœç´¢text colorã€background coloræŸ¥æ‰¾å…·ä½“é…ç½®è¯´æ˜</p><p>index.htmlä¸­ä¹Ÿå¯ä»¥è¿›è¡Œé…ç½®ï¼Œæ¥è®¾ç½®å…¨å±€style</p><h4 id="ï¼ˆ2ï¼‰Text"><a href="#ï¼ˆ2ï¼‰Text" class="headerlink" title="ï¼ˆ2ï¼‰Text"></a>ï¼ˆ2ï¼‰Text</h4><p>font sizeï¼ˆå¤§å°ï¼‰ã€font weightï¼ˆåŠ ç²—ï¼‰ã€uppercaseï¼ˆå¤§å†™ï¼‰ã€letter spacingï¼ˆé—´è·ï¼‰</p><h4 id="ï¼ˆ3ï¼‰space"><a href="#ï¼ˆ3ï¼‰space" class="headerlink" title="ï¼ˆ3ï¼‰space"></a>ï¼ˆ3ï¼‰space</h4><p>marginï¼ˆå¤–è¾¹è·ï¼‰ã€paddingï¼ˆå†…è¾¹è·ï¼‰ã€borderï¼ˆè¾¹æ¡†ï¼‰</p><p><strong><code>space</code><strong>ï¼šä¸»è¦ç”¨äº Tailwind CSS ä¸­ï¼Œç”¨äºè®¾ç½®</strong>å¤šä¸ªå­å…ƒç´ </strong>ä¹‹é—´çš„é—´è·ï¼Œä¸æ”¹å˜ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå­å…ƒç´ çš„å¤–è¾¹è·ã€‚ä¾‹å¦‚ï¼Œ<code>space-x-4</code> ä¼šåœ¨æ¯ä¸ªå­å…ƒç´ ä¹‹é—´å¢åŠ  4 çš„æ°´å¹³é—´è·ï¼Œä½†ä¸ä¼šå½±å“æœ€å¤–å±‚çš„å·¦å³é—´è·ã€‚</p><p>displayï¼š</p><ul><li>**<code>block</code>**ï¼šç”¨æ¥å®šä¹‰å†…å®¹éœ€è¦å æ»¡ä¸€æ•´è¡Œçš„å…ƒç´ ï¼ˆå¦‚æ®µè½ã€å®¹å™¨ç­‰ï¼‰ã€‚</li><li>**<code>inline</code>**ï¼šé€‚åˆå†…å®¹è¾ƒçŸ­ã€éœ€è¦ä¸å…¶ä»–å…ƒç´ åŒä¸€è¡Œæ˜¾ç¤ºçš„æƒ…å†µï¼ˆå¦‚æ–‡å­—ã€é“¾æ¥ç­‰ï¼‰ã€‚</li><li>**<code>inline-block</code>**ï¼šç”¨äºéœ€è¦æ°´å¹³æ’åˆ—çš„å…ƒç´ ï¼Œå¹¶ä¸”æ¯ä¸ªå…ƒç´ æœ‰ç‹¬ç«‹çš„å®½é«˜æ§åˆ¶ï¼ˆå¦‚å¯¼èˆªæ ä¸­çš„æŒ‰é’®ï¼‰ã€‚</li><li>**<code>flex</code>**ï¼šç”¨æ¥åˆ›å»ºçµæ´»çš„ã€å“åº”å¼çš„å¸ƒå±€ï¼Œå­å…ƒç´ å¯ä»¥è‡ªåŠ¨è°ƒæ•´æ’åˆ—ã€‚</li><li>**<code>grid</code>**ï¼šé€‚åˆæ„å»ºå¤æ‚çš„ã€ç»“æ„åŒ–çš„é¡µé¢å¸ƒå±€ï¼Œå­å…ƒç´ å¯ä»¥æŒ‰ç…§ç½‘æ ¼è§„åˆ™è‡ªåŠ¨æ’å¸ƒã€‚</li><li>**<code>none</code>**ï¼šç”¨äºéšè—ä¸éœ€è¦æ˜¾ç¤ºçš„å…ƒç´ ã€‚</li></ul><h4 id="ï¼ˆ4ï¼‰æ–­ç‚¹"><a href="#ï¼ˆ4ï¼‰æ–­ç‚¹" class="headerlink" title="ï¼ˆ4ï¼‰æ–­ç‚¹"></a>ï¼ˆ4ï¼‰æ–­ç‚¹</h4><p><code>breakpoints</code>ï¼ˆæ–­ç‚¹ï¼‰ç”¨äºå®ç°å“åº”å¼è®¾è®¡ã€‚æ–­ç‚¹å®šä¹‰äº†åœ¨ä¸åŒçš„å±å¹•å®½åº¦èŒƒå›´å†…ï¼Œå¦‚ä½•åº”ç”¨ä¸åŒçš„æ ·å¼è§„åˆ™ã€‚è¿™ä½¿å¾—å¯ä»¥æ ¹æ®è®¾å¤‡çš„å±å¹•å¤§å°è°ƒæ•´é¡µé¢å¸ƒå±€å’Œæ ·å¼ï¼Œä»¥æä¾›æ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚</p><ul><li><strong><code>sm</code></strong>: å°å±å¹•ï¼ˆæ‰‹æœºï¼Œæœ€å°å®½åº¦ 640pxï¼‰</li><li><strong><code>md</code></strong>: ä¸­ç­‰å±å¹•ï¼ˆå¹³æ¿ï¼Œæœ€å°å®½åº¦ 768pxï¼‰</li><li><strong><code>lg</code></strong>: å¤§å±å¹•ï¼ˆæ¡Œé¢ï¼Œæœ€å°å®½åº¦ 1024pxï¼‰</li><li><strong><code>xl</code></strong>: è¶…å¤§å±å¹•ï¼ˆå¤§æ¡Œé¢ï¼Œæœ€å°å®½åº¦ 1280pxï¼‰</li><li><strong><code>2xl</code></strong>: è¶…è¶…å¤§å±å¹•ï¼ˆè¶…å¤§æ¡Œé¢ï¼Œæœ€å°å®½åº¦ 1536pxï¼‰</li></ul><p>egï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;!-- é»˜è®¤å­—ä½“å¤§å°ï¼Œå½“å±å¹•å®½åº¦è¾¾åˆ°æˆ–è¶…è¿‡ 768px æ—¶å­—ä½“å˜å¤§ --&gt;<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;text-base md:text-lg&quot;</span>&gt;</span>å“åº”å¼å­—ä½“å¤§å°<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p>å¦‚æœ Tailwind çš„é»˜è®¤æ–­ç‚¹ä¸ç¬¦åˆä½ çš„éœ€æ±‚ï¼Œå¯ä»¥åœ¨ <code>tailwind.config.js</code> æ–‡ä»¶ä¸­è¿›è¡Œè‡ªå®šä¹‰é…ç½®ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-comment">// æ·»åŠ ä¸€ä¸ªæ–°çš„æ–­ç‚¹ 3xlï¼Œç”¨äºåœ¨å±å¹•å®½åº¦è¾¾åˆ°æˆ–è¶…è¿‡ 1600px æ—¶åº”ç”¨æ ·å¼ã€‚</span><br>module.exports = <span class="hljs-punctuation">&#123;</span><br>  theme<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    extend<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      screens<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        &#x27;<span class="hljs-number">3</span>xl&#x27;<span class="hljs-punctuation">:</span> &#x27;<span class="hljs-number">1600</span>px&#x27;<span class="hljs-punctuation">,</span><br><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span> <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span> <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><span class="hljs-punctuation">&#125;</span><br><br></code></pre></td></tr></table></figure><h4 id="ï¼ˆ5ï¼‰Flexbox"><a href="#ï¼ˆ5ï¼‰Flexbox" class="headerlink" title="ï¼ˆ5ï¼‰Flexbox"></a>ï¼ˆ5ï¼‰Flexbox</h4><p>items-center : ç”¨äºåœ¨ Flexbox å®¹å™¨çš„äº¤å‰è½´ï¼ˆå‚ç›´è½´ï¼‰ä¸Šå°†æ‰€æœ‰å­å…ƒç´ å±…ä¸­å¯¹é½ã€‚</p><p>justify-between :ç”¨äºåœ¨ Flexbox å®¹å™¨çš„ä¸»è½´ï¼ˆæ°´å¹³è½´ï¼‰ä¸Šï¼Œå°†æ‰€æœ‰å­å…ƒç´ ä¹‹é—´çš„ç©ºé—´å‡åŒ€åˆ†é…ã€‚</p><h4 id="ï¼ˆ6ï¼‰Grid"><a href="#ï¼ˆ6ï¼‰Grid" class="headerlink" title="ï¼ˆ6ï¼‰Grid"></a>ï¼ˆ6ï¼‰Grid</h4><p><code>grid h-screen grid-rows-[auto_1fr_auto]</code></p><h4 id="ï¼ˆ7ï¼‰Form-element"><a href="#ï¼ˆ7ï¼‰Form-element" class="headerlink" title="ï¼ˆ7ï¼‰Form element"></a>ï¼ˆ7ï¼‰Form element</h4><p>â€‹    <code>className=&quot;w-28 rounded-full bg-yellow-100 px-4 py-2 text-sm transition-all duration-300 placeholder:text-stone-400 focus:outline-none focus:ring focus:ring-yellow-600 focus:ring-opacity-50 sm:w-64 sm:focus:w-72&quot;</code></p><h4 id="ï¼ˆ8ï¼‰é‡ç”¨"><a href="#ï¼ˆ8ï¼‰é‡ç”¨" class="headerlink" title="ï¼ˆ8ï¼‰é‡ç”¨"></a>ï¼ˆ8ï¼‰é‡ç”¨</h4><h5 id="1ã€åœ¨cssä¸­ç¼–å†™ç±»å"><a href="#1ã€åœ¨cssä¸­ç¼–å†™ç±»å" class="headerlink" title="1ã€åœ¨cssä¸­ç¼–å†™ç±»å"></a>1ã€åœ¨cssä¸­ç¼–å†™ç±»å</h5><p>æ­¤æ—¶åœ¨className&#x3D;â€œinputâ€å°±å¯ä»¥è¿ç”¨è¿™ä¸ªç±»å</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-keyword">@layer</span> components &#123;<br>  <span class="hljs-selector-class">.input</span> &#123;<br>    <span class="hljs-keyword">@apply</span> w-full rounded-full border border-stone-<span class="hljs-number">200</span> px-<span class="hljs-number">4</span> py-<span class="hljs-number">2</span> text-sm <span class="hljs-attribute">placeholder</span>:text-stone-<span class="hljs-number">400</span> <span class="hljs-attribute">focus</span>:outline-none <span class="hljs-attribute">focus</span>:ring <span class="hljs-attribute">focus</span>:ring-yellow-<span class="hljs-number">300</span> <span class="hljs-attribute">md</span>:px-<span class="hljs-number">6</span> <span class="hljs-attribute">md</span>:py-<span class="hljs-number">3</span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="2ã€åœ¨Reactä¸­æ–°å»ºç»„ä»¶"><a href="#2ã€åœ¨Reactä¸­æ–°å»ºç»„ä»¶" class="headerlink" title="2ã€åœ¨Reactä¸­æ–°å»ºç»„ä»¶"></a>2ã€åœ¨Reactä¸­æ–°å»ºç»„ä»¶</h5><p>egï¼šè¿™é‡Œåˆ›å»ºäº†ä¸€ä¸ªæ—¢å¯ä»¥è¢«å½“ä½œbuttonåˆå¯ä»¥è¢«å½“ä½œLinkçš„å¯é‡ç”¨ç»„ä»¶</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">Link</span>, useNavigate &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-router-dom&#x27;</span>;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">LinkButton</span>(<span class="hljs-params">&#123; children, to &#125;</span>) &#123;<br>  <span class="hljs-keyword">const</span> navigate = <span class="hljs-title function_">useNavigate</span>();<br>  <span class="hljs-keyword">const</span> className = <span class="hljs-string">&#x27;text-sm text-blue-300 hover:text-blue-600 hover:underline&#x27;</span>;<br><br>  <span class="hljs-keyword">if</span> (to === <span class="hljs-string">&#x27;-1&#x27;</span>)<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> navigate(-1)&#125; className=&#123;className&#125;&gt;</span><br><span class="language-xml">        <span class="hljs-symbol">&amp;larr;</span> Go back</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br>    );<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&#123;to&#125;</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&#123;className&#125;</span>&gt;</span></span><br><span class="language-xml">      &#123;children&#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">LinkButton</span>;<br><br></code></pre></td></tr></table></figure><h4 id="ï¼ˆ9ï¼‰é…ç½®"><a href="#ï¼ˆ9ï¼‰é…ç½®" class="headerlink" title="ï¼ˆ9ï¼‰é…ç½®"></a>ï¼ˆ9ï¼‰é…ç½®</h4><p>å¯ä»¥æŸ¥çœ‹é»˜è®¤é…ç½®</p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240918155917608.png" alt="image-20240918155917608" style="zoom:50%;" /><p>ä¿®æ”¹é»˜è®¤é…ç½®ï¼šåœ¨<code>tailwind.config.js</code>ä¸­ï¼š</p><p>ï¼ˆæŒ‰ç…§é»˜è®¤é…ç½®æ–‡ä»¶çš„æ ¼å¼ï¼‰</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-comment">/** @type &#123;import(&#x27;tailwindcss&#x27;).Config&#125; */</span><br><span class="hljs-comment">//eslint-disable-next-line  </span><br>export default <span class="hljs-punctuation">&#123;</span><br>  content<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>&#x27;./index.html&#x27;<span class="hljs-punctuation">,</span> &#x27;./src<span class="hljs-comment">/**/</span>*.<span class="hljs-punctuation">&#123;</span>js<span class="hljs-punctuation">,</span>ts<span class="hljs-punctuation">,</span>jsx<span class="hljs-punctuation">,</span>tsx<span class="hljs-punctuation">&#125;</span>&#x27;<span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>  theme<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    fontFamily<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      sans<span class="hljs-punctuation">:</span> &#x27;Roboto Mono<span class="hljs-punctuation">,</span> monospace&#x27;<span class="hljs-punctuation">,</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    extend<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>  plugins<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br><span class="hljs-punctuation">&#125;</span>;<br></code></pre></td></tr></table></figure><h4 id="ï¼ˆ10ï¼‰type"><a href="#ï¼ˆ10ï¼‰type" class="headerlink" title="ï¼ˆ10ï¼‰type"></a>ï¼ˆ10ï¼‰type</h4><p>Buttonç»„ä»¶ï¼š</p><p>æ¥æ”¶type propsï¼Œå¹¶ä½¿ç”¨stylesæ¥åº”ç”¨ä¸åŒç±»å</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">Link</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-router-dom&#x27;</span>;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Button</span>(<span class="hljs-params">&#123; children, disabled, to, type &#125;</span>) &#123;<br>  <span class="hljs-keyword">const</span> base =<br>    <span class="hljs-string">&#x27;inline-block rounded-full bg-yellow-500 uppercase tracking-wide text-stone-800 transition-colors duration-300 hover:bg-yellow-300 focus:bg-yellow-300 focus:outline-none focus:ring focus:ring-yellow-300 focus:ring-offset-2 disabled:cursor-not-allowed&#x27;</span>;<br><br>  <span class="hljs-keyword">const</span> styles = &#123;<br>    <span class="hljs-attr">primary</span>: base + <span class="hljs-string">&#x27; px-4 py-3 md:px-6 md:py-4&#x27;</span>,<br>    <span class="hljs-attr">small</span>: base + <span class="hljs-string">&#x27; px-4 py-2 md:px-5 md:py-2.5 text-xs&#x27;</span>,<br>  &#125;;<br><br>  <span class="hljs-keyword">if</span> (to)<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&#123;styles[type]&#125;</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&#123;to&#125;</span>&gt;</span></span><br><span class="language-xml">        &#123;children&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span></span><br>    );<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">disabled</span>=<span class="hljs-string">&#123;disabled&#125;</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&#123;styles[type]&#125;</span>&gt;</span></span><br><span class="language-xml">      &#123;children&#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Button</span>;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>reactè¯¾ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>react</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>reactè¯¾ç¨‹14.1-React-Routerä¸“é¢˜</title>
    <link href="/2024/09/11/react%E8%AF%BE%E7%A8%8B14.1-React-Router%E4%B8%93%E9%A2%98/"/>
    <url>/2024/09/11/react%E8%AF%BE%E7%A8%8B14.1-React-Router%E4%B8%93%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<p>æœ¬ç¯‡æ–‡ç« é‡é‡æ•´ç†ä¸€ä¸‹React Routerçš„å·¥å…·å’Œç”¨æ³•é›†åˆã€‚</p><span id="more"></span><h3 id="ä¸€ã€useNavigate"><a href="#ä¸€ã€useNavigate" class="headerlink" title="ä¸€ã€useNavigate"></a>ä¸€ã€useNavigate</h3><p>ç”¨äºé€šè¿‡ç¼–ç¨‹æ–¹å¼åœ¨ React åº”ç”¨ä¸­è¿›è¡Œå¯¼èˆªï¼ˆé¡µé¢è·³è½¬ï¼‰ã€‚ç›¸æ¯”äºä¼ ç»Ÿçš„ <code>&lt;a&gt;</code> æ ‡ç­¾æˆ–è€… <code>Link</code> ç»„ä»¶ï¼Œ<code>useNavigate</code> æä¾›äº†æ›´çµæ´»çš„æ–¹å¼æ¥å®ç°è·³è½¬ï¼Œä¾‹å¦‚åŸºäºç”¨æˆ·äº¤äº’æˆ–æŸäº›æ¡ä»¶æ—¶è‡ªåŠ¨è·³è½¬ã€‚</p><h4 id="ï¼ˆ1ï¼‰åŸºæœ¬ç”¨æ³•"><a href="#ï¼ˆ1ï¼‰åŸºæœ¬ç”¨æ³•" class="headerlink" title="ï¼ˆ1ï¼‰åŸºæœ¬ç”¨æ³•"></a>ï¼ˆ1ï¼‰åŸºæœ¬ç”¨æ³•</h4><p><code>useNavigate</code> è¿”å›ä¸€ä¸ª <code>navigate</code> å‡½æ•°ï¼Œå¯ä»¥è°ƒç”¨è¯¥å‡½æ•°å¹¶ä¼ å…¥è·¯å¾„ï¼Œå®ç°å¯¼èˆªã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> navigate = <span class="hljs-title function_">useNavigate</span>(); <span class="hljs-comment">// ä½¿ç”¨ useNavigate é’©å­</span><br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">goToAboutPage</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    <span class="hljs-title function_">navigate</span>(<span class="hljs-string">&quot;/about&quot;</span>); <span class="hljs-comment">// ç¼–ç¨‹å¼å¯¼èˆªåˆ° &quot;/about&quot; è·¯ç”±</span><br>  &#125;;<br></code></pre></td></tr></table></figure><p>è·³è½¬ç±»å‹</p><ul><li><strong>ç»å¯¹è·¯å¾„</strong>ï¼šä»æ ¹è·¯å¾„å¼€å§‹ï¼Œå¦‚ <code>navigate(&quot;/about&quot;)</code>ã€‚</li><li><strong>ç›¸å¯¹è·¯å¾„</strong>ï¼šç›¸å¯¹äºå½“å‰è·¯å¾„ï¼Œå¦‚ <code>navigate(&quot;profile&quot;)</code>ã€‚</li></ul><h4 id="ï¼ˆ2ï¼‰replaceæ›¿æ¢å†å²è®°å½•"><a href="#ï¼ˆ2ï¼‰replaceæ›¿æ¢å†å²è®°å½•" class="headerlink" title="ï¼ˆ2ï¼‰replaceæ›¿æ¢å†å²è®°å½•"></a>ï¼ˆ2ï¼‰replaceæ›¿æ¢å†å²è®°å½•</h4><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>navigate</code> ä¼šåœ¨æµè§ˆå™¨çš„å†å²è®°å½•ä¸­æ·»åŠ ä¸€ä¸ªæ–°æ¡ç›®ï¼Œè¿™æ ·ç”¨æˆ·å¯ä»¥é€šè¿‡æµè§ˆå™¨çš„â€œåé€€â€æŒ‰é’®å›åˆ°ä¹‹å‰çš„é¡µé¢ã€‚å¦‚æœä¸æƒ³è®©ç”¨æˆ·é€šè¿‡åé€€æŒ‰é’®è¿”å›ï¼Œå¯ä»¥ä½¿ç”¨ <code>replace</code> é€‰é¡¹ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-title function_">navigate</span>(<span class="hljs-string">&quot;/dashboard&quot;</span>, &#123; <span class="hljs-attr">replace</span>: <span class="hljs-literal">true</span> &#125;);<br></code></pre></td></tr></table></figure><p>è¿™æ ·è·³è½¬åï¼Œ<code>/dashboard</code> ä¼šæ›¿æ¢å½“å‰çš„é¡µé¢ï¼Œç”¨æˆ·ä¸èƒ½é€šè¿‡â€œåé€€â€æŒ‰é’®è¿”å›åˆ°åŸé¡µé¢ã€‚</p><h4 id="ï¼ˆ3ï¼‰å‰è¿›å’Œåé€€"><a href="#ï¼ˆ3ï¼‰å‰è¿›å’Œåé€€" class="headerlink" title="ï¼ˆ3ï¼‰å‰è¿›å’Œåé€€"></a>ï¼ˆ3ï¼‰å‰è¿›å’Œåé€€</h4><p><code>useNavigate</code> è¿˜å¯ä»¥åƒæµè§ˆå™¨çš„å‰è¿›å’Œåé€€æŒ‰é’®ä¸€æ ·ï¼ŒåŸºäºå†å²è®°å½•è¿›è¡Œå¯¼èˆªã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">// åé€€åˆ°ä¸Šä¸€ä¸ªé¡µé¢</span><br><span class="hljs-title function_">navigate</span>(-<span class="hljs-number">1</span>);<br><br><span class="hljs-comment">// å‰è¿›åˆ°ä¸‹ä¸€ä¸ªé¡µé¢</span><br><span class="hljs-title function_">navigate</span>(<span class="hljs-number">1</span>);<br></code></pre></td></tr></table></figure><h4 id="ï¼ˆ4ï¼‰ä¼ é€’çŠ¶æ€"><a href="#ï¼ˆ4ï¼‰ä¼ é€’çŠ¶æ€" class="headerlink" title="ï¼ˆ4ï¼‰ä¼ é€’çŠ¶æ€"></a>ï¼ˆ4ï¼‰ä¼ é€’çŠ¶æ€</h4><p>å¯ä»¥é€šè¿‡ <code>navigate</code> ä¼ é€’ä¸€äº›çŠ¶æ€ä¿¡æ¯åˆ°ç›®æ ‡é¡µé¢ï¼Œè¿™äº›çŠ¶æ€ä¿¡æ¯ä¸ä¼šæ˜¾ç¤ºåœ¨ URL ä¸­ï¼Œä½†å¯ä»¥åœ¨ç›®æ ‡é¡µé¢ä¸­é€šè¿‡ <code>useLocation</code> é’©å­æ¥è¯»å–ã€‚</p><h4 id="ï¼ˆ5ï¼‰é˜»æ­¢å¯¼èˆª"><a href="#ï¼ˆ5ï¼‰é˜»æ­¢å¯¼èˆª" class="headerlink" title="ï¼ˆ5ï¼‰é˜»æ­¢å¯¼èˆª"></a>ï¼ˆ5ï¼‰é˜»æ­¢å¯¼èˆª</h4><p>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½éœ€è¦é˜»æ­¢å¯¼èˆªï¼ˆä¾‹å¦‚ç”¨æˆ·æ²¡æœ‰ä¿å­˜è¡¨å•æ•°æ®æ—¶ï¼‰ã€‚React Router æä¾›äº† <code>usePrompt</code> æ¥å¤„ç†è¿™ä¸ªéœ€æ±‚ã€‚</p><h4 id="ï¼ˆ6ï¼‰æ³¨æ„äº‹é¡¹"><a href="#ï¼ˆ6ï¼‰æ³¨æ„äº‹é¡¹" class="headerlink" title="ï¼ˆ6ï¼‰æ³¨æ„äº‹é¡¹"></a>ï¼ˆ6ï¼‰æ³¨æ„äº‹é¡¹</h4><p>ä¸ºä»€ä¹ˆ <code>navigate</code> é€šå¸¸åœ¨å›è°ƒå‡½æ•°æˆ– <code>useEffect</code> ä¸­ä½¿ç”¨ï¼Ÿ</p><ol><li><strong>é¿å…è¿‡æ—©æ‰§è¡Œ</strong>ï¼š<code>navigate</code> æ˜¯ä¸€ä¸ªä¼šå¼•èµ·é¡µé¢é‡å®šå‘çš„æ“ä½œï¼Œè°ƒç”¨å®ƒä¼šå¯¼è‡´ç»„ä»¶çŠ¶æ€å‘ç”Ÿæ”¹å˜ã€‚å¦‚æœä½ åœ¨ç»„ä»¶é¦–æ¬¡æ¸²æŸ“çš„è¿‡ç¨‹ä¸­è°ƒç”¨å®ƒï¼Œå¯èƒ½ä¼šå¼•å‘ä¸å¿…è¦çš„é‡æ¸²æŸ“æˆ–ä¸ä¸€è‡´çš„çŠ¶æ€ã€‚å› æ­¤ï¼Œå®ƒé€šå¸¸åœ¨å›è°ƒå‡½æ•°ï¼ˆå¦‚ <code>onClick</code>ï¼‰ä¸­ä½¿ç”¨ï¼Œæˆ–æ”¾åœ¨ <code>useEffect</code> ä¸­ï¼Œç¡®ä¿é¡µé¢å·²ç»å®Œæˆåˆå§‹æ¸²æŸ“ï¼Œä¸”æœ‰åˆé€‚çš„æ—¶æœºæ¥æ‰§è¡Œå¯¼èˆªæ“ä½œã€‚</li><li><strong>ç¡®ä¿é¡µé¢é€»è¾‘çš„æ­£ç¡®æ€§</strong>ï¼šåƒè¡¨å•æäº¤æˆ–èº«ä»½éªŒè¯è¿™æ ·çš„åœºæ™¯ï¼Œé€šå¸¸åœ¨ç‰¹å®šçš„å›è°ƒæˆ–ç”Ÿå‘½å‘¨æœŸé˜¶æ®µå‘ç”Ÿã€‚åœ¨è¿™äº›é˜¶æ®µä½¿ç”¨ <code>navigate</code> èƒ½ç¡®ä¿å¯¼èˆªæ˜¯åœ¨åˆé€‚çš„æ—¶åˆ»æ‰§è¡Œï¼Œä¸ä¼šæ‰“æ–­åº”ç”¨çš„æ­£å¸¸æ¸²æŸ“é€»è¾‘ã€‚</li></ol><p>åœ¨ç”¨æˆ·äº¤äº’ï¼ˆå¦‚æŒ‰é’®ç‚¹å‡»ï¼‰æ—¶ï¼Œå¯ä»¥åœ¨äº‹ä»¶å¤„ç†å›è°ƒä¸­ä½¿ç”¨ <code>navigate</code></p><h3 id="äºŒã€useNavigation"><a href="#äºŒã€useNavigation" class="headerlink" title="äºŒã€useNavigation"></a>äºŒã€useNavigation</h3><p><code>useNavigation</code> æ˜¯ React Router v6 æä¾›çš„ä¸€ä¸ªé’©å­ï¼Œç”¨äºè·å–å½“å‰å¯¼èˆªï¼ˆé¡µé¢è·³è½¬ï¼‰çš„çŠ¶æ€ã€‚å®ƒå¯ä»¥å¸®åŠ©ä½ åœ¨ç»„ä»¶ä¸­ç›‘æ§å¯¼èˆªçš„è¿›å±•ï¼Œå°¤å…¶æ˜¯ç”¨äºå¤„ç†é¡µé¢åŠ è½½çŠ¶æ€ã€å¼‚æ­¥æ•°æ®è¯·æ±‚ç­‰æƒ…å†µã€‚</p><h4 id="ï¼ˆ1ï¼‰useNavigation-çš„ä¸»è¦ç”¨é€”"><a href="#ï¼ˆ1ï¼‰useNavigation-çš„ä¸»è¦ç”¨é€”" class="headerlink" title="ï¼ˆ1ï¼‰useNavigation çš„ä¸»è¦ç”¨é€”"></a>ï¼ˆ1ï¼‰<code>useNavigation</code> çš„ä¸»è¦ç”¨é€”</h4><ol><li><strong>ç›‘æ§å¯¼èˆªçŠ¶æ€</strong>ï¼šä½ å¯ä»¥æ£€æŸ¥å½“å‰çš„å¯¼èˆªçŠ¶æ€ï¼Œä¾‹å¦‚æ˜¯å¦å¤„äºåŠ è½½ã€æäº¤çŠ¶æ€ã€‚</li><li><strong>æ˜¾ç¤ºåŠ è½½æŒ‡ç¤ºå™¨</strong>ï¼šå¯ä»¥æ ¹æ®å¯¼èˆªçŠ¶æ€æ˜¾ç¤ºä¸€ä¸ªâ€œåŠ è½½ä¸­â€çš„æç¤ºï¼Œä»¥æå‡ç”¨æˆ·ä½“éªŒã€‚</li></ol><h4 id="ï¼ˆ2ï¼‰å¯¼èˆªçŠ¶æ€"><a href="#ï¼ˆ2ï¼‰å¯¼èˆªçŠ¶æ€" class="headerlink" title="ï¼ˆ2ï¼‰å¯¼èˆªçŠ¶æ€"></a>ï¼ˆ2ï¼‰å¯¼èˆªçŠ¶æ€</h4><p>**<code>idle</code>**ï¼šç©ºé—²çŠ¶æ€ï¼Œæ²¡æœ‰è¿›è¡Œå¯¼èˆªæ“ä½œã€‚</p><p>**<code>loading</code>**ï¼šæ­£åœ¨åŠ è½½æ–°çš„é¡µé¢æˆ–èµ„æºã€‚</p><p>**<code>submitting</code>**ï¼šå½“å‰æ­£åœ¨æäº¤æ•°æ®ï¼ˆä¾‹å¦‚è¡¨å•æäº¤ï¼‰ã€‚</p><h3 id="ä¸‰ã€Navigate"><a href="#ä¸‰ã€Navigate" class="headerlink" title="ä¸‰ã€Navigate"></a>ä¸‰ã€Navigate</h3><p><code>&lt;Navigate&gt;</code> ç»„ä»¶ç”¨äºé‡å®šå‘ç”¨æˆ·åˆ°æŒ‡å®šçš„è·¯ç”±ã€‚å®ƒå…è®¸ä½ åœ¨ç‰¹å®šæ¡ä»¶ä¸‹ä»ä¸€ä¸ªé¡µé¢è‡ªåŠ¨è·³è½¬åˆ°å¦ä¸€ä¸ªé¡µé¢ï¼Œè€Œæ— éœ€ç”¨æˆ·æ‰‹åŠ¨ç‚¹å‡»ã€‚</p><p><code>&lt;Navigate&gt;</code> ç»„ä»¶çš„åŸºæœ¬ç”¨æ³•æ˜¯å°†ç”¨æˆ·ä»ä¸€ä¸ªè·¯ç”±é‡å®šå‘åˆ°å¦ä¸€ä¸ªè·¯ç”±ã€‚ä½ åªéœ€è¦æŒ‡å®š <code>to</code> å±æ€§ä¸ºç›®æ ‡è·¯å¾„å³å¯ã€‚</p><h4 id="replace-å±æ€§"><a href="#replace-å±æ€§" class="headerlink" title="replace å±æ€§"></a><code>replace</code> å±æ€§</h4><p><code>&lt;Navigate&gt;</code> ç»„ä»¶ä¸­çš„ <code>replace</code> å±æ€§æ§åˆ¶æ˜¯å¦ç”¨æ–°é¡µé¢æ›¿æ¢å½“å‰é¡µé¢åœ¨æµè§ˆå™¨å†å²è®°å½•ä¸­çš„ä½ç½®ã€‚å¦‚æœä¸ä½¿ç”¨ <code>replace</code>ï¼Œåˆ™é»˜è®¤ä¼šå°†æ–°é¡µé¢åŠ å…¥æµè§ˆå™¨å†å²è®°å½•ä¸­ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡â€œåé€€â€æŒ‰é’®è¿”å›åŸé¡µé¢ã€‚</p><p>EGï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;<span class="hljs-title class_">Route</span> index element=&#123;<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Navigate</span> <span class="hljs-attr">replace</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;cities&quot;</span> /&gt;</span></span>&#125; /&gt;<br></code></pre></td></tr></table></figure><p><strong>ä¸åŠ  <code>replace</code></strong> æ—¶ï¼Œæµè§ˆå™¨çš„å†å²è®°å½•ä¸­ä¼šä¿å­˜ <code>Navigate</code> é‡å®šå‘çš„è·¯å¾„ï¼ˆ<code>/</code> -&gt; <code>/cities</code>ï¼‰ï¼Œå¯¼è‡´ç‚¹å‡»â€œè¿”å›â€æŒ‰é’®æ—¶ï¼Œè·¯ç”±ä¼šé‡æ–°ä» <code>/</code> é‡å®šå‘åˆ° <code>/cities</code>ï¼Œä½¿ç”¨æˆ·çœ‹èµ·æ¥æ— æ³•é€€å‡º <code>CityList</code> é¡µé¢ã€‚</p><p><strong>åŠ ä¸Š <code>replace</code></strong> åï¼Œ<code>Navigate</code> çš„è¡Œä¸ºæ˜¯æ›¿æ¢ <code>/</code> è·¯ç”±ï¼Œä¸å†ä¿ç•™ <code>/</code> åœ¨å†å²è®°å½•ä¸­ï¼Œè¿™æ ·æµè§ˆå™¨è¿”å›æŒ‰é’®å°±ä¸ä¼šè§¦å‘ä» <code>/</code> é‡å®šå‘åˆ° <code>/cities</code> çš„å¾ªç¯ã€‚</p><h3 id="å››ã€NavLink-å’ŒLink"><a href="#å››ã€NavLink-å’ŒLink" class="headerlink" title="å››ã€NavLink å’ŒLink"></a>å››ã€NavLink å’ŒLink</h3><p><code>&lt;Link&gt;</code> æ˜¯ React Router ä¸­çš„åŸºç¡€ç»„ä»¶ï¼Œç”¨æ¥åˆ›å»ºé¡µé¢ä¹‹é—´çš„å¯¼èˆªé“¾æ¥ã€‚å®ƒçš„åŠŸèƒ½ç±»ä¼¼äºä¼ ç»Ÿçš„ HTML <code>&lt;a&gt;</code> æ ‡ç­¾ï¼Œä½†ä¸ä¼šå¼•èµ·é¡µé¢çš„å®Œæ•´åˆ·æ–°ï¼Œè€Œæ˜¯ä½¿ç”¨ React Router çš„è·¯ç”±æœºåˆ¶è¿›è¡Œæ— åˆ·æ–°è·³è½¬ã€‚</p><p><code>&lt;NavLink&gt;</code> æ˜¯ç»§æ‰¿è‡ª <code>&lt;Link&gt;</code> çš„ç»„ä»¶ï¼Œé™¤äº†æ‹¥æœ‰ <code>&lt;Link&gt;</code> çš„æ‰€æœ‰åŠŸèƒ½å¤–ï¼Œè¿˜å¯ä»¥åŠ¨æ€æ·»åŠ æ ·å¼å’Œç±»åæ¥è¡¨æ˜å½“å‰é“¾æ¥æ˜¯å¦å¤„äºâ€œé€‰ä¸­â€çŠ¶æ€ã€‚å®ƒçš„ä¸»è¦ä½œç”¨æ˜¯ä¸ºå¯¼èˆªé“¾æ¥æ·»åŠ æ¿€æ´»çŠ¶æ€ï¼Œä¾‹å¦‚å½“å‰é¡µé¢å¯¹åº”çš„å¯¼èˆªé¡¹å¯ä»¥æ˜¾ç¤ºä¸ºé«˜äº®ã€‚</p><h3 id="äº”ã€paramså‚æ•°"><a href="#äº”ã€paramså‚æ•°" class="headerlink" title="äº”ã€paramså‚æ•°"></a>äº”ã€paramså‚æ•°</h3><p><code>params</code> æ˜¯ React Router ä¸­è·¯ç”±å‚æ•°çš„ä¸€ä¸ªå¯¹è±¡ï¼Œé€šå¸¸ç”¨äºè·å– URL ä¸­çš„åŠ¨æ€éƒ¨åˆ†ï¼ˆè·¯å¾„å‚æ•°ï¼‰ã€‚åœ¨ç¤ºä¾‹ä»£ç ä¸­ï¼Œ<code>params</code> æ˜¯é€šè¿‡ <code>loader</code> å‡½æ•°çš„å‚æ•°å¯¹è±¡è§£æ„å‡ºæ¥çš„ï¼Œç”¨æ¥è·å– URL è·¯å¾„ä¸­çš„åŠ¨æ€æ•°æ®ï¼Œæ¯”å¦‚ <code>orderId</code>ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">loader</span>(<span class="hljs-params">&#123; params &#125;</span>) &#123;<br>  <span class="hljs-keyword">const</span> order = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getOrder</span>(params.<span class="hljs-property">orderId</span>);<br>  <span class="hljs-keyword">return</span> order;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>params</code> å¯¹è±¡åŒ…å«å½“å‰è·¯ç”±è·¯å¾„ä¸­å®šä¹‰çš„åŠ¨æ€è·¯å¾„å‚æ•°ã€‚åœ¨è·¯ç”±é…ç½®ä¸­ä½¿ç”¨äº†ç±»ä¼¼ <code>/order/:orderId</code> çš„è·¯å¾„æ—¶ï¼ŒReact Router ä¼šå°† URL ä¸­å¯¹åº”çš„ <code>orderId</code> æå–å‡ºæ¥ï¼Œå¹¶å°†å…¶æ”¾å…¥ <code>params</code> å¯¹è±¡ä¸­ã€‚</p><h3 id="å…­ã€React-Router-Actions"><a href="#å…­ã€React-Router-Actions" class="headerlink" title="å…­ã€React Router Actions"></a>å…­ã€React Router Actions</h3><p>åœ¨ React Router v6 ä¸­ï¼Œ<code>Actions</code> æ˜¯å¤„ç†è¡¨å•æäº¤æˆ–å…¶ä»–äº‹ä»¶æ—¶å‘é€æ•°æ®åˆ°æœåŠ¡å™¨çš„æœºåˆ¶ï¼Œé€šå¸¸å’Œè·¯ç”±ä¸­çš„ <code>action</code> å‡½æ•°ç»“åˆä½¿ç”¨ã€‚<code>action</code> ç”¨äºåœ¨ç‰¹å®šè·¯ç”±ä¸‹å¤„ç†é GET è¯·æ±‚ï¼ˆä¾‹å¦‚ POSTã€PUTã€DELETEï¼‰ï¼Œåœ¨è¡¨å•æäº¤æ—¶æˆ–é€šè¿‡ JavaScript å‘èµ·çš„è¯·æ±‚ä¸­ä½¿ç”¨ã€‚</p><h4 id="ï¼ˆ1ï¼‰åŸºæœ¬æ¦‚å¿µ"><a href="#ï¼ˆ1ï¼‰åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="ï¼ˆ1ï¼‰åŸºæœ¬æ¦‚å¿µ"></a>ï¼ˆ1ï¼‰åŸºæœ¬æ¦‚å¿µ</h4><p><strong><code>action</code> å‡½æ•°</strong>: ç”¨äºå¤„ç†è¡¨å•æäº¤æˆ–å…¶ä»–éœ€è¦æ›´æ”¹æ•°æ®çš„è¯·æ±‚ã€‚å®ƒç±»ä¼¼äº <code>loader</code> å‡½æ•°ï¼Œä½†ä¸“æ³¨äºå¤„ç†æäº¤çš„æ•°æ®å¹¶æ›´æ–°æœåŠ¡å™¨ç«¯çš„çŠ¶æ€ã€‚<code>action</code> å‡½æ•°ä¼šæ¥æ”¶åˆ°ä¸€äº›ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼ˆå¦‚è¡¨å•æ•°æ®å’Œè¯·æ±‚å‚æ•°ï¼‰ï¼Œå¹¶å¯ä»¥è¿”å›ç»“æœæˆ–é”™è¯¯ã€‚</p><p><strong><code>useSubmit()</code></strong>: React Router æä¾›çš„ä¸€ä¸ªé’©å­ï¼Œç”¨æ¥åœ¨è¡¨å•æäº¤æ—¶ä½¿ç”¨ JavaScript æ¥å¤„ç†æäº¤æ“ä½œï¼Œé¿å…åˆ·æ–°é¡µé¢ã€‚</p><h4 id="ï¼ˆ2ï¼‰actionçš„åŸºæœ¬ç”¨æ³•"><a href="#ï¼ˆ2ï¼‰actionçš„åŸºæœ¬ç”¨æ³•" class="headerlink" title="ï¼ˆ2ï¼‰actionçš„åŸºæœ¬ç”¨æ³•"></a>ï¼ˆ2ï¼‰actionçš„åŸºæœ¬ç”¨æ³•</h4><blockquote><p>è¯¦ç»†ä¾‹å­è¯·è§14èŠ‚ç¬¬ä¹æ¨¡å—</p></blockquote><p><strong><code>action</code> å‡½æ•°</strong>:</p><ul><li><strong>å‚æ•° <code>request</code></strong>: <code>action</code> å‡½æ•°ä¼šæ¥æ”¶åˆ°è¯·æ±‚å¯¹è±¡ <code>request</code>ï¼ŒåŒ…å«æäº¤è¡¨å•çš„æ•°æ®ã€è¯·æ±‚ç±»å‹ï¼ˆå¦‚ POSTã€PUT ç­‰ï¼‰å’Œå…¶ä»–ä¿¡æ¯ã€‚</li><li><strong><code>request.formData()</code></strong>: é€šè¿‡ <code>request.formData()</code> å¯ä»¥è·å–è¡¨å•ä¸­çš„æ•°æ®ã€‚</li><li><strong><code>saveOrder(order)</code></strong>: ä½ å¯ä»¥åœ¨ <code>action</code> ä¸­è¿›è¡ŒæœåŠ¡å™¨ç«¯æ“ä½œï¼Œæ¯”å¦‚ä¿å­˜æ•°æ®æˆ–å‘é€ API è¯·æ±‚ã€‚</li><li><strong>è¿”å›ç»“æœ</strong>: <code>action</code> å‡½æ•°å¯ä»¥è¿”å›å¤„ç†ç»“æœï¼Œè¿™äº›ç»“æœå¯ä»¥ä¼ é€’ç»™ç»„ä»¶è¿›è¡Œæ¸²æŸ“ã€‚</li></ul><h4 id="ï¼ˆ3ï¼‰ä½¿ç”¨è¡¨å•ä¸-action"><a href="#ï¼ˆ3ï¼‰ä½¿ç”¨è¡¨å•ä¸-action" class="headerlink" title="ï¼ˆ3ï¼‰ä½¿ç”¨è¡¨å•ä¸ action"></a>ï¼ˆ3ï¼‰ä½¿ç”¨è¡¨å•ä¸ <code>action</code></h4><p>React Router v6 æä¾›äº† <code>Form</code> ç»„ä»¶ï¼Œå®ƒä¼šè‡ªåŠ¨ä¸ <code>action</code> å‡½æ•°é…åˆï¼Œæäº¤è¡¨å•æ•°æ®è€Œä¸è§¦å‘é¡µé¢åˆ·æ–°ã€‚</p><p> <code>&lt; Form method=&quot;POST&quot; action=&quot;/order/new&quot; &gt;</code></p><p><code>action</code>æŒ‡å®šæäº¤åˆ°å“ªé‡Œï¼Œé»˜è®¤æ˜¯æœ€è¿‘è·¯ç”±</p><h4 id="ï¼ˆ4ï¼‰ä¼ ç»Ÿè¡¨å•æäº¤-vs-ç¼–ç¨‹æ–¹å¼æäº¤"><a href="#ï¼ˆ4ï¼‰ä¼ ç»Ÿè¡¨å•æäº¤-vs-ç¼–ç¨‹æ–¹å¼æäº¤" class="headerlink" title="ï¼ˆ4ï¼‰ä¼ ç»Ÿè¡¨å•æäº¤ vs. ç¼–ç¨‹æ–¹å¼æäº¤"></a>ï¼ˆ4ï¼‰ä¼ ç»Ÿè¡¨å•æäº¤ vs. ç¼–ç¨‹æ–¹å¼æäº¤</h4><p>åœ¨ä¼ ç»Ÿè¡¨å•æäº¤ä¸­ï¼Œç”¨æˆ·å¿…é¡»å¡«å†™è¡¨å•å¹¶ç‚¹å‡»â€œæäº¤â€æŒ‰é’®æ¥è§¦å‘æäº¤æ“ä½œã€‚</p><p>é€šè¿‡ç¼–ç¨‹æ–¹å¼æäº¤è¡¨å•ï¼Œè¡¨å•å¯ä»¥åœ¨ä¸éœ€è¦ç”¨æˆ·ç‚¹å‡»æäº¤æŒ‰é’®çš„æƒ…å†µä¸‹è¢«è‡ªåŠ¨æäº¤ã€‚å¯ä»¥åœ¨å…¶ä»–æ“ä½œæˆ–äº‹ä»¶è§¦å‘æ—¶æäº¤è¡¨å•ã€‚é€šè¿‡ç¼–ç¨‹æ–¹å¼æäº¤è¡¨å•æ„å‘³ç€å¯ä»¥ä½¿ç”¨ä»£ç æ¥è§¦å‘è¡¨å•æäº¤æ“ä½œï¼Œè€Œä¸æ˜¯è®©ç”¨æˆ·ç‚¹å‡»æäº¤æŒ‰é’®ã€‚è¿™ç§çµæ´»æ€§å…è®¸ç”¨æˆ·æ ¹æ®åº”ç”¨é€»è¾‘è‡ªåŠ¨æ‰§è¡Œè¡¨å•æäº¤ï¼Œæå‡ç”¨æˆ·ä½“éªŒå’Œäº¤äº’æ€§ã€‚</p><p>ä½¿ç”¨åœºæ™¯ï¼š</p><ol><li><strong>è‡ªåŠ¨ä¿å­˜</strong>ï¼šå½“ç”¨æˆ·ä¿®æ”¹æŸä¸ªè¾“å…¥å­—æ®µæ—¶ï¼Œè¡¨å•å¯ä»¥ç«‹å³é€šè¿‡ç¼–ç¨‹æ–¹å¼æäº¤å¹¶ä¿å­˜æ•°æ®ï¼Œè€Œæ— éœ€ç‚¹å‡»â€œä¿å­˜â€æŒ‰é’®ã€‚</li><li><strong>å¼‚æ­¥æ•°æ®æäº¤</strong>ï¼šä½ å¯ä»¥åœ¨æŸä¸ªäº‹ä»¶ï¼ˆå¦‚ç‚¹å‡»ã€é¼ æ ‡ç§»å¼€ã€å®šæ—¶å™¨ï¼‰å‘ç”Ÿæ—¶ï¼Œè‡ªåŠ¨æäº¤è¡¨å•æ•°æ®è¿›è¡ŒéªŒè¯æˆ–ä¿å­˜ã€‚</li><li><strong>æ ¹æ®æ¡ä»¶è‡ªåŠ¨æäº¤</strong>ï¼šè¡¨å•å¯ä»¥åœ¨æŸä¸ªåå°é€»è¾‘éªŒè¯é€šè¿‡æˆ–æŸä¸ªæ¡ä»¶æ»¡è¶³åè‡ªåŠ¨æäº¤ï¼Œè€Œä¸è®©ç”¨æˆ·æ‰‹åŠ¨æäº¤ã€‚</li></ol><h3 id="å…¶ä»–è¡¥å……"><a href="#å…¶ä»–è¡¥å……" class="headerlink" title="å…¶ä»–è¡¥å……"></a>å…¶ä»–è¡¥å……</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-title function_">useEffect</span>(<br>  <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">if</span> (isAuthenticated) <span class="hljs-title function_">navigate</span>(<span class="hljs-string">&quot;/app&quot;</span>, &#123; <span class="hljs-attr">replace</span>: <span class="hljs-literal">true</span> &#125;);<br>  &#125;,<br>  [isAuthenticated, navigate]<br>);<br></code></pre></td></tr></table></figure><p>ä»£ç æ®µå®ç°äº†å½“ç½‘é¡µåˆ·æ–°æˆ–è€…æ–­çº¿å¯¼è‡´çŠ¶æ€å˜ä¸ºæœªç™»å½•æ—¶ï¼Œä¼šè‡ªåŠ¨è·³è½¬åˆ°appä¸»ç•Œé¢çš„åŠŸèƒ½</p>]]></content>
    
    
    <categories>
      
      <category>reactè¯¾ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>react</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>reactè¯¾ç¨‹0-å…«è‚¡é›†åˆï¼ˆbushiï¼‰</title>
    <link href="/2024/09/11/react%E8%AF%BE%E7%A8%8B0-%E5%85%AB%E8%82%A1%E9%9B%86%E5%90%88%EF%BC%88bushi%EF%BC%89/"/>
    <url>/2024/09/11/react%E8%AF%BE%E7%A8%8B0-%E5%85%AB%E8%82%A1%E9%9B%86%E5%90%88%EF%BC%88bushi%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<p>æœ¬ç¯‡æ¥è®°å½•ä¸€ä¸‹ä¹‹å‰å·æ‡’æ²¡è®¤çœŸäº†è§£çš„ReactåŸºç¡€çŸ¥è¯†ğŸ˜ŒğŸ¥±ğŸ˜ªğŸ˜´</p><span id="more"></span><h4 id="ä¸€ã€defaultå¯¼å‡ºå’Œç›´æ¥exportå¯¼å‡ºçš„åŒºåˆ«"><a href="#ä¸€ã€defaultå¯¼å‡ºå’Œç›´æ¥exportå¯¼å‡ºçš„åŒºåˆ«" class="headerlink" title="ä¸€ã€defaultå¯¼å‡ºå’Œç›´æ¥exportå¯¼å‡ºçš„åŒºåˆ«"></a>ä¸€ã€defaultå¯¼å‡ºå’Œç›´æ¥exportå¯¼å‡ºçš„åŒºåˆ«</h4><ul><li><p><strong>export default</strong>ï¼šç”¨äºå¯¼å‡ºæ¨¡å—ä¸­çš„<strong>é»˜è®¤å€¼</strong>ï¼Œæ¯ä¸ªæ¨¡å—åªèƒ½æœ‰<strong>ä¸€ä¸ª</strong>é»˜è®¤å¯¼å‡ºã€‚å¯¼å…¥æ—¶ä¸éœ€è¦ä½¿ç”¨å¤§æ‹¬å· <code>&#123;&#125;</code>ï¼Œå¹¶ä¸”å¯¼å…¥æ—¶çš„åç§°å¯ä»¥ä»»æ„æ›´æ”¹ã€‚</p></li><li><p><strong>exportï¼ˆå‘½åå¯¼å‡ºï¼‰</strong>ï¼š<code>export</code> å…è®¸å¯¼å‡ºå¤šä¸ªå€¼ï¼Œå¯¼å…¥æ—¶å¿…é¡»ä½¿ç”¨ä¸å¯¼å‡ºçš„<strong>åç§°ç›¸åŒ</strong>çš„åç§°ï¼Œå¹¶ä¸”éœ€è¦ä½¿ç”¨å¤§æ‹¬å· <code>&#123;&#125;</code>ã€‚ä½ å¯ä»¥åŒæ—¶å¯¼å‡ºå¤šä¸ªå€¼ï¼Œä¹Ÿå¯ä»¥å¯¼å…¥å¤šä¸ªå€¼ã€‚<strong>å¯ä»¥é€šè¿‡aså…³é”®å­—é‡å‘½å</strong>ã€‚</p></li></ul><p>ä¸¤è€…å¯ä»¥æ··ç”¨ã€‚</p><h4 id="äºŒã€Data-loading-waterfalls"><a href="#äºŒã€Data-loading-waterfalls" class="headerlink" title="äºŒã€Data loading waterfalls"></a>äºŒã€Data loading waterfalls</h4><p>â€œData loading waterfallsâ€ æ˜¯ä¸€ç§å¯èƒ½åœ¨å‰ç«¯åº”ç”¨ä¸­é‡åˆ°çš„æ€§èƒ½é—®é¢˜ï¼ŒæŒ‡çš„æ˜¯å½“å¤šä¸ªä¾èµ–æ•°æ®çš„åŠ è½½è¯·æ±‚æŒ‰ç…§é¡ºåºï¼ˆä¸²è¡Œï¼‰è¿›è¡Œï¼Œè€Œä¸æ˜¯å¹¶è¡Œè¿›è¡Œæ—¶ï¼Œå¯¼è‡´æ•´ä½“åŠ è½½æ—¶é—´æ¯”å®é™…éœ€è¦çš„è¦é•¿ã€‚æ¯ä¸ªè¯·æ±‚ä¾èµ–ä¸Šä¸€ä¸ªè¯·æ±‚å®Œæˆåæ‰èƒ½å¼€å§‹ï¼Œå°±åƒâ€œç€‘å¸ƒâ€ä¸€æ ·é€æ¸ä¸‹è½ï¼Œè¿™ç§æ¨¡å¼ä¼šé€ æˆå»¶è¿Ÿï¼Œç‰¹åˆ«æ˜¯åœ¨è¯·æ±‚æ•°æ®é‡è¾ƒå¤§æˆ–ç½‘ç»œè¾ƒæ…¢çš„æƒ…å†µä¸‹ã€‚</p><h4 id="ä¸‰ã€promise"><a href="#ä¸‰ã€promise" class="headerlink" title="ä¸‰ã€promise"></a>ä¸‰ã€promise</h4><h4 id="å››ã€suspense"><a href="#å››ã€suspense" class="headerlink" title="å››ã€suspense"></a>å››ã€suspense</h4><h4 id="äº”ã€e-preventDefault"><a href="#äº”ã€e-preventDefault" class="headerlink" title="äº”ã€e.preventDefault();"></a>äº”ã€e.preventDefault();</h4><p><code>e.preventDefault()</code> æ˜¯ JavaScript ä¸­ <code>Event</code> å¯¹è±¡çš„æ–¹æ³•ï¼Œç”¨äºå–æ¶ˆäº‹ä»¶çš„é»˜è®¤è¡Œä¸ºã€‚å®ƒé€šå¸¸ç”¨äºå¤„ç†è¡¨å•æäº¤ã€é“¾æ¥ç‚¹å‡»ç­‰æ“ä½œï¼Œä»¥ä¾¿ä½ å¯ä»¥æ‰§è¡Œè‡ªå®šä¹‰é€»è¾‘è€Œä¸æ˜¯é»˜è®¤çš„æµè§ˆå™¨è¡Œä¸ºã€‚</p><h4 id="å…­ã€æ¨¡æ¿å­—é¢é‡"><a href="#å…­ã€æ¨¡æ¿å­—é¢é‡" class="headerlink" title="å…­ã€æ¨¡æ¿å­—é¢é‡"></a>å…­ã€æ¨¡æ¿å­—é¢é‡</h4><p>åœ¨ JavaScript ä¸­ï¼Œ&#96;&#96;ï¼ˆåå¼•å·ï¼‰ç”¨äºåˆ›å»ºæ¨¡æ¿å­—é¢é‡ï¼ˆTemplate Literalsï¼‰ï¼Œè¿™æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å­—ç¬¦ä¸²å¤„ç†ç‰¹æ€§ã€‚ä½ éœ€è¦ä½¿ç”¨åå¼•å·æ¥åŒ…è£¹æ•°æ®æ—¶ï¼Œæ¶‰åŠåˆ°å­—ç¬¦ä¸²æ’å€¼å’Œå¤šè¡Œå­—ç¬¦ä¸²ç­‰æƒ…å†µã€‚</p><ol><li><strong>å­—ç¬¦ä¸²æ’å€¼</strong></li></ol><p>å½“ä½ éœ€è¦åœ¨å­—ç¬¦ä¸²ä¸­æ’å…¥å˜é‡æˆ–è¡¨è¾¾å¼æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ¨¡æ¿å­—é¢é‡ã€‚æ¨¡æ¿å­—é¢é‡å…è®¸ä½ å°†å˜é‡æˆ–è¡¨è¾¾å¼åµŒå…¥åˆ°å­—ç¬¦ä¸²ä¸­ï¼Œä½¿ç”¨ <code>$&#123;&#125;</code> è¯­æ³•ï¼š</p><ol start="2"><li><strong>å¤šè¡Œå­—ç¬¦ä¸²</strong></li></ol><p>æ¨¡æ¿å­—é¢é‡è¿˜æ”¯æŒå¤šè¡Œå­—ç¬¦ä¸²ï¼Œä¸éœ€è¦ä½¿ç”¨åæ–œæ  <code>\</code> æ¥æ¢è¡Œï¼š</p><ol start="3"><li><strong>è¡¨è¾¾å¼æ’å€¼</strong></li></ol><p>é™¤äº†ç®€å•çš„å˜é‡ï¼Œæ¨¡æ¿å­—é¢é‡ä¹Ÿæ”¯æŒåµŒå…¥è¡¨è¾¾å¼ï¼š</p><h4 id="ä¸ƒã€order"><a href="#ä¸ƒã€order" class="headerlink" title="ä¸ƒã€order"></a>ä¸ƒã€order</h4><p>å…«ã€é’©å­åªèƒ½åœ¨ç»„ä»¶å†…è¢«è°ƒç”¨ï¼Ÿ</p><p>ä¹ã€StrictMode</p>]]></content>
    
    
    <categories>
      
      <category>reactè¯¾ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>react</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>reactè¯¾ç¨‹14-ä½¿ç”¨Viteæ„å»ºé«˜çº§ReactProjiect</title>
    <link href="/2024/09/09/react%E8%AF%BE%E7%A8%8B14-%E4%BD%BF%E7%94%A8Vite%E6%9E%84%E5%BB%BA%E9%AB%98%E7%BA%A7ReactProjiect/"/>
    <url>/2024/09/09/react%E8%AF%BE%E7%A8%8B14-%E4%BD%BF%E7%94%A8Vite%E6%9E%84%E5%BB%BA%E9%AB%98%E7%BA%A7ReactProjiect/</url>
    
    <content type="html"><![CDATA[<p>Jonasè€å¸ˆçœŸçš„å¾ˆæœ‰é¼“èˆåŠ›ğŸ˜‚</p><span id="more"></span><p>ä¹‹å‰ä¹Ÿä½¿ç”¨è¿‡Viteæ¥æ„å»ºé¡¹ç›®ï¼Œä½†æ˜¯æ²¡ä»”ç»†åˆ†æå®ƒå’ŒCreact-react-appçš„åŒºåˆ«â€¦â€¦æœ¬èŠ‚è¯¾å±…ç„¶å›åˆ°äº†ç¬¬ä¸€æ¬¡æ„å»ºçš„pizzaé¡¹ç›®ï¼Œä½†æ˜¯åº”è¯¥ä¼šæ›´åŠ modernã€‚</p><h3 id="ä¸€ã€Vite-å’Œ-create-react-app-CRA-çš„åŒºåˆ«"><a href="#ä¸€ã€Vite-å’Œ-create-react-app-CRA-çš„åŒºåˆ«" class="headerlink" title="ä¸€ã€Vite å’Œ create-react-app (CRA)çš„åŒºåˆ«"></a>ä¸€ã€<code>Vite</code> å’Œ <code>create-react-app (CRA)</code>çš„åŒºåˆ«</h3><h4 id="1-å¯åŠ¨é€Ÿåº¦"><a href="#1-å¯åŠ¨é€Ÿåº¦" class="headerlink" title="1. å¯åŠ¨é€Ÿåº¦"></a>1. <strong>å¯åŠ¨é€Ÿåº¦</strong></h4><ul><li><strong>Vite</strong>ï¼šVite ä½¿ç”¨ç°ä»£çš„æµè§ˆå™¨åŸç”Ÿ ES æ¨¡å—ï¼ˆESMï¼‰ï¼ŒæŒ‰éœ€åŠ è½½é¡¹ç›®ä¸­çš„æ¨¡å—ã€‚å¯åŠ¨é€Ÿåº¦éå¸¸å¿«ï¼Œå°¤å…¶åœ¨å¤§å‹é¡¹ç›®ä¸­ä¼˜åŠ¿æ˜æ˜¾ï¼Œå› ä¸ºå®ƒåªä¼šåŠ è½½åº”ç”¨ç¨‹åºä¸­å®é™…éœ€è¦çš„éƒ¨åˆ†ã€‚</li><li><strong>CRA</strong>ï¼šCRA ä½¿ç”¨ Webpack è¿›è¡Œæ‰“åŒ…ï¼Œå¯åŠ¨æ—¶éœ€è¦å¯¹æ•´ä¸ªé¡¹ç›®è¿›è¡Œé¢„æ‰“åŒ…ã€‚è¿™ç§æ–¹å¼åœ¨é¡¹ç›®è§„æ¨¡è¾ƒå¤§æ—¶ï¼Œå¯åŠ¨é€Ÿåº¦è¾ƒæ…¢ï¼Œå°¤å…¶æ˜¯å¼€å‘ç¯å¢ƒä¸­çš„åˆæ¬¡æ„å»ºã€‚</li></ul><h4 id="2-æ„å»ºé€Ÿåº¦"><a href="#2-æ„å»ºé€Ÿåº¦" class="headerlink" title="2. æ„å»ºé€Ÿåº¦"></a>2. <strong>æ„å»ºé€Ÿåº¦</strong></h4><ul><li><strong>Vite</strong>ï¼šVite ä½¿ç”¨ <code>esbuild</code> æ¥è¿›è¡Œæ„å»ºï¼Œå®ƒæ˜¯ç”¨ Go è¯­è¨€ç¼–å†™çš„ï¼Œæ„å»ºé€Ÿåº¦æå¿«ã€‚Vite çš„çƒ­æ¨¡å—æ›¿æ¢ï¼ˆHMRï¼‰ä¹Ÿéå¸¸å¿«ï¼Œå‡ ä¹æ˜¯å³æ—¶æ›´æ–°ï¼Œæå‡äº†å¼€å‘ä½“éªŒã€‚</li><li><strong>CRA</strong>ï¼šCRA ä¾èµ– Webpack è¿›è¡Œæ„å»ºï¼Œæ„å»ºé€Ÿåº¦ç›¸å¯¹è¾ƒæ…¢ï¼Œç‰¹åˆ«æ˜¯åœ¨é¡¹ç›®è§„æ¨¡å¢å¤§æ—¶ï¼Œæ‰“åŒ…æ—¶é—´ä¼šæ˜¾è‘—å¢åŠ ã€‚</li></ul><h4 id="3-å¼€å‘ç¯å¢ƒä¸‹çš„æ¨¡å—å¤„ç†"><a href="#3-å¼€å‘ç¯å¢ƒä¸‹çš„æ¨¡å—å¤„ç†" class="headerlink" title="3. å¼€å‘ç¯å¢ƒä¸‹çš„æ¨¡å—å¤„ç†"></a>3. <strong>å¼€å‘ç¯å¢ƒä¸‹çš„æ¨¡å—å¤„ç†</strong></h4><ul><li><strong>Vite</strong>ï¼šVite ä½¿ç”¨æµè§ˆå™¨æ”¯æŒçš„ ES æ¨¡å—åŠ è½½ï¼Œå› æ­¤åœ¨å¼€å‘æ¨¡å¼ä¸‹ï¼Œä¸éœ€è¦æ•´ä½“æ‰“åŒ…ï¼Œå¯ä»¥æŒ‰éœ€åŠ è½½æ¨¡å—ï¼Œè¿™ä½¿å¾—é¡¹ç›®åœ¨å¼€å‘æ—¶èƒ½å¤Ÿæ›´å¿«é€Ÿå“åº”ã€‚</li><li><strong>CRA</strong>ï¼šCRA éœ€è¦å…ˆå¯¹æ•´ä¸ªé¡¹ç›®è¿›è¡Œæ‰“åŒ…ï¼Œå†é€šè¿‡ Webpack Dev Server æä¾›å¼€å‘ç¯å¢ƒã€‚è¿™ç§æ–¹å¼åœ¨å¼€å‘æ—¶éœ€è¦å¤„ç†å¤§é‡æ–‡ä»¶ï¼Œæ€§èƒ½è¾ƒå·®ã€‚</li></ul><h4 id="4-ä¾èµ–é¢„æ„å»º"><a href="#4-ä¾èµ–é¢„æ„å»º" class="headerlink" title="4. ä¾èµ–é¢„æ„å»º"></a>4. <strong>ä¾èµ–é¢„æ„å»º</strong></h4><ul><li><strong>Vite</strong>ï¼šåœ¨å¼€å‘æ¨¡å¼ä¸‹ï¼ŒVite ä½¿ç”¨ <code>esbuild</code> é¢„æ„å»ºä¾èµ–ï¼Œä½¿å¾—å¼€å‘æœåŠ¡å™¨åŠ è½½ä¾èµ–æ—¶é€Ÿåº¦æ›´å¿«ï¼Œå¹¶ä¸”èƒ½ä¼˜åŒ–ä¾èµ–æ¨¡å—çš„é‡å¤æ‰“åŒ…é—®é¢˜ã€‚</li><li><strong>CRA</strong>ï¼šCRA æ²¡æœ‰ç±»ä¼¼çš„ä¾èµ–é¢„æ„å»ºæœºåˆ¶ï¼Œæ‰€æœ‰ä¾èµ–åœ¨å¼€å‘ç¯å¢ƒä¸­ä¼šè¢«æ‰“åŒ…æˆä¸€ä¸ªæ•´ä½“ï¼Œå¯¼è‡´å¼€å‘æ—¶çš„å“åº”è¾ƒæ…¢ã€‚</li></ul><h4 id="5-çƒ­æ¨¡å—æ›¿æ¢ï¼ˆHMRï¼‰"><a href="#5-çƒ­æ¨¡å—æ›¿æ¢ï¼ˆHMRï¼‰" class="headerlink" title="5. çƒ­æ¨¡å—æ›¿æ¢ï¼ˆHMRï¼‰"></a>5. <strong>çƒ­æ¨¡å—æ›¿æ¢ï¼ˆHMRï¼‰</strong></h4><ul><li><strong>Vite</strong>ï¼šVite çš„ HMR å‡ ä¹æ˜¯å³æ—¶çš„ï¼Œå› ä¸ºå®ƒåªé‡æ–°åŠ è½½ä¿®æ”¹è¿‡çš„æ¨¡å—ï¼Œè€Œæ— éœ€é‡æ–°åŠ è½½æ•´ä¸ªåº”ç”¨ã€‚è¿™ä½¿å¾—å¼€å‘ä½“éªŒæ›´åŠ æµç•…ã€‚</li><li><strong>CRA</strong>ï¼šCRA ä¹Ÿæ”¯æŒ HMRï¼Œä½†ç”±äºå®ƒåŸºäº Webpackï¼Œé€Ÿåº¦ç›¸å¯¹è¾ƒæ…¢ï¼Œå°¤å…¶æ˜¯é¡¹ç›®ä½“ç§¯è¾ƒå¤§æ—¶ï¼Œæ›´æ–°ç­‰å¾…æ—¶é—´è¾ƒé•¿ã€‚</li></ul><h4 id="6-é…ç½®å’Œæ‰©å±•æ€§"><a href="#6-é…ç½®å’Œæ‰©å±•æ€§" class="headerlink" title="6. é…ç½®å’Œæ‰©å±•æ€§"></a>6. <strong>é…ç½®å’Œæ‰©å±•æ€§</strong></h4><ul><li><strong>Vite</strong>ï¼šVite æä¾›äº†è½»é‡åŒ–çš„é»˜è®¤é…ç½®ï¼Œä½†ä¹Ÿå…è®¸é€šè¿‡æ’ä»¶è¿›è¡Œé«˜åº¦å®šåˆ¶ã€‚Vite é‡‡ç”¨çš„æ’ä»¶æœºåˆ¶ç±»ä¼¼äº Rollupï¼Œæ”¯æŒç”Ÿæ€ç³»ç»Ÿä¸­çš„å„ç§æ’ä»¶ï¼Œä¸”é…ç½®æ–‡ä»¶ç›¸å¯¹ç®€æ´ã€‚</li><li><strong>CRA</strong>ï¼šCRA é»˜è®¤çš„é…ç½®ç›¸å¯¹å°é—­ï¼Œå¼€å‘è€…éœ€è¦ä½¿ç”¨ <code>eject</code> å‘½ä»¤æ¥æš´éœ²åº•å±‚ Webpack é…ç½®ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯ä¸å¯é€†çš„ï¼Œä¸”é…ç½®å¤æ‚ã€‚å¯¹äºåˆå­¦è€…æ¥è¯´ï¼ŒCRA æ›´ç®€å•æ˜“ç”¨ï¼Œä½†åœ¨éœ€è¦è‡ªå®šä¹‰é…ç½®æ—¶ä¸å¤Ÿçµæ´»ã€‚</li></ul><h4 id="7-ç”Ÿæ€ç³»ç»Ÿæ”¯æŒ"><a href="#7-ç”Ÿæ€ç³»ç»Ÿæ”¯æŒ" class="headerlink" title="7. ç”Ÿæ€ç³»ç»Ÿæ”¯æŒ"></a>7. <strong>ç”Ÿæ€ç³»ç»Ÿæ”¯æŒ</strong></h4><ul><li><strong>Vite</strong>ï¼šVite çš„ç”Ÿæ€ç³»ç»Ÿæ­£åœ¨å¿«é€Ÿå‘å±•ï¼Œç‰¹åˆ«æ˜¯åœ¨ Vue å’Œ React é¡¹ç›®ä¸­ï¼ŒVite æ­£æˆä¸ºä¸»æµçš„é€‰æ‹©ã€‚Vite çš„æ’ä»¶ç”Ÿæ€ä¹Ÿä¸æ–­ä¸°å¯Œï¼Œé€‚é…å¤šç§ç°ä»£å‰ç«¯æ¡†æ¶ã€‚</li><li><strong>CRA</strong>ï¼šCRA åŸºäº Webpackï¼ŒWebpack æ˜¯éå¸¸æˆç†Ÿçš„æ‰“åŒ…å·¥å…·ï¼Œæ‹¥æœ‰ä¸°å¯Œçš„æ’ä»¶å’Œå·¥å…·æ”¯æŒã€‚ä¸è¿‡ CRA çš„å°é—­æ€§é™åˆ¶äº†å¯¹è¿™äº›å·¥å…·çš„çµæ´»ä½¿ç”¨ã€‚</li></ul><h4 id="8-ç”Ÿäº§æ„å»º"><a href="#8-ç”Ÿäº§æ„å»º" class="headerlink" title="8. ç”Ÿäº§æ„å»º"></a>8. <strong>ç”Ÿäº§æ„å»º</strong></h4><ul><li><strong>Vite</strong>ï¼šåœ¨ç”Ÿäº§æ¨¡å¼ä¸‹ï¼ŒVite ä½¿ç”¨ Rollup è¿›è¡Œæ‰“åŒ…ï¼Œæ„å»ºå‡ºæ¥çš„ä»£ç ä½“ç§¯å°ï¼Œæ€§èƒ½ä¼˜åŒ–æ•ˆæœå¥½ã€‚Rollup æ“…é•¿å¤„ç† ES æ¨¡å—ï¼Œå¹¶ä¸”æ”¯æŒæ ‘æ‘‡ï¼ˆtree-shakingï¼‰ä¼˜åŒ–æœªä½¿ç”¨çš„ä»£ç ã€‚</li><li><strong>CRA</strong>ï¼šCRA ä½¿ç”¨ Webpack è¿›è¡Œç”Ÿäº§æ„å»ºï¼Œè™½ç„¶ Webpack ä¹Ÿæ”¯æŒæ ‘æ‘‡å’Œä»£ç åˆ†å‰²ï¼Œä½†ä¸ Vite çš„ Rollup ç›¸æ¯”ï¼ŒWebpack çš„é…ç½®ç›¸å¯¹å¤æ‚ï¼Œæ‰“åŒ…æ—¶é—´è¾ƒé•¿ã€‚</li></ul><h4 id="9-æ’ä»¶å’Œæ¡†æ¶é›†æˆ"><a href="#9-æ’ä»¶å’Œæ¡†æ¶é›†æˆ" class="headerlink" title="9. æ’ä»¶å’Œæ¡†æ¶é›†æˆ"></a>9. <strong>æ’ä»¶å’Œæ¡†æ¶é›†æˆ</strong></h4><ul><li><strong>Vite</strong>ï¼šVite å†…ç½®æ”¯æŒå¤šç§æ¡†æ¶ï¼ˆå¦‚ Vueã€Reactã€Svelte ç­‰ï¼‰ï¼Œé€šè¿‡æ’ä»¶æœºåˆ¶å¯ä»¥å¿«é€Ÿé›†æˆä¸åŒçš„æ¡†æ¶å’Œå·¥å…·ã€‚Vite çš„æ’ä»¶ç”Ÿæ€æ›´çµæ´»ï¼Œä½¿ç”¨ Rollup æ’ä»¶ä¹Ÿéå¸¸æ–¹ä¾¿ã€‚</li><li><strong>CRA</strong>ï¼šCRA æ˜¯ä¸“é—¨ä¸º React é¡¹ç›®è®¾è®¡çš„ï¼Œè™½ç„¶å¯ä»¥æ‰‹åŠ¨é…ç½®æ”¯æŒå…¶ä»–å·¥å…·ï¼Œä½†å…¶çµæ´»æ€§å’Œæ‰©å±•æ€§ä¸å¦‚ Viteã€‚</li></ul><h4 id="10-ç¤¾åŒºå’Œå‘å±•è¶‹åŠ¿"><a href="#10-ç¤¾åŒºå’Œå‘å±•è¶‹åŠ¿" class="headerlink" title="10. ç¤¾åŒºå’Œå‘å±•è¶‹åŠ¿"></a>10. <strong>ç¤¾åŒºå’Œå‘å±•è¶‹åŠ¿</strong></h4><ul><li><strong>Vite</strong>ï¼šVite æ˜¯ä¸€æ¬¾ç›¸å¯¹è¾ƒæ–°çš„å·¥å…·ï¼Œä½†å®ƒçš„å¢é•¿é€Ÿåº¦éå¸¸å¿«ï¼Œå·²ç»æˆä¸ºç°ä»£å‰ç«¯å¼€å‘çš„è¶‹åŠ¿ä¹‹ä¸€ï¼Œç‰¹åˆ«æ˜¯åœ¨è¿½æ±‚é«˜æ€§èƒ½çš„å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒä¸­å—åˆ°è¶Šæ¥è¶Šå¤šçš„æ¬¢è¿ã€‚</li><li><strong>CRA</strong>ï¼šCRA æ˜¯ React ç¤¾åŒºä¸­æœ€æ—©çš„å®˜æ–¹é¡¹ç›®è„šæ‰‹æ¶ä¹‹ä¸€ï¼Œé€‚åˆåˆå­¦è€…å’Œå°å‹é¡¹ç›®ï¼Œä½†åœ¨å¤§å‹é¡¹ç›®ä¸­çš„æ€§èƒ½é€æ¸æ˜¾ç°å‡ºå±€é™æ€§ã€‚</li></ul><h3 id="äºŒã€é¡¹ç›®æ„å»ºèµ·æ­¥"><a href="#äºŒã€é¡¹ç›®æ„å»ºèµ·æ­¥" class="headerlink" title="äºŒã€é¡¹ç›®æ„å»ºèµ·æ­¥"></a>äºŒã€é¡¹ç›®æ„å»ºèµ·æ­¥</h3><p>ç»ˆç«¯ï¼š <code>npm create vite@4</code></p><p>VScodeï¼š<code>npm i eslint vite-plugin-eslint eslint-config-react-app --save-dev</code></p><p><code>vite.config.js</code>æ–‡ä»¶ï¼šï¼ˆè¦ä¿®æ”¹çš„éƒ¨åˆ†ï¼‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> eslint <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vite-plugin-eslint&quot;</span>;<br><br><span class="hljs-comment">// https://vitejs.dev/config/</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>(&#123;<br>  <span class="hljs-attr">plugins</span>: [<span class="hljs-title function_">react</span>(), <span class="hljs-title function_">eslint</span>()],  <span class="hljs-comment">//æ·»åŠ äº†eslint</span><br>&#125;);<br><br></code></pre></td></tr></table></figure><p><code>.eslintrc.cjs</code>æ–‡ä»¶ï¼šï¼ˆé»˜è®¤é…ç½®åŠ ä¸Šreact-appè§„åˆ™ï¼‰ï¼ˆæˆ‘æŠŠä¸¤ä¸ªé»˜è®¤è§„åˆ™é›†éƒ½æ³¨é‡Šäº†ï¼Œä¸ç„¶æ€»æŠ¥é”™ğŸ« ï¼‰</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs json">ğŸ« module.exports = <span class="hljs-punctuation">&#123;</span>ğŸ« <br>  root<span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// è¡¨ç¤ºè¿™æ˜¯é¡¹ç›®çš„æ ¹ç›®å½• ESLint é…ç½®ï¼Œé˜²æ­¢ ESLint æœç´¢çˆ¶çº§ç›®å½•çš„é…ç½®ã€‚</span><br>  env<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    browser<span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// è®¾å®šä»£ç è¿è¡Œçš„ç¯å¢ƒä¸ºæµè§ˆå™¨ï¼ŒESLint ä¼šé’ˆå¯¹æµè§ˆå™¨çš„å…¨å±€å˜é‡ï¼ˆå¦‚ `window`ï¼‰è¿›è¡Œæ ¡éªŒã€‚</span><br>    es2020<span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// æ”¯æŒ ES2020 è¯­æ³•ç‰¹æ€§ã€‚</span><br>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>  extends<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    &#x27;react-app&#x27;<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// åŠ å…¥ react-app çš„ ESLint è§„åˆ™</span><br>    &#x27;eslint<span class="hljs-punctuation">:</span>recommended&#x27;<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// å¯ç”¨ ESLint æ¨èçš„é»˜è®¤è§„åˆ™é›†ã€‚</span><br>    &#x27;plugin<span class="hljs-punctuation">:</span>react/recommended&#x27;<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// React æ¨èçš„ ESLint è§„åˆ™é›†ã€‚</span><br>    &#x27;plugin<span class="hljs-punctuation">:</span>react/jsx-runtime&#x27;<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// æ”¯æŒ React 17+ JSX è½¬æ¢ï¼ˆå³ä¸éœ€è¦æ˜¾å¼å¯¼å…¥ `React`ï¼‰ã€‚</span><br>    &#x27;plugin<span class="hljs-punctuation">:</span>react-hooks/recommended&#x27;<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// React Hooks çš„æ¨èè§„åˆ™ã€‚</span><br>  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>  ignorePatterns<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>&#x27;dist&#x27;<span class="hljs-punctuation">,</span> &#x27;.eslintrc.cjs&#x27;<span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// å¿½ç•¥ `dist` ç›®å½•å’Œå½“å‰çš„ ESLint é…ç½®æ–‡ä»¶ï¼Œé¿å… ESLint æ ¡éªŒå®ƒä»¬ã€‚</span><br>  parserOptions<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    ecmaVersion<span class="hljs-punctuation">:</span> &#x27;latest&#x27;<span class="hljs-punctuation">,</span> <span class="hljs-comment">// ä½¿ç”¨æœ€æ–°çš„ ECMAScript ç‰ˆæœ¬ã€‚</span><br>    sourceType<span class="hljs-punctuation">:</span> &#x27;module&#x27;<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// ä»£ç æ˜¯åŸºäº ECMAScript æ¨¡å—ï¼ˆESMï¼‰çš„ã€‚</span><br>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>  settings<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    react<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      version<span class="hljs-punctuation">:</span> &#x27;<span class="hljs-number">18.2</span>&#x27;<span class="hljs-punctuation">,</span> <span class="hljs-comment">// æ‰‹åŠ¨æŒ‡å®š React ç‰ˆæœ¬ï¼Œç¡®ä¿ ESLint çš„ React æ’ä»¶æ­£ç¡®è§£æ JSX è¯­æ³•ã€‚</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>  plugins<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>&#x27;react-refresh&#x27;<span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// ä½¿ç”¨ `react-refresh` æ’ä»¶ï¼Œç”¨äºå¼€å‘æ—¶ React çš„çƒ­æ›´æ–°ã€‚</span><br>  rules<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    &#x27;react-refresh/only-export-components&#x27;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>      &#x27;warn&#x27;<span class="hljs-punctuation">,</span><br>      <span class="hljs-punctuation">&#123;</span> allowConstantExport<span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span> <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// ä»…å…è®¸å¯¼å‡º React ç»„ä»¶ï¼ˆé’ˆå¯¹ react-refresh çš„ç‰¹å®šè§„åˆ™ï¼‰ï¼Œå¦‚æœè¿åè§„åˆ™ä¼šå‘å‡ºè­¦å‘Šã€‚</span><br>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br><span class="hljs-punctuation">&#125;</span>;<br><br></code></pre></td></tr></table></figure><p>â‰ï¸åœ¨è§†é¢‘é‡Œæ„å»ºå®ŒViteé¡¹ç›®åéœ€è¦è‡ªå·±æ‰‹åŠ¨åˆ›å»º<code>.eslintrc.json</code>æ–‡ä»¶ï¼Œå’Œæœ¬æ–‡ä»¶æœ‰ä½•åŒºåˆ«ï¼Ÿ</p><ul><li><p><strong>.eslintrc.cjs</strong>ï¼š</p><ul><li>è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨ CommonJS æ¨¡å—æ ¼å¼çš„ ESLint é…ç½®æ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹æ˜¯ä»¥ <code>module.exports = &#123;&#125;</code> çš„æ–¹å¼å¯¼å‡ºé…ç½®å¯¹è±¡ï¼Œå…è®¸ä½¿ç”¨åŠ¨æ€çš„ JavaScript è¯­æ³•ã€‚</li><li>æ”¯æŒå®Œæ•´çš„ JavaScript è¯­æ³•ã€‚ä½ å¯ä»¥åœ¨å…¶ä¸­ä½¿ç”¨å˜é‡ã€æ¡ä»¶è¯­å¥ã€å‡½æ•°ç­‰åŠ¨æ€é€»è¾‘ã€‚è¿™ç§æ ¼å¼é€‚åˆéœ€è¦æ ¹æ®ç¯å¢ƒæˆ–æ¡ä»¶åŠ¨æ€ç”Ÿæˆ ESLint é…ç½®çš„åœºæ™¯ã€‚</li><li>åŸºäº CommonJS æ¨¡å—ç³»ç»Ÿã€‚å¯¼å‡ºé…ç½®ä½¿ç”¨ <code>module.exports = &#123;&#125;</code>ï¼Œé€‚ç”¨äº Node.js ç¯å¢ƒä¸­ã€‚</li></ul></li><li><p><strong>.eslintrc.json</strong>ï¼š</p><ul><li>è¿™æ˜¯ä¸€ä¸ªæ ‡å‡†çš„ JSON æ ¼å¼çš„é…ç½®æ–‡ä»¶ï¼Œä¸æ”¯æŒ JavaScript è¯­æ³•ï¼Œä»…èƒ½å®šä¹‰é™æ€çš„é”®å€¼å¯¹é…ç½®ã€‚</li><li>åªèƒ½ä½¿ç”¨ JSON è¯­æ³•ï¼Œä¸æ”¯æŒåŠ¨æ€é…ç½®ã€‚å¦‚æœä½ éœ€è¦ä½¿ç”¨åŠ¨æ€é€»è¾‘ï¼Œå¿…é¡»è½¬ä¸º <code>.eslintrc.cjs</code> æˆ– <code>.eslintrc.js</code> æ ¼å¼ã€‚</li><li>æ²¡æœ‰æ¨¡å—ç³»ç»Ÿï¼Œçº¯ç²¹æ˜¯é™æ€é…ç½®æ•°æ®ï¼Œä½¿ç”¨ JSON æ ¼å¼ï¼Œé€‚åˆç®€å•çš„é…ç½®éœ€æ±‚ã€‚</li></ul></li></ul><h3 id="ä¸‰ã€Application-Planing"><a href="#ä¸‰ã€Application-Planing" class="headerlink" title="ä¸‰ã€Application Planing"></a>ä¸‰ã€Application Planing</h3><h4 id="ï¼ˆ1ï¼‰Thinking-in-React"><a href="#ï¼ˆ1ï¼‰Thinking-in-React" class="headerlink" title="ï¼ˆ1ï¼‰Thinking in React"></a>ï¼ˆ1ï¼‰Thinking in React</h4><blockquote><p>åœ¨ Redux ä¸­ï¼Œfeaturesæ˜¯ä¸€ä¸ªæ¦‚å¿µåŒ–çš„æœ¯è¯­ï¼Œç”¨æ¥æè¿°åº”ç”¨ä¸­çš„ç‰¹å®šåŠŸèƒ½æ¨¡å—æˆ–å­åŠŸèƒ½ã€‚æ¯ä¸ª featureé€šå¸¸åŒ…å«è‡ªå·±çš„çŠ¶æ€å’Œå¤„ç†å®ƒçš„é€»è¾‘ã€‚</p></blockquote><p>âœ´ï¸å¯¹å°å‹ç¨‹åºè€Œè¨€ï¼š</p><ul><li>å°†UIåˆ†è§£æˆå¤šä¸ªç»„ä»¶</li><li>å»ºç«‹é™æ€ç½‘é¡µ</li><li>å¼€å§‹è€ƒè™‘çŠ¶æ€ç®¡ç†å’Œæ•°æ®æµ</li></ul><p>âœ´ï¸å¯¹å¤§å‹çœŸå®ç¨‹åºï¼š</p><ul><li><p>æ”¶é›†åº”ç”¨ç¨‹åºçš„éœ€æ±‚ï¼ˆrequirementsï¼‰å’Œæ‰€éœ€çš„ç‰¹æ€§ï¼ˆfeaturesï¼‰ï¼ˆReduxï¼‰</p></li><li><p>å°†åº”ç”¨ç¨‹åºåˆ†æˆå¤šä¸ªç•Œé¢</p><ul><li>è€ƒè™‘æ•´ä½“å’Œé¡µé¢çº§åˆ«çš„UIï¼ˆç”¨æˆ·ç•Œé¢ï¼‰</li><li>ğŸ”»å°†UIåˆ†è§£æˆå¤šä¸ªç»„ä»¶</li><li>ğŸ”»å»ºç«‹é™æ€ç½‘é¡µ</li></ul></li><li><p>å°†åº”ç”¨ç¨‹åºåˆ†ä¸ºä¸åŒçš„ç‰¹æ€§ç±»åˆ«</p><ul><li>ğŸ”»å¼€å§‹è€ƒè™‘çŠ¶æ€ç®¡ç†å’Œæ•°æ®æµ</li></ul></li><li><p>å†³å®šæˆ‘ä»¬æƒ³è¦ç”¨å“ªäº›åº“ï¼ˆtechnology decisionsï¼‰</p></li></ul><h4 id="ï¼ˆ2ï¼‰é¡¹ç›®åˆ†æ"><a href="#ï¼ˆ2ï¼‰é¡¹ç›®åˆ†æ" class="headerlink" title="ï¼ˆ2ï¼‰é¡¹ç›®åˆ†æ"></a>ï¼ˆ2ï¼‰é¡¹ç›®åˆ†æ</h4><h5 id="1ã€é¡¹ç›®éœ€æ±‚"><a href="#1ã€é¡¹ç›®éœ€æ±‚" class="headerlink" title="1ã€é¡¹ç›®éœ€æ±‚"></a>1ã€é¡¹ç›®éœ€æ±‚</h5><ul><li>ç”¨æˆ·å¯ä»¥è®¢è´­ä¸€ä¸ªæˆ–å¤šä¸ªpizza</li><li>ä¸éœ€è¦è´¦æˆ·ä¹Ÿä¸éœ€è¦ç™»é™†ï¼Œåªéœ€è¦è¾“å…¥åå­—å°±å¯ä»¥å¼€å§‹ä½¿ç”¨</li><li>å¯ä»¥æ”¹å˜pizza èœå•ï¼Œéœ€è¦ä¸€ä¸ªè™šå‡API</li><li>ç”¨æˆ·éœ€è¦è´­ç‰©è½¦æ¥æ”¾ç½®æƒ³è¦è®¢è´­çš„pizza</li><li>éœ€è¦ç”¨æˆ·çš„åå­—ã€ç”µè¯å·ç ã€åœ°å€ï¼ˆæ¥è”ç³»ï¼‰</li><li>æœ€å¥½å¯ä»¥è·å¾—ç”¨æˆ·çš„GPS</li><li>ç”¨æˆ·å¯ä»¥å°†è‡ªå·±çš„è®¢å•æ ‡è®°ä¸ºâ€œä¼˜å…ˆâ€ï¼ˆéœ€è¦å¤šä»˜20%çš„é’±ï¼‰ï¼Œå¹¶ä¸”åœ¨è®¢å•å‘é€åä¹Ÿå¯ä»¥æ ‡è®°</li><li>è®¢å•æ˜¯é€šè¿‡å‘é€å¸¦æœ‰æ‰€æœ‰è®¢å•æ•°æ®çš„POSTè¯·æ±‚æ¥å®Œæˆçš„ï¼ˆå«æœ‰ç”¨æˆ·ä¿¡æ¯å’ŒæŒ‘é€‰çš„pizzaä¿¡æ¯ï¼‰</li><li>åªæœ‰è®¢å•é€è¾¾æ‰ä¼šå¤„ç†ä»˜æ¬¾ï¼Œåœ¨åº”ç”¨ä¸­ä¸éœ€è¦å¤„ç†æ”¯ä»˜</li><li>æ¯ä¸ªè®¢å•éƒ½ä¼šå¾—åˆ°ä¸€ä¸ªä¸“ç”¨IDï¼Œä¼šæ˜¾ç¤ºåœ¨ç•Œé¢ä¸Šï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡IDæŸ¥çœ‹è®¢å•çŠ¶æ€</li></ul><h5 id="2ã€åˆ†æç‰¹æ€§å’Œç•Œé¢"><a href="#2ã€åˆ†æç‰¹æ€§å’Œç•Œé¢" class="headerlink" title="2ã€åˆ†æç‰¹æ€§å’Œç•Œé¢"></a>2ã€åˆ†æç‰¹æ€§å’Œç•Œé¢</h5><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240909195022266.png" alt="image-20240909195022266"></p><h5 id="3ã€è€ƒè™‘çŠ¶æ€å’Œæ•°æ®æµã€å†³å®šè¦ä½¿ç”¨çš„åº“"><a href="#3ã€è€ƒè™‘çŠ¶æ€å’Œæ•°æ®æµã€å†³å®šè¦ä½¿ç”¨çš„åº“" class="headerlink" title="3ã€è€ƒè™‘çŠ¶æ€å’Œæ•°æ®æµã€å†³å®šè¦ä½¿ç”¨çš„åº“"></a>3ã€è€ƒè™‘çŠ¶æ€å’Œæ•°æ®æµã€å†³å®šè¦ä½¿ç”¨çš„åº“</h5><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240909195056831.png" alt="image-20240909195056831"></p><h3 id="å››ã€å»ºç«‹é¡¹ç›®ç»“æ„"><a href="#å››ã€å»ºç«‹é¡¹ç›®ç»“æ„" class="headerlink" title="å››ã€å»ºç«‹é¡¹ç›®ç»“æ„"></a>å››ã€å»ºç«‹é¡¹ç›®ç»“æ„</h3><p>uiï¼šå¯é‡ç”¨çš„ç»„ä»¶ï¼ˆæŒ‰é’®ã€è¾“å…¥ç­‰ï¼‰</p><p>servicesï¼šå¯é‡ç”¨ä»£ç ï¼Œç”¨äºå’ŒAPIäº¤äº’</p><p>utilsï¼šhelper å‡½æ•°ï¼Œå¯é‡ç”¨ï¼Œä¸äº§ç”Ÿä»»ä½•side effect</p><p>featuresï¼šç”¨æ¥æè¿°åº”ç”¨ä¸­çš„ç‰¹å®šåŠŸèƒ½æ¨¡å—æˆ–å­åŠŸèƒ½ï¼Œæ¯ä¸ª <code>feature</code> é€šå¸¸åŒ…å«è‡ªå·±çš„çŠ¶æ€å’Œå¤„ç†å®ƒçš„é€»è¾‘ã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼Œ<code>features</code> é€šå¸¸ä¼šå¯¹åº”åˆ° Redux çš„ slice æ–‡ä»¶ï¼Œå³æ¯ä¸ª <code>feature</code> å¯èƒ½ä¼šæœ‰è‡ªå·±çš„ slice æ¥å¤„ç†è¯¥åŠŸèƒ½æ¨¡å—çš„çŠ¶æ€å’Œé€»è¾‘ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240911161457628.png" alt="image-20240911161457628"></p><h3 id="äº”ã€æ‰§è¡ŒRoutesçš„æ–°æ–¹æ³•"><a href="#äº”ã€æ‰§è¡ŒRoutesçš„æ–°æ–¹æ³•" class="headerlink" title="äº”ã€æ‰§è¡ŒRoutesçš„æ–°æ–¹æ³•"></a>äº”ã€æ‰§è¡ŒRoutesçš„æ–°æ–¹æ³•</h3><p>â­•<code>npm i react-router-dom@6</code></p><hr><p><code>react router</code>æ–‡æ¡£é“¾æ¥ï¼š<a href="https://reactrouter.com/en/main/routers/create-browser-router">https://reactrouter.com/en/main/routers/create-browser-router</a></p><p><code>App.js</code>ç¤ºä¾‹ç‰ˆï¼šï¼ˆè§ä¸‹ï¼‰</p><h4 id="ä¹‹å‰çš„æ–¹å¼ï¼šBrowserRouter-å’Œ-Routesï¼ˆReact-Router-v6ï¼‰"><a href="#ä¹‹å‰çš„æ–¹å¼ï¼šBrowserRouter-å’Œ-Routesï¼ˆReact-Router-v6ï¼‰" class="headerlink" title="ä¹‹å‰çš„æ–¹å¼ï¼šBrowserRouter å’Œ Routesï¼ˆReact Router v6ï¼‰"></a>ä¹‹å‰çš„æ–¹å¼ï¼š<code>BrowserRouter</code> å’Œ <code>Routes</code>ï¼ˆReact Router v6ï¼‰</h4><p>è¿™æ˜¯ React Router v6 çš„å…¸å‹ä½¿ç”¨æ–¹å¼ã€‚ä¸»è¦ç‰¹ç‚¹å¦‚ä¸‹ï¼š</p><ol><li><strong><code>BrowserRouter</code></strong>:<ul><li>åŒ…è£¹æ•´ä¸ªåº”ç”¨ï¼Œæä¾›è·¯ç”±åŠŸèƒ½ã€‚</li><li>å†…éƒ¨ä½¿ç”¨ HTML5 çš„ History APIï¼Œç›‘å¬ URL çš„å˜åŒ–ã€‚</li></ul></li><li><strong><code>Routes</code></strong>:<ul><li>å–ä»£äº† React Router v5 ä¸­çš„ <code>Switch</code>ï¼Œæ˜¯ v6 ä¸­ç”¨äºæ¸²æŸ“è·¯ç”±çš„ä¸»è¦ç»„ä»¶ã€‚</li><li><code>Route</code> æ˜¯åµŒå¥—åœ¨ <code>Routes</code> ç»„ä»¶ä¸­çš„ï¼Œæ¯ä¸€ä¸ª <code>Route</code> å®šä¹‰äº†ä¸€ä¸ªå…·ä½“è·¯å¾„åŠå…¶å¯¹åº”çš„ç»„ä»¶ã€‚</li></ul></li><li><strong>åµŒå¥—è·¯ç”±</strong>ï¼š<ul><li>æ”¯æŒè·¯ç”±çš„åµŒå¥—ï¼Œæ–¹ä¾¿ç»„ç»‡å¤šå±‚è·¯ç”±ç»“æ„ã€‚ä¾‹å¦‚ï¼Œ<code>path=&quot;app&quot;</code> ä¸‹çš„å­è·¯ç”± (<code>cities</code>, <code>countries</code>, <code>form</code>) ä¼šæ¸²æŸ“åœ¨ <code>AppLayout</code> å†…ã€‚</li><li>å­è·¯ç”±ä¸éœ€è¦å†™å®Œæ•´è·¯å¾„ï¼Œå¯ä»¥ç›¸å¯¹çˆ¶è·¯ç”±æ¥å®šä¹‰è·¯å¾„ã€‚</li></ul></li><li><strong><code>Suspense</code></strong>:<ul><li>ä½¿ç”¨ <code>Suspense</code> è¿›è¡Œæ‡’åŠ è½½æ—¶ï¼Œå¯ä»¥é€šè¿‡ <code>fallback</code> å±æ€§å®šä¹‰åŠ è½½æ—¶çš„å ä½ç»„ä»¶ï¼Œä¼˜åŒ–ç”¨æˆ·ä½“éªŒã€‚</li></ul></li><li><strong><code>ProtectedRoute</code></strong>:<ul><li>åœ¨ <code>path=&quot;app&quot;</code> ä¸­ï¼Œä½¿ç”¨äº† <code>ProtectedRoute</code> æ¥å®ç°è·¯ç”±çš„ä¿æŠ¤ã€‚åªæœ‰æ»¡è¶³ç‰¹å®šæ¡ä»¶æ—¶ï¼ˆæ¯”å¦‚ç”¨æˆ·å·²ç™»å½•ï¼‰ï¼Œè·¯ç”±æ‰ä¼šæ¸²æŸ“å¯¹åº”ç»„ä»¶ã€‚</li></ul></li><li><strong>404é¡µé¢å¤„ç†</strong>ï¼š<ul><li>é€šè¿‡ <code>path=&quot;*&quot;</code> æ¥æ•è·æ‰€æœ‰æœªåŒ¹é…çš„è·¯ç”±ï¼Œæ˜¾ç¤º <code>PageNotFound</code> ç»„ä»¶ã€‚</li></ul></li></ol><h4 id="ç°åœ¨çš„æ–¹å¼ï¼šcreateBrowserRouter-å’Œ-RouterProviderï¼ˆReact-Router-v6-4-ï¼‰"><a href="#ç°åœ¨çš„æ–¹å¼ï¼šcreateBrowserRouter-å’Œ-RouterProviderï¼ˆReact-Router-v6-4-ï¼‰" class="headerlink" title="ç°åœ¨çš„æ–¹å¼ï¼šcreateBrowserRouter å’Œ RouterProviderï¼ˆReact Router v6.4+ï¼‰"></a>ç°åœ¨çš„æ–¹å¼ï¼š<code>createBrowserRouter</code> å’Œ <code>RouterProvider</code>ï¼ˆReact Router v6.4+ï¼‰</h4><p>React Router v6.4 å¼•å…¥äº†æ–°çš„ <code>Data API</code>ï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥ä½¿ç”¨ <code>createBrowserRouter</code> å’Œ <code>RouterProvider</code> æ¥å®šä¹‰å’Œæä¾›è·¯ç”±ã€‚å®ƒçš„ç‰¹ç‚¹åŒ…æ‹¬ï¼š</p><ol><li><strong><code>createBrowserRouter</code></strong>:<ul><li>æ–°çš„è·¯ç”±åˆ›å»ºæ–¹å¼ï¼Œæä¾›äº†æ›´ç›´è§‚çš„é…ç½®æ–¹å¼ï¼Œå°†è·¯ç”±å£°æ˜ä¸æ•°æ®è·å–é€»è¾‘ï¼ˆå¦‚ <code>loader</code>ã€<code>action</code>ï¼‰ç»“åˆèµ·æ¥ï¼Œé€‚åˆå®šä¹‰è¾ƒä¸ºå¤æ‚çš„åº”ç”¨è·¯ç”±ã€‚</li><li>æ›´åŠ æ•°æ®é©±åŠ¨ï¼Œå¯ä»¥åœ¨è·¯ç”±å®šä¹‰æ—¶è®¾ç½®æ•°æ®åŠ è½½é€»è¾‘ã€é”™è¯¯å¤„ç†ç­‰ã€‚</li></ul></li><li><strong><code>RouterProvider</code></strong>:<ul><li>æä¾›äº†ä¸€ä¸ª <code>router</code> å¯¹è±¡ï¼Œç”¨äºå°†åˆ›å»ºå¥½çš„è·¯ç”±é…ç½®ä¼ é€’ç»™åº”ç”¨ç¨‹åºã€‚è¿™ç§æ–¹å¼ç›¸æ¯” <code>BrowserRouter</code> æ›´çµæ´»ï¼Œå¯ä»¥åœ¨åˆ›å»ºè·¯ç”±æ—¶è¿›è¡Œæ›´å¤šçš„é…ç½®æ“ä½œã€‚</li></ul></li><li><strong>ä¸å†éœ€è¦ <code>Routes</code> å’Œ <code>Route</code></strong>:<ul><li>ä½¿ç”¨ <code>createBrowserRouter</code> åï¼Œä¸éœ€è¦å†å•ç‹¬ä½¿ç”¨ <code>Routes</code> å’Œ <code>Route</code> ç»„ä»¶ï¼Œè·¯ç”±ç»“æ„æ˜¯ç›´æ¥åœ¨ <code>router</code> å¯¹è±¡å†…é…ç½®çš„ã€‚</li><li>è·¯ç”±é…ç½®çš„ç»“æ„è¾ƒä¸ºç®€æ´ï¼Œé€‚åˆæ•°æ®é¢„åŠ è½½å’Œå¤æ‚è·¯ç”±éœ€æ±‚ã€‚</li></ul></li></ol><h4 id="ä¸»è¦åŒºåˆ«ï¼š"><a href="#ä¸»è¦åŒºåˆ«ï¼š" class="headerlink" title="ä¸»è¦åŒºåˆ«ï¼š"></a>ä¸»è¦åŒºåˆ«ï¼š</h4><ol><li><strong>è·¯ç”±å£°æ˜æ–¹å¼</strong>ï¼š<ul><li>ç¬¬ä¸€ç§æ–¹å¼ä½¿ç”¨ <code>Routes</code> å’Œ <code>Route</code> ç»„ä»¶æ¥å£°æ˜è·¯ç”±ï¼Œæ˜¯ React Router v6 çš„å¸¸è§æ–¹å¼ã€‚</li><li>ç¬¬äºŒç§æ–¹å¼ä½¿ç”¨ <code>createBrowserRouter</code> æ¥å£°æ˜è·¯ç”±ï¼Œæ›´åŠ ç®€æ´ï¼Œé€‚ç”¨äº v6.4+ ç‰ˆæœ¬ï¼Œå°¤å…¶é€‚åˆæ•°æ®é©±åŠ¨çš„è·¯ç”±éœ€æ±‚ã€‚</li></ul></li><li><strong>æ•°æ®åŠ è½½ä¸å¤„ç†</strong>ï¼š<ul><li>åœ¨ React Router v6.4+ ä¸­ï¼Œ<code>createBrowserRouter</code> æ›´åŠ æ”¯æŒä¸æ•°æ®åŠ è½½å’ŒåŠ¨ä½œå¤„ç†çš„ç»“åˆï¼Œæ¯”å¦‚å¯ä»¥ç›´æ¥åœ¨è·¯ç”±å®šä¹‰æ—¶åŠ å…¥ <code>loader</code> å’Œ <code>action</code>ã€‚è¿™å¯ä»¥è®©ä½ åœ¨å®šä¹‰è·¯ç”±çš„åŒæ—¶å¤„ç†æ•°æ®åŠ è½½é€»è¾‘ã€‚</li><li>è€Œåœ¨ä¼ ç»Ÿçš„ <code>BrowserRouter</code> æ–¹å¼ä¸­ï¼Œæ•°æ®åŠ è½½é€šå¸¸æ˜¯åœ¨ç»„ä»¶å†…éƒ¨é€šè¿‡ <code>useEffect</code> æˆ–å…¶ä»–é’©å­å®Œæˆçš„ã€‚</li></ul></li><li><strong>ç»„ä»¶ç»„ç»‡æ–¹å¼</strong>ï¼š<ul><li>åœ¨ <code>createBrowserRouter</code> çš„æ–¹å¼ä¸‹ï¼Œè·¯ç”±å®šä¹‰é›†ä¸­åœ¨ä¸€ä¸ªåœ°æ–¹ï¼Œæ¯”è¾ƒé€‚åˆå¤§å‹åº”ç”¨ã€‚</li><li><code>BrowserRouter</code> å’Œ <code>Routes</code> çš„æ–¹å¼é€‚åˆå°å‹å’Œä¸­å‹åº”ç”¨ï¼Œä½¿ç”¨èµ·æ¥æ›´åŠ ç›´è§‚ã€‚</li></ul></li><li><strong>åµŒå¥—è·¯ç”±çš„ç®¡ç†</strong>ï¼š<ul><li>ä¸¤ç§æ–¹å¼éƒ½æ”¯æŒåµŒå¥—è·¯ç”±ï¼Œä½†ç¬¬ä¸€ç§æ–¹å¼é€šè¿‡ <code>Route</code> çš„åµŒå¥—æ–¹å¼å®šä¹‰åµŒå¥—è·¯ç”±ï¼Œè€Œç¬¬äºŒç§æ–¹å¼æ˜¯åœ¨ <code>createBrowserRouter</code> çš„é…ç½®å¯¹è±¡ä¸­é€šè¿‡å±‚æ¬¡åŒ–ç»“æ„æ¥å®ç°ã€‚</li></ul></li></ol><h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><p><strong><code>BrowserRouter</code> å’Œ <code>Routes</code></strong> çš„æ–¹å¼ï¼šæ›´åŠ ç›´æ¥ã€ç®€å•ï¼Œé€‚ç”¨äºä¸­å°å‹åº”ç”¨ã€‚</p><p><strong><code>createBrowserRouter</code> å’Œ <code>RouterProvider</code></strong> çš„æ–¹å¼ï¼šé€‚åˆæ›´å¤æ‚çš„åº”ç”¨ï¼Œå°¤å…¶æ˜¯åœ¨éœ€è¦æ•°æ®é¢„åŠ è½½å’Œå¤„ç†æ—¶ï¼Œè¿™ç§æ–¹å¼æ›´åŠ é«˜æ•ˆã€‚</p><h3 id="å…­ã€æ„å»ºlayout"><a href="#å…­ã€æ„å»ºlayout" class="headerlink" title="å…­ã€æ„å»ºlayout"></a>å…­ã€æ„å»ºlayout</h3><h4 id="ï¼ˆ1ï¼‰ä»€ä¹ˆæ˜¯layoutï¼Ÿ"><a href="#ï¼ˆ1ï¼‰ä»€ä¹ˆæ˜¯layoutï¼Ÿ" class="headerlink" title="ï¼ˆ1ï¼‰ä»€ä¹ˆæ˜¯layoutï¼Ÿ"></a>ï¼ˆ1ï¼‰ä»€ä¹ˆæ˜¯layoutï¼Ÿ</h4><p><strong>layoutï¼ˆå¸ƒå±€ï¼‰ç•Œé¢</strong>é€šå¸¸æ˜¯æŒ‡ä¸€ä¸ªåº”ç”¨ç¨‹åºçš„æ•´ä½“æ¡†æ¶æˆ–é¡µé¢ç»“æ„ã€‚å®ƒè´Ÿè´£å°†ä¸åŒçš„ UI ç»„ä»¶ï¼ˆå¦‚å¯¼èˆªæ ã€ä¾§è¾¹æ ã€é¡µè„šã€å†…å®¹åŒºç­‰ï¼‰ç»„ç»‡åœ¨ä¸€èµ·ï¼Œå¹¶ç¡®ä¿å®ƒä»¬åœ¨é¡µé¢ä¸Šä»¥ä¸€è‡´çš„æ–¹å¼æ˜¾ç¤ºã€‚å¸ƒå±€ç•Œé¢ä¸»è¦ç”¨äºå®šä¹‰é¡µé¢çš„éª¨æ¶å’Œå„éƒ¨åˆ†çš„æ’åˆ—æ–¹å¼ï¼Œç”¨æˆ·å¯ä»¥åœ¨è¿™ä¸ªåŸºç¡€ä¸Šè¿›è¡Œå†…å®¹çš„å¡«å……å’Œäº¤äº’è®¾è®¡ã€‚</p><h4 id="ï¼ˆ2ï¼‰layoutçš„ä½œç”¨"><a href="#ï¼ˆ2ï¼‰layoutçš„ä½œç”¨" class="headerlink" title="ï¼ˆ2ï¼‰layoutçš„ä½œç”¨"></a>ï¼ˆ2ï¼‰layoutçš„ä½œç”¨</h4><ul><li><strong>ä¿æŒä¸€è‡´æ€§</strong>ï¼šæ¯ä¸ªé¡µé¢åœ¨å¸ƒå±€ä¸Šçš„ä¸€è‡´æ€§æœ‰åŠ©äºç”¨æˆ·ç†Ÿæ‚‰ç•Œé¢ï¼Œå‡å°‘å­¦ä¹ æˆæœ¬ã€‚</li><li><strong>å¯¼èˆªæ€§</strong>ï¼šé€šè¿‡å›ºå®šçš„å¯¼èˆªæ æˆ–ä¾§è¾¹æ ï¼Œç”¨æˆ·å¯ä»¥å¿«é€Ÿæ‰¾åˆ°æ‰€éœ€çš„åŠŸèƒ½æˆ–é¡µé¢ã€‚</li><li><strong>å¤ç”¨æ€§</strong>ï¼šé€šè¿‡å°†å¸ƒå±€ç•Œé¢æŠ½è±¡å‡ºæ¥ï¼Œå¯ä»¥åœ¨å¤šä¸ªé¡µé¢é—´å¤ç”¨åŒä¸€ä¸ªç»“æ„ï¼Œè€Œåªæ”¹å˜ä¸»å†…å®¹åŒºåŸŸçš„å†…å®¹ã€‚</li></ul><h4 id="ï¼ˆ3ï¼‰åµŒå¥—è·¯ç”±"><a href="#ï¼ˆ3ï¼‰åµŒå¥—è·¯ç”±" class="headerlink" title="ï¼ˆ3ï¼‰åµŒå¥—è·¯ç”±"></a>ï¼ˆ3ï¼‰åµŒå¥—è·¯ç”±</h4><p>åœ¨ React Router ä¸­ï¼Œ<strong>åµŒå¥—è·¯ç”±</strong>å…è®¸ä½ åœ¨ä¸€ä¸ªè·¯ç”±ç»„ä»¶å†…éƒ¨å±•ç¤ºå­è·¯ç”±çš„å†…å®¹ã€‚è¿™ç§æ–¹å¼éå¸¸é€‚åˆå®ç°åƒå¸ƒå±€ç»„ä»¶ï¼ˆLayoutï¼‰è¿™ç§é¡µé¢ç»“æ„ï¼Œå³ä¸»ç•Œé¢æœ‰ä¸€äº›å›ºå®šä¸å˜çš„éƒ¨åˆ†ï¼ˆæ¯”å¦‚å¯¼èˆªæ ã€é¡µçœ‰ï¼‰ï¼Œè€Œå…¶ä½™éƒ¨åˆ†æ ¹æ®ä¸åŒè·¯ç”±åˆ‡æ¢ã€‚</p><p><code>&lt;Outlet&gt;</code> ç»„ä»¶æ˜¯ React Router ç”¨äºæ¸²æŸ“åµŒå¥—è·¯ç”±çš„å…³é”®éƒ¨åˆ†ã€‚å®ƒèµ·åˆ°â€œå ä½ç¬¦â€çš„ä½œç”¨ï¼Œè¡¨ç¤ºåœ¨è¿™ä¸ªä½ç½®ä¼šæ¸²æŸ“åŒ¹é…å½“å‰è·¯ç”±çš„å­è·¯ç”±å†…å®¹ã€‚</p><h4 id="ï¼ˆ4ï¼‰ä»£ç ç¤ºä¾‹ï¼š"><a href="#ï¼ˆ4ï¼‰ä»£ç ç¤ºä¾‹ï¼š" class="headerlink" title="ï¼ˆ4ï¼‰ä»£ç ç¤ºä¾‹ï¼š"></a>ï¼ˆ4ï¼‰ä»£ç ç¤ºä¾‹ï¼š</h4><p>æœ¬æ¬¡é¡¹ç›®æ‰€æœ‰ç•Œé¢ä½¿ç”¨åŒç§layoutå¸ƒå±€ç•Œé¢ï¼Œå› æ­¤è¾ƒä¸ºç®€å•ã€‚</p><p><code>AppLayout.jsx</code></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">AppLayout</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Header</span> /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">main</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Outlet</span> /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">CartOverview</span> /&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure><p><code>App.jsx</code></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Menu</span>, &#123; loader <span class="hljs-keyword">as</span> menuLoader &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./features/menu/Menu&quot;</span>;<br><br><span class="hljs-keyword">const</span> router = <span class="hljs-title function_">createBrowserRouter</span>([<br>  &#123;<br>    <span class="hljs-attr">element</span>: <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">AppLayout</span> /&gt;</span></span>,<br>    <span class="hljs-attr">children</span>: [<br>      &#123;<br>        <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/&quot;</span>,<br>        <span class="hljs-attr">element</span>: <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Home</span> /&gt;</span></span>,<br>      &#125;,<br>      &#123;<br>        <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/menu&quot;</span>,<br>        <span class="hljs-attr">element</span>: <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Menu</span> /&gt;</span></span>,<br>        <span class="hljs-attr">loader</span>: menuLoaderï¼Œ<br>      &#125;,<br>    ],<br>  &#125;,<br>]);<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">RouterProvider</span> <span class="hljs-attr">router</span>=<span class="hljs-string">&#123;router&#125;</span> /&gt;</span></span>;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span>;<br><br></code></pre></td></tr></table></figure><h3 id="ä¸ƒã€Loaders"><a href="#ä¸ƒã€Loaders" class="headerlink" title="ä¸ƒã€Loaders"></a>ä¸ƒã€Loaders</h3><p><code>Loaders</code> é€šå¸¸æŒ‡çš„æ˜¯åœ¨æ•°æ®åŠ è½½è¿‡ç¨‹ä¸­æ˜¾ç¤ºçš„ç»„ä»¶æˆ–åŠŸèƒ½ï¼Œæ¥å‘ç”¨æˆ·å±•ç¤ºæ•°æ®æ­£åœ¨è·å–çš„çŠ¶æ€ã€‚å®ƒæœ‰åŠ©äºæé«˜ç”¨æˆ·ä½“éªŒï¼Œé¿å…åœ¨æ•°æ®è¿˜æœªåŠ è½½å®Œæ¯•å‰å‘ˆç°ç©ºç™½é¡µé¢ã€‚</p><h4 id="ï¼ˆ1ï¼‰Loaderçš„ä»‹ç»å’Œåˆæ­¥ä½¿ç”¨"><a href="#ï¼ˆ1ï¼‰Loaderçš„ä»‹ç»å’Œåˆæ­¥ä½¿ç”¨" class="headerlink" title="ï¼ˆ1ï¼‰Loaderçš„ä»‹ç»å’Œåˆæ­¥ä½¿ç”¨"></a>ï¼ˆ1ï¼‰Loaderçš„ä»‹ç»å’Œåˆæ­¥ä½¿ç”¨</h4><p> æœ¬æ¬¡é¡¹ç›®ä¸åŒäºä¹‹å‰<strong>ä½¿ç”¨useEffectè·å–æ•°æ®åŠ useStateç®¡ç†isLoadingçŠ¶æ€æ¥æ˜¾ç¤ºåŠ è½½ç•Œé¢</strong>çš„æ–¹æ³•ï¼Œç”±äºè¿ç”¨äº†React Router v6.4ï¼Œå®ƒè‡ªå¸¦äº† <code>Loader</code> åŠŸèƒ½ç”¨äºåœ¨è·¯ç”±å±‚é¢è¿›è¡Œæ•°æ®åŠ è½½ã€‚å¯ä»¥ç»“åˆè·¯ç”±ç›´æ¥å±•ç¤ºåŠ è½½çŠ¶æ€ã€‚</p><p>ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼šï¼ˆç›´æ¥ç»™å‡ºä¾‹å­ï¼‰</p><p><code>Menu.js</code></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> &#123; useLoaderData &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react-router-dom&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; getMenu &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;../../services/apiRestaurant&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">MenuItem</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./MenuItem&quot;</span>;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Menu</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> menu = <span class="hljs-title function_">useLoaderData</span>();<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml">      &#123;menu.map((pizza) =&gt; (</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">MenuItem</span> <span class="hljs-attr">pizza</span>=<span class="hljs-string">&#123;pizza&#125;</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;pizza.id&#125;</span> /&gt;</span></span><br><span class="language-xml">      ))&#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">loader</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> menu = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getMenu</span>();<br>  <span class="hljs-keyword">return</span> menu;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Menu</span>;<br><br></code></pre></td></tr></table></figure><ol><li>åœ¨éœ€è¦åŠ è½½æ•°æ®çš„æ–‡ä»¶ä¸­ä½¿ç”¨loaderå‡½æ•°è·å–å¹¶è¿”å›æ•°æ®ï¼ˆexportå¯¼å‡ºï¼Œéœ€æ˜¯å¼‚æ­¥å‡½æ•°ï¼‰</li><li>åœ¨è¯¥ç•Œé¢çš„Routerä¸­åŠ å…¥loaderå±æ€§ï¼Œå¹¶è®¾ç½®ä¸ºå¯¼å…¥çš„loaderå‡½æ•°ï¼ˆå¯é‡å‘½åï¼‰</li><li>åœ¨éœ€è¦åŠ è½½æ•°æ®çš„ç»„ä»¶å‡½æ•°ä¸­ä½¿ç”¨useLoaderData()å‡½æ•°è·å¾—æ•°æ®</li></ol><p><code>useLoaderData</code> æ˜¯ React Router v6 æä¾›çš„ä¸€ä¸ªé’©å­ï¼Œç”¨äºåœ¨è·¯ç”±åŠ è½½æ—¶è·å–é¢„åŠ è½½çš„æ•°æ®ã€‚å®ƒé€šè¿‡å…³è”çš„ <strong>loader å‡½æ•°</strong> æä¾›æ•°æ®ï¼Œç¡®ä¿åœ¨ç»„ä»¶æ¸²æŸ“æ—¶å·²ç»è·å¾—äº†æ‰€éœ€çš„æ•°æ®ï¼Œé¿å…äº†ç»„ä»¶ä¸€å¼€å§‹å°±åŠ è½½ç©ºç™½é¡µé¢å†å»å¼‚æ­¥è·å–æ•°æ®çš„æƒ…å†µã€‚</p><p><code>loader</code> æ˜¯ä¸€ä¸ªå¼‚æ­¥å‡½æ•°ï¼Œä¸“é—¨ç”¨äºåœ¨å¯¼èˆªåˆ°è¯¥é¡µé¢ä¹‹å‰ä»æœåŠ¡ç«¯æˆ–å…¶ä»–æ•°æ®æºè·å–æ•°æ®ã€‚è¿™ä¸ª <code>loader</code> å‡½æ•°ä¼šåœ¨æ¸²æŸ“ <code>Menu</code> ç»„ä»¶ä¹‹å‰æ‰§è¡Œï¼Œç¡®ä¿æ•°æ®å·²ç»åŠ è½½å®Œæ¯•ã€‚</p><h4 id="ï¼ˆ2ï¼‰navigation"><a href="#ï¼ˆ2ï¼‰navigation" class="headerlink" title="ï¼ˆ2ï¼‰navigation"></a>ï¼ˆ2ï¼‰navigation</h4><p><code>useNavigation</code> æ˜¯ React Router æä¾›çš„é’©å­ï¼Œç”¨äºè·Ÿè¸ªåº”ç”¨ä¸­çš„å¯¼èˆªçŠ¶æ€ã€‚å®ƒå¯ä»¥ç”¨æ¥æŸ¥çœ‹å½“å‰çš„å¯¼èˆªçŠ¶æ€ï¼ˆæ¯”å¦‚åŠ è½½ä¸­ã€ç­‰å¾…ä¸­ç­‰ï¼‰ï¼Œå¹¶æ˜¾ç¤ºç›¸åº”çš„ç•Œé¢çŠ¶æ€ã€‚ï¼ˆè¯¦è§React Routerä¸“é¢˜éƒ¨åˆ†ï¼‰</p><p>å› æ­¤é€šè¿‡ï¼š</p><p><code>const navigation = useNavigation();</code></p><p> <code>// console.log(navigation);</code></p><p> <code>const isLoading = navigation.state === &quot;loading&quot;;</code></p><p>å¾—åˆ°åŠ è½½çŠ¶æ€åå³å¯æ¡ä»¶æ˜¾ç¤ºLoaderç»„ä»¶</p><h4 id="ï¼ˆ3ï¼‰å…¨å±€Loader"><a href="#ï¼ˆ3ï¼‰å…¨å±€Loader" class="headerlink" title="ï¼ˆ3ï¼‰å…¨å±€Loader"></a>ï¼ˆ3ï¼‰å…¨å±€Loader</h4><p>åœ¨ä»£ç ä¸­ï¼Œæˆ‘ä»¬æŠŠLoaderç»„ä»¶æ”¾åœ¨äº†AppLayoutç»„ä»¶ä¸­ï¼Œç”±äºå®ƒä½äºçˆ¶è·¯ç”±ï¼Œå› æ­¤æ‰€æœ‰ä½¿ç”¨useLoaderDataçš„å­è·¯ç”±ç»„ä»¶åœ¨åŠ è½½çš„æ—¶å€™éƒ½ä¼šè‡ªåŠ¨è·å–Loaderç»„ä»¶ã€‚</p><h3 id="å…«ã€é”™è¯¯å¤„ç†"><a href="#å…«ã€é”™è¯¯å¤„ç†" class="headerlink" title="å…«ã€é”™è¯¯å¤„ç†"></a>å…«ã€é”™è¯¯å¤„ç†</h3><p>åœ¨Routerçš„çˆ¶è·¯ç”±ä¸­åŠ ä¸ŠerrorElementå±æ€§ï¼ŒæŒ‡å‘æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯çš„ç»„ä»¶ã€‚</p><p> <code>const error = useRouteError();</code>       å¾—åˆ°é”™è¯¯ä¿¡æ¯</p><p> <code>console.log(error);</code></p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240911162903277.png" alt="image-20240911162903277"></p><p><code>error.data</code>æˆ–è€…<code>error.message</code>å°±æ˜¯é”™è¯¯çš„å…·ä½“ä¿¡æ¯ï¼ˆå¯ä»¥æ˜¾ç¤ºå‡ºè·å–ä¿¡æ¯å¤±è´¥çš„é”™è¯¯ï¼‰</p><p>å› æ­¤ä¹Ÿå¯ä»¥åœ¨éœ€è¦è·å–æ•°æ®çš„å­è·¯ç”±ä¸­åŠ ä¸Šè¿™ä¸ªé”™è¯¯å±æ€§ï¼Œä½¿å¾—é”™è¯¯ç•Œé¢ä¹Ÿæ‹¥æœ‰layoutçš„å¸ƒå±€ã€‚</p><h3 id="ä¹ã€æäº¤è¡¨å•"><a href="#ä¹ã€æäº¤è¡¨å•" class="headerlink" title="ä¹ã€æäº¤è¡¨å•"></a>ä¹ã€æäº¤è¡¨å•</h3><h4 id="ï¼ˆ1ï¼‰actionsåœ¨æäº¤è¡¨å•ä¸­çš„ç”¨æ³•"><a href="#ï¼ˆ1ï¼‰actionsåœ¨æäº¤è¡¨å•ä¸­çš„ç”¨æ³•" class="headerlink" title="ï¼ˆ1ï¼‰actionsåœ¨æäº¤è¡¨å•ä¸­çš„ç”¨æ³•"></a>ï¼ˆ1ï¼‰actionsåœ¨æäº¤è¡¨å•ä¸­çš„ç”¨æ³•</h4><p>é¦–å…ˆéœ€è¦å°†actionå‡½æ•°é“¾æ¥åˆ°è¯¥ç»„ä»¶çš„Routerä¸­</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/order/new&quot;</span>,<br>    <span class="hljs-attr">element</span>: <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">CreateOrder</span> /&gt;</span></span>,<br>    <span class="hljs-attr">action</span>: createOrderAction, <span class="hljs-comment">//å·²æ›´å</span><br>&#125;,<br></code></pre></td></tr></table></figure><p>å¦å¤–ï¼Œæˆ‘ä»¬æƒ³è¦åœ¨æäº¤è¡¨å•æ•°æ®çš„åŒæ—¶éšå½¢æäº¤cartä¸­çš„æ•°æ®ï¼Œå°±åœ¨<Form />ç»„ä»¶ä¸­çš„ä»»æ„ä½ç½®æ”¾ä¸Šè¿™ä¸€è¡Œä»£ç ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;input type=<span class="hljs-string">&quot;hidden&quot;</span> name=<span class="hljs-string">&quot;cart&quot;</span> value=&#123;<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(cart)&#125; /&gt;<br></code></pre></td></tr></table></figure><p>æœ€åæ˜¯actionå‡½æ•°ï¼šï¼ˆ<code>action</code> å‡½æ•°æ˜¯åœ¨è¡¨å•æäº¤æ—¶æ‰§è¡Œçš„ï¼Œå®ƒä¼šå¤„ç†è¡¨å•æäº¤çš„æ•°æ®ï¼‰</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">action</span>(<span class="hljs-params">&#123; request &#125;</span>) &#123;<br>  <span class="hljs-keyword">const</span> formData = <span class="hljs-keyword">await</span> request.<span class="hljs-title function_">formData</span>();  <span class="hljs-comment">//è·å¾—æ•°æ®</span><br>  <span class="hljs-keyword">const</span> data = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">fromEntries</span>(formData);  <span class="hljs-comment">//å°† FormData è½¬æ¢ä¸ºæ™®é€šçš„ JavaScript å¯¹è±¡ï¼Œæ–¹ä¾¿åç»­å¤„ç†è¡¨å•ä¸­çš„å­—æ®µå’Œå€¼</span><br>  <span class="hljs-comment">//console.log(data);</span><br>  <span class="hljs-keyword">const</span> order = &#123;   <span class="hljs-comment">//é‡æ„dataç»“æ„</span><br>    ...data,<br>    <span class="hljs-attr">cart</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(data.<span class="hljs-property">cart</span>),  <span class="hljs-comment">//ä»å­—ç¬¦ä¸²å½¢å¼è½¬åŒ–ä¸ºjavaScriptå¯¹è±¡</span><br>    <span class="hljs-attr">priority</span>: data.<span class="hljs-property">priority</span> === <span class="hljs-string">&quot;on&quot;</span>,<br>  &#125;;  <br>  <span class="hljs-comment">// console.log(order);</span><br>  <span class="hljs-keyword">const</span> newOrder = <span class="hljs-keyword">await</span> <span class="hljs-title function_">createOrder</span>(order);<br><br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">redirect</span>(<span class="hljs-string">`/order/<span class="hljs-subst">$&#123;newOrder.id&#125;</span>`</span>);  <span class="hljs-comment">//é‡å®šå‘</span><br>&#125;<br><br></code></pre></td></tr></table></figure><p>é‡æ„å‰å’Œé‡æ„åçš„æ•°æ®å¦‚å›¾ï¼ˆæœ¬æ¥priorityåœ¨ä¸é€‰æ—¶ä¸ä¼šå‡ºç°ï¼Œç°åœ¨ç”±trueå’Œfalseæè¿°ï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240911194331654.png" alt="image-20240911194331654"></p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240911194427541.png" alt="image-20240911194427541"></p><h4 id="ï¼ˆ2ï¼‰éšè—å­—æ®µè§£æ"><a href="#ï¼ˆ2ï¼‰éšè—å­—æ®µè§£æ" class="headerlink" title="ï¼ˆ2ï¼‰éšè—å­—æ®µè§£æ"></a>ï¼ˆ2ï¼‰éšè—å­—æ®µè§£æ</h4><p>1.<strong><code>&lt;input type=&quot;hidden&quot;&gt;</code></strong></p><ul><li><strong>éšè—å­—æ®µ</strong>ï¼š<code>&lt;input type=&quot;hidden&quot;&gt;</code> æ˜¯ä¸€ç§ä¸ä¼šæ˜¾ç¤ºåœ¨ç”¨æˆ·ç•Œé¢ä¸Šçš„è¾“å…¥å­—æ®µã€‚å®ƒç”¨äºåœ¨è¡¨å•ä¸­ä¼ é€’æ•°æ®ï¼Œä½†ä¸è®©ç”¨æˆ·ç›´æ¥çœ‹åˆ°æˆ–ä¿®æ”¹è¿™äº›æ•°æ®ã€‚</li><li><strong>ä½œç”¨</strong>ï¼šä¸»è¦ç”¨äºä¼ é€’ç”¨æˆ·ä¸éœ€è¦æˆ–ä¸åº”è¯¥ç›´æ¥ç¼–è¾‘çš„å†…å®¹ï¼Œä¾‹å¦‚è¡¨å•çš„å†…éƒ¨æ•°æ®æˆ–ä¸é¡µé¢çŠ¶æ€ç›¸å…³çš„ä¿¡æ¯ã€‚</li></ul><p>2.<strong><code>name=&quot;cart&quot;</code></strong></p><ul><li><strong>è¡¨å•å­—æ®µå</strong>ï¼š<code>name=&quot;cart&quot;</code> æŒ‡å®šäº†è¯¥å­—æ®µåœ¨è¡¨å•æ•°æ®ä¸­çš„åç§°ã€‚å½“è¡¨å•æäº¤æ—¶ï¼Œè¿™ä¸ªå­—æ®µä¼šä½œä¸ºè¡¨å•æ•°æ®çš„ä¸€éƒ¨åˆ†å‘é€åˆ°æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å¯ä»¥é€šè¿‡ <code>name=&quot;cart&quot;</code> è¿™ä¸ªåç§°æ¥è·å–å®ƒå¯¹åº”çš„å€¼ã€‚</li></ul><ol start="3"><li><strong><code>value=&#123;JSON.stringify(cart)&#125;</code></strong></li></ol><ul><li>**<code>JSON.stringify(cart)</code>**ï¼š<code>cart</code> æ˜¯ä¸€ä¸ª JavaScript å¯¹è±¡æˆ–æ•°ç»„ï¼Œå®ƒè¢«è½¬æ¢ä¸º JSON å­—ç¬¦ä¸²å¹¶ä½œä¸ºè¡¨å•å­—æ®µçš„å€¼æäº¤ã€‚å› ä¸º HTML è¡¨å•åªèƒ½æäº¤å­—ç¬¦ä¸²ç±»å‹çš„å€¼ï¼Œè€Œ JavaScript å¯¹è±¡æ— æ³•ç›´æ¥ä½œä¸ºè¡¨å•å­—æ®µçš„å€¼ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨ <code>JSON.stringify()</code> å°† <code>cart</code> å¯¹è±¡è½¬æ¢ä¸º JSON æ ¼å¼çš„å­—ç¬¦ä¸²ã€‚</li></ul><h4 id="ï¼ˆ3ï¼‰ä»£ç è¿è¡Œæµç¨‹"><a href="#ï¼ˆ3ï¼‰ä»£ç è¿è¡Œæµç¨‹" class="headerlink" title="ï¼ˆ3ï¼‰ä»£ç è¿è¡Œæµç¨‹"></a>ï¼ˆ3ï¼‰ä»£ç è¿è¡Œæµç¨‹</h4><ol><li>ç”¨æˆ·åœ¨ <code>/order/new</code> é¡µé¢å¡«å†™è®¢å•ä¿¡æ¯å¹¶æäº¤è¡¨å•ã€‚</li><li>è¡¨å•æäº¤åï¼Œ<code>createOrderAction</code> å‡½æ•°è¢«è°ƒç”¨ï¼Œè¡¨å•æ•°æ®é€šè¿‡ <code>request.formData()</code> è·å–ã€‚</li><li>å°†è¡¨å•æ•°æ®è½¬æ¢ä¸º JavaScript å¯¹è±¡ï¼Œå¹¶å¤„ç†å…¶ä¸­çš„å¤æ‚å­—æ®µï¼ˆå¦‚è§£æ JSON å’Œå¸ƒå°”å€¼è½¬æ¢ï¼‰ã€‚</li><li>è°ƒç”¨ <code>createOrder(order)</code> å‡½æ•°æ¥åˆ›å»ºæ–°è®¢å•ã€‚</li><li>åˆ›å»ºè®¢å•åï¼Œé€šè¿‡ <code>redirect(/order/$&#123;newOrder.id&#125;)</code> å°†ç”¨æˆ·é‡å®šå‘åˆ°æ–°åˆ›å»ºçš„è®¢å•è¯¦æƒ…é¡µã€‚</li></ol><h4 id="ï¼ˆ4ï¼‰è¡¨å•æ•°æ®æ£€æµ‹å’Œé”™è¯¯å¤„ç†"><a href="#ï¼ˆ4ï¼‰è¡¨å•æ•°æ®æ£€æµ‹å’Œé”™è¯¯å¤„ç†" class="headerlink" title="ï¼ˆ4ï¼‰è¡¨å•æ•°æ®æ£€æµ‹å’Œé”™è¯¯å¤„ç†"></a>ï¼ˆ4ï¼‰è¡¨å•æ•°æ®æ£€æµ‹å’Œé”™è¯¯å¤„ç†</h4><h5 id="1ã€ä¸ºäº†é˜²æ­¢ç”¨æˆ·æä¾›çš„æ•°æ®æ ¼å¼ä¸å¯¹ï¼Œåœ¨åˆ›å»ºæ–°è®¢å•ä¹‹å‰ï¼Œéœ€è¦åšæ•°æ®ç›‘æµ‹ï¼š"><a href="#1ã€ä¸ºäº†é˜²æ­¢ç”¨æˆ·æä¾›çš„æ•°æ®æ ¼å¼ä¸å¯¹ï¼Œåœ¨åˆ›å»ºæ–°è®¢å•ä¹‹å‰ï¼Œéœ€è¦åšæ•°æ®ç›‘æµ‹ï¼š" class="headerlink" title="1ã€ä¸ºäº†é˜²æ­¢ç”¨æˆ·æä¾›çš„æ•°æ®æ ¼å¼ä¸å¯¹ï¼Œåœ¨åˆ›å»ºæ–°è®¢å•ä¹‹å‰ï¼Œéœ€è¦åšæ•°æ®ç›‘æµ‹ï¼š"></a>1ã€ä¸ºäº†é˜²æ­¢ç”¨æˆ·æä¾›çš„æ•°æ®æ ¼å¼ä¸å¯¹ï¼Œåœ¨åˆ›å»ºæ–°è®¢å•ä¹‹å‰ï¼Œéœ€è¦åšæ•°æ®ç›‘æµ‹ï¼š</h5><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> error=&#123;&#125;;<br><span class="hljs-keyword">if</span> (!<span class="hljs-title function_">isValidPhone</span>(order.<span class="hljs-property">phone</span>))<br>  errors.<span class="hljs-property">phone</span> =<br>    <span class="hljs-string">&quot;Please give us your correct phone number.We might need it to contact you.&quot;</span>;<br><br>  <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(errors).<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> errors;<br></code></pre></td></tr></table></figure><ol><li>åˆ›å»ºä¸€ä¸ªç©ºçš„å¯¹è±¡ <code>errors</code>ï¼Œç”¨æ¥å­˜å‚¨æ‰€æœ‰çš„é”™è¯¯ä¿¡æ¯ã€‚è¿™ä¸ªå¯¹è±¡ä¼šæ ¹æ®éªŒè¯æ¡ä»¶åŠ¨æ€å¡«å……ç›¸åº”çš„é”™è¯¯æ¶ˆæ¯ã€‚</li><li>å¦‚æœç”µè¯å·ç æ— æ•ˆï¼Œåˆ™åœ¨ <code>errors</code> å¯¹è±¡ä¸­æ·»åŠ ä¸€ä¸ª <code>phone</code> é”™è¯¯å­—æ®µï¼Œå¹¶è®¾ç½®ä¸€ä¸ªå¯¹åº”çš„é”™è¯¯æ¶ˆæ¯ </li><li><code>Object.keys(errors)</code> è¿”å› <code>errors</code> å¯¹è±¡ä¸­çš„æ‰€æœ‰é”®ï¼ˆå³é”™è¯¯å­—æ®µï¼‰çš„æ•°ç»„ã€‚å¦‚æœ <code>errors</code> ä¸­æœ‰ä»»ä½•é”™è¯¯ä¿¡æ¯ï¼Œ<code>Object.keys(errors).length</code> çš„å€¼å°±ä¼šå¤§äº 0ï¼Œäºæ˜¯ä»£ç ä¼šè¿”å›è¿™ä¸ª <code>errors</code> å¯¹è±¡ï¼Œé€šå¸¸ä¼šåœ¨å‰ç«¯æ˜¾ç¤ºè¿™äº›é”™è¯¯ä¿¡æ¯ç»™ç”¨æˆ·ã€‚</li></ol><h5 id="2ã€åœ¨ç»„ä»¶é‡Œéœ€è¦æ¥å—é”™è¯¯ä¿¡æ¯å¹¶æ˜¾ç¤ºï¼š"><a href="#2ã€åœ¨ç»„ä»¶é‡Œéœ€è¦æ¥å—é”™è¯¯ä¿¡æ¯å¹¶æ˜¾ç¤ºï¼š" class="headerlink" title="2ã€åœ¨ç»„ä»¶é‡Œéœ€è¦æ¥å—é”™è¯¯ä¿¡æ¯å¹¶æ˜¾ç¤ºï¼š"></a>2ã€åœ¨ç»„ä»¶é‡Œéœ€è¦æ¥å—é”™è¯¯ä¿¡æ¯å¹¶æ˜¾ç¤ºï¼š</h5><p> <code>const formErrors = useActionData();</code></p><p><code>&#123;formErrors?.phone &amp;&amp; &lt;p&gt;&#123;formErrors.phone&#125;&lt;/p&gt;&#125;</code></p>]]></content>
    
    
    <categories>
      
      <category>reactè¯¾ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>react</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>reactè¯¾ç¨‹13-Reduxå…¥é—¨</title>
    <link href="/2024/09/07/react%E8%AF%BE%E7%A8%8B13-Redux%E5%85%A5%E9%97%A8/"/>
    <url>/2024/09/07/react%E8%AF%BE%E7%A8%8B13-Redux%E5%85%A5%E9%97%A8/</url>
    
    <content type="html"><![CDATA[<p>ğŸ¥³æœ¬èŠ‚è¯¾å¼€å§‹å­¦ä¹ Redux</p><span id="more"></span><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240907143311436.png"></p><h3 id="ä¸€ã€Reduxçš„å®šä¹‰"><a href="#ä¸€ã€Reduxçš„å®šä¹‰" class="headerlink" title="ä¸€ã€Reduxçš„å®šä¹‰"></a>ä¸€ã€Reduxçš„å®šä¹‰</h3><hr><p>Redux æ˜¯ä¸€ä¸ªç”¨äºç®¡ç† JavaScript åº”ç”¨ä¸­çŠ¶æ€çš„å¼€æºåº“ï¼Œé€šå¸¸ä¸ React ä¸€èµ·ä½¿ç”¨ã€‚Redux çš„æ ¸å¿ƒæ€æƒ³æ˜¯å°†åº”ç”¨çš„çŠ¶æ€å­˜å‚¨åœ¨ä¸€ä¸ªå…¨å±€çš„å•ä¸€çŠ¶æ€æ ‘ä¸­ï¼Œè¿™æ ·åº”ç”¨ä¸­çš„ä»»ä½•ç»„ä»¶éƒ½å¯ä»¥è®¿é—®å’Œæ›´æ–°è¯¥çŠ¶æ€ã€‚</p><ul><li><p><strong>Redux çš„ä¸‰ä¸ªæ ¸å¿ƒåŸåˆ™ï¼š</strong></p><ul><li><p><strong>å•ä¸€æ•°æ®æº</strong>ï¼š åº”ç”¨çš„æ‰€æœ‰çŠ¶æ€ä¿å­˜åœ¨ä¸€ä¸ªå¯¹è±¡æ ‘ä¸­ï¼Œå¹¶ä¸”è¿™ä¸ªçŠ¶æ€å¯¹è±¡æ ‘æ˜¯åªè¯»çš„ã€‚</p></li><li><p><strong>çŠ¶æ€æ˜¯åªè¯»çš„</strong>ï¼š å”¯ä¸€æ”¹å˜çŠ¶æ€çš„æ–¹æ³•æ˜¯å‘å‡ºä¸€ä¸ª <strong>action</strong>ï¼Œaction æ˜¯ä¸€ä¸ªæè¿°äº‹ä»¶çš„æ™®é€š JavaScript å¯¹è±¡ã€‚</p></li><li><p><strong>ä½¿ç”¨çº¯å‡½æ•°æ¥ä¿®æ”¹çŠ¶æ€</strong>ï¼š é€šè¿‡ç¼–å†™çº¯å‡½æ•° <strong>reducers</strong> æ¥æ ¹æ® action æè¿°çš„äº‹ä»¶è¿”å›æ–°çš„çŠ¶æ€ã€‚</p></li></ul></li><li><p><strong>ä½¿ç”¨ Redux çš„æ­¥éª¤ï¼š</strong></p><ul><li><p><strong>åˆ›å»º store</strong>ï¼š<code>createStore()</code> ç”¨äºåˆ›å»º Redux çš„å­˜å‚¨ï¼ˆstoreï¼‰ã€‚ï¼ˆå«æœ‰å¤šä¸ªReducerï¼Œä¸ºæ¯ä¸ªåº”ç”¨ç¨‹åºç‰¹æ€§æˆ–æ¯ä¸ªæ•°æ®åˆ›å»ºä¸€ä¸ªreducerï¼‰</p></li><li><p><strong>å®šä¹‰ reducer</strong>ï¼šreducer æ˜¯ä¸€ä¸ªçº¯å‡½æ•°ï¼Œæ¥æ”¶å½“å‰çš„çŠ¶æ€å’Œ actionï¼Œç„¶åè¿”å›æ–°çš„çŠ¶æ€ã€‚</p></li><li><p><strong>åˆ†å‘ action</strong>ï¼šç»„ä»¶å¯ä»¥é€šè¿‡ <code>dispatch(action)</code> æ¥å‘é€ actionï¼Œè¿›è€Œè§¦å‘çŠ¶æ€çš„å˜åŒ–ã€‚</p></li><li><p><strong>è¿æ¥ç»„ä»¶ä¸ store</strong>ï¼šé€šè¿‡ <code>connect()</code> æˆ–è€… hooksï¼ˆå¦‚ <code>useSelector</code> å’Œ <code>useDispatch</code>ï¼‰æ¥è®© React ç»„ä»¶ä¸ Redux çš„çŠ¶æ€è¿›è¡Œäº¤äº’ã€‚</p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240907151053166.png" alt="image-20240907151053166"></p></li></ul><h4 id="ï¼ˆ1ï¼‰ä»€ä¹ˆæ˜¯çº¯å‡½æ•°"><a href="#ï¼ˆ1ï¼‰ä»€ä¹ˆæ˜¯çº¯å‡½æ•°" class="headerlink" title="ï¼ˆ1ï¼‰ä»€ä¹ˆæ˜¯çº¯å‡½æ•°"></a>ï¼ˆ1ï¼‰ä»€ä¹ˆæ˜¯çº¯å‡½æ•°</h4><p>çº¯å‡½æ•°ï¼ˆPure Functionï¼‰æ˜¯æŒ‡åœ¨ç›¸åŒçš„è¾“å…¥ä¸‹æ€»æ˜¯è¿”å›ç›¸åŒè¾“å‡ºï¼Œå¹¶ä¸”æ²¡æœ‰å‰¯ä½œç”¨çš„å‡½æ•°ã€‚</p><p>1ã€<strong>ç›¸åŒçš„è¾“å…¥ï¼Œå¾—åˆ°ç›¸åŒçš„è¾“å‡º</strong>ï¼š<br>ä¸€ä¸ªçº¯å‡½æ•°ä¾èµ–äºå®ƒçš„è¾“å…¥å‚æ•°ï¼Œä»»ä½•æ—¶å€™åªè¦è¾“å…¥ç›¸åŒï¼Œè¾“å‡ºå°±ä¸€å®šç›¸åŒã€‚ä¾‹å¦‚ï¼Œ<code>sum(a, b)</code> å‡½æ•°æ€»æ˜¯è¿”å› <code>a + b</code>ï¼Œä¸è®ºä»€ä¹ˆæ—¶å€™è°ƒç”¨ã€‚</p><p>2ã€<strong>æ²¡æœ‰å‰¯ä½œç”¨</strong>ï¼š<br>çº¯å‡½æ•°ä¸ä¼šä¿®æ”¹å¤–éƒ¨çš„çŠ¶æ€ï¼Œä¹Ÿä¸ä¼šå½±å“å¤–éƒ¨ç¯å¢ƒã€‚æ¯”å¦‚å®ƒä¸ä¼šæ›´æ”¹å…¨å±€å˜é‡ã€ä¿®æ”¹ä¼ å…¥çš„å‚æ•°ï¼Œä¹Ÿä¸ä¼šæ‰§è¡Œè¯¸å¦‚ IO æ“ä½œã€ç½‘ç»œè¯·æ±‚ç­‰å‰¯ä½œç”¨ã€‚</p><p>3ã€<strong>çº¯å‡½æ•°çš„ä¼˜ç‚¹</strong>ï¼š</p><ul><li>æ˜“äºæµ‹è¯•å’Œè°ƒè¯•ï¼šç”±äºçº¯å‡½æ•°ä¾èµ–äºè¾“å…¥å’Œè¾“å‡ºï¼Œæ²¡æœ‰å‰¯ä½œç”¨ï¼Œå› æ­¤å®ƒä»¬å®¹æ˜“è¿›è¡Œå•å…ƒæµ‹è¯•ã€‚</li><li>å¯ç»„åˆæ€§ï¼šå¤šä¸ªçº¯å‡½æ•°å¯ä»¥ç»„åˆä½¿ç”¨ï¼Œå‡å°‘äº†å¤æ‚åº¦ã€‚</li><li>å¯é¢„æµ‹æ€§ï¼šå› ä¸ºçº¯å‡½æ•°ä¸ä¼šä¾èµ–å¤–éƒ¨çŠ¶æ€æˆ–äº§ç”Ÿå‰¯ä½œç”¨ï¼Œå®ƒçš„è¡Œä¸ºæ›´å®¹æ˜“é¢„æµ‹ã€‚</li></ul><h4 id="ï¼ˆ2ï¼‰ä¸ºä»€ä¹ˆä¿®æ”¹çŠ¶æ€ä¸ç®—å‰¯ä½œç”¨"><a href="#ï¼ˆ2ï¼‰ä¸ºä»€ä¹ˆä¿®æ”¹çŠ¶æ€ä¸ç®—å‰¯ä½œç”¨" class="headerlink" title="ï¼ˆ2ï¼‰ä¸ºä»€ä¹ˆä¿®æ”¹çŠ¶æ€ä¸ç®—å‰¯ä½œç”¨"></a>ï¼ˆ2ï¼‰ä¸ºä»€ä¹ˆä¿®æ”¹çŠ¶æ€ä¸ç®—å‰¯ä½œç”¨</h4><p><strong>å‰¯ä½œç”¨</strong>æŒ‡çš„æ˜¯å¯¹å¤–éƒ¨ç¯å¢ƒçš„æ”¹å˜ï¼Œä¾‹å¦‚ä¿®æ”¹å¤–éƒ¨çš„å˜é‡ã€æ‰§è¡Œ I&#x2F;O æ“ä½œã€è°ƒç”¨ API ç­‰ï¼Œè¿™äº›æ“ä½œä¼šå¯¼è‡´åº”ç”¨çš„å¤–éƒ¨ç¯å¢ƒåœ¨å‡½æ•°è¿è¡Œå‰åå‘ç”Ÿå˜åŒ–ã€‚è€Œ Redux ä¸­çš„ <strong>reducer</strong> æ˜¯ä¸€ä¸ªçº¯å‡½æ•°ï¼Œå®ƒæ¥æ”¶æ—§çš„çŠ¶æ€å’Œ actionï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„çŠ¶æ€å¯¹è±¡ï¼Œè€Œä¸æ˜¯ä¿®æ”¹ç°æœ‰çš„çŠ¶æ€ã€‚</p><p><strong>ä¸å¯å˜æ€§</strong>ï¼šåœ¨ Redux ä¸­ï¼Œreducer ä¸ç›´æ¥ä¿®æ”¹ä¼ å…¥çš„çŠ¶æ€ï¼Œè€Œæ˜¯åˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªæ–°çš„çŠ¶æ€å¯¹è±¡ã€‚è¿™ç§æ–¹å¼ä¿è¯äº†çŠ¶æ€çš„ä¸å¯å˜æ€§ï¼Œä»è€Œé¿å…äº†å‰¯ä½œç”¨ã€‚</p><p>ç›´æ¥ä¿®æ”¹çŠ¶æ€ï¼š</p><p><code>function reducer(state, action) &#123;</code>  </p><p>â€‹<code>state.count += 1;</code> </p><p>â€‹<code>return state; &#125;</code></p><p>è¿”å›æ–°çŠ¶æ€ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">reducer</span>(<span class="hljs-params">state, action</span>) &#123;<br>  <span class="hljs-keyword">return</span> &#123;<br>    ...state,  <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„çŠ¶æ€å¯¹è±¡</span><br>    <span class="hljs-attr">count</span>: state.<span class="hljs-property">count</span> + <span class="hljs-number">1</span>  <span class="hljs-comment">// ä¿®æ”¹æ–°çŠ¶æ€çš„ count å±æ€§</span><br>  &#125;;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="äºŒã€å­¦ä¹ Redux"><a href="#äºŒã€å­¦ä¹ Redux" class="headerlink" title="äºŒã€å­¦ä¹ Redux"></a>äºŒã€å­¦ä¹ Redux</h3><p>â­•npm install redux</p><hr><h4 id="ï¼ˆ1ï¼‰å»ºç«‹Store"><a href="#ï¼ˆ1ï¼‰å»ºç«‹Store" class="headerlink" title="ï¼ˆ1ï¼‰å»ºç«‹Store"></a>ï¼ˆ1ï¼‰å»ºç«‹Store</h4><h5 id="1ã€start"><a href="#1ã€start" class="headerlink" title="1ã€start"></a>1ã€start</h5><p><code>const store = createStore(reducer); </code>     &#x2F;&#x2F;å»ºç«‹store</p><p><code>store.dispatch(&#123; type: &quot;account/deposit&quot;, payload: 500 &#125;);</code>     &#x2F;&#x2F;å‘å‡ºåŠ¨ä½œ</p><p><code>console.log(store.getState());</code>    &#x2F;&#x2F;è·å–çŠ¶æ€å€¼</p><h5 id="2ã€working-with-action-creators"><a href="#2ã€working-with-action-creators" class="headerlink" title="2ã€working with action creators"></a>2ã€working with action creators</h5><p><code>function deposit( amount ) &#123;</code></p><pre><code class="hljs"> `return &#123; type: &quot;account/deposit&quot;, payload: amount &#125;;`</code></pre><p><code>&#125;</code></p><p><code>store.dispatch(deposit(500));</code></p><h5 id="3ã€ä¸¤ä¸ªreducer"><a href="#3ã€ä¸¤ä¸ªreducer" class="headerlink" title="3ã€ä¸¤ä¸ªreducer"></a>3ã€ä¸¤ä¸ªreducer</h5><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> rootReducer = <span class="hljs-title function_">combineReducers</span>(&#123;<br>  <span class="hljs-attr">account</span>: accountReducer,<br>  <span class="hljs-attr">customer</span>: customerReducer,<br>&#125;);<br><br><span class="hljs-keyword">const</span> store = <span class="hljs-title function_">createStore</span>(rootReducer);<br></code></pre></td></tr></table></figure><h5 id="4ã€state-slicesï¼ˆä¸“ä¸šçš„çŠ¶æ€ç»“æ„ï¼‰"><a href="#4ã€state-slicesï¼ˆä¸“ä¸šçš„çŠ¶æ€ç»“æ„ï¼‰" class="headerlink" title="4ã€state slicesï¼ˆä¸“ä¸šçš„çŠ¶æ€ç»“æ„ï¼‰"></a>4ã€state slicesï¼ˆä¸“ä¸šçš„çŠ¶æ€ç»“æ„ï¼‰</h5><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240907170229118.png" alt="image-20240907170229118"></p><p>sliceæ–‡ä»¶å­˜å‚¨ä¸ç›¸å…³ç”¨æˆ·æœ‰å…³çš„çŠ¶æ€ä»¥åŠaction creactorå‡½æ•°ï¼›ï¼ˆ<strong>export defaut</strong> reducerï¼Œ<strong>export</strong> action creator å‡½æ•°ï¼‰</p><p>index.jsæ–‡ä»¶ï¼š<code>import store from &quot;./store&quot;;</code></p><h4 id="ï¼ˆ2ï¼‰å°†reduxå’Œreactè¿æ¥èµ·æ¥"><a href="#ï¼ˆ2ï¼‰å°†reduxå’Œreactè¿æ¥èµ·æ¥" class="headerlink" title="ï¼ˆ2ï¼‰å°†reduxå’Œreactè¿æ¥èµ·æ¥"></a>ï¼ˆ2ï¼‰å°†reduxå’Œreactè¿æ¥èµ·æ¥</h4><p>â­•npm  i react-redux</p><hr><ul><li><p>é¦–å…ˆå¯¼å…¥Provider<code>import &#123; Provider &#125; from &quot;react-redux&quot;;</code>      ğŸ˜‹å’Œcontext APIå¾ˆç±»ä¼¼å“¦</p></li><li><p>ç„¶åæŠŠappåŒ…è£¹è¿›å»ï¼š</p></li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jsx">root.<span class="hljs-title function_">render</span>(<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">React.StrictMode</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">Provider</span> <span class="hljs-attr">store</span>=<span class="hljs-string">&#123;store&#125;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">Provider</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">React.StrictMode</span>&gt;</span></span><br>);<br></code></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥æ¯ä¸ªéœ€è¦ä»Reduxçš„storeä¿¡æ¯çš„ç»„ä»¶éƒ½å¯ä»¥æ¥æ”¶åˆ°äº†ã€‚</p><ul><li><p>è¯»å–ä¿¡æ¯ï¼š</p><ul><li>å¯¼å…¥hookï¼š<code>import &#123; useSelector &#125; from &quot;react-redux&quot;;</code></li><li>è¯»å–ä¿¡æ¯ï¼š<code>const customer = useSelector( (store) =&gt; store.customer );</code>   or</li></ul><p> <code>const customer = useSelector( (store) =&gt;store.customer.fullName</code>     ï¼ˆcustomerä¸åœ¨<code>store.js</code>ä¸­çš„å‘½åå¯¹åº”ï¼‰</p></li></ul><h5 id="1ã€dispatching-actions-from-our-react-app"><a href="#1ã€dispatching-actions-from-our-react-app" class="headerlink" title="1ã€dispatching actions from our react app"></a>1ã€dispatching actions from our react app</h5><p> <code>const dispatch=useDispatch();</code>     å¾—åˆ°dispathå‡½æ•°ï¼Œè¿™æ ·dispatchå°±ä¼šæŒ‰ç…§å¹³å¸¸é‚£æ ·å·¥ä½œå•¦ï¼Œåªéœ€è¦ä¼ é€’æ‰€éœ€çš„å‚æ•°å°±å¯ä»¥äº†</p><p>PSï¼šï¼ˆè§£æ„valueï¼‰ï¼ˆå†’å·å‰çš„æ˜¯é‡æ„å‰çš„åå­—ï¼Œå†’å·åæ˜¯æ­¤æ–‡ä»¶è¦ç”¨çš„åå­—ï¼‰</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> &#123;<br>    <span class="hljs-attr">loan</span>: currentLoan,<br>    <span class="hljs-attr">loanPurpose</span>: currntLoanPurpose,<br>    balance,<br>  &#125; = <span class="hljs-title function_">useSelector</span>(<span class="hljs-function">(<span class="hljs-params">store</span>) =&gt;</span> store.<span class="hljs-property">account</span>);<br></code></pre></td></tr></table></figure><h5 id="2ã€æŠŠç»„ä»¶è¿æ¥åˆ°Reduxçš„æ—§æ–¹æ³•"><a href="#2ã€æŠŠç»„ä»¶è¿æ¥åˆ°Reduxçš„æ—§æ–¹æ³•" class="headerlink" title="2ã€æŠŠç»„ä»¶è¿æ¥åˆ°Reduxçš„æ—§æ–¹æ³•"></a>2ã€æŠŠç»„ä»¶è¿æ¥åˆ°Reduxçš„æ—§æ–¹æ³•</h5><p><code>mapStateToProps</code> æ˜¯ Redux ä¸­æ—§çš„ï¼ˆä¼ ç»Ÿçš„ï¼‰æ–¹æ³•ä¹‹ä¸€ï¼Œç”¨äºå°† Redux çš„å…¨å±€çŠ¶æ€æ˜ å°„åˆ° React ç»„ä»¶çš„ props ä¸Šï¼Œä»è€Œä½¿ç»„ä»¶èƒ½å¤Ÿè®¿é—® Redux çŠ¶æ€ã€‚åœ¨ä½¿ç”¨ <code>mapStateToProps</code> çš„æ—¶å€™ï¼Œé€šå¸¸æ­é… <code>connect</code> å‡½æ•°æ¥å°† Redux çŠ¶æ€å’Œ React ç»„ä»¶è¿æ¥èµ·æ¥ã€‚</p><p>ä¾‹å¦‚ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240907203055337.png" alt="image-20240907203055337"></p><p>1ï¸âƒ£mapStateToPropså‡½æ•°çš„ä½œç”¨æ˜¯ä»Reduxçš„storeä¸­æå–æ‰€éœ€çš„çŠ¶æ€ï¼Œå¹¶é€šè¿‡propså°†è¿™äº›çŠ¶æ€ä¼ é€’ç»™Reactç»„ä»¶ï¼Œå®ƒæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šstateã€ownPropsï¼ˆå¯é€‰ï¼Œç»„ä»¶è‡ªèº«çš„propsï¼‰</p><p>2ï¸âƒ£ä½¿ç”¨connectæ¥æ”¶mapStateToPropså˜æˆä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æ¥æ”¶Balanceå‡½æ•°ï¼ˆæƒ³è¦è¿æ¥çš„å‡½æ•°ï¼‰ä½œä¸ºå‚æ•°ï¼Œå°†çŠ¶æ€ä¼ é€’ç»™Balanceç»„ä»¶</p><p>3ï¸âƒ£Balanceç»„ä»¶æ¥æ”¶å‚æ•°</p><h4 id="ï¼ˆ3ï¼‰Middleware"><a href="#ï¼ˆ3ï¼‰Middleware" class="headerlink" title="ï¼ˆ3ï¼‰Middleware"></a>ï¼ˆ3ï¼‰Middleware</h4><p>è¦å¼•å…¥è¿™ä¸ªé—®é¢˜ï¼Œé¦–å…ˆè¦çŸ¥é“Reducerä¸­ä¸èƒ½å«æœ‰åƒAPIè°ƒç”¨è¿™æ ·çš„å¼‚æ­¥æ“ä½œï¼Œé‚£ä¹ˆè¿™äº›æ“ä½œåº”è¯¥æ”¾åœ¨å“ªé‡Œå‘¢ğŸ¤”ï¼Ÿï¼ˆåœ¨ç»„ä»¶ä¸­åˆ†æ•£åœ°fetching dataæ˜¾ç„¶ä¸ç†æƒ³ ï¼‰ï¼ˆè€Œstoreé‡Œæ˜¾ç„¶ä¹Ÿä¸è¡Œï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240907205303059.png" alt="image-20240907205303059"></p><p>åœ¨ Redux ä¸­ï¼Œ<strong>middlewareï¼ˆä¸­é—´ä»¶ï¼‰</strong> æ˜¯æŒ‡ä¸€ä¸ªæ‰©å±• Redux dispatch åŠŸèƒ½çš„æœºåˆ¶ï¼Œå…è®¸ä½ åœ¨å‘å‡º action å’Œ reducer å¤„ç†è¯¥ action ä¹‹é—´æ’å…¥è‡ªå®šä¹‰çš„é€»è¾‘ã€‚å®ƒçš„ä¸»è¦ä½œç”¨æ˜¯æ‹¦æˆª actionï¼Œæ‰§è¡Œä¸€äº›é¢å¤–çš„å¤„ç†ï¼Œæ¯”å¦‚æ—¥å¿—è®°å½•ã€å¼‚æ­¥è¯·æ±‚ã€é”™è¯¯å¤„ç†ç­‰ã€‚</p><h5 id="1ã€ä¸­é—´ä»¶çš„ä½œç”¨"><a href="#1ã€ä¸­é—´ä»¶çš„ä½œç”¨" class="headerlink" title="1ã€ä¸­é—´ä»¶çš„ä½œç”¨"></a>1ã€ä¸­é—´ä»¶çš„ä½œç”¨</h5><ul><li><strong>å¤„ç†å¼‚æ­¥æ“ä½œ</strong>ï¼šRedux æœ¬èº«åªèƒ½å¤„ç†åŒæ­¥çš„çŠ¶æ€æ›´æ–°ï¼Œè€Œä¸­é—´ä»¶å¯ä»¥è®©ä½ æ‰§è¡Œå¼‚æ­¥æ“ä½œï¼Œæ¯”å¦‚ç½‘ç»œè¯·æ±‚ã€‚å¸¸è§çš„å¼‚æ­¥ä¸­é—´ä»¶æœ‰ <code>redux-thunk</code> å’Œ <code>redux-saga</code>ã€‚</li><li><strong>è®°å½•æ—¥å¿—</strong>ï¼šå¯ä»¥åœ¨æ¯æ¬¡ action è¢«è§¦å‘æ—¶è®°å½•æ—¥å¿—ã€‚</li><li><strong>é”™è¯¯å¤„ç†</strong>ï¼šåœ¨ action åˆ°è¾¾ reducer ä¹‹å‰å¤„ç†é”™è¯¯æˆ–å¼‚å¸¸æƒ…å†µã€‚</li><li><strong>è‡ªå®šä¹‰æ‰©å±•</strong>ï¼šå¯ä»¥åœ¨ <code>dispatch</code> è¿‡ç¨‹ä¸­åŠ å…¥è‡ªå®šä¹‰çš„é€»è¾‘ï¼Œæ¯”å¦‚ä¿®æ”¹ actionã€å»¶è¿Ÿ dispatch ç­‰ã€‚</li></ul><h5 id="2ã€ä¸­é—´ä»¶çš„å·¥ä½œæµç¨‹"><a href="#2ã€ä¸­é—´ä»¶çš„å·¥ä½œæµç¨‹" class="headerlink" title="2ã€ä¸­é—´ä»¶çš„å·¥ä½œæµç¨‹"></a>2ã€ä¸­é—´ä»¶çš„å·¥ä½œæµç¨‹</h5><p>Redux çš„ä¸­é—´ä»¶åŸºæœ¬ä¸Šæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥æ”¶ <code>store</code>ï¼Œç„¶åè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°æ¥æ”¶ <code>next</code>ï¼Œæœ€åè¿”å›ä¸€ä¸ªå‡½æ•°å¤„ç† <code>action</code>ã€‚ä¸­é—´ä»¶åœ¨æ¯æ¬¡ action è¢«æ´¾å‘æ—¶ä¼šæ‰§è¡Œï¼Œå¹¶ä¸”å¯ä»¥æ§åˆ¶ action æ˜¯å¦ä¼ é€’åˆ°ä¸‹ä¸€ä¸ªä¸­é—´ä»¶æˆ– reducerã€‚</p><p>ä¸­é—´ä»¶æ‰§è¡Œé¡ºåºå¦‚ä¸‹ï¼š</p><ul><li><code>dispatch(action)</code> -&gt; ä¸­é—´ä»¶é“¾ -&gt; reducer -&gt; æ›´æ–° store</li></ul><h4 id="ï¼ˆ4ï¼‰Redux-Thunkçš„åº”ç”¨"><a href="#ï¼ˆ4ï¼‰Redux-Thunkçš„åº”ç”¨" class="headerlink" title="ï¼ˆ4ï¼‰Redux Thunkçš„åº”ç”¨"></a>ï¼ˆ4ï¼‰Redux Thunkçš„åº”ç”¨</h4><p>â­•npm  i  redux-thunk</p><hr><h5 id="1ã€è¿›å…¥store-jsåšå¦‚ä¸‹æ”¹åŠ¨ï¼š"><a href="#1ã€è¿›å…¥store-jsåšå¦‚ä¸‹æ”¹åŠ¨ï¼š" class="headerlink" title="1ã€è¿›å…¥store.jsåšå¦‚ä¸‹æ”¹åŠ¨ï¼š"></a>1ã€è¿›å…¥<code>store.js</code>åšå¦‚ä¸‹æ”¹åŠ¨ï¼š</h5><ul><li>æ·»åŠ å¯¼å…¥ï¼š<code>import thunk from &quot;redux-thunk&quot;;</code></li><li>ä½¿ç”¨applyMiddlewareåˆ›å»ºstoreï¼š<code>const store = createStore(rootReducer, applyMiddleware(thunk));</code></li></ul><p>â“ä¸ºä»€ä¹ˆå¯¼å…¥thunkä¸éœ€è¦èŠ±æ‹¬å·ï¼Ÿ</p><p>â€‹             åœ¨ JavaScript ä¸­ï¼Œæ¨¡å—å¯ä»¥æœ‰ä¸¤ç§ç±»å‹çš„å¯¼å‡ºæ–¹å¼ï¼š</p><p>â€‹                      <strong>é»˜è®¤å¯¼å‡ºï¼ˆdefault exportï¼‰</strong>ï¼šä¸€ä¸ªæ¨¡å—åªèƒ½æœ‰ä¸€ä¸ªé»˜è®¤å¯¼å‡ºï¼Œå¯¼å…¥æ—¶å¯ä»¥ä½¿ç”¨ä»»æ„åå­—ï¼Œå¹¶ä¸”ä¸éœ€è¦èŠ±æ‹¬å·ã€‚</p><p>â€‹                      <strong>å‘½åå¯¼å‡ºï¼ˆnamed exportï¼‰</strong>ï¼šä¸€ä¸ªæ¨¡å—å¯ä»¥æœ‰å¤šä¸ªå‘½åå¯¼å‡ºï¼Œå¯¼å…¥æ—¶å¿…é¡»ä½¿ç”¨èŠ±æ‹¬å·ï¼Œä¸”å¿…é¡»ä¸å¯¼å‡ºæ—¶çš„åå­—åŒ¹é…ã€‚</p><p>â€‹              åœ¨ <code>redux-thunk</code> è¿™ä¸ªåº“ä¸­ï¼Œ<code>thunk</code> æ˜¯é»˜è®¤å¯¼å‡ºçš„å†…å®¹ï¼Œæ‰€ä»¥å¯¼å…¥æ—¶ä¸éœ€è¦èŠ±æ‹¬å·ã€‚</p><p>â€‹              å°´å°¬çš„æ˜¯ä¸åŠ èŠ±æ‹¬å·æŠ¥é”™äº†å“ˆå“ˆå“ˆæ‰€ä»¥åˆ°åº•æ˜¯é»˜è®¤è¿˜æ˜¯å‘½åå•Šâ€¦â€¦</p><h5 id="2ã€åœ¨action-creatorå‡½æ•°ä¸­åšå¼‚æ­¥APIè°ƒåŠ¨"><a href="#2ã€åœ¨action-creatorå‡½æ•°ä¸­åšå¼‚æ­¥APIè°ƒåŠ¨" class="headerlink" title="2ã€åœ¨action creatorå‡½æ•°ä¸­åšå¼‚æ­¥APIè°ƒåŠ¨"></a>2ã€åœ¨action creatorå‡½æ•°ä¸­åšå¼‚æ­¥APIè°ƒåŠ¨</h5><p>è¦åšAPIè°ƒç”¨åè¿”å›actionï¼Œå› æ­¤å…ˆè¿”å›ä¸€ä¸ªå‡½æ•°ï¼ŒReactçœ‹åˆ°è¿™ä¸ªå‡½æ•°å°±ä¼šçŸ¥é“è¿™æ˜¯thunkï¼Œå› æ­¤ä¼šå…ˆæ‰§è¡Œå‡½æ•°ä¸­çš„å†…å®¹å†è¿”å›actionã€‚</p><p>æœ¬æ¬¡Appéœ€è¦ç”¨åˆ°çš„APIå¦‚å›¾æ‰€ç¤ºï¼Œæ˜¯ä¸€ä¸ªé’±å¸è½¬æ¢APIï¼ŒFROMï¼š<a href="https://www.frankfurter.app/docs/">https://www.frankfurter.app/docs/</a></p><hr><p>â¡ï¸fetch(<code>https://api.frankfurter.app/latest?amount=10&amp;from=GBP&amp;to=USD</code>)</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240908131920242.png" alt="image-20240908131920242"></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">deposit</span>(<span class="hljs-params">amount, currency</span>) &#123;<br>  <span class="hljs-keyword">if</span> (currency === <span class="hljs-string">&quot;USD&quot;</span>) <span class="hljs-keyword">return</span> &#123; <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;account/deposit&quot;</span>, <span class="hljs-attr">payload</span>: amount &#125;;<br><br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">dispatch, getState</span>) &#123;   <span class="hljs-comment">//å¿…é¡»å®šä¹‰ä¸ºå¼‚æ­¥å‡½æ•°</span><br>    <span class="hljs-title function_">dispatch</span>(&#123; <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;account/convertingCurrency&quot;</span> &#125;);   <span class="hljs-comment">//æƒ³è¦è®¾å®šä¸€ä¸ªLoadingç•Œé¢</span><br>     <br><span class="hljs-comment">//API call</span><br>    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>( <span class="hljs-string">`https://api.frankfurter.app/latest?amount=<span class="hljs-subst">$&#123;amount&#125;</span>&amp;from=<span class="hljs-subst">$&#123;currency&#125;</span>&amp;to=USD`</span>);<br>    <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> res.<span class="hljs-title function_">json</span>();<br>    <span class="hljs-keyword">const</span> converted = data.<span class="hljs-property">rates</span>.<span class="hljs-property">USD</span>;<br>   <br> <span class="hljs-comment">//return action</span><br>    <span class="hljs-title function_">dispatch</span>(&#123; <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;account/deposit&quot;</span>, <span class="hljs-attr">payload</span>: converted &#125;);<br>  &#125;;<br><br><br></code></pre></td></tr></table></figure><p>â‰ï¸ä¸ºä»€ä¹ˆä¸Šé¢çš„æ“ä½œå¯ä»¥ç›´æ¥return actionï¼Œä¸‹é¢å´è¦dispatch actionï¼Ÿ</p><ul><li><p>å¦‚æœæ˜¯ä¸€ä¸ªæ™®é€šçš„åŒæ­¥æ“ä½œï¼ˆå¦‚ä½ ä»£ç ä¸­çš„ <code>if (currency === &quot;USD&quot;)</code> æƒ…å†µï¼‰ï¼Œä½ å¯ä»¥ç›´æ¥è¿”å›ä¸€ä¸ª action å¯¹è±¡ï¼ŒReduxä¼šç«‹å³å¤„ç†è¿™ä¸ª actionã€‚ä½†åœ¨å¼‚æ­¥æ“ä½œä¸­ï¼ˆå¦‚ API è°ƒç”¨æ—¶ï¼‰ï¼Œä½ ä¸èƒ½ç›´æ¥è¿”å› actionï¼Œå› ä¸º action çš„ <code>payload</code> æ˜¯å¼‚æ­¥è·å–çš„ã€‚æ­¤æ—¶ï¼Œè¿”å›çš„ä¸æ˜¯æ™®é€šçš„ actionï¼Œè€Œæ˜¯ä¸€ä¸ªå¼‚æ­¥çš„å‡½æ•°ï¼ˆå³ <code>thunk</code> å‡½æ•°ï¼‰ï¼Œè¿™ä¸ªå‡½æ•°éœ€è¦ç­‰åˆ°å¼‚æ­¥æ“ä½œå®Œæˆåå†æ‰‹åŠ¨æ´¾å‘ actionï¼Œæ›´æ–° Redux storeã€‚è¿™é‡Œçš„ <code>dispatch</code> å°±æ˜¯ç”¨æ¥æ´¾å‘ action çš„ã€‚</p></li><li><p>å¼‚æ­¥æ“ä½œï¼ˆå¦‚ <code>fetch</code> APIï¼‰éœ€è¦æ—¶é—´æ¥å®Œæˆã€‚å¦‚æœä½ åœ¨å¼‚æ­¥æ“ä½œä¹‹å‰å°±è¿”å›ä¸€ä¸ª actionï¼ŒRedux å¹¶ä¸çŸ¥é“è¿™ä¸ª action åº”è¯¥åœ¨ä»€ä¹ˆæ—¶å€™æ´¾å‘ï¼Œå®ƒä¹Ÿæ— æ³•ç­‰å¾…å¼‚æ­¥æ“ä½œçš„å®Œæˆã€‚ä½¿ç”¨ <code>dispatch</code> å¯ä»¥ç¡®ä¿åœ¨å¼‚æ­¥æ“ä½œï¼ˆå¦‚ API è¯·æ±‚ï¼‰å®Œæˆä¹‹åå†å°†æœ€ç»ˆçš„ç»“æœæ´¾å‘ç»™ Redux storeã€‚<code>dispatch</code> æ˜¯ Redux ä¸­æ´¾å‘ action çš„å‡½æ•°ï¼Œå®ƒé€šçŸ¥ Redux store æœ‰ä¸€ä¸ªæ–°çš„ action è¢«è§¦å‘ï¼ŒRedux  store ä¼šæ ¹æ®è¿™ä¸ª action æ›´æ–° stateã€‚</p></li></ul><p>ğŸ˜²æ¯ä¸€æ¬¡fetch Dataåï¼Œå¾—åˆ°dataä¹‹åæœ‰ä¸€ä¸ªå¾ˆå¥½çš„ä¹ æƒ¯æ˜¯console.logï¼ˆdataï¼‰ï¼Œæ¥æŸ¥çœ‹dataçš„æ ¼å¼ï¼Œæ–¹ä¾¿è¿ç”¨å®ƒ</p><h4 id="ï¼ˆ5ï¼‰Redux-Dev-Tools"><a href="#ï¼ˆ5ï¼‰Redux-Dev-Tools" class="headerlink" title="ï¼ˆ5ï¼‰Redux Dev Tools"></a>ï¼ˆ5ï¼‰Redux Dev Tools</h4><h5 id="1ã€ä¸‹è½½Dev-ToolsRedux-DevTools-Chrome-åº”ç”¨å•†åº—-google-com"><a href="#1ã€ä¸‹è½½Dev-ToolsRedux-DevTools-Chrome-åº”ç”¨å•†åº—-google-com" class="headerlink" title="1ã€ä¸‹è½½Dev ToolsRedux DevTools - Chrome åº”ç”¨å•†åº— (google.com)"></a>1ã€ä¸‹è½½Dev Tools<a href="https://chromewebstore.google.com/detail/redux-devtools/lmhkpmbekcpmknklioeibfkpmmfibljd">Redux DevTools - Chrome åº”ç”¨å•†åº— (google.com)</a></h5><h5 id="2ã€npm-i-redux-devtools-extension"><a href="#2ã€npm-i-redux-devtools-extension" class="headerlink" title="2ã€npm i redux-devtools-extension"></a>2ã€<code>npm i redux-devtools-extension</code></h5><p>ä¸è§†é¢‘ä¸€è‡´ï¼Œä½†æ­¤æ—¶å·²ç»æœ‰æŠ¥é”™äº†ï¼ˆè¡¨æ˜ <code>redux-devtools-extension</code> ç‰ˆæœ¬ä¸å½“å‰å®‰è£…çš„ <code>redux@5.0.1</code> ç‰ˆæœ¬ä¸å…¼å®¹ã€‚<code>redux-devtools-extension@2.13.9</code> éœ€è¦ <code>redux</code> çš„ç‰ˆæœ¬æ˜¯ <code>^3.1.0</code> æˆ– <code>^4.0.0</code>ï¼Œè€Œæˆ‘ä½¿ç”¨çš„æ˜¯ <code>redux@5.0.1</code>ï¼Œå¯¼è‡´äº†ä¾èµ–å†²çªï¼‰</p><p>å› æ­¤åªèƒ½<code>npm install redux-devtools-extension --legacy-peer-deps</code>æ¥å¿½ç•¥ peerDependencies çš„å†²çªï¼Œå¹¶ç»§ç»­å®‰è£…</p><p>â˜‘ï¸åœ¨<code>store.js</code>ä¸­ä¿®æ”¹</p><p><code>import &#123; composeWithDevTools &#125; from &quot;redux-devtools-extension&quot;;</code></p><p><code>const store = createStore(rootReducer, composeWithDevTools(applyMiddleware(thunk)));</code></p><h5 id="3ã€ç•Œé¢å±•ç¤º"><a href="#3ã€ç•Œé¢å±•ç¤º" class="headerlink" title="3ã€ç•Œé¢å±•ç¤º"></a>3ã€ç•Œé¢å±•ç¤º</h5><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240908143934918.png" alt="image-20240908143934918"></p><p>â­•å·¦è¾¹å¯ä»¥çœ‹åˆ°æ‰€æœ‰åŠ¨ä½œï¼Œå¹¶ä¸”å¯ä»¥ç›´æ¥jumpåˆ°æ‰€æœ‰å†å²çš„çŠ¶æ€ï¼Œå³è¾¹å¯ä»¥çœ‹åˆ°çŠ¶æ€ï¼Œä¸‹é¢çš„æ»‘å—æ ä¹Ÿå¯ä»¥æŠµè¾¾å†å²åŠ¨ä½œçš„çŠ¶æ€ã€‚</p><p>â­•ç‚¹å‡»è¯¥å¤„å¯ä»¥æ‰‹åŠ¨dispatch action</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240908144145452.png" alt="image-20240908144145452"></p><h4 id="ï¼ˆ6ï¼‰Redux-Toolkit"><a href="#ï¼ˆ6ï¼‰Redux-Toolkit" class="headerlink" title="ï¼ˆ6ï¼‰Redux Toolkit"></a>ï¼ˆ6ï¼‰Redux Toolkit</h4><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240908152201707.png" alt="image-20240908152201707"></p><p>âœ…compatible: å…¼å®¹çš„                 âœ…boilerplateæ ·æ¿ä»£ç                  âœ…mutate:  å¯å˜çš„</p><p>âœ…immutable:  ä¸å¯å˜çš„             âœ…Immer:  Immeråº“ï¼ˆç”¨äºç®€åŒ–ä¸å¯å˜æ•°æ®å¤„ç†çš„åº“ï¼‰</p><h5 id="1ã€creating-store-with-RTKï¼š"><a href="#1ã€creating-store-with-RTKï¼š" class="headerlink" title="1ã€creating store with RTKï¼š"></a>1ã€creating store with RTKï¼š</h5><p>â­•<code>npm i @reduxjs/toolkit</code>ï¼ˆåŒæ ·ç‰ˆæœ¬å†²çªï¼ŒæŒ‰ç…§ä¸Šé¢çš„æ–¹æ³•å®‰è£…ï¼‰</p><hr><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> &#123; configureStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@reduxjs/toolkit&quot;</span>;<br><br><span class="hljs-keyword">import</span> accountReducer <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./features/account/accountSlice&quot;</span>;<br><span class="hljs-keyword">import</span> customerReducer <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./features/customers/customerSlice&quot;</span>;<br><br><span class="hljs-keyword">const</span> store = <span class="hljs-title function_">configureStore</span>(&#123;<br>  <span class="hljs-attr">reducer</span>: &#123;<br>    <span class="hljs-attr">account</span>: accountReducer,<br>    <span class="hljs-attr">customer</span>: customerReducer,<br>  &#125;,<br>&#125;);<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> store;<br></code></pre></td></tr></table></figure><h5 id="2ã€æ”¹å˜Slice"><a href="#2ã€æ”¹å˜Slice" class="headerlink" title="2ã€æ”¹å˜Slice"></a>2ã€æ”¹å˜Slice</h5><p>ä»‹äºä¸æƒ³å ç”¨å¤ªå¤šç©ºé—´ï¼Œè¿™é‡Œä»…ç»™å‡ºAccountSliceçš„ç¤ºä¾‹ï¼ˆä»¥åŠä¸ç”¨RTKçš„ç‰ˆæœ¬ï¼‰</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> &#123; createSlice &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@reduxjs/toolkit&quot;</span>;<br><br><span class="hljs-keyword">const</span> initialState = &#123;<br>  <span class="hljs-attr">balance</span>: <span class="hljs-number">0</span>,<br>  <span class="hljs-attr">loan</span>: <span class="hljs-number">0</span>,<br>  <span class="hljs-attr">loanPurpose</span>: <span class="hljs-string">&quot;&quot;</span>,<br>  <span class="hljs-attr">isLoading</span>: <span class="hljs-literal">false</span>,<br>&#125;;<br><br><span class="hljs-keyword">const</span> accountSlice = <span class="hljs-title function_">createSlice</span>(&#123;<br>  <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;account&quot;</span>,<br>  initialState,<br>  <span class="hljs-attr">reducers</span>: &#123;<br>    <span class="hljs-title function_">deposit</span>(<span class="hljs-params">state, action</span>) &#123;<br>      state.<span class="hljs-property">balance</span> += action.<span class="hljs-property">payload</span>;<br>      state.<span class="hljs-property">isLoading</span> = <span class="hljs-literal">false</span>;<br>    &#125;,<br>    <span class="hljs-title function_">withdraw</span>(<span class="hljs-params">state, action</span>) &#123;<br>      state.<span class="hljs-property">balance</span> -= action.<span class="hljs-property">payload</span>;<br>    &#125;,<br>    <span class="hljs-attr">requestLoan</span>: &#123;<br>      <span class="hljs-title function_">prepare</span>(<span class="hljs-params">amount, purpose</span>) &#123;<br>        <span class="hljs-keyword">return</span> &#123;<br>          <span class="hljs-attr">payload</span>: &#123; amount, purpose &#125;,<br>        &#125;;<br>      &#125;,<br><br>      <span class="hljs-title function_">reducer</span>(<span class="hljs-params">state, action</span>) &#123;<br>        <span class="hljs-keyword">if</span> (state.<span class="hljs-property">loan</span> &gt; <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>;<br>        state.<span class="hljs-property">balance</span> = state.<span class="hljs-property">balance</span> + action.<span class="hljs-property">payload</span>.<span class="hljs-property">amount</span>;<br>        state.<span class="hljs-property">loan</span> = action.<span class="hljs-property">payload</span>.<span class="hljs-property">amount</span>;<br>        state.<span class="hljs-property">loanPurpose</span> = action.<span class="hljs-property">payload</span>.<span class="hljs-property">purpose</span>;<br>      &#125;,<br>    &#125;,<br>    <span class="hljs-title function_">payLoan</span>(<span class="hljs-params">state</span>) &#123;<br>      state.<span class="hljs-property">balance</span> -= state.<span class="hljs-property">loan</span>;<br>      state.<span class="hljs-property">loan</span> = <span class="hljs-number">0</span>;<br>      state.<span class="hljs-property">loanPurpose</span> = <span class="hljs-string">&quot;&quot;</span>;<br>    &#125;,<br>    <span class="hljs-title function_">convertingCurrency</span>(<span class="hljs-params">state</span>) &#123;<br>      state.<span class="hljs-property">isLoading</span> = <span class="hljs-literal">true</span>;<br>    &#125;,<br>  &#125;,<br>&#125;);<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> &#123; withdraw, requestLoan, payLoan &#125; = accountSlice.<span class="hljs-property">actions</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">deposit</span>(<span class="hljs-params">amount, currency</span>) &#123;<br>  <span class="hljs-keyword">if</span> (currency === <span class="hljs-string">&quot;USD&quot;</span>) <span class="hljs-keyword">return</span> &#123; <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;account/deposit&quot;</span>, <span class="hljs-attr">payload</span>: amount &#125;;<br><br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">dispatch, getState</span>) &#123;<br>    <span class="hljs-title function_">dispatch</span>(&#123; <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;account/convertingCurrency&quot;</span> &#125;);<br>    <span class="hljs-comment">//API call</span><br><br>    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<br>      <span class="hljs-string">`https://api.frankfurter.app/latest?amount=<span class="hljs-subst">$&#123;amount&#125;</span>&amp;from=<span class="hljs-subst">$&#123;currency&#125;</span>&amp;to=USD`</span><br>    );<br>    <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> res.<span class="hljs-title function_">json</span>();<br>    <span class="hljs-keyword">const</span> converted = data.<span class="hljs-property">rates</span>.<span class="hljs-property">USD</span>;<br>    <span class="hljs-comment">//return action</span><br><br>    <span class="hljs-title function_">dispatch</span>(&#123; <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;account/deposit&quot;</span>, <span class="hljs-attr">payload</span>: converted &#125;);<br>  &#125;;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> accountSlice.<span class="hljs-property">reducer</span>;<br><br><span class="hljs-comment">//------------------V1-No RTK-------------------------</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">const initialStateAccount = &#123;</span><br><span class="hljs-comment">  balance: 0,</span><br><span class="hljs-comment">  loan: 0,</span><br><span class="hljs-comment">  loanPurpose: &quot;&quot;,</span><br><span class="hljs-comment">  isLoading: false,</span><br><span class="hljs-comment">&#125;;</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">export default function accountReducer(state = initialStateAccount, action) &#123;</span><br><span class="hljs-comment">  switch (action.type) &#123;</span><br><span class="hljs-comment">    case &quot;account/deposit&quot;:</span><br><span class="hljs-comment">      return &#123;</span><br><span class="hljs-comment">        ...state,</span><br><span class="hljs-comment">        balance: state.balance + action.payload,</span><br><span class="hljs-comment">        isLoading: false,</span><br><span class="hljs-comment">      &#125;;</span><br><span class="hljs-comment">    case &quot;account/withdraw&quot;:</span><br><span class="hljs-comment">      return &#123; ...state, balance: state.balance - action.payload &#125;;</span><br><span class="hljs-comment">    case &quot;account/requestLoan&quot;:</span><br><span class="hljs-comment">      if (state.loan &gt; 0) return state;</span><br><span class="hljs-comment">      return &#123;</span><br><span class="hljs-comment">        ...state,</span><br><span class="hljs-comment">        balance: state.balance + action.payload.amount,</span><br><span class="hljs-comment">        loan: action.payload.amount,</span><br><span class="hljs-comment">        loanPurpose: action.payload.purpose,</span><br><span class="hljs-comment">      &#125;;</span><br><span class="hljs-comment">    case &quot;account/payLoan&quot;:</span><br><span class="hljs-comment">      return &#123;</span><br><span class="hljs-comment">        ...state,</span><br><span class="hljs-comment">        loan: 0,</span><br><span class="hljs-comment">        loanPurpose: &quot;&quot;,</span><br><span class="hljs-comment">        balance: state.balance - state.loan,</span><br><span class="hljs-comment">      &#125;;</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">    case &quot;account/convertingCurrency&quot;:</span><br><span class="hljs-comment">      return &#123; ...state, isLoading: true &#125;;</span><br><span class="hljs-comment">    default:</span><br><span class="hljs-comment">      return state;</span><br><span class="hljs-comment">  &#125;</span><br><span class="hljs-comment">&#125;</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">export function deposit(amount, currency) &#123;</span><br><span class="hljs-comment">  if (currency === &quot;USD&quot;) return &#123; type: &quot;account/deposit&quot;, payload: amount &#125;;</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">  return async function (dispatch, getState) &#123;</span><br><span class="hljs-comment">    dispatch(&#123; type: &quot;account/convertingCurrency&quot; &#125;);</span><br><span class="hljs-comment">    //API call</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">    const res = await fetch(</span><br><span class="hljs-comment">      `https://api.frankfurter.app/latest?amount=$&#123;amount&#125;&amp;from=$&#123;currency&#125;&amp;to=USD`</span><br><span class="hljs-comment">    );</span><br><span class="hljs-comment">    const data = await res.json();</span><br><span class="hljs-comment">    const converted = data.rates.USD;</span><br><span class="hljs-comment">    //return action</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">    dispatch(&#123; type: &quot;account/deposit&quot;, payload: converted &#125;);</span><br><span class="hljs-comment">  &#125;;</span><br><span class="hljs-comment">&#125;</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">export function withdraw(amount) &#123;</span><br><span class="hljs-comment">  return &#123; type: &quot;account/withdraw&quot;, payload: amount &#125;;</span><br><span class="hljs-comment">&#125;</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">export function requestLoan(amount, purpose) &#123;</span><br><span class="hljs-comment">  return &#123; type: &quot;account/requestLoan&quot;, payload: &#123; amount, purpose &#125; &#125;;</span><br><span class="hljs-comment">&#125;</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">export function payLoan() &#123;</span><br><span class="hljs-comment">  return &#123; type: &quot;account/payLoan&quot; &#125;;</span><br><span class="hljs-comment">&#125;</span><br><span class="hljs-comment">*/</span><br><br></code></pre></td></tr></table></figure><h5 id="3ã€ä½¿ç”¨RTKçš„ä¼˜ç‚¹ğŸ”†"><a href="#3ã€ä½¿ç”¨RTKçš„ä¼˜ç‚¹ğŸ”†" class="headerlink" title="3ã€ä½¿ç”¨RTKçš„ä¼˜ç‚¹ğŸ”†"></a>3ã€ä½¿ç”¨RTKçš„ä¼˜ç‚¹ğŸ”†</h5><ul><li><p><strong>ä»£ç ç®€æ´ã€å‡å°‘æ ·æ¿ä»£ç </strong>ï¼š</p><ul><li><p>RTK ä¸­çš„ <code>createSlice</code> è‡ªåŠ¨ç”Ÿæˆ action types å’Œ action creatorsï¼Œå› æ­¤å‡å°‘äº†æ‰‹åŠ¨å®šä¹‰ action type å’Œ creator çš„ä»£ç é‡ã€‚</p></li><li><p>åœ¨ä¸ä½¿ç”¨ RTK çš„ç‰ˆæœ¬ä¸­ï¼Œä½ éœ€è¦æ‰‹åŠ¨ç¼–å†™å¤§é‡çš„ <code>switch-case</code> è¯­å¥å’Œ action creatorï¼Œæ¯”å¦‚ <code>account/deposit</code>ã€<code>account/withdraw</code> ç­‰ã€‚è€Œåœ¨ RTK ä¸­ï¼Œ<code>createSlice</code> è‡ªåŠ¨å®Œæˆè¿™äº›ä»»åŠ¡ï¼Œç®€åŒ–äº† reducer å’Œ action çš„ç¼–å†™ã€‚</p></li></ul></li><li><p><strong>æ”¯æŒâ€œå¯å˜â€çŠ¶æ€ï¼Œç®€åŒ–çŠ¶æ€æ›´æ–°é€»è¾‘</strong>ï¼š</p><ul><li>RTK å†…éƒ¨ä½¿ç”¨ <code>Immer</code>ï¼Œ å…è®¸ä½ åœ¨ reducer ä¸­ç¼–å†™åƒå˜å¼‚å¯¹è±¡ä¸€æ ·çš„ä»£ç ï¼Œä½†å®é™…ä¸Šå®ƒå¹¶æ²¡æœ‰çœŸçš„ä¿®æ”¹åŸå§‹çŠ¶æ€ï¼Œè€Œæ˜¯ç”Ÿæˆäº†ä¸€ä¸ªæ–°çš„çŠ¶æ€å¯¹è±¡ã€‚è¿™æ„å‘³ç€ï¼šä½ åœ¨ reducer ä¸­â€œä¿®æ”¹â€çŠ¶æ€å¯¹è±¡çš„å­—æ®µæ—¶ï¼Œ<code>Immer</code> ä¼šè¿½è¸ªè¿™äº›å˜æ›´ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„çŠ¶æ€å¯¹è±¡ï¼Œä¿æŒ Redux çš„ä¸å¯å˜æ€§åŸåˆ™ï¼›å¦‚æœä½ æ²¡æœ‰ä¿®æ”¹çŠ¶æ€ï¼Œ<code>Immer</code> ä¼šè¿”å›åŸå§‹çŠ¶æ€ï¼ˆä¸åˆ›å»ºæ–°çš„å¯¹è±¡ï¼‰ï¼Œä»è€Œä¼˜åŒ–æ€§èƒ½ã€‚</li><li>ä½ å¯ä»¥ç›´æ¥ä¿®æ”¹çŠ¶æ€å¯¹è±¡ï¼Œè€Œä¸éœ€è¦æ‰‹åŠ¨åˆ›å»ºçŠ¶æ€çš„æ·±æ‹·è´ï¼Œè¿™å¤§å¤§ç®€åŒ–äº†çŠ¶æ€æ›´æ–°çš„ä»£ç ã€‚</li></ul></li><li><p><strong>å†…ç½®å¼‚æ­¥å¤„ç†å’Œ middleware æ”¯æŒ</strong>ï¼š</p><ul><li><p>RTK æä¾›äº†å¼‚æ­¥ actionï¼ˆå¦‚ <code>createAsyncThunk</code>ï¼‰çš„ç®€åŒ–å¤„ç†ï¼Œå†…ç½®äº† thunk ä¸­é—´ä»¶ï¼Œç®€åŒ–äº†å¼‚æ­¥æ•°æ®è¯·æ±‚çš„ç®¡ç†ã€‚åœ¨ä½ çš„ä»£ç ä¸­ï¼Œ<code>deposit</code> å¼‚æ­¥å¤„ç†é€»è¾‘ä¾ç„¶éœ€è¦ç”¨ <code>thunk</code>ï¼Œä½†ä½¿ç”¨ RTK æ—¶å¯ä»¥é€šè¿‡ <code>createAsyncThunk</code> æˆ–æ›´å¥½åœ°æ”¯æŒå¼‚æ­¥æµã€‚</p></li><li><p>ä½ å¯ä»¥ç›´æ¥å®šä¹‰å¼‚æ­¥ actionï¼Œä¸éœ€è¦åƒä¼ ç»Ÿ Redux é‚£æ ·é¢å¤–å¼•å…¥ <code>redux-thunk</code> æˆ–æ‰‹åŠ¨åˆ›å»ºå¼‚æ­¥æ“ä½œã€‚</p></li></ul></li><li><p><strong>è‡ªåŠ¨ç”Ÿæˆ action creators å’Œ action types</strong>ï¼š</p><ul><li>RTK è‡ªåŠ¨ç”Ÿæˆ action creatorsï¼Œé¿å…äº†æ‰‹åŠ¨å®šä¹‰ action type çš„é‡å¤åŠ³åŠ¨ã€‚è¿™ä¸ä»…å‡å°‘äº†é”™è¯¯çš„å¯èƒ½æ€§ï¼Œè¿˜ä½¿ä»£ç æ›´å…·å¯ç»´æŠ¤æ€§å’Œä¸€è‡´æ€§ã€‚</li></ul></li><li><p><strong>å¼€å‘å·¥å…·é›†æˆ</strong>ï¼š</p><ul><li>RTK ä¸ Redux DevTools ä»¥åŠå…¶ä»– Redux å¼€å‘å·¥å…·æ›´å¥½åœ°é›†æˆï¼Œå¸¦æœ‰é»˜è®¤çš„ä¼˜åŒ–é…ç½®ï¼Œä¾‹å¦‚å‡å°‘æ‰‹åŠ¨é…ç½®ã€æä¾›æ€§èƒ½ä¼˜åŒ–ç­‰ã€‚</li></ul></li></ul><h5 id="4ã€ä½¿ç”¨RTKçš„ç¼ºç‚¹â›ˆï¸"><a href="#4ã€ä½¿ç”¨RTKçš„ç¼ºç‚¹â›ˆï¸" class="headerlink" title="4ã€ä½¿ç”¨RTKçš„ç¼ºç‚¹â›ˆï¸"></a>4ã€ä½¿ç”¨RTKçš„ç¼ºç‚¹â›ˆï¸</h5><ul><li><strong>å­¦ä¹ æ›²çº¿</strong>ï¼š<ul><li>å°½ç®¡ RTK æä¾›äº†å¾ˆå¤šç®€åŒ–çš„å·¥å…·ï¼Œä½†å¯¹äºé‚£äº›å·²ç»ç†Ÿæ‚‰ä¼ ç»Ÿ Redux çš„å¼€å‘è€…æ¥è¯´ï¼Œç†è§£å’ŒæŒæ¡ RTK çš„ API å’Œè®¾è®¡æ¨¡å¼å¯èƒ½éœ€è¦ä¸€å®šçš„æ—¶é—´ã€‚æ¯”å¦‚åƒ <code>createSlice</code>ã€<code>createAsyncThunk</code> è¿™äº› API å¯¹è€ç”¨æˆ·æ¥è¯´å¯èƒ½éœ€è¦ä¸€äº›æ—¶é—´é€‚åº”ã€‚</li></ul></li><li><strong>éšè—çš„å¤æ‚æ€§</strong>ï¼š<ul><li>è™½ç„¶ RTK å†…éƒ¨å¤„ç†äº†ä¸å¯å˜æ€§å’Œå¼‚æ­¥æ“ä½œï¼Œä½†å®ƒéšè—äº†ä¸€äº› Redux çš„åŸç†æ€§ä»£ç ï¼ˆå¦‚çŠ¶æ€çš„ä¸å¯å˜æ€§æ“ä½œã€æ‰‹åŠ¨å®šä¹‰ <code>action</code> å’Œ <code>reducer</code> çš„æµç¨‹ï¼‰ã€‚è¿™å¯¹äºå¸Œæœ›æ·±å…¥äº†è§£ Redux åº•å±‚å®ç°çš„å¼€å‘è€…æ¥è¯´ï¼Œå¯èƒ½å‡å°‘äº†å¯¹æ¡†æ¶çš„æ·±åº¦ç†è§£ã€‚</li><li>åœ¨ä»£ç ä¸­å¯ä»¥ä½“ç°å‡ºæ¥ï¼Œä½¿ç”¨RTKæ¥è‡ªåŠ¨åˆ›å»ºaction creatoræ—¶é»˜è®¤åªæ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œå› æ­¤éœ€è¦ç”¨<code>prepare</code>å‡½æ•°æ¥è¿›è¡Œä¿®æ”¹</li></ul></li><li><strong>ä¸å¤æ‚åº”ç”¨çš„ç»“åˆ</strong>ï¼š<ul><li>å¯¹äºä¸€äº›éå¸¸å¤æ‚æˆ–é«˜åº¦å®šåˆ¶çš„åº”ç”¨ï¼ŒRTK çš„å°è£…å¯èƒ½ä¸å¤Ÿçµæ´»ï¼Œå¼€å‘è€…æœ‰æ—¶å¯èƒ½éœ€è¦ç»•è¿‡ RTK çš„ä¸€äº›é»˜è®¤è¡Œä¸ºï¼Œä»¥é€‚åº”åº”ç”¨çš„ç‰¹å®šéœ€æ±‚ã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œä¼ ç»Ÿçš„ Redux åè€Œå¯èƒ½æ›´çµæ´»ã€‚</li></ul></li></ul><h3 id="ä¸‰ã€contextAPI-useReducerå’ŒReduxçš„åŒºåˆ«"><a href="#ä¸‰ã€contextAPI-useReducerå’ŒReduxçš„åŒºåˆ«" class="headerlink" title="ä¸‰ã€contextAPI+useReducerå’ŒReduxçš„åŒºåˆ«"></a>ä¸‰ã€<code>contextAPI</code>+<code>useReducer</code>å’Œ<code>Redux</code>çš„åŒºåˆ«</h3><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240909101414957.png" alt="image-20240909101414957"></p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240909101339231.png" alt="image-20240909101339231"></p><h4 id="1ã€ä¸­é—´ä»¶å’Œæ’ä»¶æ”¯æŒ"><a href="#1ã€ä¸­é—´ä»¶å’Œæ’ä»¶æ”¯æŒ" class="headerlink" title="1ã€ä¸­é—´ä»¶å’Œæ’ä»¶æ”¯æŒ"></a><strong>1ã€ä¸­é—´ä»¶å’Œæ’ä»¶æ”¯æŒ</strong></h4><ul><li><strong>Context API + useReducer</strong>ï¼šæ²¡æœ‰ Redux é‚£ç§ä¸°å¯Œçš„ä¸­é—´ä»¶å’Œæ’ä»¶ç”Ÿæ€ç³»ç»Ÿï¼Œä¾‹å¦‚ <code>redux-thunk</code>ã€<code>redux-saga</code> ä¹‹ç±»çš„å¼‚æ­¥æ“ä½œå·¥å…·ã€‚é€šå¸¸éœ€è¦æ‰‹åŠ¨å¤„ç†å¤æ‚çš„å¼‚æ­¥é€»è¾‘ã€‚</li><li><strong>Redux</strong>ï¼šæ‹¥æœ‰å¤§é‡ä¸­é—´ä»¶å’Œå¼€å‘å·¥å…·ï¼ˆå¦‚ Redux DevToolså’ŒMiddlewareï¼‰ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ°<strong>è°ƒè¯•å’Œå¤„ç†å¼‚æ­¥æ“ä½œ</strong>ã€‚</li></ul><h4 id="2ã€çŠ¶æ€å­˜å‚¨æ–¹å¼"><a href="#2ã€çŠ¶æ€å­˜å‚¨æ–¹å¼" class="headerlink" title="2ã€çŠ¶æ€å­˜å‚¨æ–¹å¼"></a><strong>2ã€çŠ¶æ€å­˜å‚¨æ–¹å¼</strong></h4><ul><li><strong>Context API + useReducer</strong>ï¼šæ²¡æœ‰å…¨å±€çš„å•ä¸€çŠ¶æ€æ ‘ã€‚é€šè¿‡ <code>useReducer</code> æ¥ç®¡ç†æœ¬åœ°çŠ¶æ€ï¼Œå¹¶é€šè¿‡ <code>Context API</code> æä¾›çŠ¶æ€å…±äº«çš„åŠŸèƒ½ã€‚ä¸å®¹æ˜“æ–°å¢çŠ¶æ€ï¼ˆè¦æ·»åŠ æ–°çš„Providerå’ŒReducerï¼‰</li><li><strong>Redux</strong>ï¼šæœ‰ä¸€ä¸ªå…¨å±€çš„å•ä¸€çŠ¶æ€æ ‘ï¼ˆstoreï¼‰ï¼Œæ‰€æœ‰çš„åº”ç”¨çŠ¶æ€éƒ½å­˜å‚¨åœ¨è¿™ä¸€ä¸ª store ä¸­ã€‚è¿™ä½¿å¾—çŠ¶æ€ç®¡ç†æ›´åŠ é›†ä¸­ã€‚åˆ›å»ºæ–°çš„çŠ¶æ€sliceè¾ƒä¸ºæ–¹ä¾¿</li></ul><h4 id="3ã€èµ·æ­¥"><a href="#3ã€èµ·æ­¥" class="headerlink" title="3ã€èµ·æ­¥"></a>3ã€èµ·æ­¥</h4><ul><li><strong>Context API + useReducer</strong>ï¼šç”±Reactç›´æ¥æä¾›ï¼Œå¾ˆå®¹æ˜“å»ºç«‹</li><li><strong>Redux</strong>ï¼šéœ€è¦æä¾›æ’ä»¶æ”¯æŒï¼Œåœ¨åˆå§‹å»ºç«‹çš„æ—¶å€™è¾ƒä¸ºå¤æ‚</li></ul><h4 id="4ã€ä¼˜åŒ–ï¼ˆå…·ä½“è§ä¸Šä¸€èŠ‚ï¼‰"><a href="#4ã€ä¼˜åŒ–ï¼ˆå…·ä½“è§ä¸Šä¸€èŠ‚ï¼‰" class="headerlink" title="4ã€ä¼˜åŒ–ï¼ˆå…·ä½“è§ä¸Šä¸€èŠ‚ï¼‰"></a>4ã€ä¼˜åŒ–ï¼ˆå…·ä½“è§ä¸Šä¸€èŠ‚ï¼‰</h4><ul><li><strong>Context API + useReducer</strong>ï¼šä¼˜åŒ–è¾ƒä¸ºå¤æ‚</li><li><strong>Redux</strong>ï¼šæä¾›äº†å¾ˆå¤šå¼€ç®±å³ç”¨çš„ä¼˜åŒ–</li></ul>]]></content>
    
    
    <categories>
      
      <category>reactè¯¾ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>react</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>reactè¯¾ç¨‹12-Reactä¸­å¯ä¼˜åŒ–çš„éƒ¨åˆ†ä»¥åŠuseEffectçš„è¡¥å……</title>
    <link href="/2024/09/03/react%E8%AF%BE%E7%A8%8B12-React%E4%B8%AD%E5%8F%AF%E4%BC%98%E5%8C%96%E7%9A%84%E9%83%A8%E5%88%86%E4%BB%A5%E5%8F%8AuseEffect%E7%9A%84%E8%A1%A5%E5%85%85/"/>
    <url>/2024/09/03/react%E8%AF%BE%E7%A8%8B12-React%E4%B8%AD%E5%8F%AF%E4%BC%98%E5%8C%96%E7%9A%84%E9%83%A8%E5%88%86%E4%BB%A5%E5%8F%8AuseEffect%E7%9A%84%E8%A1%A5%E5%85%85/</url>
    
    <content type="html"><![CDATA[<p>æœ¬èŠ‚æ¢è®¨å¦‚ä½•ä¼˜åŒ–Reacté¡¹ç›®ï¼Œä»¥åŠå¯¹useEffectçš„ç”¨æ³•åšä¸€ä¸ªå°å°çš„è¡¥å……</p><span id="more"></span><h3 id="ä¸€ã€é¿å…ä¸å¿…è¦çš„æ¸²æŸ“"><a href="#ä¸€ã€é¿å…ä¸å¿…è¦çš„æ¸²æŸ“" class="headerlink" title="ä¸€ã€é¿å…ä¸å¿…è¦çš„æ¸²æŸ“"></a>ä¸€ã€é¿å…ä¸å¿…è¦çš„æ¸²æŸ“</h3><p>æ–¹æ³•ï¼šmemoã€useMemoã€useCallbackã€å°†å…ƒç´ ä¼ é€’åˆ°å…¶ä»–å…ƒç´ ä¸­ä½œä¸ºchildrenæˆ–å…¶ä»–é“å…·</p><p>ç»„ä»¶å®ä¾‹åªèƒ½åœ¨ä¸‰ç§ä¸åŒçš„æƒ…å†µä¸‹é‡æ–°å‘ˆç°ï¼š</p><p>â€‹çŠ¶æ€æ”¹å˜ã€contextæ”¹å˜ã€çˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“</p><p>wasted renderï¼š æ²¡æœ‰åœ¨DOMäº§ç”Ÿä»»ä½•å˜åŒ–çš„æ¸²æŸ“</p><p>ï¼ˆä½¿ç¨‹åºåœæ»æˆ–æ— å“åº”ï¼‰</p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240903184623448.png" alt="image-20240903184623448" style="zoom:80%;" /><p>é€‰æ‹©è®¾ç½®æ¿€æ´»è®°å½•æ¸²æŸ“çš„åŸå› ï¼Œç„¶åç‚¹å‡»å¼€å§‹å½•åˆ¶å’Œç»“æŸå½•åˆ¶å°±å¯ä»¥è·å–æ¯æ¬¡æ¸²æŸ“çš„ä¿¡æ¯</p><p>ä½¿ç”¨TESTåº”ç”¨â€œå°†å…ƒç´ ä¼ é€’åˆ°å…¶ä»–å…ƒç´ ä¸­ä½œä¸ºchildrenæˆ–å…¶ä»–é“å…·â€è¿™ä¸ªæ–¹æ³•ï¼š</p><p>â€‹å½“ä¸€ä¸ªç»„ä»¶ä¸­åŒ…å«äº†ä¸€ä¸ªæ¸²æŸ“æ—¶é—´å¾ˆé•¿çš„ç»„ä»¶ï¼Œæ¯å½“å¤§ç»„ä»¶é‡æ–°æ¸²æŸ“çš„æ—¶å€™éƒ½ä¼šé‡æ–°æ¸²æŸ“è¿™ä¸ªç»„ä»¶ã€‚ä½†æ˜¯æŠŠç»„ä»¶å½“ä½œchildrenä¼ å…¥çš„æ—¶å€™ï¼Œå°±ä¸ä¼šå°†å®ƒé‡æ–°æ¸²æŸ“äº†ã€‚</p><p>â€‹whyï¼Ÿä½œä¸ºchildrenï¼Œå®ƒæœ€å…ˆè¢«æ¸²æŸ“ï¼Œæ¯æ¬¡ç»„ä»¶æ¸²æŸ“æ—¶ï¼Œç›´æ¥å°†childrenç§»äº¤ï¼Œä¸ä¼šå—åˆ°çŠ¶æ€æ›´æ–°çš„å½±å“ã€‚</p><p>æ·»åŠ å·¥å…·å’¯ï¼š</p><p>Memoization</p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240903191433311.png" alt="image-20240903191433311" style="zoom: 33%;" /><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240903191638380.png" alt="image-20240903191638380" style="zoom: 33%;" /><p>çˆ¶ç»„ä»¶ä¸­çš„çŠ¶æ€æ”¹å˜ä¼šé‡æ–°æ¸²æŸ“æ‰€æœ‰å­ç»„ä»¶ï¼Œæ‰€ä»¥å½“ä¸€ä¸ªå­ç»„ä»¶æ¸²æŸ“é€Ÿåº¦è¿‡æ…¢æ—¶ï¼Œä¼šä½¿å…¶ä»–ç»„ä»¶ä¹Ÿå—åˆ°å½±å“ã€‚ï¼ˆç»å¸¸æ›´æ–°ï¼Œheavyï¼Œæ”¶åˆ°çš„é“å…·ç»å¸¸ä¸å˜ï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240903192958326.png" alt="image-20240903192958326"></p><p>è¿™æ ·åŒ…è£…èµ·æ¥å°±OKäº†ã€‚</p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240903201449887.png" alt="image-20240903201449887" style="zoom: 33%;" /><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240903201522483.png" alt="image-20240903201522483" style="zoom: 33%;" /><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240903201600349.png" alt="image-20240903201600349" style="zoom: 33%;" /><p>è§£å†³objectï¼šuseMemo</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240903202608079.png" alt="image-20240903202608079"></p><p>useCallbackï¼ˆè®°å¿†å‡½æ•°ï¼‰ï¼Œè§£å†³function  ï¼ˆsetStateå‡½æ•°æ˜¯è‡ªåŠ¨è®°å¿†çš„ï¼‰</p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240903203412445.png" alt="image-20240903203412445"></p><p>å‡å°‘ä¸contextç›¸å…³çš„æ¸²æŸ“æµªè´¹</p><p>â€‹å½“provideræ˜¯Appçš„å­ç»„ä»¶è€ŒAppé‡æ–°æ¸²æŸ“ï¼Œåˆ™providerä¸­çš„contextçš„valueä½œä¸ºå¯¹è±¡ä¼šé‡æ–°æ¸²æŸ“ã€‚å› æ­¤æ‰€æœ‰æ¥æ”¶contextçš„å¯¹è±¡çš„ç»„ä»¶ä¹Ÿéƒ½ä¼šè¢«é‡æ–°æ¸²æŸ“ã€‚ï¼ˆä½¿ç”¨useMemoæ¥åˆ›å»ºå¯¹è±¡ï¼‰</p><p>å½“æƒ³è¦è®°ä½çš„ç»„ä»¶æ˜¯è¦è¢«exportçš„ï¼Œå°±å¯ä»¥ç›´æ¥</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-06%20154919.png" alt="img"></p><h3 id="äºŒã€æé«˜åº”ç”¨çš„é€Ÿåº¦å’Œç›¸åº”èƒ½åŠ›ï¼ˆæ— å»¶è¿Ÿï¼‰"><a href="#äºŒã€æé«˜åº”ç”¨çš„é€Ÿåº¦å’Œç›¸åº”èƒ½åŠ›ï¼ˆæ— å»¶è¿Ÿï¼‰" class="headerlink" title="äºŒã€æé«˜åº”ç”¨çš„é€Ÿåº¦å’Œç›¸åº”èƒ½åŠ›ï¼ˆæ— å»¶è¿Ÿï¼‰"></a>äºŒã€æé«˜åº”ç”¨çš„é€Ÿåº¦å’Œç›¸åº”èƒ½åŠ›ï¼ˆæ— å»¶è¿Ÿï¼‰</h3><p>useMemoã€useCallbackã€useTransition</p><h3 id="ä¸‰ã€å‡å°‘Bundleçš„å¤§å°"><a href="#ä¸‰ã€å‡å°‘Bundleçš„å¤§å°" class="headerlink" title="ä¸‰ã€å‡å°‘Bundleçš„å¤§å°"></a>ä¸‰ã€å‡å°‘Bundleçš„å¤§å°</h3><p>æ–¹æ³•ï¼šå‡å°‘ç¬¬ä¸‰æ–¹åŒ…çš„ä½¿ç”¨ï¼Œå®ç°ä»£ç æ‹†åˆ†å’Œå»¶è¿ŸåŠ è½½</p><h4 id="ä»€ä¹ˆæ˜¯bundleï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯bundleï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯bundleï¼Ÿ"></a><strong>ä»€ä¹ˆæ˜¯bundleï¼Ÿ</strong></h4><hr><p>åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œâ€œbundleâ€æŒ‡çš„æ˜¯å°†å¤šä¸ªèµ„æºæ–‡ä»¶ï¼ˆå¦‚JavaScriptã€CSSã€å›¾åƒã€å­—ä½“ç­‰ï¼‰æ‰“åŒ…æˆä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶çš„è¿‡ç¨‹ã€‚è¿™ä¸ªæ‰“åŒ…çš„è¿‡ç¨‹é€šå¸¸é€šè¿‡å·¥å…·å¦‚Webpackã€Parcelæˆ–Viteæ¥å®Œæˆã€‚</p><p>ä¸ºä»€ä¹ˆè¦è¿›è¡Œæ‰“åŒ…ï¼Ÿ</p><ol><li><strong>å‡å°‘HTTPè¯·æ±‚</strong>ï¼šå°†å¤šä¸ªæ–‡ä»¶æ‰“åŒ…æˆä¸€ä¸ªæ–‡ä»¶ï¼Œå¯ä»¥å‡å°‘æµè§ˆå™¨å‘é€çš„HTTPè¯·æ±‚æ•°é‡ï¼Œä»è€ŒåŠ å¿«é¡µé¢çš„åŠ è½½é€Ÿåº¦ã€‚</li><li><strong>ä»£ç å‹ç¼©å’Œä¼˜åŒ–</strong>ï¼šæ‰“åŒ…è¿‡ç¨‹ä¸­ï¼Œå·¥å…·å¯ä»¥å¯¹ä»£ç è¿›è¡Œå‹ç¼©å’Œä¼˜åŒ–ï¼Œå¦‚å»é™¤æ— ç”¨ä»£ç ï¼ˆtree-shakingï¼‰ã€å‹ç¼©ä»£ç å¤§å°ã€æ··æ·†ä»£ç ä»¥æé«˜å®‰å…¨æ€§ç­‰ã€‚</li><li><strong>æ¨¡å—åŒ–ç®¡ç†</strong>ï¼šé€šè¿‡æ‰“åŒ…å·¥å…·ï¼Œå¯ä»¥æ›´å¥½åœ°ç®¡ç†é¡¹ç›®ä¸­çš„æ¨¡å—å’Œä¾èµ–ï¼Œè§£å†³ä¸åŒæ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚</li><li><strong>è·¨æµè§ˆå™¨å…¼å®¹æ€§</strong>ï¼šæ‰“åŒ…å·¥å…·é€šå¸¸è¿˜å¯ä»¥å¤„ç†ä¸åŒæµè§ˆå™¨å¯¹JavaScriptæˆ–CSSç‰¹æ€§çš„æ”¯æŒæƒ…å†µï¼Œç”Ÿæˆå…¼å®¹æ€§çš„ä»£ç ã€‚</li></ol><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240904100411303.png" alt="image-20240904100411303"></p><h4 id="æ‡’åŠ è½½ï¼š"><a href="#æ‡’åŠ è½½ï¼š" class="headerlink" title="æ‡’åŠ è½½ï¼š"></a><strong>æ‡’åŠ è½½ï¼š</strong></h4><hr><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240907144718481.png" alt="image-20240907144718481"></p><p>æ‡’åŠ è½½ï¼ˆLazy Loadingï¼‰æ˜¯ä¸€ç§ä¼˜åŒ–æŠ€æœ¯ï¼Œä¸»è¦ç”¨äºå»¶è¿ŸåŠ è½½é¡µé¢ä¸­çš„èµ„æºæˆ–å†…å®¹ï¼Œç›´åˆ°å®ƒä»¬çœŸæ­£éœ€è¦è¢«æ˜¾ç¤ºæˆ–ä½¿ç”¨æ—¶æ‰è¿›è¡ŒåŠ è½½ã€‚è¿™ç§æŠ€æœ¯å¯ä»¥æ˜¾è‘—æé«˜é¡µé¢åˆå§‹åŠ è½½çš„é€Ÿåº¦ï¼Œå¹¶å‡å°‘ä¸å¿…è¦çš„èµ„æºæ¶ˆè€—ã€‚</p><p><strong>æå‡é¡µé¢åŠ è½½é€Ÿåº¦</strong>ï¼šé€šè¿‡å‡å°‘åˆå§‹åŠ è½½çš„èµ„æºæ•°é‡ï¼Œå¯ä»¥åŠ å¿«é¡µé¢çš„æ˜¾ç¤ºé€Ÿåº¦ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚</p><p><strong>å‡å°‘å¸¦å®½æ¶ˆè€—</strong>ï¼šç”¨æˆ·åªä¼šåŠ è½½ä»–ä»¬å®é™…éœ€è¦çš„èµ„æºï¼Œä»è€ŒèŠ‚çœå¸¦å®½ï¼Œå°¤å…¶å¯¹äºç§»åŠ¨è®¾å¤‡ç”¨æˆ·æ›´åŠ å‹å¥½ã€‚</p><p><strong>æå‡æ€§èƒ½</strong>ï¼šå¯¹äºå¤æ‚çš„Webåº”ç”¨ï¼Œæ‡’åŠ è½½å¯ä»¥å‡å°‘å†…å­˜å ç”¨å’ŒCPUæ¶ˆè€—ï¼Œå› ä¸ºä¸éœ€è¦ä¸€æ¬¡æ€§åŠ è½½å’Œæ¸²æŸ“æ‰€æœ‰å†…å®¹ã€‚</p><p><code>const Homepage = lazy(() =&gt; import(&quot;./pages/Homepage&quot;));</code></p><h4 id="suspense"><a href="#suspense" class="headerlink" title="suspense"></a><strong>suspense</strong></h4><hr><p>æ˜¯Reactåº“ä¸­çš„ä¸€ä¸ªç»„ä»¶ï¼Œç”¨äºå¤„ç†å¼‚æ­¥åŠ è½½ç»„ä»¶æˆ–æ•°æ®æ—¶çš„æ¸²æŸ“è¿‡æ¸¡ã€‚<code>Suspense</code>å¯ä»¥è®©æ‚¨åœ¨ç­‰å¾…å¼‚æ­¥æ“ä½œå®Œæˆä¹‹å‰æ˜¾ç¤ºä¸€ä¸ªå¤‡ç”¨å†…å®¹ï¼ˆä¾‹å¦‚åŠ è½½æŒ‡ç¤ºå™¨ï¼‰ï¼Œä»è€Œæå‡ç”¨æˆ·ä½“éªŒã€‚</p><p><strong>ç»„ä»¶æ‡’åŠ è½½ï¼ˆä»£ç åˆ†å‰²ï¼‰</strong>ï¼šä¸<code>React.lazy()</code>ä¸€èµ·ä½¿ç”¨ï¼Œå»¶è¿ŸåŠ è½½ç»„ä»¶ï¼Œå‡å°‘åˆå§‹åŠ è½½ä½“ç§¯ã€‚</p><p><strong>æ•°æ®è·å–ï¼ˆæœªæ¥ç‰¹æ€§ï¼‰</strong>ï¼šReactå›¢é˜Ÿä¹Ÿåœ¨æ‰©å±•<code>Suspense</code>ç”¨äºå¤„ç†æ•°æ®è·å–ï¼Œä½†ç›®å‰éœ€è¦é…åˆä¸€äº›ç¬¬ä¸‰æ–¹åº“ï¼Œå¦‚<code>relay</code>æˆ–<code>react-query</code>ã€‚</p><p><strong>æ­¥éª¤ï¼š</strong></p><ol><li>ä½¿ç”¨<code>React.lazy()</code>å‡½æ•°æ‡’åŠ è½½ç»„ä»¶ã€‚</li><li>ä½¿ç”¨<code>&lt;Suspense&gt;</code>ç»„ä»¶åŒ…è£¹æ‡’åŠ è½½çš„ç»„ä»¶ï¼Œå¹¶æä¾›ä¸€ä¸ª<code>fallback</code>å±æ€§æ¥æŒ‡å®šåŠ è½½æœŸé—´æ˜¾ç¤ºçš„UIã€‚</li></ol><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240904102540533.png" alt="image-20240904102540533"></p><h3 id="å››ã€Donâ€™t-Optimize-Prematurely"><a href="#å››ã€Donâ€™t-Optimize-Prematurely" class="headerlink" title="å››ã€Donâ€™t Optimize Prematurely"></a>å››ã€Donâ€™t Optimize Prematurely</h3><p>å¼•ç”¨è‡ªè®¡ç®—æœºç§‘å­¦å®¶Donald Knuthçš„åè¨€ï¼šâ€œPremature optimization is the root of all evilâ€ ï¼ˆè¿‡æ—©ä¼˜åŒ–æ˜¯ä¸‡æ¶ä¹‹æºï¼‰ã€‚è¿™æ¡åŸåˆ™å¼ºè°ƒåœ¨ç¨‹åºå¼€å‘çš„æ—©æœŸé˜¶æ®µï¼Œä¸åº”è¯¥èŠ±è´¹è¿‡å¤šæ—¶é—´åœ¨å¾®å°çš„æ€§èƒ½ä¼˜åŒ–ä¸Š</p><ol><li><strong>æµªè´¹æ—¶é—´å’Œèµ„æº</strong></li></ol><p>åœ¨å¼€å‘åˆæœŸï¼Œç¨‹åºçš„ç»“æ„å’Œéœ€æ±‚å¯èƒ½å°šæœªå®Œå…¨æ˜ç¡®ã€‚å¦‚æœè¿‡æ—©åœ°è¿›è¡Œä¼˜åŒ–ï¼Œå¯èƒ½ä¼šå¯¼è‡´å¤§é‡çš„æ—¶é—´å’Œèµ„æºæµªè´¹åœ¨å¤„ç†éå…³é”®çš„æ€§èƒ½é—®é¢˜ä¸Šï¼Œè€Œè¿™äº›é—®é¢˜å¯èƒ½åœ¨åç»­çš„å¼€å‘ä¸­æ ¹æœ¬ä¸ä¼šå‡ºç°ã€‚</p><ol start="2"><li><strong>é™ä½ä»£ç å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§</strong></li></ol><p>è®¸å¤šä¼˜åŒ–æªæ–½å¯èƒ½ä¼šä½¿ä»£ç å˜å¾—å¤æ‚éš¾æ‡‚ã€‚è¿™ä¸ä»…å¢åŠ äº†ä»£ç çš„ç»´æŠ¤éš¾åº¦ï¼Œè¿˜å¯èƒ½å¯¼è‡´åç»­çš„å¼€å‘å’Œè°ƒè¯•å˜å¾—æ›´åŠ å›°éš¾ã€‚ç®€æ´ã€æ¸…æ™°çš„ä»£ç é€šå¸¸æ¯”å¤æ‚çš„ã€é«˜åº¦ä¼˜åŒ–çš„ä»£ç æ›´å®¹æ˜“ç»´æŠ¤ã€‚</p><ol start="3"><li><strong>éš¾ä»¥é¢„æµ‹çš„æ€§èƒ½ç“¶é¢ˆ</strong></li></ol><p>åœ¨ç¨‹åºå¼€å‘çš„æ—©æœŸï¼ŒçœŸæ­£çš„æ€§èƒ½ç“¶é¢ˆå¯èƒ½å°šä¸æ˜ç¡®ã€‚è¿‡æ—©ä¼˜åŒ–å¯èƒ½ä¼šé’ˆå¯¹ä¸€äº›å¹¶ä¸æ˜¯å®é™…ç“¶é¢ˆçš„éƒ¨åˆ†è¿›è¡Œï¼Œè€Œå¿½ç•¥äº†æ›´ä¸ºé‡è¦çš„æ€§èƒ½é—®é¢˜ã€‚åªæœ‰åœ¨ç¨‹åºçš„ä¸»è¦åŠŸèƒ½åŸºæœ¬å®Œæˆå¹¶ç»è¿‡æ€§èƒ½æµ‹è¯•åï¼Œæ‰èƒ½æ›´å‡†ç¡®åœ°è¯†åˆ«å’Œè§£å†³å®é™…çš„ç“¶é¢ˆã€‚</p><ol start="4"><li><strong>å»¶è¿Ÿé¡¹ç›®è¿›åº¦</strong></li></ol><p>è¿‡æ—©çš„ä¼˜åŒ–å¯èƒ½ä¼šåˆ†æ•£å¼€å‘äººå‘˜çš„æ³¨æ„åŠ›ï¼Œä½¿ä»–ä»¬æ— æ³•ä¸“æ³¨äºå®ç°æ ¸å¿ƒåŠŸèƒ½ã€‚è¿™æ ·ä¼šå¯¼è‡´é¡¹ç›®çš„æ•´ä½“è¿›åº¦è¢«å»¶è¿Ÿï¼Œå½±å“æœ€ç»ˆçš„äº¤ä»˜æ—¶é—´ã€‚</p><ol start="5"><li><strong>ä¼˜åŒ–çš„æ•ˆæœæœ‰é™</strong></li></ol><p>åœ¨æ²¡æœ‰æ˜ç¡®éœ€æ±‚å’Œæ•°æ®æ”¯æŒçš„æƒ…å†µä¸‹ï¼Œè¿›è¡Œä¼˜åŒ–å¾€å¾€éš¾ä»¥æ˜¾è‘—æå‡æ€§èƒ½ã€‚ç›¸åï¼Œé€šè¿‡åæœŸçš„åˆ†æå’Œé’ˆå¯¹æ€§ä¼˜åŒ–ï¼Œå¾€å¾€å¯ä»¥åœ¨å…³é”®éƒ¨åˆ†å–å¾—æ›´å¤§çš„æ€§èƒ½æå‡ã€‚</p><h3 id="äº”ã€useEffect"><a href="#äº”ã€useEffect" class="headerlink" title="äº”ã€useEffect"></a>äº”ã€useEffect</h3><p><strong>ä¾èµ–æ•°ç»„ï¼š</strong></p><p>â€‹âœ…state variable(çŠ¶æ€å˜é‡)ã€propã€context valueã€reactive value(ååº”å€¼ï¼šä¸çŠ¶æ€æœ‰å…³çš„å˜é‡æˆ–å‡½æ•°ï¼‰</p><p>â€‹    âŒobjectsã€arraysï¼ˆä»–ä»¬åœ¨æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šè¢«é‡æ–°åˆ›å»ºï¼Œreactä¼šåˆ¤å®šä¸ºæ—§çš„å’Œæ–°çš„ä¸åŒï¼‰</p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240906152320236.png" alt="image-20240906152320236" style="zoom: 33%;" /><p>Effectæœ€å¥½æ˜¯ä½œä¸ºæœ€åçš„é€‰æ‹©æ¥ä½¿ç”¨ï¼ï¼ï¼ä»¥ä¸‹æ˜¯å®ƒè¢«è¿‡åº¦ä½¿ç”¨çš„ç”¨ä¾‹ï¼ˆç„¶é¹…å‰é¢çš„é¡¹ç›®ä¸€ç›´åœ¨ä½¿ç”¨ã€‚ã€‚ï¼‰</p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240906152347059.png" alt="image-20240906152347059" style="zoom: 33%;" /><h5 id="stale-closures"><a href="#stale-closures" class="headerlink" title="stale closures:"></a><strong>stale closures</strong>:</h5><p>â€œ<strong>Stale closure</strong>â€æ˜¯ä¸€ä¸ªä¸é—­åŒ…ï¼ˆclosureï¼‰ç›¸å…³çš„ç¼–ç¨‹é—®é¢˜ï¼Œé€šå¸¸åœ¨å¤„ç†å¼‚æ­¥æ“ä½œæˆ–å›è°ƒæ—¶å®¹æ˜“å‡ºç°ã€‚å®ƒæŒ‡çš„æ˜¯é—­åŒ…å†…éƒ¨å¼•ç”¨äº†å¤–éƒ¨ä½œç”¨åŸŸçš„å˜é‡ï¼Œä½†åœ¨é—­åŒ…æ‰§è¡Œæ—¶ï¼Œè¿™äº›å˜é‡çš„å€¼å·²ç»å‘ç”Ÿäº†å˜åŒ–ï¼Œå¯¼è‡´é—­åŒ…å†…éƒ¨ä½¿ç”¨äº†è¿‡æ—¶ï¼ˆstaleï¼‰çš„å€¼ã€‚</p><h3 id="å…­ã€è¡¥å……contextAPI-useReducerå’ŒReduxåœ¨ä¼˜åŒ–ä¸Šçš„åŒºåˆ«"><a href="#å…­ã€è¡¥å……contextAPI-useReducerå’ŒReduxåœ¨ä¼˜åŒ–ä¸Šçš„åŒºåˆ«" class="headerlink" title="å…­ã€è¡¥å……contextAPI+useReducerå’ŒReduxåœ¨ä¼˜åŒ–ä¸Šçš„åŒºåˆ«"></a>å…­ã€è¡¥å……<code>contextAPI+useReducer</code>å’Œ<code>Redux</code>åœ¨ä¼˜åŒ–ä¸Šçš„åŒºåˆ«</h3><h4 id="ï¼ˆ1ï¼‰contextAPI-useReducer"><a href="#ï¼ˆ1ï¼‰contextAPI-useReducer" class="headerlink" title="ï¼ˆ1ï¼‰contextAPI+useReducer"></a>ï¼ˆ1ï¼‰contextAPI+useReducer</h4><p>åœ¨çŠ¶æ€ç®¡ç†ä¼˜åŒ–æ–¹é¢ï¼ŒRedux æä¾›äº†è®¸å¤šå¼€ç®±å³ç”¨çš„å·¥å…·å’ŒåŠŸèƒ½ï¼Œä½¿å¾—ä¼˜åŒ–æ€§èƒ½ç›¸å¯¹ç®€å•ã€‚ä»¥ä¸‹æ˜¯ Redux æä¾›çš„ä¸€äº›å¸¸è§ä¼˜åŒ–æ‰‹æ®µï¼š</p><h5 id="1-Redux-DevTools"><a href="#1-Redux-DevTools" class="headerlink" title="1. Redux DevTools"></a>1. <strong>Redux DevTools</strong></h5><ul><li><strong>Redux DevTools</strong> æä¾›äº†ä¸€ç§å¼ºå¤§çš„è°ƒè¯•å·¥å…·ï¼Œå¯ä»¥è·Ÿè¸ªçŠ¶æ€å˜åŒ–ã€æ—¶é—´æ—…è¡Œè°ƒè¯•ã€å›æ»šçŠ¶æ€ç­‰ã€‚å®ƒä¸ä»…æœ‰åŠ©äºè°ƒè¯•ï¼Œè¿˜å¯ä»¥å¸®åŠ©å¼€å‘è€…åˆ†æå’Œä¼˜åŒ–çŠ¶æ€æ›´æ–°ã€‚</li><li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šé€šè¿‡ Redux DevToolsï¼Œå¯ä»¥å®æ—¶æŸ¥çœ‹å“ªäº› action è§¦å‘äº†çŠ¶æ€æ›´æ–°ï¼Œåˆ†æå“ªäº›éƒ¨åˆ†çš„çŠ¶æ€ç®¡ç†å’Œæ¸²æŸ“éœ€è¦ä¼˜åŒ–ã€‚</li></ul><h5 id="2-Selector-å’Œ-Reselect"><a href="#2-Selector-å’Œ-Reselect" class="headerlink" title="2. Selector å’Œ Reselect"></a>2. <strong>Selector å’Œ Reselect</strong></h5><ul><li><strong>Reselect</strong> æ˜¯ Redux å®˜æ–¹æ¨èçš„ä¸€ä¸ªé€‰æ‹©å™¨åº“ï¼Œç”¨äºåˆ›å»ºå¸¦è®°å¿†åŠŸèƒ½çš„é€‰æ‹©å™¨ï¼ˆmemoized selectorsï¼‰ã€‚å®ƒé€šè¿‡ç¼“å­˜è®¡ç®—ç»“æœæ¥é¿å…ä¸å¿…è¦çš„è®¡ç®—å’Œé‡æ¸²æŸ“ã€‚</li><li><strong>ä¼˜åŒ–ç‚¹</strong>ï¼šå½“çŠ¶æ€æ›´æ–°æ—¶ï¼Œå¦‚æœæœªå®é™…ä½¿ç”¨çš„æ•°æ®æœªå‘ç”Ÿå˜åŒ–ï¼ŒReselect èƒ½ç¡®ä¿ç»„ä»¶ä¸ä¼šé‡æ–°è®¡ç®—æˆ–æ¸²æŸ“ï¼Œæå‡æ€§èƒ½ã€‚</li></ul><h5 id="3-Immutable-æ•°æ®ç®¡ç†"><a href="#3-Immutable-æ•°æ®ç®¡ç†" class="headerlink" title="3. Immutable æ•°æ®ç®¡ç†"></a>3. <strong>Immutable æ•°æ®ç®¡ç†</strong></h5><ul><li>Redux å¼ºè°ƒä½¿ç”¨ä¸å¯å˜æ•°æ®ï¼Œè¿™æ ·å¯ä»¥è½»æ¾åœ°æ£€æµ‹æ•°æ®æ˜¯å¦å˜åŒ–ï¼Œä»è€Œä¼˜åŒ–çŠ¶æ€æ›´æ–°è¿‡ç¨‹ã€‚ä¸å¯å˜æ€§ä¿è¯äº†å½“çŠ¶æ€æ›´æ–°æ—¶ï¼Œåªæœ‰å‘ç”Ÿäº†å®é™…å˜åŒ–çš„æ•°æ®æ‰ä¼šè§¦å‘é‡æ–°æ¸²æŸ“ã€‚</li><li><strong>ä¼˜åŒ–ç‚¹</strong>ï¼šé€šè¿‡ä¸¥æ ¼éµå¾ªä¸å¯å˜æ•°æ®çš„åŸåˆ™ï¼ŒRedux å¯ä»¥å¿«é€Ÿåœ°æ£€æŸ¥çŠ¶æ€æ˜¯å¦å‘ç”Ÿå˜åŒ–ï¼Œå¹¶ä»…æ›´æ–°ç›¸å…³ç»„ä»¶ï¼Œå‡å°‘äº†ä¸å¿…è¦çš„æ¸²æŸ“ã€‚</li></ul><h5 id="4-ä¸­é—´ä»¶ä¼˜åŒ–"><a href="#4-ä¸­é—´ä»¶ä¼˜åŒ–" class="headerlink" title="4. ä¸­é—´ä»¶ä¼˜åŒ–"></a>4. <strong>ä¸­é—´ä»¶ä¼˜åŒ–</strong></h5><ul><li><strong>Redux-thunk</strong> å’Œ <strong>Redux-saga</strong> ç­‰ä¸­é—´ä»¶å¯ä»¥ä¼˜åŒ–å¼‚æ­¥æ“ä½œçš„å¤„ç†æ–¹å¼ï¼Œå‡å°‘ä¸å¿…è¦çš„çŠ¶æ€æ›´æ–°å’Œæ•°æ®è¯·æ±‚ã€‚</li><li><strong>ä¼˜åŒ–ç‚¹</strong>ï¼šé€šè¿‡åˆç†è®¾è®¡ä¸­é—´ä»¶é€»è¾‘ï¼Œå¯ä»¥é¿å…é‡å¤çš„ API è¯·æ±‚æˆ–å¤æ‚çš„çŠ¶æ€å˜æ›´ï¼Œè¿›è€Œä¼˜åŒ–åº”ç”¨æ€§èƒ½ã€‚</li></ul><h5 id="5-ä½¿ç”¨-combineReducers-åˆ‡åˆ†-reducer"><a href="#5-ä½¿ç”¨-combineReducers-åˆ‡åˆ†-reducer" class="headerlink" title="5. ä½¿ç”¨ combineReducers åˆ‡åˆ† reducer"></a>5. <strong>ä½¿ç”¨ combineReducers åˆ‡åˆ† reducer</strong></h5><ul><li>Redux æ”¯æŒä½¿ç”¨ <code>combineReducers</code> å°†çŠ¶æ€åˆ†ç‰‡ç®¡ç†ï¼Œé¿å…æ¯æ¬¡çŠ¶æ€æ›´æ–°æ—¶æ•´ä¸ªçŠ¶æ€æ ‘éƒ½è¢«é‡æ–°è®¡ç®—ã€‚</li><li><strong>ä¼˜åŒ–ç‚¹</strong>ï¼šå°†çŠ¶æ€ç®¡ç†åˆ†ç¦»æˆå¤šä¸ªç‹¬ç«‹çš„ reducerï¼Œæ¯ä¸ª reducer åªè´Ÿè´£æ›´æ–°å®ƒè‡ªå·±ç®¡ç†çš„çŠ¶æ€ï¼Œè¿™æ ·å¯ä»¥ç¡®ä¿åº”ç”¨åªä¼šåœ¨çŠ¶æ€ç›¸å…³éƒ¨åˆ†å‘ç”Ÿå˜åŒ–æ—¶è§¦å‘æ›´æ–°ï¼Œè€Œä¸ä¼šå½±å“å…¶ä»–ä¸ç›¸å…³çš„çŠ¶æ€ã€‚</li></ul><h5 id="6-React-Redux-çš„-connect-å’Œ-useSelector"><a href="#6-React-Redux-çš„-connect-å’Œ-useSelector" class="headerlink" title="6. React-Redux çš„ connect å’Œ useSelector"></a>6. <strong>React-Redux çš„ <code>connect</code> å’Œ <code>useSelector</code></strong></h5><ul><li><strong>connect</strong> å’Œ <strong>useSelector</strong> æä¾›äº†åŸºäº Redux çŠ¶æ€çš„é«˜æ•ˆé€‰æ‹©å™¨æœºåˆ¶ã€‚<code>connect</code> ä½¿ç”¨äº† <code>shouldComponentUpdate</code> æ¥ä¼˜åŒ–ç»„ä»¶çš„é‡æ¸²æŸ“ï¼Œè€Œ <code>useSelector</code> ä¹Ÿæ”¯æŒé€šè¿‡æ¯”è¾ƒå‡½æ•°ï¼ˆequality functionï¼‰æ¥å†³å®šæ˜¯å¦é‡æ–°æ¸²æŸ“ç»„ä»¶ã€‚</li><li><strong>ä¼˜åŒ–ç‚¹</strong>ï¼šé€šè¿‡ <code>connect</code> å’Œ <code>useSelector</code> çš„æ­£ç¡®ä½¿ç”¨ï¼Œç»„ä»¶åªä¼šåœ¨å…¶å…³å¿ƒçš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶æ‰é‡æ–°æ¸²æŸ“ï¼Œå‡å°‘ä¸å¿…è¦çš„æ¸²æŸ“ã€‚</li></ul><h5 id="7-æ‰¹å¤„ç†ï¼ˆBatching-Updatesï¼‰"><a href="#7-æ‰¹å¤„ç†ï¼ˆBatching-Updatesï¼‰" class="headerlink" title="7. æ‰¹å¤„ç†ï¼ˆBatching Updatesï¼‰"></a>7. <strong>æ‰¹å¤„ç†ï¼ˆBatching Updatesï¼‰</strong></h5><ul><li><strong>Redux</strong> åœ¨æŸäº›æƒ…å†µä¸‹æ”¯æŒæ‰¹é‡æ›´æ–°çŠ¶æ€ï¼Œä»è€Œå‡å°‘å¤šæ¬¡ä¸å¿…è¦çš„æ¸²æŸ“ã€‚React-Redux è‡ªåŠ¨æ”¯æŒ React çš„æ‰¹å¤„ç†æ›´æ–°åŠŸèƒ½ï¼ˆbatchingï¼‰ï¼Œç¡®ä¿åœ¨ä¸€ä¸ªäº‹ä»¶å¾ªç¯ä¸­ï¼ŒçŠ¶æ€å˜åŒ–ä¼šè¢«æ‰¹å¤„ç†ï¼Œä»è€Œé¿å…å¤šæ¬¡é‡æ–°æ¸²æŸ“ã€‚</li><li><strong>ä¼˜åŒ–ç‚¹</strong>ï¼šæ‰¹å¤„ç†å¯ä»¥ç¡®ä¿åœ¨ä¸€æ¬¡çŠ¶æ€å˜åŒ–è¿‡ç¨‹ä¸­ï¼Œå¤šä¸ªç»„ä»¶çš„æ¸²æŸ“è¢«åˆå¹¶å¤„ç†ï¼Œå‡å°‘æ€§èƒ½å¼€é”€ã€‚</li></ul><h5 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h5><p>Redux æä¾›äº†å¾ˆå¤šä¼˜åŒ–å·¥å…·ï¼Œå¼€å‘è€…å¯ä»¥é€šè¿‡ä½¿ç”¨ <code>Reselect</code>ã€<code>Redux DevTools</code>ã€<code>Immutable æ•°æ®ç»“æ„</code>ã€ä¸­é—´ä»¶ã€<code>combineReducers</code>ã€ä»¥åŠ <code>React-Redux</code> æä¾›çš„ <code>connect</code> å’Œ <code>useSelector</code> ç­‰æœºåˆ¶ï¼Œè½»æ¾ä¼˜åŒ–åº”ç”¨çš„æ€§èƒ½ã€‚è€Œ <code>Context API + useReducer</code> åˆ™éœ€è¦æ‰‹åŠ¨å®ç°ç±»ä¼¼çš„ä¼˜åŒ–æœºåˆ¶ï¼Œå°¤å…¶æ˜¯åœ¨ç»„ä»¶é‡æ¸²æŸ“æ§åˆ¶å’Œå¤æ‚å¼‚æ­¥é€»è¾‘å¤„ç†ä¸Šï¼ŒRedux çš„ä¼˜åŒ–å·¥å…·æ›´åŠ æˆç†Ÿå’Œå¼€ç®±å³ç”¨ã€‚</p><h4 id="ï¼ˆ2ï¼‰Context-API-useReducer"><a href="#ï¼ˆ2ï¼‰Context-API-useReducer" class="headerlink" title="ï¼ˆ2ï¼‰Context API + useReducer"></a>ï¼ˆ2ï¼‰Context API + useReducer</h4><p><code>Context API + useReducer</code> ä¼˜åŒ–è¾ƒä¸ºå¤æ‚ï¼Œä¸»è¦åŸå› åœ¨äºå®ƒæ²¡æœ‰åƒ Redux é‚£æ ·å†…ç½®çš„ä¼˜åŒ–æœºåˆ¶å’Œå·¥å…·ï¼Œå¼€å‘è€…éœ€è¦æ‰‹åŠ¨å¤„ç†çŠ¶æ€ç®¡ç†å’Œæ€§èƒ½ä¼˜åŒ–çš„é—®é¢˜ã€‚ä»¥ä¸‹æ˜¯å…·ä½“åŸå› ï¼š</p><h5 id="1-Context-çš„å…¨å±€é‡æ¸²æŸ“"><a href="#1-Context-çš„å…¨å±€é‡æ¸²æŸ“" class="headerlink" title="1. Context çš„å…¨å±€é‡æ¸²æŸ“"></a>1. <strong>Context çš„å…¨å±€é‡æ¸²æŸ“</strong></h5><ul><li><strong>é—®é¢˜</strong>ï¼šContext API çš„ä¸€ä¸ªä¸»è¦é—®é¢˜æ˜¯ï¼Œå½“ä¸Šä¸‹æ–‡ï¼ˆContextï¼‰ä¸­çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰€æœ‰ä½¿ç”¨è¯¥ Context çš„ç»„ä»¶éƒ½ä¼šé‡æ–°æ¸²æŸ“ï¼Œå³ä½¿æŸäº›ç»„ä»¶å¹¶ä¸ä¾èµ–è¿™ä¸ªå˜åŒ–çš„æ•°æ®ã€‚è¿™å¯èƒ½å¯¼è‡´ä¸å¿…è¦çš„é‡æ¸²æŸ“ï¼Œå½±å“æ€§èƒ½ã€‚</li><li><strong>åŸå› </strong>ï¼šReact Context çš„è®¾è®¡æ˜¯ä¸ºäº†ç®€åŒ–è·¨ç»„ä»¶ä¼ é€’æ•°æ®ï¼Œä½†å®ƒæ²¡æœ‰å†…ç½®ç±»ä¼¼äº Redux çš„ç»†ç²’åº¦çŠ¶æ€æ›´æ–°æœºåˆ¶ã€‚ä»»ä½•çŠ¶æ€å˜åŒ–éƒ½ä¼šå½±å“ä½¿ç”¨è¯¥ Context çš„æ‰€æœ‰ç»„ä»¶ã€‚</li><li><strong>è§£å†³æ–¹æ³•</strong>ï¼šå¼€å‘è€…éœ€è¦æ‰‹åŠ¨é€šè¿‡åˆ†ç¦» Context æˆ–ä½¿ç”¨ <code>useMemo</code>ã€<code>useCallback</code> æ¥å‡å°‘ä¸å¿…è¦çš„é‡æ¸²æŸ“ã€‚è¿™å°±å¢åŠ äº†å¤æ‚æ€§ï¼Œç‰¹åˆ«æ˜¯åœ¨åº”ç”¨å˜å¾—åºå¤§æ—¶ï¼Œéœ€è¦æ‰‹åŠ¨è¿›è¡Œæ€§èƒ½ä¼˜åŒ–ã€‚</li></ul><h5 id="2-ç¼ºä¹åƒ-Reselect-è¿™æ ·çš„è®°å¿†åŒ–é€‰æ‹©å™¨"><a href="#2-ç¼ºä¹åƒ-Reselect-è¿™æ ·çš„è®°å¿†åŒ–é€‰æ‹©å™¨" class="headerlink" title="2. ç¼ºä¹åƒ Reselect è¿™æ ·çš„è®°å¿†åŒ–é€‰æ‹©å™¨"></a>2. <strong>ç¼ºä¹åƒ Reselect è¿™æ ·çš„è®°å¿†åŒ–é€‰æ‹©å™¨</strong></h5><ul><li><strong>é—®é¢˜</strong>ï¼š<code>useReducer</code> æ²¡æœ‰åƒ Redux çš„ Reselect è¿™æ ·æ–¹ä¾¿çš„é€‰æ‹©å™¨åº“ï¼Œå¼€å‘è€…éœ€è¦æ‰‹åŠ¨å®ç°é€‰æ‹©å™¨ï¼ˆselectorsï¼‰æ¥æå–å’Œå¤„ç†çŠ¶æ€ä¸­çš„æ•°æ®ï¼Œå¹¶è¿›è¡Œè®°å¿†åŒ–ä¼˜åŒ–ã€‚</li><li><strong>åŸå› </strong>ï¼šContext API å’Œ <code>useReducer</code> åªæ˜¯ React å†…ç½®çš„çŠ¶æ€ç®¡ç†æœºåˆ¶ï¼Œå®ƒä»¬å¹¶ä¸åŒ…å«å¯¹çŠ¶æ€è¯»å–æˆ–é€‰æ‹©é€»è¾‘çš„ä¼˜åŒ–ã€‚å¦‚æœéœ€è¦åŸºäºçŠ¶æ€çš„æŸäº›éƒ¨åˆ†è¿›è¡Œè®¡ç®—æˆ–å¤„ç†ï¼Œå¼€å‘è€…å¯èƒ½éœ€è¦è‡ªå·±ç¼–å†™è®°å¿†åŒ–é€»è¾‘ï¼Œè¿™ç›¸å¯¹ Redux æ¥è¯´æ›´åŠ å¤æ‚ã€‚</li><li><strong>è§£å†³æ–¹æ³•</strong>ï¼šå¼€å‘è€…å¯ä»¥å€ŸåŠ© React çš„ <code>useMemo</code> æ¥æ‰‹åŠ¨å®ç°è®°å¿†åŒ–é€‰æ‹©å™¨ï¼Œä½†è¿™ä»ç„¶éœ€è¦è‡ªè¡Œç¼–å†™å’Œç®¡ç†ã€‚</li></ul><h5 id="3-å¼‚æ­¥æ“ä½œå’Œä¸­é—´ä»¶çš„å¤„ç†å¤æ‚"><a href="#3-å¼‚æ­¥æ“ä½œå’Œä¸­é—´ä»¶çš„å¤„ç†å¤æ‚" class="headerlink" title="3. å¼‚æ­¥æ“ä½œå’Œä¸­é—´ä»¶çš„å¤„ç†å¤æ‚"></a>3. <strong>å¼‚æ­¥æ“ä½œå’Œä¸­é—´ä»¶çš„å¤„ç†å¤æ‚</strong></h5><ul><li><strong>é—®é¢˜</strong>ï¼š<code>useReducer</code> æ²¡æœ‰å†…ç½®çš„å¼‚æ­¥å¤„ç†æœºåˆ¶ï¼Œä¹Ÿæ²¡æœ‰åƒ Redux ä¸­çš„ <code>redux-thunk</code> æˆ– <code>redux-saga</code> è¿™æ ·çš„ä¸­é—´ä»¶ï¼Œå¼€å‘è€…éœ€è¦æ‰‹åŠ¨ç®¡ç†å¼‚æ­¥æ“ä½œçš„çŠ¶æ€ã€‚</li><li><strong>åŸå› </strong>ï¼š<code>useReducer</code> æ˜¯ä¸€ä¸ªåŒæ­¥çš„ reducer å‡½æ•°ï¼Œè®¾è®¡ä¸Šä¸æ”¯æŒå¤„ç†å¼‚æ­¥é€»è¾‘ã€‚ä¸ Redux ä¸­é€šè¿‡ä¸­é—´ä»¶è½»æ¾å¤„ç†å¼‚æ­¥çŠ¶æ€ä¸åŒï¼Œåœ¨ <code>useReducer</code> ä¸­ç®¡ç†å¼‚æ­¥æ“ä½œéœ€è¦é€šè¿‡å¤šä¸ª <code>useEffect</code> ç»“åˆçŠ¶æ€å¤„ç†ï¼Œè¿™ä¼šå¯¼è‡´ä»£ç å˜å¾—æ›´åŠ å¤æ‚ã€‚</li><li><strong>è§£å†³æ–¹æ³•</strong>ï¼šé€šå¸¸ï¼Œå¼€å‘è€…éœ€è¦å°†å¼‚æ­¥é€»è¾‘æ”¾å…¥ <code>useEffect</code> é’©å­ä¸­æ‰‹åŠ¨å¤„ç†ï¼Œæˆ–è€…ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“æ¥å¸®åŠ©ç®€åŒ–å¼‚æ­¥çŠ¶æ€ç®¡ç†ã€‚</li></ul><h5 id="4-å¤æ‚çŠ¶æ€æ‹†åˆ†ä¸ç®¡ç†"><a href="#4-å¤æ‚çŠ¶æ€æ‹†åˆ†ä¸ç®¡ç†" class="headerlink" title="4. å¤æ‚çŠ¶æ€æ‹†åˆ†ä¸ç®¡ç†"></a>4. <strong>å¤æ‚çŠ¶æ€æ‹†åˆ†ä¸ç®¡ç†</strong></h5><ul><li><strong>é—®é¢˜</strong>ï¼šå½“åº”ç”¨çš„çŠ¶æ€å˜å¾—å¤æ‚æ—¶ï¼ŒContext API + <code>useReducer</code> å¯èƒ½ä¼šæ˜¾å¾—ç¬¨é‡ã€‚å¯¹äºå¤æ‚çš„å…¨å±€çŠ¶æ€ç®¡ç†ï¼Œæ‹†åˆ†å’Œç»´æŠ¤å¤šä¸ª <code>useReducer</code> ä»¥åŠå¯¹åº”çš„ <code>Context</code> ä¼šå˜å¾—éš¾ä»¥ç»´æŠ¤ã€‚</li><li><strong>åŸå› </strong>ï¼š<code>useReducer</code> æ²¡æœ‰ç±»ä¼¼äº Redux çš„ <code>combineReducers</code> æ–¹æ³•æ¥è‡ªåŠ¨åˆ†ç‰‡ç®¡ç†ä¸åŒçš„çŠ¶æ€ã€‚å¼€å‘è€…éœ€è¦æ‰‹åŠ¨ç®¡ç†å¤šä¸ª <code>Context</code> å’Œ <code>Reducer</code>ï¼Œå¹¶å¤„ç†å®ƒä»¬ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œè¿™ä¼šè®©åº”ç”¨çš„å¤æ‚åº¦å¢åŠ ã€‚</li><li><strong>è§£å†³æ–¹æ³•</strong>ï¼šå¯ä»¥é€šè¿‡æ¨¡å—åŒ–æ‹†åˆ† <code>Reducer</code> å’Œ <code>Context</code>ï¼Œä½†è¿™éœ€è¦å¼€å‘è€…è‡ªè¡Œç®¡ç†æ¯ä¸ªéƒ¨åˆ†çš„çŠ¶æ€å’Œæ›´æ–°é€»è¾‘ï¼Œå¢åŠ äº†ç»´æŠ¤æˆæœ¬ã€‚</li></ul><h5 id="5-ç¼ºä¹è°ƒè¯•å’Œå¼€å‘å·¥å…·æ”¯æŒ"><a href="#5-ç¼ºä¹è°ƒè¯•å’Œå¼€å‘å·¥å…·æ”¯æŒ" class="headerlink" title="5. ç¼ºä¹è°ƒè¯•å’Œå¼€å‘å·¥å…·æ”¯æŒ"></a>5. <strong>ç¼ºä¹è°ƒè¯•å’Œå¼€å‘å·¥å…·æ”¯æŒ</strong></h5><ul><li><strong>é—®é¢˜</strong>ï¼š<code>Context API + useReducer</code> æ²¡æœ‰åƒ Redux DevTools è¿™æ ·å¼ºå¤§çš„è°ƒè¯•å·¥å…·ï¼Œå¼€å‘è€…è°ƒè¯•çŠ¶æ€æ›´æ–°å’Œæµè½¬çš„è¿‡ç¨‹æ›´åŠ å›°éš¾ã€‚</li><li><strong>åŸå› </strong>ï¼šRedux DevTools æä¾›äº†ä¸°å¯Œçš„åŠŸèƒ½ï¼Œå¦‚æ—¶é—´æ—…è¡Œã€action æ—¥å¿—ã€çŠ¶æ€å¿«ç…§ç­‰ã€‚è€Œ <code>Context API + useReducer</code> ç¼ºå°‘è¿™æ ·çš„å·¥å…·æ”¯æŒï¼Œè°ƒè¯•çŠ¶æ€æµè½¬æ—¶åªèƒ½ä¾èµ–å¸¸è§„çš„ React å¼€å‘è€…å·¥å…·ï¼Œè°ƒè¯•æ•ˆç‡è¾ƒä½ã€‚</li><li><strong>è§£å†³æ–¹æ³•</strong>ï¼šå¼€å‘è€…å¯ä»¥é€šè¿‡æ‰‹åŠ¨è°ƒè¯•å’Œæ·»åŠ æ—¥å¿—çš„æ–¹å¼è§£å†³ï¼Œä½†è¿™æ¯”ä½¿ç”¨ Redux DevTools ç›´æ¥æŸ¥çœ‹çŠ¶æ€å˜åŒ–è¦å¤æ‚å¾—å¤šã€‚</li></ul><h5 id="æ€»ç»“-1"><a href="#æ€»ç»“-1" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h5><p><code>Context API + useReducer</code> ä¼˜åŒ–è¾ƒä¸ºå¤æ‚ï¼Œä¸»è¦æ˜¯å› ä¸ºå®ƒç¼ºä¹è‡ªåŠ¨åŒ–çš„æ€§èƒ½ä¼˜åŒ–å·¥å…·å’Œæœºåˆ¶ã€‚Context å…¨å±€çŠ¶æ€å˜åŒ–æ—¶ä¼šå¯¼è‡´æ‰€æœ‰è®¢é˜…ç»„ä»¶é‡æ¸²æŸ“ï¼Œæ‰‹åŠ¨ç®¡ç†çŠ¶æ€æ‹†åˆ†å’Œå¼‚æ­¥é€»è¾‘ä¹Ÿç›¸å¯¹ç¹çã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼ŒRedux æä¾›äº†å¾ˆå¤šå¼€ç®±å³ç”¨çš„ä¼˜åŒ–å·¥å…·å’Œä¸­é—´ä»¶ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘è€…æ›´è½»æ¾åœ°ç®¡ç†å’Œä¼˜åŒ–çŠ¶æ€æµè½¬ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>reactè¯¾ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>react</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>reactè¯¾ç¨‹11-Worldwise</title>
    <link href="/2024/08/29/react%E8%AF%BE%E7%A8%8B11-Worldwise/"/>
    <url>/2024/08/29/react%E8%AF%BE%E7%A8%8B11-Worldwise/</url>
    
    <content type="html"><![CDATA[<p>æœ¬æ¬¡è¯¾å»ºç«‹äº†æ›´è´´è¿‘ç°å®çš„å•é¡µappï¼ˆä½†æ˜¯ä»ç„¶æ˜¯è°ƒç”¨äº†è™šå‡çš„APIï¼‰ï¼Œç¬¬ä¸€æ¬¡ä½¿ç”¨åˆ°Routingï¼ˆè·¯ç”±ï¼‰ã€‚</p><span id="more"></span><p>é€šè¿‡ä»£ç æ®µå¯ä»¥ç”¨csmç›´æ¥å¯¼å…¥ç›¸åº”css moduleï¼Œå¾ˆæ–¹ä¾¿å‘€</p><h3 id="ä¸€ã€åŸºç¡€çŸ¥è¯†"><a href="#ä¸€ã€åŸºç¡€çŸ¥è¯†" class="headerlink" title="ä¸€ã€åŸºç¡€çŸ¥è¯†"></a>ä¸€ã€åŸºç¡€çŸ¥è¯†</h3><h4 id="ï¼ˆ1ï¼‰Routing"><a href="#ï¼ˆ1ï¼‰Routing" class="headerlink" title="ï¼ˆ1ï¼‰Routing"></a>ï¼ˆ1ï¼‰Routing</h4><p>åœ¨Reactåº”ç”¨ä¸­ï¼Œ<strong>è·¯ç”±ï¼ˆRoutingï¼‰</strong> æ˜¯ç®¡ç†ä¸åŒé¡µé¢æˆ–è§†å›¾å¯¼èˆªçš„å…³é”®æœºåˆ¶ã€‚å®ƒå…è®¸ç”¨æˆ·é€šè¿‡æ›´æ”¹URLæ¥è®¿é—®åº”ç”¨ä¸­çš„ä¸åŒéƒ¨åˆ†ï¼Œè€Œæ— éœ€é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢ï¼Œè¿™åœ¨æ„å»ºå•é¡µåº”ç”¨ï¼ˆSPAï¼‰æ—¶å°¤ä¸ºé‡è¦ã€‚æ­¤å¤–ï¼Œ<strong>Router</strong> é€šå¸¸æŒ‡çš„æ˜¯å®ç°è·¯ç”±åŠŸèƒ½çš„å…·ä½“ç»„ä»¶æˆ–å·¥å…·ï¼Œä¸¤è€…è™½ç›¸å…³ä½†æœ‰æ‰€åŒºåˆ«ã€‚</p><h5 id="1ã€Routingçš„ä½œç”¨"><a href="#1ã€Routingçš„ä½œç”¨" class="headerlink" title="1ã€Routingçš„ä½œç”¨"></a>1ã€Routingçš„ä½œç”¨</h5><hr><ol><li><p><strong>é¡µé¢å¯¼èˆªç®¡ç†</strong></p><ul><li><p>å¤šè§†å›¾ç®¡ç†ï¼šåœ¨ä¸€ä¸ªåº”ç”¨ä¸­ï¼Œä¸åŒçš„URLå¯¹åº”ä¸åŒçš„ç»„ä»¶æˆ–é¡µé¢ã€‚ä¾‹å¦‚ï¼Œ<code>/home</code> æ˜¾ç¤ºä¸»é¡µï¼Œ<code>/about</code> æ˜¾ç¤ºå…³äºé¡µé¢ã€‚</p></li><li><p>ç”¨æˆ·ä½“éªŒä¼˜åŒ–ï¼šé€šè¿‡è·¯ç”±ï¼Œç”¨æˆ·å¯ä»¥åœ¨åº”ç”¨å†…æµç•…åœ°å¯¼èˆªï¼Œè€Œæ— éœ€é¡µé¢åˆ·æ–°ï¼Œæå‡å“åº”é€Ÿåº¦å’Œç”¨æˆ·ä½“éªŒã€‚</p></li></ul></li><li><p><strong>å•é¡µåº”ç”¨ï¼ˆSPAï¼‰çš„æ ¸å¿ƒ</strong></p><ul><li><p>æ— éœ€åˆ·æ–°é¡µé¢ï¼šSPAé€šè¿‡è·¯ç”±å®ç°ä¸åŒè§†å›¾çš„åˆ‡æ¢ï¼Œé¿å…äº†ä¼ ç»Ÿå¤šé¡µåº”ç”¨é¢‘ç¹çš„é¡µé¢åˆ·æ–°ã€‚</p></li><li><p>çŠ¶æ€ä¿æŒï¼šåœ¨SPAä¸­ï¼Œåº”ç”¨çš„çŠ¶æ€ï¼ˆå¦‚ç”¨æˆ·ç™»å½•ä¿¡æ¯ï¼‰å¯ä»¥åœ¨ä¸åŒè·¯ç”±é—´ä¿æŒï¼Œä¸ä¼šå› é¡µé¢åˆ·æ–°è€Œä¸¢å¤±ã€‚</p></li></ul></li><li><p><strong>åŠ¨æ€å†…å®¹åŠ è½½</strong></p><ul><li>å‚æ•°åŒ–è·¯ç”±ï¼šå…è®¸åœ¨URLä¸­åŒ…å«åŠ¨æ€å‚æ•°ï¼Œå¦‚ <code>/user/:id</code>ï¼Œæ ¹æ®ä¸åŒçš„<code>id</code>åŠ è½½ä¸åŒçš„ç”¨æˆ·ä¿¡æ¯ã€‚</li><li>åµŒå¥—è·¯ç”±ï¼šæ”¯æŒåœ¨ä¸€ä¸ªè·¯ç”±å†…åµŒå¥—å…¶ä»–è·¯ç”±ï¼Œå®ç°å¤æ‚çš„é¡µé¢å¸ƒå±€å’Œå¯¼èˆªç»“æ„ã€‚</li></ul></li><li><p><strong>è·¯ç”±å®ˆå«ä¸æƒé™æ§åˆ¶</strong></p><ul><li><p>ä¿æŠ¤è·¯ç”±ï¼šæ ¹æ®ç”¨æˆ·çš„è®¤è¯çŠ¶æ€æˆ–æƒé™ï¼Œæ§åˆ¶ç”¨æˆ·æ˜¯å¦å¯ä»¥è®¿é—®æŸäº›è·¯ç”±ã€‚</p></li><li><p>é‡å®šå‘ï¼šåœ¨ç‰¹å®šæ¡ä»¶ä¸‹ï¼Œå°†ç”¨æˆ·é‡å®šå‘åˆ°å…¶ä»–é¡µé¢ï¼Œä¾‹å¦‚æœªç™»å½•ç”¨æˆ·é‡å®šå‘åˆ°ç™»å½•é¡µã€‚</p></li></ul></li><li><p><strong>SEOä¼˜åŒ–</strong></p><ul><li>æœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰ï¼šç»“åˆè·¯ç”±ï¼Œèƒ½å¤Ÿå®ç°æ›´å¥½çš„SEOä¼˜åŒ–ï¼Œä½¿æœç´¢å¼•æ“èƒ½å¤Ÿæ­£ç¡®æŠ“å–é¡µé¢å†…å®¹ã€‚</li></ul></li></ol><h5 id="2ã€Routingä¸Routerçš„åŒºåˆ«"><a href="#2ã€Routingä¸Routerçš„åŒºåˆ«" class="headerlink" title="2ã€Routingä¸Routerçš„åŒºåˆ«"></a>2ã€Routingä¸Routerçš„åŒºåˆ«</h5><hr><p>1.<strong>Routingï¼ˆè·¯ç”±ï¼‰</strong></p><ul><li>æ¦‚å¿µå±‚é¢ï¼šæŒ‡çš„æ˜¯åº”ç”¨ä¸­ä¸åŒè·¯å¾„ä¸ç»„ä»¶ä¹‹é—´çš„æ˜ å°„å…³ç³»ï¼Œä»¥åŠå¯¼èˆªå’Œé¡µé¢åˆ‡æ¢çš„æ•´ä½“æœºåˆ¶ã€‚</li><li>åŠŸèƒ½å±‚é¢ï¼šåŒ…æ‹¬å®šä¹‰è·¯å¾„ã€ç®¡ç†å¯¼èˆªã€å¤„ç†åŠ¨æ€å‚æ•°ã€åµŒå¥—ç»“æ„ç­‰ã€‚</li></ul><p>2.<strong>Routerï¼ˆè·¯ç”±å™¨ï¼‰</strong></p><ul><li>å®ç°å±‚é¢ï¼šæ˜¯å…·ä½“å®ç°RoutingåŠŸèƒ½çš„ç»„ä»¶æˆ–å·¥å…·ã€‚åœ¨Reactä¸­ï¼Œé€šå¸¸æŒ‡çš„æ˜¯åƒ<code>BrowserRouter</code>ã€<code>HashRouter</code>è¿™æ ·çš„ç»„ä»¶ã€‚</li><li>èŒè´£ï¼šç›‘å¬URLçš„å˜åŒ–ï¼ŒåŒ¹é…è·¯ç”±é…ç½®ï¼Œå¹¶æ¸²æŸ“å¯¹åº”çš„ç»„ä»¶ã€‚</li></ul><h4 id="ï¼ˆ2ï¼‰SPAï¼ˆå•é¡µåº”ç”¨ï¼‰"><a href="#ï¼ˆ2ï¼‰SPAï¼ˆå•é¡µåº”ç”¨ï¼‰" class="headerlink" title="ï¼ˆ2ï¼‰SPAï¼ˆå•é¡µåº”ç”¨ï¼‰"></a>ï¼ˆ2ï¼‰SPAï¼ˆå•é¡µåº”ç”¨ï¼‰</h4><p><strong>SPAï¼ˆSingle Page Applicationï¼Œå•é¡µåº”ç”¨ï¼‰</strong> æ˜¯ä¸€ç§ç°ä»£Webåº”ç”¨ç¨‹åºçš„å¼€å‘æ¨¡å¼ï¼Œç‰¹ç‚¹æ˜¯æ•´ä¸ªåº”ç”¨åªåŒ…å«ä¸€ä¸ªä¸»é¡µé¢ï¼Œé€šè¿‡åŠ¨æ€åŠ è½½å†…å®¹æ¥æ›´æ–°é¡µé¢éƒ¨åˆ†å†…å®¹ï¼Œè€Œä¸éœ€è¦å®Œå…¨åˆ·æ–°é¡µé¢ã€‚è¿™ç§æ–¹å¼ä¸ºç”¨æˆ·æä¾›äº†æ›´åŠ æµç•…å’Œæ¥è¿‘æ¡Œé¢åº”ç”¨çš„ç”¨æˆ·ä½“éªŒã€‚SPAåº”ç”¨åœ¨ç”¨æˆ·è®¿é—®æ—¶åªåŠ è½½ä¸€æ¬¡å®Œæ•´çš„HTMLã€CSSã€JavaScriptç­‰èµ„æºï¼Œä¹‹åçš„é¡µé¢æ›´æ–°é€šè¿‡AJAXè¯·æ±‚æˆ–å…¶ä»–æ‰‹æ®µå¼‚æ­¥åŠ è½½æ•°æ®ï¼Œç„¶ååŠ¨æ€æ›´æ–°é¡µé¢å†…å®¹ã€‚è¿™ç§æ–¹å¼é¿å…äº†ä¼ ç»Ÿå¤šé¡µåº”ç”¨ç¨‹åºï¼ˆMPAï¼‰æ¯æ¬¡å¯¼èˆªæ—¶éƒ½ä¼šé‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢çš„è¿‡ç¨‹ã€‚</p><h5 id="1ã€SPAçš„ç‰¹ç‚¹"><a href="#1ã€SPAçš„ç‰¹ç‚¹" class="headerlink" title="1ã€SPAçš„ç‰¹ç‚¹"></a>1ã€SPAçš„ç‰¹ç‚¹</h5><hr><p>1ï¼‰<strong>å•ä¸ªHTMLé¡µé¢</strong></p><ul><li>å•ä¸€å…¥å£ï¼šæ•´ä¸ªåº”ç”¨åªæœ‰ä¸€ä¸ªHTMLæ–‡ä»¶ï¼Œæ‰€æœ‰çš„è§†å›¾å’Œé¡µé¢éƒ½é€šè¿‡JavaScriptåŠ¨æ€æ¸²æŸ“ã€‚</li><li>åŠ¨æ€å†…å®¹æ›´æ–°ï¼šé¡µé¢çš„åˆ‡æ¢å’Œå†…å®¹æ›´æ–°ä¸ä¼šé‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢ï¼Œè€Œæ˜¯é€šè¿‡å±€éƒ¨æ›´æ–°å®ç°ã€‚</li></ul><p>2ï¼‰<strong>æµç•…çš„ç”¨æˆ·ä½“éªŒ</strong></p><ul><li>æ— åˆ·æ–°é¡µé¢åˆ‡æ¢ï¼šç”¨æˆ·ç‚¹å‡»é“¾æ¥åï¼Œä¸ä¼šçœ‹åˆ°ä¼ ç»Ÿé¡µé¢åˆ·æ–°å¸¦æ¥çš„ç™½å±æˆ–åŠ è½½ç­‰å¾…ï¼Œè€Œæ˜¯ç«‹å³å‘ˆç°æ–°çš„å†…å®¹ã€‚</li><li>æ›´å¿«çš„å“åº”é€Ÿåº¦ï¼šç”±äºä¸éœ€è¦é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢ï¼Œé¡µé¢åˆ‡æ¢é€Ÿåº¦æ›´å¿«ï¼Œç”¨æˆ·ä½“éªŒæ›´ä½³ã€‚</li></ul><p>3ï¼‰<strong>å®¢æˆ·ç«¯è·¯ç”±</strong></p><ul><li>å‰ç«¯ç®¡ç†è·¯ç”±ï¼šä½¿ç”¨å‰ç«¯è·¯ç”±åº“ï¼ˆå¦‚React Routerã€Vue Routerç­‰ï¼‰æ¥ç®¡ç†ä¸åŒURLä¸ç»„ä»¶ä¹‹é—´çš„æ˜ å°„å…³ç³»ã€‚</li><li>åŠ¨æ€è·¯å¾„æ˜ å°„ï¼šå®¢æˆ·ç«¯è·¯ç”±å¯ä»¥æ ¹æ®URLåŠ¨æ€åŠ è½½ä¸åŒçš„é¡µé¢æˆ–ç»„ä»¶å†…å®¹ã€‚</li></ul><p>4ï¼‰<strong>ä¸°å¯Œçš„äº¤äº’</strong></p><ul><li>æ¥è¿‘æ¡Œé¢åº”ç”¨çš„ä½“éªŒï¼šç”±äºé¡µé¢ä¸éœ€è¦é¢‘ç¹åˆ·æ–°ï¼ŒSPAå¯ä»¥å®ç°æ›´å¤æ‚çš„äº¤äº’å’ŒåŠ¨ç”»æ•ˆæœï¼Œä½¿å…¶æ›´æ¥è¿‘æ¡Œé¢åº”ç”¨çš„ä½¿ç”¨ä½“éªŒã€‚</li><li>å³æ—¶åé¦ˆï¼šç”¨æˆ·æ“ä½œçš„ç»“æœå¯ä»¥å³æ—¶åœ¨é¡µé¢ä¸Šæ˜¾ç¤ºï¼Œæ— éœ€ç­‰å¾…é¡µé¢é‡æ–°åŠ è½½ã€‚</li></ul><p>5ï¼‰<strong>æ•°æ®äº¤äº’å’ŒçŠ¶æ€ç®¡ç†</strong></p><ul><li>AJAXè¯·æ±‚ï¼šä½¿ç”¨AJAXæˆ–Fetch APIæ¥ä¸æœåŠ¡å™¨è¿›è¡Œæ•°æ®äº¤äº’ï¼ŒåŠ¨æ€åŠ è½½æ•°æ®å¹¶æ›´æ–°è§†å›¾ã€‚</li><li>å‰ç«¯çŠ¶æ€ç®¡ç†ï¼šé€šè¿‡Reduxã€Vuexç­‰çŠ¶æ€ç®¡ç†å·¥å…·æ¥ç®¡ç†åº”ç”¨ä¸­çš„å…¨å±€çŠ¶æ€ï¼Œä¿æŒæ•°æ®çš„ä¸€è‡´æ€§å’ŒåŒæ­¥æ€§ã€‚</li></ul><p>6ï¼‰<strong>SEOæŒ‘æˆ˜</strong></p><ul><li>é»˜è®¤å¯¹æœç´¢å¼•æ“ä¸å‹å¥½ï¼šç”±äºå†…å®¹æ˜¯é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½çš„ï¼Œæœç´¢å¼•æ“çˆ¬è™«å¯èƒ½æ— æ³•æŠ“å–åˆ°é¡µé¢å†…å®¹ï¼Œå½±å“SEOã€‚</li><li>è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨æœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰æˆ–é¢„æ¸²æŸ“æŠ€æœ¯ï¼Œå¦‚Next.jsï¼ˆç”¨äºReactï¼‰å’ŒNuxt.jsï¼ˆç”¨äºVueï¼‰ç­‰æ¥æ”¹å–„SEOé—®é¢˜ã€‚</li></ul><p>7ï¼‰<strong>æ›´é«˜çš„åˆæ¬¡åŠ è½½æ—¶é—´</strong></p><ul><li>åˆæ¬¡åŠ è½½èµ„æºè¾ƒå¤šï¼šç”±äºæ•´ä¸ªåº”ç”¨æ‰€éœ€çš„èµ„æºï¼ˆåŒ…æ‹¬æ‰€æœ‰é¡µé¢çš„JavaScriptå’ŒCSSï¼‰éƒ½åœ¨ç¬¬ä¸€æ¬¡è®¿é—®æ—¶åŠ è½½ï¼Œå¯èƒ½å¯¼è‡´åˆæ¬¡åŠ è½½æ—¶é—´è¾ƒé•¿ã€‚</li><li>ä¼˜åŒ–æ‰‹æ®µï¼šä½¿ç”¨ä»£ç åˆ†å‰²ï¼ˆCode Splittingï¼‰ã€æ‡’åŠ è½½ï¼ˆLazy Loadingï¼‰å’Œç¼“å­˜ï¼ˆCachingï¼‰ç­‰æŠ€æœ¯æ¥ä¼˜åŒ–åŠ è½½æ€§èƒ½ã€‚</li></ul><h5 id="2ã€SPAçš„å·¥ä½œåŸç†"><a href="#2ã€SPAçš„å·¥ä½œåŸç†" class="headerlink" title="2ã€SPAçš„å·¥ä½œåŸç†"></a>2ã€SPAçš„å·¥ä½œåŸç†</h5><hr><p>1ï¼‰<strong>åˆæ¬¡åŠ è½½</strong></p><ul><li>ç”¨æˆ·è®¿é—®SPAæ—¶ï¼ŒæœåŠ¡å™¨ä¼šè¿”å›ä¸€ä¸ªå®Œæ•´çš„HTMLé¡µé¢ï¼Œè¯¥é¡µé¢ä¸­åŒ…å«äº†æ‰€æœ‰å¿…è¦çš„CSSå’ŒJavaScriptæ–‡ä»¶ã€‚</li></ul><p>2ï¼‰<strong>è·¯ç”±ç®¡ç†</strong></p><ul><li>SPAçš„å®¢æˆ·ç«¯è·¯ç”±ä¼šç›‘å¬URLå˜åŒ–ï¼Œå¹¶æ ¹æ®è·¯ç”±è§„åˆ™å†³å®šåŠ è½½å’Œæ¸²æŸ“å“ªä¸ªç»„ä»¶æˆ–é¡µé¢ï¼Œè€Œä¸æ˜¯é‡æ–°è¯·æ±‚æœåŠ¡å™¨çš„HTMLé¡µé¢ã€‚</li></ul><p>3ï¼‰<strong>æ•°æ®è¯·æ±‚</strong></p><ul><li>é¡µé¢å†…å®¹çš„æ›´æ–°é€šå¸¸é€šè¿‡AJAXè¯·æ±‚ä»æœåŠ¡å™¨è·å–æ•°æ®ï¼Œç„¶åé€šè¿‡JavaScriptåœ¨å‰ç«¯æ›´æ–°é¡µé¢éƒ¨åˆ†å†…å®¹ã€‚</li></ul><p>4ï¼‰<strong>çŠ¶æ€ç®¡ç†</strong></p><ul><li>ä½¿ç”¨å‰ç«¯çš„çŠ¶æ€ç®¡ç†å·¥å…·ï¼ˆå¦‚Reduxã€Vuexï¼‰æ¥ç®¡ç†åº”ç”¨çš„å…¨å±€çŠ¶æ€ï¼Œç¡®ä¿é¡µé¢é—´çš„æ•°æ®åŒæ­¥ã€‚</li></ul><h5 id="3ã€SPAçš„ä¼˜ç¼ºç‚¹"><a href="#3ã€SPAçš„ä¼˜ç¼ºç‚¹" class="headerlink" title="3ã€SPAçš„ä¼˜ç¼ºç‚¹"></a>3ã€SPAçš„ä¼˜ç¼ºç‚¹</h5><hr><p><strong>ä¼˜ç‚¹ï¼š</strong></p><ul><li><strong>ç”¨æˆ·ä½“éªŒæµç•…</strong>ï¼šæ— åˆ·æ–°é¡µé¢åˆ‡æ¢ï¼Œä½“éªŒæ¥è¿‘æ¡Œé¢åº”ç”¨ã€‚</li><li><strong>æ€§èƒ½ä¼˜åŠ¿</strong>ï¼šé€šè¿‡å±€éƒ¨æ›´æ–°é¡µé¢å†…å®¹ï¼Œå‡å°‘äº†ä¸å¿…è¦çš„èµ„æºåŠ è½½å’Œé¡µé¢åˆ·æ–°ã€‚</li><li><strong>æ›´æ˜“ç»´æŠ¤</strong>ï¼šå‰åç«¯åˆ†ç¦»ï¼Œå‰ç«¯ä»£ç æ›´æ¨¡å—åŒ–ã€æ›´å®¹æ˜“ç»´æŠ¤ã€‚</li></ul><p><strong>ç¼ºç‚¹ï¼š</strong></p><ul><li><strong>SEOé—®é¢˜</strong>ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œæœç´¢å¼•æ“å¯èƒ½æ— æ³•ç´¢å¼•SPAçš„åŠ¨æ€å†…å®¹ã€‚</li><li><strong>é¦–å±åŠ è½½æ…¢</strong>ï¼šåˆæ¬¡åŠ è½½æ—¶éœ€è¦åŠ è½½è¾ƒå¤šèµ„æºï¼Œå¯èƒ½å¯¼è‡´é¡µé¢åŠ è½½æ—¶é—´è¾ƒé•¿ã€‚</li><li><strong>å¼€å‘å¤æ‚åº¦é«˜</strong>ï¼šå‰ç«¯éœ€è¦å¤„ç†æ›´å¤šé€»è¾‘ï¼Œå¼€å‘è¿‡ç¨‹ä¸­éœ€è¦è€ƒè™‘è·¯ç”±ã€çŠ¶æ€ç®¡ç†ã€æ€§èƒ½ä¼˜åŒ–ç­‰å¤šä¸ªæ–¹é¢ã€‚</li></ul><h5 id="4ã€SPAçš„å¸¸è§åº”ç”¨åœºæ™¯"><a href="#4ã€SPAçš„å¸¸è§åº”ç”¨åœºæ™¯" class="headerlink" title="4ã€SPAçš„å¸¸è§åº”ç”¨åœºæ™¯"></a>4ã€SPAçš„å¸¸è§åº”ç”¨åœºæ™¯</h5><hr><p>SPAé€‚ç”¨äºéœ€è¦æä¾›ä¸°å¯Œäº¤äº’ã€æµç•…ç”¨æˆ·ä½“éªŒçš„åº”ç”¨ï¼Œä¾‹å¦‚ï¼š</p><ul><li><strong>ç¤¾äº¤åª’ä½“å¹³å°</strong>ï¼šå¦‚Facebookã€Twitterç­‰ï¼Œç”¨æˆ·é¢‘ç¹åˆ‡æ¢é¡µé¢ï¼Œä½†ä¸å¸Œæœ›çœ‹åˆ°é¡µé¢åˆ·æ–°ã€‚</li><li><strong>ç®¡ç†åå°ç³»ç»Ÿ</strong>ï¼šå¦‚æ•°æ®ç®¡ç†ç³»ç»Ÿã€ä»ªè¡¨ç›˜ç­‰ï¼Œç”¨æˆ·éœ€è¦é¢‘ç¹æ“ä½œå’ŒæŸ¥çœ‹ä¸åŒçš„æ•°æ®è§†å›¾ã€‚</li><li><strong>åœ¨çº¿æ–‡æ¡£ç¼–è¾‘</strong>ï¼šå¦‚Google Docsï¼Œç”¨æˆ·éœ€è¦å®æ—¶ç¼–è¾‘æ–‡æ¡£ï¼Œä¸”å¸Œæœ›æ“ä½œä½“éªŒæµç•…ã€‚</li><li><strong>ç”µå­å•†åŠ¡å¹³å°</strong>ï¼šå¦‚äºšé©¬é€Šçš„å•†å“æµè§ˆå’Œè´­ç‰©ä½“éªŒï¼Œéœ€åœ¨ä¸åŒå•†å“é¡µé¢é—´å¿«é€Ÿåˆ‡æ¢ã€‚</li></ul><h4 id="ï¼ˆ3ï¼‰CSS-Modules"><a href="#ï¼ˆ3ï¼‰CSS-Modules" class="headerlink" title="ï¼ˆ3ï¼‰CSS Modules"></a>ï¼ˆ3ï¼‰CSS Modules</h4><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240829105931940.png" alt="image-20240829105931940"></p><p>viteå·²é¢„å…ˆä¸‹è½½äº†è¿™ä¸ªåŒ…ä¸ç”¨è‡ªå·±ä¸‹è½½å“ˆå“ˆå“ˆå¼€å¿ƒã€‚</p><h5 id="1ã€å¦‚ä½•è§£å†³å‘½åå†²çªï¼Ÿ"><a href="#1ã€å¦‚ä½•è§£å†³å‘½åå†²çªï¼Ÿ" class="headerlink" title="1ã€å¦‚ä½•è§£å†³å‘½åå†²çªï¼Ÿ"></a>1ã€å¦‚ä½•è§£å†³å‘½åå†²çªï¼Ÿ</h5><hr><p>åœ¨ä½¿ç”¨CSS Moduleæ—¶ï¼ŒCSSç±»åçš„ä½œç”¨åŸŸè¢«é™åˆ¶åœ¨å¼•å…¥è¯¥CSSæ–‡ä»¶çš„ç»„ä»¶å†…éƒ¨ã€‚è¿™æ ·ï¼Œå®šä¹‰åœ¨ä¸åŒç»„ä»¶ä¸­çš„ç›¸åŒç±»åä¸ä¼šäº’ç›¸å¹²æ‰°ã€‚</p><p>CSS Moduleä¼šæ ¹æ®ç±»åã€æ–‡ä»¶è·¯å¾„ã€æ–‡ä»¶åç­‰ä¿¡æ¯ç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„ç±»åï¼Œè¿™ä¸ªç±»ååœ¨å…¨å±€èŒƒå›´å†…æ˜¯å”¯ä¸€çš„ï¼Œä»è€Œé¿å…äº†å‘½åå†²çªã€‚</p><h5 id="2ã€ä½¿ç”¨æ­¥éª¤ï¼Ÿ"><a href="#2ã€ä½¿ç”¨æ­¥éª¤ï¼Ÿ" class="headerlink" title="2ã€ä½¿ç”¨æ­¥éª¤ï¼Ÿ"></a>2ã€ä½¿ç”¨æ­¥éª¤ï¼Ÿ</h5><hr><p><strong>åˆ›å»º CSS æ–‡ä»¶</strong>ï¼š åˆ›å»ºä¸€ä¸ªå¸¦æœ‰æ¨¡å—åŒ–å‘½åçš„CSSæ–‡ä»¶ï¼Œé€šå¸¸å‘½åä¸º<code>ComponentName.module.css</code>ã€‚</p><p><strong>å¯¼å…¥ CSS Module</strong>ï¼š åœ¨å¯¹åº”çš„ç»„ä»¶æ–‡ä»¶ä¸­å¯¼å…¥è¿™ä¸ªCSSæ–‡ä»¶ï¼Œå¹¶ä½¿ç”¨å®ƒæä¾›çš„ç±»åã€‚ä¾‹å¦‚<code>import styles from &#39;./Button.module.css&#39;;</code></p><p><strong>ç”Ÿæˆå”¯ä¸€ç±»å</strong>ï¼š ä½¿ç”¨ <code>styles.button</code> æ—¶ï¼Œç¼–è¯‘å™¨ä¼šå°† <code>.button</code> ç±»åè½¬æ¢ä¸ºä¸€ä¸ªå…¨å±€å”¯ä¸€çš„ç±»åï¼Œå¦‚ <code>.Button_button__3d2s4</code>ï¼Œä»è€Œé¿å…å†²çªã€‚</p><h5 id="3ã€ä¼˜ç‚¹ï¼Ÿ"><a href="#3ã€ä¼˜ç‚¹ï¼Ÿ" class="headerlink" title="3ã€ä¼˜ç‚¹ï¼Ÿ"></a>3ã€ä¼˜ç‚¹ï¼Ÿ</h5><hr><p><strong>é˜²æ­¢ç±»åå†²çª</strong>ï¼šä¸åŒç»„ä»¶çš„ç›¸åŒç±»ååœ¨ä½¿ç”¨CSS Moduleåä¼šç”Ÿæˆä¸åŒçš„å…¨å±€ç±»åï¼Œå®Œå…¨é¿å…å†²çªé—®é¢˜ã€‚</p><p><strong>æé«˜ä»£ç å¯ç»´æŠ¤æ€§</strong>ï¼šå¼€å‘è€…ä¸éœ€è¦æ‹…å¿ƒç±»åå‘½åå†²çªï¼Œèƒ½å¤Ÿä¸“æ³¨äºç»„ä»¶çš„å¼€å‘ã€‚</p><p><strong>ç®€åŒ–CSSç®¡ç†</strong>ï¼šç”±äºCSS Moduleçš„å±€éƒ¨ä½œç”¨åŸŸï¼Œå¼€å‘è€…å¯ä»¥ä½¿ç”¨ç®€çŸ­ä¸”æ˜“è¯»çš„ç±»åï¼Œè€Œä¸ç”¨æ‹…å¿ƒå…¨å±€å‘½åé—®é¢˜ã€‚</p><h3 id="äºŒã€ä»£ç æ„å»ºè¿‡ç¨‹"><a href="#äºŒã€ä»£ç æ„å»ºè¿‡ç¨‹" class="headerlink" title="äºŒã€ä»£ç æ„å»ºè¿‡ç¨‹"></a>äºŒã€ä»£ç æ„å»ºè¿‡ç¨‹</h3><h4 id="ï¼ˆ1ï¼‰å®ç°å•é¡µè¿æ¥ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡"><a href="#ï¼ˆ1ï¼‰å®ç°å•é¡µè¿æ¥ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡" class="headerlink" title="ï¼ˆ1ï¼‰å®ç°å•é¡µè¿æ¥ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡"></a>ï¼ˆ1ï¼‰å®ç°å•é¡µè¿æ¥ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡</h4><ul><li>æ–°å»ºä¸€ä¸ªpagesæ–‡ä»¶å¤¹å­˜å‚¨ä¸åŒç•Œé¢çš„jsxï¼Œä½¿ç”¨ä»¥ä¸‹ç»“æ„ä»£ç å¯¼å…¥APP.jsx</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;<span class="hljs-title class_">BrowserRouter</span>&gt;<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Routes</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">&quot;/&quot;</span> <span class="hljs-attr">element</span>=<span class="hljs-string">&#123;</span>&lt;<span class="hljs-attr">Homepage</span> /&gt;</span>&#125; /&gt;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">Routes</span>&gt;</span></span><br>&lt;/<span class="hljs-title class_">BrowserRouter</span>&gt;<br></code></pre></td></tr></table></figure><ul><li>å»ºç«‹è¿æ¥ï¼Œä¸ä½¿ç”¨<code>&lt;a href=&quot;/pricing&quot;&gt;Pricing&lt;/a&gt;</code>ï¼ˆä¼šé‡æ–°åŠ è½½ç•Œé¢ï¼‰è€Œæ˜¯<code>&lt;NavLink to=&quot;/pricing&quot;&gt;Pricing&lt;/NavLink&gt;</code>ï¼ˆè®°å¾—å¯¼å…¥NavLinkï¼Œå®ƒç›¸è¾ƒäºLinkæ¥è¯´å¥½å¤„æ˜¯ä¼šé‡ç‚¹çªå‡ºé€‰ä¸­çš„è¿æ¥ï¼‰</li><li>å»ºç«‹ä¸€ä¸ªPageNavæ”¾ç½®è¿æ¥ï¼Œå¯ä»¥é‡ç”¨åˆ°å…¶ä»–ç•Œé¢ä¸­</li></ul><p>ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡å¿«æ°”æ™•äº†ï¼Œæˆ‘çš„eslintçœŸçš„å¾ˆä¸å¬è¯ï¼Œå•¥éƒ½æŠ¥é”™ï¼Œæ˜æ˜æ˜¯æ— ä¼¤å¤§é›…çš„warnéƒ½è®©æˆ‘è·‘ä¸äº†ç¨‹åºã€‚æ”¹äº†å¥½ä¹…çš„è®¾ç½®ç»ˆäºï¼Œåœ¨æˆ‘å°†settings.jsonä¸­æ·»åŠ </p><p><code>&quot;eslint.rules.customizations&quot;: [</code></p><p>  <code>&#123; &quot;rule&quot;: &quot;no-unused-vars&quot;, &quot;severity&quot;: &quot;warn&quot; &#125;,</code></p><p>  <code>&#123; &quot;rule&quot;: &quot;react/prop-types&quot;, &quot;severity&quot;: &quot;off&quot; &#125;</code></p><p> <code>]</code></p><p>ç„¶ååœ¨vite.config.jsæ”¹æˆ</p><p><code>export default defineConfig(&#123;</code></p><p> <code>plugins: [react(),  eslint(&#123;</code></p><p>â€‹      <code>overrideConfig: &#123;</code></p><p>â€‹          <code>rules: &#123;</code></p><p>â€‹                    <code>&quot;no-unused-vars&quot;: &quot;warn&quot;,</code></p><p>â€‹                     <code>&quot;react/prop-types&quot;: &quot;off&quot;,</code></p><p>â€‹    <code>&#125;, &#125;,  &#125;), ],&#125;);</code></p><p>å®ƒç»ˆäºä¸ä¼šä»…ä»…å› ä¸ºæˆ‘å®šä¹‰äº†propæœªä½¿ç”¨å°±ä¸è®©æˆ‘è·‘ç¨‹åºäº†ã€‚ã€‚ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡</p><p>é¡ºä¾¿</p><h4 id="ï¼ˆ2ï¼‰"><a href="#ï¼ˆ2ï¼‰" class="headerlink" title="ï¼ˆ2ï¼‰"></a>ï¼ˆ2ï¼‰</h4><p>ä½¿ç”¨elementè€Œä¸æ˜¯ç»„ä»¶çš„å¥½å¤„æ˜¯ï¼Ÿ</p><p>ä½¿ç”¨URLå­˜å‚¨çŠ¶æ€ï¼ˆparamï¼‰ï¼ˆqueryï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240830165915719.png" alt="image-20240830165915719"></p><p>useNavigateã€useParamsã€useSearchParamsçš„å¼ºå¤§ä½œç”¨</p><Navigate replace to="cities" />     <p>onClick&#x3D;{(<em>e</em>) &#x3D;&gt; {</p><p>â€‹      e.preventDefault();</p><p>â€‹      navigate(-1);</p><p>â€‹     }}è¿™ä¸¤æ®µä»£ç çš„è¦ç‚¹</p><p>è‡ªå·±é˜…è¯»äº†ä¸€æ®µä»£ç å¹¶åˆ†æåŠŸèƒ½ã€ç»„ä»¶ä»¥åŠçŠ¶æ€ï¼ˆæ¯”è¾ƒç®€å•æ¯”è¾ƒå¥½åˆ†æï¼‰</p><h4 id="ï¼ˆ3ï¼‰"><a href="#ï¼ˆ3ï¼‰" class="headerlink" title="ï¼ˆ3ï¼‰"></a>ï¼ˆ3ï¼‰</h4><p>ï¼ˆè¿›å…¥ä¸‹ä¸€èŠ‚äº†æ¬¸ï¼‰</p><p>context API</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240830170233284.png" alt="image-20240830170233284"></p><p>ï¼ˆä¹‹å‰æ˜¯ç”¨childrenæ¥è§£å†³prop drillingçš„ï¼‰</p><p>ä½¿ç”¨ä¸€ä¸ªå°appæ¥ç»ƒä¹ context APIï¼Œå¹¶ä¸”ç»„åˆæˆä¸€ä¸ªå‡½æ•°ï¼Œå†ç”¨costomæ¥ç®€åŒ–ä»£ç </p><p>leafletï¼ˆåœ°å›¾åº“ï¼‰</p><p>å•Šå•Šå•Šå•Šå•Šå•Šæ¥ä¸åŠæ•´ç†ï¼Œè„‘ç“œå­å—¡å—¡çš„ã€‚ã€‚</p><p>npm i react-datepicker  å®˜ç½‘ï¼š<a href="https://www.npmjs.com/package/react-datepicker">https://www.npmjs.com/package/react-datepicker</a></p><p>å¯¼å…¥ã€è°ƒæ•´æ ¼å¼</p><p>Advanced state management&#x3D;&gt;<strong>syetem context</strong> + <strong>useReducer</strong></p>]]></content>
    
    
    <categories>
      
      <category>reactè¯¾ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>react</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>reactè¯¾ç¨‹-challenge</title>
    <link href="/2024/08/28/react%E8%AF%BE%E7%A8%8B-challenge/"/>
    <url>/2024/08/28/react%E8%AF%BE%E7%A8%8B-challenge/</url>
    
    <content type="html"><![CDATA[<p>é’±å¸è½¬æ¢å°app</p><span id="more"></span><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> &#123; useEffect, useState &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> [amount, setAmount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">1</span>);<br>  <span class="hljs-keyword">const</span> [fromCur, setFromCur] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">&quot;EUR&quot;</span>);<br>  <span class="hljs-keyword">const</span> [toCur, setToCur] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">&quot;USD&quot;</span>);<br>  <span class="hljs-keyword">const</span> [converted, setConverted] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">&quot;&quot;</span>);<br>  <span class="hljs-keyword">const</span> [isLoading, setIsLoading] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);<br><br>  <span class="hljs-title function_">useEffect</span>(<br>    <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">convert</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-title function_">setIsLoading</span>(<span class="hljs-literal">true</span>);<br>        <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<br>          <span class="hljs-string">`https://api.frankfurter.app/latest?amount=<span class="hljs-subst">$&#123;amount&#125;</span>&amp;from=<span class="hljs-subst">$&#123;fromCur&#125;</span>&amp;to=<span class="hljs-subst">$&#123;toCur&#125;</span>`</span><br>        );<br>        <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> res.<span class="hljs-title function_">json</span>();<br>        <span class="hljs-title function_">setConverted</span>(data.<span class="hljs-property">rates</span>[toCur]);<br>        <span class="hljs-title function_">setIsLoading</span>(<span class="hljs-literal">false</span>);<br>      &#125;<br>      <span class="hljs-keyword">if</span> (fromCur === toCur) <span class="hljs-keyword">return</span> <span class="hljs-title function_">setConverted</span>(amount);<br>      <span class="hljs-title function_">convert</span>();<br>    &#125;,<br>    [amount, fromCur, toCur]<br>  );<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">input</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;amount&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;(e)</span> =&gt;</span> setAmount(Number(e.target.value))&#125;</span><br><span class="language-xml">        disabled=&#123;isLoading&#125;</span><br><span class="language-xml">      /&gt;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">select</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;fromCur&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;(e)</span> =&gt;</span> setFromCur(e.target.value)&#125;</span><br><span class="language-xml">        disabled=&#123;isLoading&#125;</span><br><span class="language-xml">      &gt;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;USD&quot;</span>&gt;</span>USD<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;EUR&quot;</span>&gt;</span>EUR<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;CAD&quot;</span>&gt;</span>CAD<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;INR&quot;</span>&gt;</span>INR<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">select</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;toCur&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;(e)</span> =&gt;</span> setToCur(e.target.value)&#125;</span><br><span class="language-xml">        disabled=&#123;isLoading&#125;</span><br><span class="language-xml">      &gt;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;USD&quot;</span>&gt;</span>USD<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;EUR&quot;</span>&gt;</span>EUR<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;CAD&quot;</span>&gt;</span>CAD<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;INR&quot;</span>&gt;</span>INR<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">        &#123;converted&#125; &#123;toCur&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>reactè¯¾ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>react</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>reactè¯¾ç¨‹9-usepopcorn-2</title>
    <link href="/2024/08/28/react%E8%AF%BE%E7%A8%8B9-usepopcorn-2/"/>
    <url>/2024/08/28/react%E8%AF%BE%E7%A8%8B9-usepopcorn-2/</url>
    
    <content type="html"><![CDATA[<p>k</p><span id="more"></span><h3 id="ä¸€ã€ç”¨æˆ·ç•Œé¢å’Œä¸»è¦åŠŸèƒ½"><a href="#ä¸€ã€ç”¨æˆ·ç•Œé¢å’Œä¸»è¦åŠŸèƒ½" class="headerlink" title="ä¸€ã€ç”¨æˆ·ç•Œé¢å’Œä¸»è¦åŠŸèƒ½"></a>ä¸€ã€ç”¨æˆ·ç•Œé¢å’Œä¸»è¦åŠŸèƒ½</h3><h4 id="ï¼ˆ1ï¼‰ç•Œé¢"><a href="#ï¼ˆ1ï¼‰ç•Œé¢" class="headerlink" title="ï¼ˆ1ï¼‰ç•Œé¢"></a>ï¼ˆ1ï¼‰ç•Œé¢</h4><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240828110027563.png" alt="image-20240828110027563"></p><h4 id="ï¼ˆ2ï¼‰åŠŸèƒ½"><a href="#ï¼ˆ2ï¼‰åŠŸèƒ½" class="headerlink" title="ï¼ˆ2ï¼‰åŠŸèƒ½"></a>ï¼ˆ2ï¼‰åŠŸèƒ½</h4><p>1ã€è°ƒç”¨APIå¯ä»¥å¯¼å…¥ç”µå½±æ•°æ®ï¼Œæœç´¢åˆ°ç”µå½±å¹¶æ˜¾ç¤ºå‡ºåŸºæœ¬ä¿¡æ¯</p><p>2ã€å•å‡»ç”µå½±å¯ä»¥çœ‹åˆ°è¯¦ç»†ä¿¡æ¯ï¼Œå¹¶å¯ä»¥ä¸ºå®ƒè¯„åˆ†ä¸”åŠ å…¥å·²çœ‹ç”µå½±çš„æ¸…å•ï¼Œä¹Ÿå¯ä»¥åœ¨æ¸…å•ä¸­åˆ é™¤ç”µå½±</p><p>3ã€å³ä¸Šè§’ç»Ÿè®¡ä¸€å…±çœ‹äº†å¤šå°‘éƒ¨ç”µå½±ä»¥åŠè¯„åˆ†å’Œå¹³å‡ç”µå½±æ—¶é—´</p><p>4ã€ç¦»å¼€ç•Œé¢å†è¿›å»æ—¶æ•°æ®ä¸ä¼šä¸¢å¤±</p><h3 id="äºŒã€ä»£ç "><a href="#äºŒã€ä»£ç " class="headerlink" title="äºŒã€ä»£ç "></a>äºŒã€ä»£ç </h3><h4 id="ï¼ˆ1ï¼‰App-js"><a href="#ï¼ˆ1ï¼‰App-js" class="headerlink" title="ï¼ˆ1ï¼‰App.js"></a>ï¼ˆ1ï¼‰App.js</h4><p>ä»ç½‘ç«™<a href="https://www.omdbapi.com/%E8%8E%B7%E5%8F%96%E5%85%8D%E8%B4%B9KEY%E5%90%8E%E8%8E%B7%E5%8F%96%E7%94%B5%E5%BD%B1%E8%B5%84%E6%BA%90%E6%95%B0%E6%8D%AE">https://www.omdbapi.com/è·å–å…è´¹KEYåè·å–ç”µå½±èµ„æºæ•°æ®</a></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> &#123; useEffect, useRef, useState &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">StarRating</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./StarRating&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; useMovies &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./useMovies&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; useLocalStorageState &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./useLocalStorageState&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; useKey &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./useKey&quot;</span>;<br><br><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">KEY</span> = <span class="hljs-string">&quot;c69cb565&quot;</span>;  <br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">average</span> = (<span class="hljs-params">arr</span>) =&gt;<br>  arr.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">acc, cur, i, arr</span>) =&gt;</span> acc + cur / arr.<span class="hljs-property">length</span>, <span class="hljs-number">0</span>);<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> [query, setQuery] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">&quot;Flipped&quot;</span>);<br>  <span class="hljs-keyword">const</span> [selectedId, setSelectedId] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);<br><br>  <span class="hljs-keyword">const</span> &#123; movies, isLoading, error &#125; = <span class="hljs-title function_">useMovies</span>(query, handleCloseMovie);<br>  <span class="hljs-keyword">const</span> [watched, setWatched] = <span class="hljs-title function_">useLocalStorageState</span>([], <span class="hljs-string">&quot;watched&quot;</span>);<br><br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleSelectMovie</span>(<span class="hljs-params">id</span>) &#123;<br>    <span class="hljs-title function_">setSelectedId</span>(<span class="hljs-function">(<span class="hljs-params">selectedId</span>) =&gt;</span> (id === selectedId ? <span class="hljs-literal">null</span> : id));<br>  &#125;<br><br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleCloseMovie</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-title function_">setSelectedId</span>(<span class="hljs-literal">null</span>);<br>  &#125;<br><br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">hanleAddWatched</span>(<span class="hljs-params">movie</span>) &#123;<br>    <span class="hljs-title function_">setWatched</span>(<span class="hljs-function">(<span class="hljs-params">watched</span>) =&gt;</span> [...watched, movie]);<br>  &#125;<br><br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleDeleteWatched</span>(<span class="hljs-params">id</span>) &#123;<br>    <span class="hljs-title function_">setWatched</span>(<span class="hljs-function">(<span class="hljs-params">setWatched</span>) =&gt;</span> watched.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">movie</span>) =&gt;</span> movie.<span class="hljs-property">imdbID</span> !== id));<br>  &#125;<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">NavBar</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Search</span> <span class="hljs-attr">query</span>=<span class="hljs-string">&#123;query&#125;</span> <span class="hljs-attr">setQuery</span>=<span class="hljs-string">&#123;setQuery&#125;</span> /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">NumResults</span> <span class="hljs-attr">movies</span>=<span class="hljs-string">&#123;movies&#125;</span> /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">NavBar</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Main</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Box</span>&gt;</span></span><br><span class="language-xml">          &#123;isLoading &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">Loader</span> /&gt;</span>&#125;</span><br><span class="language-xml">          &#123;!isLoading &amp;&amp; !error &amp;&amp; (</span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">MovieList</span> <span class="hljs-attr">movies</span>=<span class="hljs-string">&#123;movies&#125;</span> <span class="hljs-attr">onSelectMovie</span>=<span class="hljs-string">&#123;handleSelectMovie&#125;</span> /&gt;</span></span><br><span class="language-xml">          )&#125;</span><br><span class="language-xml">          &#123;error &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">ErrorMessage</span> <span class="hljs-attr">message</span>=<span class="hljs-string">&#123;error&#125;</span> /&gt;</span>&#125;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">Box</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Box</span>&gt;</span></span><br><span class="language-xml">          &#123;selectedId ? (</span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">MovieDetails</span></span></span><br><span class="hljs-tag"><span class="language-xml">              <span class="hljs-attr">selectedId</span>=<span class="hljs-string">&#123;selectedId&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">              <span class="hljs-attr">onCloseMovie</span>=<span class="hljs-string">&#123;handleCloseMovie&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">              <span class="hljs-attr">onAddWatched</span>=<span class="hljs-string">&#123;hanleAddWatched&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">              <span class="hljs-attr">watched</span>=<span class="hljs-string">&#123;watched&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">            /&gt;</span></span><br><span class="language-xml">          ) : (</span><br><span class="language-xml">            <span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">              <span class="hljs-tag">&lt;<span class="hljs-name">WatchedSummary</span> <span class="hljs-attr">watched</span>=<span class="hljs-string">&#123;watched&#125;</span> /&gt;</span></span><br><span class="language-xml">              <span class="hljs-tag">&lt;<span class="hljs-name">WatchedMovieList</span></span></span><br><span class="hljs-tag"><span class="language-xml">                <span class="hljs-attr">watched</span>=<span class="hljs-string">&#123;watched&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">                <span class="hljs-attr">onDeleteWatched</span>=<span class="hljs-string">&#123;handleDeleteWatched&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">              /&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/&gt;</span></span><br><span class="language-xml">          )&#125;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">Box</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">Main</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="Loader-jså’ŒError-js"><a href="#Loader-jså’ŒError-js" class="headerlink" title="Loader.jså’ŒError.js"></a>Loader.jså’ŒError.js</h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Loader</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;loader&quot;</span>&gt;</span>Loading...<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>;<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">ErrorMessage</span>(<span class="hljs-params">&#123; message &#125;</span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;error&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>âš ï¸<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">      &#123;message&#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="NavBarå’ŒLogo"><a href="#NavBarå’ŒLogo" class="headerlink" title="NavBarå’ŒLogo"></a>NavBarå’ŒLogo</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">NavBar</span>(<span class="hljs-params">&#123; children &#125;</span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">nav</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;nav-bar&quot;</span>&gt;</span></span><br><span class="language-xml">      &#123;&quot; &quot;&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Logo</span> /&gt;</span></span><br><span class="language-xml">      &#123;children&#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Logo</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;logo&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">role</span>=<span class="hljs-string">&quot;img&quot;</span>&gt;</span>ğŸ¿<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>usePopcorn<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Search</span>(<span class="hljs-params">&#123; query, setQuery &#125;</span>) &#123;<br>  <span class="hljs-comment">// useEffect(function () &#123;</span><br>  <span class="hljs-comment">//   const el = document.querySelector(&quot;.search&quot;);</span><br>  <span class="hljs-comment">//   el.focus();</span><br>  <span class="hljs-comment">// &#125;, []);</span><br>  <span class="hljs-keyword">const</span> inputEl = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">null</span>);<br><br>  <span class="hljs-title function_">useKey</span>(<span class="hljs-string">&quot;Enter&quot;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">document</span>.<span class="hljs-property">activeElement</span> === inputEl.<span class="hljs-property">current</span>) <span class="hljs-keyword">return</span>;<br>    inputEl.<span class="hljs-property">current</span>.<span class="hljs-title function_">focus</span>();<br>    <span class="hljs-title function_">setQuery</span>(<span class="hljs-string">&quot;&quot;</span>);<br>  &#125;);<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;search&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;Search movies...&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;query&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;(e)</span> =&gt;</span> setQuery(e.target.value)&#125;</span><br><span class="language-xml">      ref=&#123;inputEl&#125;</span><br><span class="language-xml">    /&gt;</span><br>  );<br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">NumResults</span>(<span class="hljs-params">&#123; movies &#125;</span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;num-results&quot;</span>&gt;</span></span><br><span class="language-xml">      Found <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>&#123;movies.length&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span> results</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Main</span>(<span class="hljs-params">&#123; children &#125;</span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">main</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;main&quot;</span>&gt;</span>&#123;children&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span></span>;<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Box</span>(<span class="hljs-params">&#123; children &#125;</span>) &#123;<br>  <span class="hljs-keyword">const</span> [isOpen, setIsOpen] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">true</span>);<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;box&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;btn-toggle&quot;</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> setIsOpen((open) =&gt; !open)&#125;&gt;</span><br><span class="language-xml">        &#123;isOpen ? &quot;â€“&quot; : &quot;+&quot;&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      &#123;isOpen &amp;&amp; children&#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">MovieList</span>(<span class="hljs-params">&#123; movies, onSelectMovie &#125;</span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;list list-movies&quot;</span>&gt;</span></span><br><span class="language-xml">      &#123;movies?.map((movie) =&gt; (</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Movie</span> <span class="hljs-attr">movie</span>=<span class="hljs-string">&#123;movie&#125;</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;movie.imdbID&#125;</span> <span class="hljs-attr">onSelectMovie</span>=<span class="hljs-string">&#123;onSelectMovie&#125;</span> /&gt;</span></span><br><span class="language-xml">      ))&#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Movie</span>(<span class="hljs-params">&#123; movie, onSelectMovie &#125;</span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;movie.imdbID&#125;</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> onSelectMovie(movie.imdbID)&#125;&gt;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&#123;movie.Poster&#125;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&#123;</span>`$&#123;<span class="hljs-attr">movie.Title</span>&#125; <span class="hljs-attr">poster</span>`&#125; /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>&#123;movie.Title&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>ğŸ—“<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;movie.Year&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br>  );<br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">MovieDetails</span>(<span class="hljs-params">&#123; selectedId, onCloseMovie, onAddWatched, watched &#125;</span>) &#123;<br>  <span class="hljs-keyword">const</span> [movie, setMovie] = <span class="hljs-title function_">useState</span>(&#123;&#125;);<br>  <span class="hljs-keyword">const</span> [isLoading, setIsLoading] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);<br>  <span class="hljs-keyword">const</span> [userRating, setUserRating] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">&quot;&quot;</span>);<br><br>  <span class="hljs-keyword">const</span> countRef = <span class="hljs-title function_">useRef</span>(<span class="hljs-number">0</span>);<br><br>  <span class="hljs-title function_">useEffect</span>(<br>    <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-keyword">if</span> (userRating) countRef.<span class="hljs-property">current</span>++;<br>    &#125;,<br>    [userRating]<br>  );<br><br>  <span class="hljs-keyword">const</span> isWatched = watched.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">movie</span>) =&gt;</span> movie.<span class="hljs-property">imdbID</span>).<span class="hljs-title function_">includes</span>(selectedId);<br>  <span class="hljs-keyword">const</span> watchedUserRating = watched.<span class="hljs-title function_">find</span>(<br>    <span class="hljs-function">(<span class="hljs-params">movie</span>) =&gt;</span> movie.<span class="hljs-property">imdbID</span> === selectedId<br>  )?.<span class="hljs-property">userRating</span>;<br><br>  <span class="hljs-keyword">const</span> &#123;<br>    <span class="hljs-title class_">Title</span>: title,<br>    <span class="hljs-title class_">Poster</span>: poster,<br>    <span class="hljs-title class_">Runtime</span>: runtime,<br>    imdbRating,<br>    <span class="hljs-title class_">Plot</span>: plot,<br>    <span class="hljs-title class_">Released</span>: released,<br>    <span class="hljs-title class_">Actors</span>: actors,<br>    <span class="hljs-title class_">Director</span>: director,<br>    <span class="hljs-title class_">Genre</span>: genre,<br>  &#125; = movie;<br><br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleAdd</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> newWatchedMovie = &#123;<br>      <span class="hljs-attr">imdbID</span>: selectedId,<br>      title,<br>      poster,<br>      <span class="hljs-attr">imdbRating</span>: <span class="hljs-title class_">Number</span>(imdbRating),<br>      <span class="hljs-attr">runtime</span>: <span class="hljs-title class_">Number</span>(runtime.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot; &quot;</span>).<span class="hljs-title function_">at</span>(<span class="hljs-number">0</span>)),<br>      userRating,<br>      <span class="hljs-attr">countRatingDecisions</span>: countRef.<span class="hljs-property">current</span>,<br>    &#125;;<br>    <span class="hljs-title function_">onAddWatched</span>(newWatchedMovie);<br>    <span class="hljs-title function_">onCloseMovie</span>();<br>  &#125;<br><br>  <span class="hljs-title function_">useKey</span>(<span class="hljs-string">&quot;Escape&quot;</span>, onCloseMovie);<br><br>  <span class="hljs-title function_">useEffect</span>(<br>    <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-title function_">setIsLoading</span>(<span class="hljs-literal">true</span>);<br>      <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getMovieDetails</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<br>          <span class="hljs-string">`http://www.omdbapi.com/?apikey=<span class="hljs-subst">$&#123;KEY&#125;</span>&amp;i=<span class="hljs-subst">$&#123;selectedId&#125;</span>`</span><br>        );<br>        <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> res.<span class="hljs-title function_">json</span>();<br>        <span class="hljs-title function_">setMovie</span>(data);<br>        <span class="hljs-title function_">setIsLoading</span>(<span class="hljs-literal">false</span>);<br>      &#125;<br>      <span class="hljs-title function_">getMovieDetails</span>();<br>    &#125;,<br>    [selectedId]<br>  );<br><br>  <span class="hljs-title function_">useEffect</span>(<br>    <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-keyword">if</span> (!title) <span class="hljs-keyword">return</span>;<br>      <span class="hljs-variable language_">document</span>.<span class="hljs-property">title</span> = <span class="hljs-string">`Movie|<span class="hljs-subst">$&#123;title&#125;</span>`</span>;<br><br>      <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">document</span>.<span class="hljs-property">title</span> = <span class="hljs-string">&quot;usePopcorn&quot;</span>;<br>      &#125;;<br>    &#125;,<br>    [title]<br>  );<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;details&quot;</span>&gt;</span></span><br><span class="language-xml">      &#123;isLoading ? (</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Loader</span> /&gt;</span></span><br><span class="language-xml">      ) : (</span><br><span class="language-xml">        <span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">header</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;btn-back&quot;</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;onCloseMovie&#125;</span>&gt;</span></span><br><span class="language-xml">              <span class="hljs-symbol">&amp;larr;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&#123;poster&#125;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&#123;</span>`<span class="hljs-attr">Poster</span> <span class="hljs-attr">of</span> $&#123;<span class="hljs-attr">movie</span>&#125;`&#125; /&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;details-overview&quot;</span>&gt;</span></span><br><span class="language-xml">              <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>&#123;title&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">              <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">                &#123;released&#125; <span class="hljs-symbol">&amp;bull;</span> &#123;runtime&#125;</span><br><span class="language-xml">              <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">              <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>&#123;genre&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">              <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>ğŸŒŸ<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">                &#123;imdbRating&#125; IMDb rating</span><br><span class="language-xml">              <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">section</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;rating&quot;</span>&gt;</span></span><br><span class="language-xml">              &#123;!isWatched ? (</span><br><span class="language-xml">                <span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">                  <span class="hljs-tag">&lt;<span class="hljs-name">StarRating</span></span></span><br><span class="hljs-tag"><span class="language-xml">                    <span class="hljs-attr">maxRating</span>=<span class="hljs-string">&#123;10&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">                    <span class="hljs-attr">size</span>=<span class="hljs-string">&#123;36&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">                    <span class="hljs-attr">onSetRating</span>=<span class="hljs-string">&#123;setUserRating&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">                  /&gt;</span></span><br><span class="language-xml">                  &#123;userRating &gt; 0 &amp;&amp; (</span><br><span class="language-xml">                    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;btn-add&quot;</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;handleAdd&#125;</span>&gt;</span></span><br><span class="language-xml">                      + Add to list</span><br><span class="language-xml">                    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">                  )&#125;</span><br><span class="language-xml">                <span class="hljs-tag">&lt;/&gt;</span></span><br><span class="language-xml">              ) : (</span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>You rated with this movie &#123;watchedUserRating&#125;ğŸŒŸ<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">              )&#125;</span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">              <span class="hljs-tag">&lt;<span class="hljs-name">em</span>&gt;</span>&#123;plot&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">em</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Starring: &#123;actors&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Directed by: &#123;director&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span></span><br>        &lt;/&gt;<br>      )&#125;<br>    &lt;/div&gt;<br>  );<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">WatchedSummary</span>(<span class="hljs-params">&#123; watched &#125;</span>) &#123;<br>  <span class="hljs-keyword">const</span> avgImdbRating = <span class="hljs-title function_">average</span>(watched.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">movie</span>) =&gt;</span> movie.<span class="hljs-property">imdbRating</span>));<br>  <span class="hljs-keyword">const</span> avgUserRating = <span class="hljs-title function_">average</span>(watched.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">movie</span>) =&gt;</span> movie.<span class="hljs-property">userRating</span>));<br>  <span class="hljs-keyword">const</span> avgRuntime = <span class="hljs-title function_">average</span>(watched.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">movie</span>) =&gt;</span> movie.<span class="hljs-property">runtime</span>));<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;summary&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Movies you watched<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>#ï¸âƒ£<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;watched.length&#125; movies<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>â­ï¸<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;avgImdbRating.toFixed(2)&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>ğŸŒŸ<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;avgUserRating.toFixed(2)&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>â³<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;avgRuntime&#125; min<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">WatchedMovieList</span>(<span class="hljs-params">&#123; watched, onDeleteWatched &#125;</span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;list&quot;</span>&gt;</span></span><br><span class="language-xml">      &#123;watched.map((movie) =&gt; (</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">WatchedMovie</span> <span class="hljs-attr">movie</span>=<span class="hljs-string">&#123;movie&#125;</span> <span class="hljs-attr">onDeleteWatched</span>=<span class="hljs-string">&#123;onDeleteWatched&#125;</span> /&gt;</span></span><br><span class="language-xml">      ))&#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">WatchedMovie</span>(<span class="hljs-params">&#123; movie, onDeleteWatched &#125;</span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;movie.imdbID&#125;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&#123;movie.poster&#125;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&#123;</span>`$&#123;<span class="hljs-attr">movie.title</span>&#125; <span class="hljs-attr">poster</span>`&#125; /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>&#123;movie.title&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>â­ï¸<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;movie.imdbRating&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>ğŸŒŸ<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;movie.userRating&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>â³<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;movie.runtime&#125; min<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;btn-delete&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> onDeleteWatched(movie.imdbID)&#125;</span><br><span class="language-xml">        &gt;</span><br><span class="language-xml">          x</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br>  );<br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> &#123; useEffect, useState &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><br><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">KEY</span> = <span class="hljs-string">&quot;c69cb565&quot;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useMovies</span>(<span class="hljs-params">query, callback</span>) &#123;<br>  <span class="hljs-keyword">const</span> [movies, setMovies] = <span class="hljs-title function_">useState</span>([]);<br>  <span class="hljs-keyword">const</span> [isLoading, setIsLoading] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);<br>  <span class="hljs-keyword">const</span> [error, setError] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">&quot;&quot;</span>);<br><br>  <span class="hljs-title function_">useEffect</span>(<br>    <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>      callback?.();<br><br>      <span class="hljs-keyword">const</span> controller = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbortController</span>();<br><br>      <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fetchMovies</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>          <span class="hljs-title function_">setIsLoading</span>(<span class="hljs-literal">true</span>);<br>          <span class="hljs-title function_">setError</span>(<span class="hljs-string">&quot;&quot;</span>);<br>          <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<br>            <span class="hljs-string">`http://www.omdbapi.com/?apikey=<span class="hljs-subst">$&#123;KEY&#125;</span>&amp;s=<span class="hljs-subst">$&#123;query&#125;</span>`</span>,<br>            &#123; <span class="hljs-attr">signal</span>: controller.<span class="hljs-property">signal</span> &#125;<br>          );<br>          <span class="hljs-comment">//å¤„ç†æœåŠ¡å™¨è¿”å›äº†é2xxçš„çŠ¶æ€ç çš„æƒ…å†µï¼Œå¦‚404</span><br>          <span class="hljs-keyword">if</span> (!res.<span class="hljs-property">ok</span>)<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;Something went wrong with fetching movies&quot;</span>);<br><br>          <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> res.<span class="hljs-title function_">json</span>();<br>          <span class="hljs-keyword">if</span> (data.<span class="hljs-property">Response</span> === <span class="hljs-string">&quot;False&quot;</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;Movie not found&quot;</span>);<br>          <span class="hljs-title function_">setMovies</span>(data.<span class="hljs-property">Search</span>);<br>          <span class="hljs-title function_">setError</span>(<span class="hljs-string">&quot;&quot;</span>);<br>        &#125; <span class="hljs-keyword">catch</span> (err) &#123;<br>          <span class="hljs-keyword">if</span> (err.<span class="hljs-property">name</span> !== <span class="hljs-string">&quot;AbortError&quot;</span>) &#123;<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err.<span class="hljs-property">message</span>);<br>            <span class="hljs-title function_">setError</span>(err.<span class="hljs-property">message</span>);<br>          &#125;<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>          <span class="hljs-title function_">setIsLoading</span>(<span class="hljs-literal">false</span>);<br>        &#125;<br>        <span class="hljs-comment">//console.log(data.Search);</span><br>        <span class="hljs-comment">// .then((res) =&gt; res.json())</span><br>        <span class="hljs-comment">// .then((data) =&gt; setMovies(data.Search));</span><br>      &#125;<br>      <span class="hljs-keyword">if</span> (!query.<span class="hljs-property">length</span>) &#123;<br>        <span class="hljs-title function_">setMovies</span>([]);<br>        <span class="hljs-title function_">setError</span>(<span class="hljs-string">&quot;&quot;</span>);<br>        <span class="hljs-keyword">return</span>;<br>      &#125;<br><br>      <span class="hljs-comment">//handleCloseMovie();</span><br>      <span class="hljs-title function_">fetchMovies</span>();<br><br>      <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>        controller.<span class="hljs-title function_">abort</span>();<br>      &#125;;<br>    &#125;,<br>    [query]<br>  );<br>  <span class="hljs-keyword">return</span> &#123; movies, isLoading, error &#125;;<br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> &#123; useEffect &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useKey</span>(<span class="hljs-params">key, action</span>) &#123;<br>  <span class="hljs-title function_">useEffect</span>(<br>    <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-keyword">function</span> <span class="hljs-title function_">callback</span>(<span class="hljs-params">e</span>) &#123;<br>        <span class="hljs-keyword">if</span> (e.<span class="hljs-property">code</span>.<span class="hljs-title function_">toLowerCase</span>() === key.<span class="hljs-title function_">toLowerCase</span>()) <span class="hljs-title function_">action</span>();<br>      &#125;<br><br>      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;keydown&quot;</span>, callback);<br><br>      <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">&quot;keydown&quot;</span>, callback);<br>      &#125;;<br>    &#125;,<br>    [action, key]<br>  );<br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> &#123; useState, useEffect &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useLocalStorageState</span>(<span class="hljs-params">initialState, key</span>) &#123;<br>  <span class="hljs-keyword">const</span> [value, setValue] = <span class="hljs-title function_">useState</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> storedValue = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(key);<br>    <span class="hljs-keyword">return</span> storedValue ? <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(storedValue) : initialState;<br>  &#125;);<br><br>  <span class="hljs-title function_">useEffect</span>(<br>    <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(key, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(value));<br>    &#125;,<br>    [value, key]<br>  );<br><br>  <span class="hljs-keyword">return</span> [value, setValue];<br>&#125;<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>reactè¯¾ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>react</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>reactè¯¾ç¨‹10-ReactQuiz(useReducerå­¦ä¹ )</title>
    <link href="/2024/08/26/react%E8%AF%BE%E7%A8%8B10-ReactQuiz/"/>
    <url>/2024/08/26/react%E8%AF%BE%E7%A8%8B10-ReactQuiz/</url>
    
    <content type="html"><![CDATA[<p>æœ¬èŠ‚è¯¾åšå‡ºäº†ä¸€ä¸ªå°å°çš„æµ‹éªŒåº”ç”¨ï¼Œä¸»è¦ç›®çš„æ˜¯ä¸ºäº†äº†è§£useReducerè¿™ä¸ªhookçš„å¼ºå¤§åŠŸèƒ½ï¼</p><span id="more"></span><p>Auto Rename Tagæ’ä»¶ï¼Œæˆ‘ä¸ºä»€ä¹ˆæ²¡æœ‰æ—©ç‚¹ä¸‹è½½ä½ ï¼ï¼ï¼ï¼ï¼ï¼ğŸ˜­ğŸ˜­ğŸ˜­</p><h3 id="ä¸€ã€useReducerè®²è§£"><a href="#ä¸€ã€useReducerè®²è§£" class="headerlink" title="ä¸€ã€useReducerè®²è§£"></a>ä¸€ã€useReducerè®²è§£</h3><p><strong>å¦‚ä½•ä½¿ç”¨useReducerï¼Ÿ</strong>ï¼ˆä¸‰æ­¥èµ°ï¼‰</p><ol><li><strong>initialState</strong></li><li><strong>reducerå‡½æ•°</strong></li><li><strong>useReduceråˆå®šä¹‰çŠ¶æ€</strong>ï¼ˆä½¿ç”¨initialStateï¼‰</li></ol><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240827161620491.png" alt="image-20240827161620491"></p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240827161715601.png" alt="image-20240827161715601"></p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/IMG_0477.PNG" alt="img"></p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/IMG_0478.PNG" alt="img"></p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/IMG_0479.PNG" alt="img"></p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240827162143695.png" alt="image-20240827162143695"></p><h3 id="äºŒã€json-server"><a href="#äºŒã€json-server" class="headerlink" title="äºŒã€json-server"></a>äºŒã€json-server</h3><p>JSON Server æ˜¯ä¸€ä¸ªç®€å•æ˜“ç”¨çš„å·¥å…·ï¼Œç”¨äºå¿«é€Ÿåˆ›å»ºä¸€ä¸ªåŸºäº JSON æ–‡ä»¶çš„ RESTful APIã€‚å®ƒéå¸¸é€‚åˆåœ¨å¼€å‘å’Œæµ‹è¯•è¿‡ç¨‹ä¸­ä½¿ç”¨ï¼Œç‰¹åˆ«æ˜¯åœ¨æ²¡æœ‰åç«¯æˆ–åç«¯æœªå®Œæˆæ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ JSON Server æ¥æ¨¡æ‹Ÿ API è¿›è¡Œå‰ç«¯å¼€å‘ã€‚</p><p>JSON Server çš„ä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š</p><ol><li><strong>æ¨¡æ‹Ÿ RESTful API</strong>ï¼š JSON Server å¯ä»¥æ ¹æ®ä¸€ä¸ªç®€å•çš„ JSON æ–‡ä»¶è‡ªåŠ¨ç”Ÿæˆ RESTful APIï¼ŒåŒ…æ‹¬ GETã€POSTã€PUTã€PATCH å’Œ DELETE ç­‰å¸¸è§çš„ HTTP æ–¹æ³•ã€‚</li><li><strong>å¿«é€ŸåŸå‹è®¾è®¡</strong>ï¼š åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ JSON Server å¿«é€Ÿåˆ›å»ºä¸€ä¸ª APIï¼Œå…è®¸ä½ ä¸“æ³¨äºå‰ç«¯å¼€å‘æˆ– API è°ƒç”¨é€»è¾‘ï¼Œè€Œæ— éœ€ç¼–å†™çœŸå®çš„åç«¯ä»£ç ã€‚</li><li><strong>å¤„ç†æŸ¥è¯¢å‚æ•°</strong>ï¼š JSON Server æ”¯æŒå¤„ç† URL ä¸­çš„æŸ¥è¯¢å‚æ•°ï¼Œå…è®¸ä½ åŸºäºæŸ¥è¯¢æ¡ä»¶è¿”å›ä¸åŒçš„æ•°æ®é›†ã€‚</li><li><strong>æ”¯æŒåˆ†é¡µå’Œæ’åº</strong>ï¼š å®ƒå¯ä»¥æ ¹æ® URL ä¸­çš„å‚æ•°è½»æ¾å®ç°æ•°æ®çš„åˆ†é¡µå’Œæ’åºã€‚</li><li><strong>æ”¯æŒå®Œæ•´çš„ CRUD æ“ä½œ</strong>ï¼š é€šè¿‡ç®€å•çš„é…ç½®ï¼ŒJSON Server å¯ä»¥è®©ä½ å¯¹ JSON æ•°æ®è¿›è¡Œåˆ›å»ºã€è¯»å–ã€æ›´æ–°å’Œåˆ é™¤æ“ä½œã€‚</li></ol><p>åœ¨æœ¬æ¬¡åˆ›å»ºçš„åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªquestion.jsonï¼ŒåŒ…å«äº†ä¸€ä¸ªquestionsæ•°ç»„ï¼Œä½†æ˜¯æˆ‘ä»¬æƒ³è¦å‡è£…æ˜¯é€šè¿‡ä¸€ä¸ªï¼ˆè™šå‡çš„ï¼‰APIæ¥è·å–åˆ°é—®é¢˜çš„å†…å®¹ï¼Œå› æ­¤æ‹†åˆ†äº†ä¸€ä¸‹ç»ˆç«¯ï¼Œ<code>npm i json-server</code>å‘½ä»¤ä¸‹è½½json-serverï¼Œç„¶åæ‰¾åˆ°é…ç½®æ–‡ä»¶æŠŠå‘½ä»¤åŠ å…¥ï¼Œå°±å¯ä»¥è¿è¡Œ<code>npm run server</code>å°†question.jsonè¿è¡Œåœ¨æŒ‡å®šçš„ç«¯å£ï¼Œè®¿é—®(<a href="http://localhost:8001/questions)%E5%B0%B1%E5%8F%AF%E4%BB%A5%E8%8E%B7%E5%8F%96questions%E6%95%B0%E7%BB%84%E3%80%82">http://localhost:8001/questions)å°±å¯ä»¥è·å–questionsæ•°ç»„ã€‚</a></p><p><code>&quot;server&quot;: &quot;json-server --watch data/questions.json --port 8001&quot;</code></p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240826154217162.png" alt="image-20240826154217162"></p><h3 id="ä¸‰ã€åº”ç”¨ç•Œé¢å’Œä»£ç "><a href="#ä¸‰ã€åº”ç”¨ç•Œé¢å’Œä»£ç " class="headerlink" title="ä¸‰ã€åº”ç”¨ç•Œé¢å’Œä»£ç "></a>ä¸‰ã€åº”ç”¨ç•Œé¢å’Œä»£ç </h3><h4 id="ï¼ˆ1ï¼‰ä¸»è¦ç•Œé¢"><a href="#ï¼ˆ1ï¼‰ä¸»è¦ç•Œé¢" class="headerlink" title="ï¼ˆ1ï¼‰ä¸»è¦ç•Œé¢"></a>ï¼ˆ1ï¼‰ä¸»è¦ç•Œé¢</h4><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-08-27%20162942.png" alt="å±å¹•æˆªå›¾ 2024-08-27 162942"></p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-08-27%20162955.png" alt="å±å¹•æˆªå›¾ 2024-08-27 162955"></p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240827163054783.png" alt="image-20240827163054783"></p><h4 id="ï¼ˆ2ï¼‰è¦ç‚¹"><a href="#ï¼ˆ2ï¼‰è¦ç‚¹" class="headerlink" title="ï¼ˆ2ï¼‰è¦ç‚¹"></a>ï¼ˆ2ï¼‰è¦ç‚¹</h4><p>1ã€ä½¿ç”¨useReduceræ¥æ‰¹é‡é›†ä¸­åœ°æ›´æ–°çŠ¶æ€ï¼šç”±äºreducerå‡½æ•°å°†çŠ¶æ€çš„æ›´æ–°é›†ä¸­åœ¨ä¸€èµ·ï¼Œå› æ­¤å¯ä»¥é€šè¿‡è¿™ä¸ªå‡½æ•°æ¥å¾—çŸ¥æ‰€æœ‰çŠ¶æ€çš„æ›´æ–°æƒ…å†µã€‚é™¤æ­¤ä¹‹å¤–ï¼Œaction.typeçš„åˆ’åˆ†ä¹Ÿå¯ä»¥å¾ˆå®¹æ˜“çœ‹åˆ°æ•´ä¸ªåº”ç”¨çš„å¤šç§çŠ¶æ€ã€‚</p><p>2ã€çŠ¶æ€åˆ—ä¸¾ï¼šquestionsï¼ˆé—®é¢˜æ•°ç»„ï¼‰ã€statusï¼ˆåº”ç”¨çŠ¶æ€ï¼šloadingã€errorã€readyã€activeã€finishedï¼Œå¯¹åº”ç•Œé¢çš„åˆ‡æ¢ï¼‰ã€indexï¼ˆæ­£åœ¨æ˜¾ç¤ºçš„é—®é¢˜åæ ‡ï¼‰ã€answerï¼ˆç”¨æˆ·çš„ç­”æ¡ˆï¼‰ã€pointsï¼ˆæ€»åˆ†æ•°ï¼‰ã€highscoreï¼ˆæœ€é«˜åˆ†ï¼‰ã€secondsRemaingï¼ˆå€’è®¡æ—¶å‰©ä½™æ—¶é—´ï¼‰</p><p>3ã€å¦‚ä½•ä½¿ä»£ç æ›´å…·æœ‰å¯è¯»æ€§ï¼šå°†å¸¸é‡å®šä¹‰åœ¨å‡½æ•°ä½“å¤–è€Œä¸æ˜¯ç›´æ¥å‡ºç°åœ¨æŸä¸ªjsè¯­å¥ä¸­ï¼›åœ¨æ„å»ºAPPçš„HTMLæ—¶ï¼Œå°½é‡å…¨éƒ¨ä½¿ç”¨ç»„ä»¶æ„å»ºï¼Œä¸è¦å‡ºç°å†—ä½™çš„çš„ä»£ç å—ï¼›æ‹†åˆ†ç»„ä»¶çš„å·¥ä½œä¸€å®šè¦åšåˆ°ä½ï¼Œä¾‹å¦‚æœ¬æ¬¡åº”ç”¨ä¸­ï¼Œæ‹†åˆ†å‡ºäº†è¿‘åä¸ªå°çš„ç»„ä»¶ï¼Œè¿™æ ·ä¼šä½¿ä¿®æ”¹ç»„ä»¶å†…å®¹å˜å¾—å®¹æ˜“ã€‚</p><p>4ã€æ¯ä¸ªæŒ‰é’®çš„onClickå‡½æ•°ï¼ï¼åœ¨å›ç­”å®Œæœ€åä¸€ä¸ªé—®é¢˜ä¹‹åï¼Œè¦è¿›å…¥finishç•Œé¢äº†ï¼Œå¦‚æœä¸åœæ­¢æ›´æ–°indexå°±ä¼šæŠ¥é”™ã€‚</p><p>5ã€å½“ç»„ä»¶å·²ç„¶å¾ˆå¤šï¼Œå¯ä»¥æŠŠæ‰€æœ‰ç»„ä»¶å…¨éƒ¨éƒ½æ”¾å…¥componentsæ–‡ä»¶å¤¹ä¸­äº†ï¼Œä½†æ˜¯æ­¤æ—¶è¦è®°å¾—æ›´æ–°åœ¨index.jsä¸­å¯¼å…¥App.jsçš„æ—¶å€™è·¯å¾„é—®é¢˜ã€‚</p><p><strong>6ã€ä¸å¤ªä¼šç”¨reducerç§¯ç´¯å™¨ï¼ˆéœ€è¦å¤ä¹ jsåŸºç¡€çŸ¥è¯†ï¼‰</strong></p><h4 id="ï¼ˆä¸‰ï¼‰ä»£ç "><a href="#ï¼ˆä¸‰ï¼‰ä»£ç " class="headerlink" title="ï¼ˆä¸‰ï¼‰ä»£ç "></a>ï¼ˆä¸‰ï¼‰ä»£ç </h4><h5 id="1ã€index-css"><a href="#1ã€index-css" class="headerlink" title="1ã€index.css"></a>1ã€index.css</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-pseudo">:root</span> &#123;<br>  <span class="hljs-attr">--color-darkest</span>: <span class="hljs-number">#343a40</span>;<br>  <span class="hljs-attr">--color-dark</span>: <span class="hljs-number">#495057</span>;<br>  <span class="hljs-attr">--color-medium</span>: <span class="hljs-number">#ced4da</span>;<br>  <span class="hljs-attr">--color-light</span>: <span class="hljs-number">#f1f3f5</span>;<br><br>  <span class="hljs-attr">--color-theme</span>: <span class="hljs-number">#1098ad</span>;<br>  <span class="hljs-attr">--color-accent</span>: <span class="hljs-number">#ffa94d</span>;<br>&#125;<br><br><span class="hljs-keyword">@import</span> url(<span class="hljs-string">&quot;https://fonts.googleapis.com/css2?family=Codystar&amp;display=swap&quot;</span>);<br><br>* &#123;<br>  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;<br>  <span class="hljs-attribute">box-sizing</span>: border-box;<br>&#125;<br><br><span class="hljs-selector-tag">html</span> &#123;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">62.5%</span>;<br>  <span class="hljs-attribute">font-family</span>: -apple-system, BlinkMacSystemFont, <span class="hljs-string">&quot;Segoe UI&quot;</span>, Roboto, Oxygen,<br>    Ubuntu, Cantarell, <span class="hljs-string">&quot;Open Sans&quot;</span>, <span class="hljs-string">&quot;Helvetica Neue&quot;</span>, sans-serif;<br>&#125;<br><br><span class="hljs-selector-tag">body</span> &#123;<br>  <span class="hljs-attribute">min-height</span>: <span class="hljs-number">100vh</span>;<br>  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--color-light);<br>  <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">var</span>(--color-darkest);<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">3.2rem</span>;<br>&#125;<br><br><span class="hljs-selector-class">.app</span> &#123;<br>  <span class="hljs-attribute">display</span>: flex;<br>  <span class="hljs-attribute">flex-direction</span>: column;<br>  <span class="hljs-attribute">align-items</span>: center;<br>  <span class="hljs-attribute">justify-content</span>: center;<br>&#125;<br><br><span class="hljs-selector-class">.main</span> &#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">50rem</span>;<br>&#125;<br><br><span class="hljs-selector-class">.app-header</span> &#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">66rem</span>;<br>  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">4rem</span>;<br>  <span class="hljs-attribute">display</span>: flex;<br>  <span class="hljs-attribute">align-items</span>: center;<br>  <span class="hljs-attribute">justify-content</span>: space-between;<br>&#125;<br><br><span class="hljs-selector-class">.error</span> &#123;<br>  <span class="hljs-attribute">text-align</span>: center;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.6rem</span>;<br>  <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">500</span>;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">2rem</span>;<br>  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#495057</span>;<br>  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">100px</span>;<br>&#125;<br><br><span class="hljs-selector-tag">img</span> &#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">14rem</span>;<br>&#125;<br><br><span class="hljs-selector-tag">h1</span> &#123;<br>  <span class="hljs-attribute">font-family</span>: <span class="hljs-string">&quot;Codystar&quot;</span>;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">5.6rem</span>;<br>&#125;<br><br><span class="hljs-selector-tag">h2</span> &#123;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">3.6rem</span>;<br>  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">2rem</span>;<br>&#125;<br><br><span class="hljs-selector-tag">h3</span> &#123;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">2.4rem</span>;<br>  <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">600</span>;<br>  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">4rem</span>;<br>&#125;<br><br><span class="hljs-selector-tag">h4</span> &#123;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">2.2rem</span>;<br>  <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">600</span>;<br>  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">2.4rem</span>;<br>&#125;<br><br><span class="hljs-selector-class">.start</span> &#123;<br>  <span class="hljs-attribute">display</span>: flex;<br>  <span class="hljs-attribute">flex-direction</span>: column;<br>  <span class="hljs-attribute">align-items</span>: center;<br>&#125;<br><br><span class="hljs-selector-class">.progress</span> &#123;<br>  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">4rem</span>;<br>  <span class="hljs-attribute">display</span>: grid;<br>  <span class="hljs-attribute">justify-content</span>: space-between;<br>  <span class="hljs-attribute">gap</span>: <span class="hljs-number">1.2rem</span>;<br>  <span class="hljs-attribute">grid-template-columns</span>: auto auto;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.8rem</span>;<br>  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--color-medium);<br>&#125;<br><br>progress &#123;<br>  -webkit-appearance: none;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">12px</span>;<br>  <span class="hljs-attribute">grid-column</span>: <span class="hljs-number">1</span> / -<span class="hljs-number">1</span>;<br>&#125;<br><br>::-webkit-progress-bar &#123;<br>  <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">var</span>(--color-medium);<br>  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">100px</span>;<br>&#125;<br>::-webkit-progress-value &#123;<br>  <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">var</span>(--color-theme);<br>  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">100px</span>;<br>&#125;<br><br><span class="hljs-selector-class">.btn</span> &#123;<br>  <span class="hljs-attribute">display</span>: block;<br>  <span class="hljs-attribute">font-family</span>: inherit;<br>  <span class="hljs-attribute">color</span>: inherit;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">2rem</span>;<br>  <span class="hljs-attribute">border</span>: <span class="hljs-number">2px</span> solid <span class="hljs-built_in">var</span>(--color-dark);<br>  <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">var</span>(--color-dark);<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">1.2rem</span> <span class="hljs-number">2.4rem</span>;<br>  <span class="hljs-attribute">cursor</span>: pointer;<br>  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">100px</span>;<br>  <span class="hljs-attribute">transition</span>: <span class="hljs-number">0.3s</span>;<br>&#125;<br><br><span class="hljs-selector-class">.btn</span><span class="hljs-selector-pseudo">:not</span>(<span class="hljs-selector-attr">[disabled]</span>)<span class="hljs-selector-pseudo">:hover</span> &#123;<br>  <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">var</span>(--color-darkest);<br>&#125;<br><br><span class="hljs-selector-class">.btn-option</span><span class="hljs-selector-pseudo">:not</span>(<span class="hljs-selector-attr">[disabled]</span>)<span class="hljs-selector-pseudo">:hover</span> &#123;<br>  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(<span class="hljs-number">1.2rem</span>);<br>&#125;<br><br><span class="hljs-selector-class">.btn</span><span class="hljs-selector-attr">[disabled]</span><span class="hljs-selector-pseudo">:hover</span> &#123;<br>  <span class="hljs-attribute">cursor</span>: not-allowed;<br>&#125;<br><br><span class="hljs-selector-class">.btn-ui</span> &#123;<br>  <span class="hljs-attribute">float</span>: right;<br>&#125;<br><br><span class="hljs-selector-class">.options</span> &#123;<br>  <span class="hljs-attribute">display</span>: flex;<br>  <span class="hljs-attribute">flex-direction</span>: column;<br>  <span class="hljs-attribute">gap</span>: <span class="hljs-number">1.2rem</span>;<br>  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">3.2rem</span>;<br>&#125;<br><br><span class="hljs-selector-class">.btn-option</span> &#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;<br>  <span class="hljs-attribute">text-align</span>: left;<br>&#125;<br><br><span class="hljs-selector-class">.btn-option</span><span class="hljs-selector-class">.correct</span> &#123;<br>  <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">var</span>(--color-theme);<br>  <span class="hljs-attribute">border</span>: <span class="hljs-number">2px</span> solid <span class="hljs-built_in">var</span>(--color-theme);<br>  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--color-light);<br>&#125;<br><span class="hljs-selector-class">.btn-option</span><span class="hljs-selector-class">.wrong</span> &#123;<br>  <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">var</span>(--color-accent);<br>  <span class="hljs-attribute">border</span>: <span class="hljs-number">2px</span> solid <span class="hljs-built_in">var</span>(--color-accent);<br>  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--color-darkest);<br>&#125;<br><br><span class="hljs-selector-class">.answer</span> &#123;<br>  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(<span class="hljs-number">2rem</span>);<br>&#125;<br><br><span class="hljs-selector-class">.result</span> &#123;<br>  <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">var</span>(--color-theme);<br>  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--color-light);<br>  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">100px</span>;<br>  <span class="hljs-attribute">text-align</span>: center;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">2rem</span> <span class="hljs-number">0</span>;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">2rem</span>;<br>  <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">500</span>;<br>  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">1.6rem</span>;<br>&#125;<br><br><span class="hljs-selector-class">.result</span> <span class="hljs-selector-tag">span</span> &#123;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">2.2rem</span>;<br>  <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">4px</span>;<br>&#125;<br><br><span class="hljs-selector-class">.highscore</span> &#123;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.8rem</span>;<br>  <span class="hljs-attribute">text-align</span>: center;<br>  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">4.8rem</span>;<br>&#125;<br><br><span class="hljs-selector-class">.loader-container</span> &#123;<br>  <span class="hljs-attribute">display</span>: flex;<br>  <span class="hljs-attribute">flex-direction</span>: column;<br>  <span class="hljs-attribute">align-items</span>: center;<br>  <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">4rem</span>;<br>  <span class="hljs-attribute">gap</span>: <span class="hljs-number">1.6rem</span>;<br><br>  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--color-medium);<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.4rem</span>;<br>&#125;<br><br><span class="hljs-selector-class">.timer</span> &#123;<br>  <span class="hljs-attribute">float</span>: left;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.8rem</span>;<br>  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--color-medium);<br>  <span class="hljs-attribute">border</span>: <span class="hljs-number">2px</span> solid <span class="hljs-built_in">var</span>(--color-dark);<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">1.35rem</span> <span class="hljs-number">2.8rem</span>;<br>  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">100px</span>;<br>&#125;<br><br><span class="hljs-comment">/* CREDIT: https://dev.to/afif/i-made-100-css-loaders-for-your-next-project-4eje */</span><br><span class="hljs-selector-class">.loader</span> &#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">50px</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">24px</span>;<br>  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">radial-gradient</span>(circle closest-side, currentColor <span class="hljs-number">90%</span>, <span class="hljs-number">#0000</span>) <span class="hljs-number">0%</span><br>      <span class="hljs-number">50%</span>,<br>    <span class="hljs-built_in">radial-gradient</span>(circle closest-side, currentColor <span class="hljs-number">90%</span>, <span class="hljs-number">#0000</span>) <span class="hljs-number">50%</span> <span class="hljs-number">50%</span>,<br>    <span class="hljs-built_in">radial-gradient</span>(circle closest-side, currentColor <span class="hljs-number">90%</span>, <span class="hljs-number">#0000</span>) <span class="hljs-number">100%</span> <span class="hljs-number">50%</span>;<br>  <span class="hljs-attribute">background-size</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">100%</span> / <span class="hljs-number">3</span>) <span class="hljs-number">12px</span>;<br>  <span class="hljs-attribute">background-repeat</span>: no-repeat;<br>  <span class="hljs-attribute">animation</span>: loader <span class="hljs-number">1s</span> infinite linear;<br>&#125;<br><br><span class="hljs-keyword">@keyframes</span> loader &#123;<br>  <span class="hljs-number">20%</span> &#123;<br>    <span class="hljs-attribute">background-position</span>: <span class="hljs-number">0%</span> <span class="hljs-number">0%</span>, <span class="hljs-number">50%</span> <span class="hljs-number">50%</span>, <span class="hljs-number">100%</span> <span class="hljs-number">50%</span>;<br>  &#125;<br>  <span class="hljs-number">40%</span> &#123;<br>    <span class="hljs-attribute">background-position</span>: <span class="hljs-number">0%</span> <span class="hljs-number">100%</span>, <span class="hljs-number">50%</span> <span class="hljs-number">0%</span>, <span class="hljs-number">100%</span> <span class="hljs-number">50%</span>;<br>  &#125;<br>  <span class="hljs-number">60%</span> &#123;<br>    <span class="hljs-attribute">background-position</span>: <span class="hljs-number">0%</span> <span class="hljs-number">50%</span>, <span class="hljs-number">50%</span> <span class="hljs-number">100%</span>, <span class="hljs-number">100%</span> <span class="hljs-number">0%</span>;<br>  &#125;<br>  <span class="hljs-number">80%</span> &#123;<br>    <span class="hljs-attribute">background-position</span>: <span class="hljs-number">0%</span> <span class="hljs-number">50%</span>, <span class="hljs-number">50%</span> <span class="hljs-number">50%</span>, <span class="hljs-number">100%</span> <span class="hljs-number">100%</span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="2ã€App-js"><a href="#2ã€App-js" class="headerlink" title="2ã€App.js"></a>2ã€App.js</h5><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> &#123; useEffect, useReducer &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Header</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./Header&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Main</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./Main&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Loader</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./Loader&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Error</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./Error&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">StartScreen</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./StartScreen&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Question</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./Question&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">NextButton</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./NextButton&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Progress</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./Progress&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">FinishScreen</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./FinishScreen&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Footer</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./Footer&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Timer</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./Timer&quot;</span>;<br><br><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">SECS_PER_QUESTION</span> = <span class="hljs-number">30</span>;    <br><br><span class="hljs-keyword">const</span> initialState = &#123;<br>  <span class="hljs-attr">questions</span>: [],<br>  <span class="hljs-attr">status</span>: <span class="hljs-string">&quot;loading&quot;</span>, <span class="hljs-comment">//&#x27;loading&#x27;,&#x27;error&#x27;,&#x27;ready&#x27;,&#x27;active&#x27;,&#x27;finished&#x27;</span><br>  <span class="hljs-attr">index</span>: <span class="hljs-number">0</span>,<br>  <span class="hljs-attr">answer</span>: <span class="hljs-literal">null</span>,<br>  <span class="hljs-attr">points</span>: <span class="hljs-number">0</span>,<br>  <span class="hljs-attr">highscore</span>: <span class="hljs-number">0</span>,<br>  <span class="hljs-attr">secondsRemaining</span>: <span class="hljs-number">0</span>,<br>&#125;;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">reducer</span>(<span class="hljs-params">state, action</span>) &#123;<br>  <span class="hljs-keyword">switch</span> (action.<span class="hljs-property">type</span>) &#123;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;dataReceived&quot;</span>:   <span class="hljs-comment">//æ¥æ”¶åˆ°æ•°æ®ä¹‹å‰æ˜¯æ˜¾ç¤ºLoadingç•Œé¢</span><br>      <span class="hljs-keyword">return</span> &#123;<br>        ...state,<br>        <span class="hljs-attr">questions</span>: action.<span class="hljs-property">payload</span>,<br>        <span class="hljs-attr">status</span>: <span class="hljs-string">&quot;ready&quot;</span>,<br>      &#125;;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;dataFailed&quot;</span>:    <span class="hljs-comment">//erroræƒ…å†µå¤„ç†</span><br>      <span class="hljs-keyword">return</span> &#123;<br>        ...state,<br>        <span class="hljs-attr">status</span>: <span class="hljs-string">&quot;error&quot;</span>,<br>      &#125;;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;start&quot;</span>:       <span class="hljs-comment">//æ˜¾ç¤ºå¼€å§‹ç•Œé¢ï¼ˆæœ€åˆæ˜¾ç¤ºç¬¬ä¸€é“é—®é¢˜ï¼‰</span><br>      <span class="hljs-keyword">return</span> &#123;<br>        ...state,<br>        <span class="hljs-attr">status</span>: <span class="hljs-string">&quot;active&quot;</span>,<br>        <span class="hljs-attr">secondsRemaining</span>: state.<span class="hljs-property">questions</span>.<span class="hljs-property">length</span> * <span class="hljs-variable constant_">SECS_PER_QUESTION</span>,<span class="hljs-comment">//å¼€å§‹å›ç­”é—®é¢˜æ—¶å¯åŠ¨è®¡æ—¶</span><br>      &#125;;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;newAnswer&quot;</span>:<br>      <span class="hljs-keyword">const</span> question = state.<span class="hljs-property">questions</span>.<span class="hljs-title function_">at</span>(state.<span class="hljs-property">index</span>);  <span class="hljs-comment">//å®šä½é—®é¢˜</span><br>      <span class="hljs-keyword">return</span> &#123;<br>        ...state,<br>        <span class="hljs-attr">answer</span>: action.<span class="hljs-property">payload</span>,   <span class="hljs-comment">//é€šè¿‡payloadä¼ é€’ç­”æ¡ˆçš„é€‰é¡¹</span><br>        <span class="hljs-attr">points</span>:<br>          action.<span class="hljs-property">payload</span> === question.<span class="hljs-property">correctOption</span><br>            ? state.<span class="hljs-property">points</span> + question.<span class="hljs-property">points</span><br>            : state.<span class="hljs-property">points</span>,<br>      &#125;;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;nextQuestion&quot;</span>:<br>      <span class="hljs-keyword">return</span> &#123; ...state, <span class="hljs-attr">index</span>: state.<span class="hljs-property">index</span> + <span class="hljs-number">1</span>, <span class="hljs-attr">answer</span>: <span class="hljs-literal">null</span> &#125;;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;finish&quot;</span>:<br>      <span class="hljs-keyword">return</span> &#123;<br>        ...state,<br>        <span class="hljs-attr">status</span>: <span class="hljs-string">&quot;finished&quot;</span>,<br>        <span class="hljs-attr">highscore</span>:<br>          state.<span class="hljs-property">points</span> &gt; state.<span class="hljs-property">highscore</span> ? state.<span class="hljs-property">points</span> : state.<span class="hljs-property">highscore</span>,<br>      &#125;;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;restart&quot;</span>:<br>      <span class="hljs-keyword">return</span> &#123;<br>        ...initialState,<br>        <span class="hljs-attr">status</span>: <span class="hljs-string">&quot;ready&quot;</span>,<br>        <span class="hljs-attr">questions</span>: state.<span class="hljs-property">questions</span>,<br>      &#125;;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;tick&quot;</span>:<br>      <span class="hljs-keyword">return</span> &#123;<br>        ...state,<br>        <span class="hljs-attr">secondsRemaining</span>: state.<span class="hljs-property">secondsRemaining</span> - <span class="hljs-number">1</span>,<br>        <span class="hljs-attr">status</span>: state.<span class="hljs-property">secondsRemaining</span> === <span class="hljs-number">0</span> ? <span class="hljs-string">&quot;finished&quot;</span> : state.<span class="hljs-property">status</span>,<br>      &#125;;<br>    <span class="hljs-attr">default</span>:<br>      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;Action unknown&quot;</span>);<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> [<br>    &#123; questions, status, index, answer, points, highscore, secondsRemaining &#125;,<br>    dispatch,<br>  ] = <span class="hljs-title function_">useReducer</span>(reducer, initialState);<br><br>  <span class="hljs-keyword">const</span> numQuestions = questions.<span class="hljs-property">length</span>;<br>  <span class="hljs-keyword">const</span> maxPossiblePoints = questions.<span class="hljs-title function_">reduce</span>(<br>    <span class="hljs-function">(<span class="hljs-params">prev, cur</span>) =&gt;</span> prev + cur.<span class="hljs-property">points</span>,<br>    <span class="hljs-number">0</span><br>  );   <span class="hljs-comment">//reducerç§¯ç´¯å™¨</span><br><br>  <span class="hljs-title function_">useEffect</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-title function_">fetch</span>(<span class="hljs-string">&quot;http://localhost:8001/questions&quot;</span>)<br>      .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> res.<span class="hljs-title function_">json</span>())<br>      .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> <span class="hljs-title function_">dispatch</span>(&#123; <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;dataReceived&quot;</span>, <span class="hljs-attr">payload</span>: data &#125;))<br>      .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> <span class="hljs-title function_">dispatch</span>(&#123; <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;dataFailed&quot;</span> &#125;));<br>  &#125;, []);<span class="hljs-comment">//ä½¿ç”¨useEffectæ¥é€šè¿‡APIè·å–é—®é¢˜æ•°ç»„</span><br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Header</span> /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Main</span>&gt;</span></span><br><span class="language-xml">        &#123;status === &quot;loading&quot; &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">Loader</span> /&gt;</span>&#125;</span><br><span class="language-xml">        &#123;status === &quot;error&quot; &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">Error</span> /&gt;</span>&#125;</span><br><span class="language-xml">        &#123;status === &quot;ready&quot; &amp;&amp; (</span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">StartScreen</span> <span class="hljs-attr">numQuestions</span>=<span class="hljs-string">&#123;numQuestions&#125;</span> <span class="hljs-attr">dispatch</span>=<span class="hljs-string">&#123;dispatch&#125;</span> /&gt;</span></span><br><span class="language-xml">        )&#125;</span><br><span class="language-xml">        &#123;status === &quot;active&quot; &amp;&amp; (</span><br><span class="language-xml">          <span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">Progress</span></span></span><br><span class="hljs-tag"><span class="language-xml">              <span class="hljs-attr">index</span>=<span class="hljs-string">&#123;index&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">              <span class="hljs-attr">numQuestions</span>=<span class="hljs-string">&#123;numQuestions&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">              <span class="hljs-attr">points</span>=<span class="hljs-string">&#123;points&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">              <span class="hljs-attr">maxPossiblePoints</span>=<span class="hljs-string">&#123;maxPossiblePoints&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">              <span class="hljs-attr">answer</span>=<span class="hljs-string">&#123;answer&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">            /&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">Question</span></span></span><br><span class="hljs-tag"><span class="language-xml">              <span class="hljs-attr">question</span>=<span class="hljs-string">&#123;questions[index]&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">              <span class="hljs-attr">dispatch</span>=<span class="hljs-string">&#123;dispatch&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">              <span class="hljs-attr">answer</span>=<span class="hljs-string">&#123;answer&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">            /&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">Footer</span>&gt;</span></span><br><span class="language-xml">              <span class="hljs-tag">&lt;<span class="hljs-name">Timer</span> <span class="hljs-attr">dispatch</span>=<span class="hljs-string">&#123;dispatch&#125;</span> <span class="hljs-attr">secondsRemaining</span>=<span class="hljs-string">&#123;secondsRemaining&#125;</span> /&gt;</span></span><br><span class="language-xml">              <span class="hljs-tag">&lt;<span class="hljs-name">NextButton</span></span></span><br><span class="hljs-tag"><span class="language-xml">                <span class="hljs-attr">dispatch</span>=<span class="hljs-string">&#123;dispatch&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">                <span class="hljs-attr">answer</span>=<span class="hljs-string">&#123;answer&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">                <span class="hljs-attr">index</span>=<span class="hljs-string">&#123;index&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">                <span class="hljs-attr">numQuestions</span>=<span class="hljs-string">&#123;numQuestions&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">              /&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">Footer</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;/&gt;</span></span><br><span class="language-xml">        )&#125;</span><br><span class="language-xml">        &#123;status === &quot;finished&quot; &amp;&amp; (</span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">FinishScreen</span></span></span><br><span class="hljs-tag"><span class="language-xml">            <span class="hljs-attr">points</span>=<span class="hljs-string">&#123;points&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">            <span class="hljs-attr">maxPossiblePoints</span>=<span class="hljs-string">&#123;maxPossiblePoints&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">            <span class="hljs-attr">highscore</span>=<span class="hljs-string">&#123;highscore&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">            <span class="hljs-attr">dispatch</span>=<span class="hljs-string">&#123;dispatch&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          /&gt;</span></span><br><span class="language-xml">        )&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">Main</span>&gt;</span></span><br>    &lt;/div&gt;<br>  );<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span>;<br><br></code></pre></td></tr></table></figure><h5 id="3ã€Error-js"><a href="#3ã€Error-js" class="headerlink" title="3ã€Error.js"></a>3ã€Error.js</h5><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Error</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;error&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>ğŸ’¥<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> There was an error fecthing questions.</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Error</span>;<br></code></pre></td></tr></table></figure><h5 id="4ã€Loader-js"><a href="#4ã€Loader-js" class="headerlink" title="4ã€Loader.js"></a>4ã€Loader.js</h5><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Loader</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;loader-container&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;loader&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Loading questions...<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br><br></code></pre></td></tr></table></figure><h5 id="5ã€StartScreen-js"><a href="#5ã€StartScreen-js" class="headerlink" title="5ã€StartScreen.js"></a>5ã€StartScreen.js</h5><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">StartScreen</span>(<span class="hljs-params">&#123; numQuestions, dispatch &#125;</span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;start&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Welcome to The React Quiz!<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>&#123;numQuestions&#125; questions to test your React mastery<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;btn btn-ui&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> dispatch(&#123; type: &quot;start&quot; &#125;)&#125;</span><br><span class="language-xml">      &gt;</span><br><span class="language-xml">        Let&#x27;s start</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">StartScreen</span>;<br><br></code></pre></td></tr></table></figure><h5 id="6ã€Header-js"><a href="#6ã€Header-js" class="headerlink" title="6ã€Header.js"></a>6ã€Header.js</h5><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Header</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">header</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&#x27;app-header&#x27;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&#x27;logo512.png&#x27;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&#x27;React logo&#x27;</span> /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>The React Quiz<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Header</span>;<br><br></code></pre></td></tr></table></figure><h5 id="7ã€Main-js"><a href="#7ã€Main-js" class="headerlink" title="7ã€Main.js"></a>7ã€Main.js</h5><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Main</span>(<span class="hljs-params">&#123; children &#125;</span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">main</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;main&quot;</span>&gt;</span>&#123;children&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span></span>;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Main</span>;<br><br></code></pre></td></tr></table></figure><h5 id="8ã€Progress-js"><a href="#8ã€Progress-js" class="headerlink" title="8ã€Progress.js"></a>8ã€Progress.js</h5><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Progress</span>(<span class="hljs-params">&#123; index, numQuestions, points, maxPossiblePoints, answer &#125;</span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">header</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;progress&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">progress</span> <span class="hljs-attr">max</span>=<span class="hljs-string">&#123;numQuestions&#125;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;index</span> + <span class="hljs-attr">Number</span>(<span class="hljs-attr">answer</span> !== <span class="hljs-string">null)&#125;</span> /&gt;</span>&#123;*å¾ˆå·§å¦™åœ°è®¾ç½®äº†progressçš„å€¼ï¼Œæœ‰å›ç­”æ—¶ä¸ç§»åŠ¨ï¼Œå›ç­”åç§»åŠ¨*&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">        Question <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>&#123;index + 1&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>/&#123;numQuestions&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>&#123;points&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span> /&#123;maxPossiblePoints&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Progress</span>;<br><br></code></pre></td></tr></table></figure><h5 id="9ã€Questions-js"><a href="#9ã€Questions-js" class="headerlink" title="9ã€Questions.js"></a>9ã€Questions.js</h5><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Options</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./Options&quot;</span>;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Question</span>(<span class="hljs-params">&#123; question, dispatch, answer &#125;</span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span>&#123;question.question&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Options</span> <span class="hljs-attr">question</span>=<span class="hljs-string">&#123;question&#125;</span> <span class="hljs-attr">dispatch</span>=<span class="hljs-string">&#123;dispatch&#125;</span> <span class="hljs-attr">answer</span>=<span class="hljs-string">&#123;answer&#125;</span> /&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Question</span>;<br><br></code></pre></td></tr></table></figure><p>10ã€Options.js</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Options</span>(<span class="hljs-params">&#123; question, dispatch, answer &#125;</span>) &#123;<br>  <span class="hljs-keyword">const</span> hasAnswered = answer !== <span class="hljs-literal">null</span>;<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;options&quot;</span>&gt;</span></span><br><span class="language-xml">      &#123;question.options.map((option, index) =&gt; (</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">className</span>=<span class="hljs-string">&#123;</span>`<span class="hljs-attr">btn</span> <span class="hljs-attr">btn-option</span> $&#123;<span class="hljs-attr">index</span> === <span class="hljs-string">answer</span> ? &quot;<span class="hljs-attr">answer</span>&quot; <span class="hljs-attr">:</span> &quot;&quot;&#125; $&#123;</span></span><br><span class="hljs-tag"><span class="language-xml">            <span class="hljs-attr">hasAnswered</span></span></span><br><span class="hljs-tag"><span class="language-xml">              ? <span class="hljs-attr">index</span> === <span class="hljs-string">question.correctOption</span></span></span><br><span class="hljs-tag"><span class="language-xml">                ? &quot;<span class="hljs-attr">correct</span>&quot;</span></span><br><span class="hljs-tag"><span class="language-xml">                <span class="hljs-attr">:</span> &quot;<span class="hljs-attr">wrong</span>&quot;</span></span><br><span class="hljs-tag"><span class="language-xml">              <span class="hljs-attr">:</span> &quot;&quot;</span></span><br><span class="hljs-tag"><span class="language-xml">          &#125;`&#125;</span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">disabled</span>=<span class="hljs-string">&#123;hasAnswered&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;option&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> dispatch(&#123; type: &quot;newAnswer&quot;, payload: index &#125;)&#125;</span><br><span class="language-xml">        &gt;</span><br><span class="language-xml">          &#123;option&#125;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      ))&#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Options</span>;<br><br></code></pre></td></tr></table></figure><h5 id="11ã€Footer-js"><a href="#11ã€Footer-js" class="headerlink" title="11ã€Footer.js"></a>11ã€Footer.js</h5><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Footer</span>(<span class="hljs-params">&#123; children &#125;</span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">footer</span>&gt;</span>&#123;children&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">footer</span>&gt;</span></span>;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Footer</span>;<br><br></code></pre></td></tr></table></figure><h5 id="12ã€Timer-js"><a href="#12ã€Timer-js" class="headerlink" title="12ã€Timer.js"></a>12ã€Timer.js</h5><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><br><span class="hljs-keyword">import</span> &#123; useEffect &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Timer</span>(<span class="hljs-params">&#123; dispatch, secondsRemaining &#125;</span>) &#123;<br>  <span class="hljs-keyword">const</span> mins = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(secondsRemaining / <span class="hljs-number">60</span>);<br>  <span class="hljs-keyword">const</span> seconds = secondsRemaining % <span class="hljs-number">60</span>;<br>  <span class="hljs-title function_">useEffect</span>(<br>    <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-keyword">const</span> id = <span class="hljs-built_in">setInterval</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-title function_">dispatch</span>(&#123; <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;tick&quot;</span> &#125;);<br>      &#125;, <span class="hljs-number">1000</span>);<br><br>      <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">clearInterval</span>(id);<br>    &#125;,<br>    [dispatch]<br>  );<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;timer&quot;</span>&gt;</span></span><br><span class="language-xml">      &#123;mins &lt; 10 &amp;&amp; &quot;0&quot;&#125;</span><br><span class="language-xml">      &#123;mins&#125; : &#123;seconds &lt; 10 &amp;&amp; &quot;0&quot;&#125;</span><br><span class="language-xml">      &#123;seconds&#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Timer</span>;<br><br></code></pre></td></tr></table></figure><p><code>setInterval</code> æ¯éš” 1000 æ¯«ç§’ï¼ˆ1ç§’ï¼‰è§¦å‘ä¸€æ¬¡ï¼Œå‘ <code>dispatch</code> å‘é€ä¸€ä¸ª <code>&#123; type: &quot;tick&quot; &#125;</code> çš„åŠ¨ä½œï¼Œé€šå¸¸è¿™ä¸ªåŠ¨ä½œä¼šåœ¨ <code>reducer</code> ä¸­è¢«å¤„ç†ä¸ºå‡å°‘ <code>secondsRemaining</code> çš„å€¼ï¼Œä»è€Œå®ç°å€’è®¡æ—¶ã€‚<code>clearInterval(id)</code> æ˜¯æ¸…é™¤å®šæ—¶å™¨çš„æ“ä½œï¼Œè¿”å›çš„å‡½æ•°ä¼šåœ¨ç»„ä»¶å¸è½½æ—¶æˆ–åœ¨ <code>dispatch</code> å‘ç”Ÿå˜åŒ–æ—¶è¢«è°ƒç”¨ï¼Œä»è€Œæ¸…é™¤å®šæ—¶å™¨ï¼Œé¿å…å†…å­˜æ³„æ¼æˆ–ä¸å¿…è¦çš„è®¡æ—¶æ“ä½œã€‚</p><h5 id="13ã€NextButton-js"><a href="#13ã€NextButton-js" class="headerlink" title="13ã€NextButton.js"></a>13ã€NextButton.js</h5><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">NextButton</span>(<span class="hljs-params">&#123; dispatch, answer, index, numQuestions &#125;</span>) &#123;<br>  <span class="hljs-keyword">if</span> (answer === <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>  <span class="hljs-keyword">if</span> (index &lt; numQuestions - <span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;btn btn-ui&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> dispatch(&#123; type: &quot;nextQuestion&quot; &#125;)&#125;</span><br><span class="language-xml">      &gt;</span><br><span class="language-xml">        Next</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br>    );<br>  <span class="hljs-keyword">if</span> (index === numQuestions - <span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;btn btn-ui&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> dispatch(&#123; type: &quot;finish&quot; &#125;)&#125;</span><br><span class="language-xml">      &gt;</span><br><span class="language-xml">        Finish</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br>    );<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">NextButton</span>;<br><br></code></pre></td></tr></table></figure><h5 id="14ã€FinishScreen"><a href="#14ã€FinishScreen" class="headerlink" title="14ã€FinishScreen"></a>14ã€FinishScreen</h5><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">FinishScreen</span>(<span class="hljs-params">&#123; points, maxPossiblePoints, highscore, dispatch &#125;</span>) &#123;<br>  <span class="hljs-keyword">const</span> percentage = (points / maxPossiblePoints) * <span class="hljs-number">100</span>;<br><br>  <span class="hljs-keyword">let</span> emoji;<br>  <span class="hljs-keyword">if</span> (percentage === <span class="hljs-number">100</span>) emoji = <span class="hljs-string">&quot;ğŸ‘‘&quot;</span>;<br>  <span class="hljs-keyword">if</span> (percentage &gt;= <span class="hljs-number">80</span> &amp;&amp; percentage &lt; <span class="hljs-number">100</span>) emoji = <span class="hljs-string">&quot;ğŸ¤©&quot;</span>;<br>  <span class="hljs-keyword">if</span> (percentage &gt;= <span class="hljs-number">60</span> &amp;&amp; percentage &lt; <span class="hljs-number">80</span>) emoji = <span class="hljs-string">&quot;ğŸ¥³&quot;</span>;<br>  <span class="hljs-keyword">if</span> (percentage &gt;= <span class="hljs-number">0</span> &amp;&amp; percentage &lt; <span class="hljs-number">60</span>) emoji = <span class="hljs-string">&quot;ğŸ™â€â™€ï¸&quot;</span>;<br>  <span class="hljs-keyword">if</span> (percentage === <span class="hljs-number">0</span>) emoji = <span class="hljs-string">&quot;ğŸ¤¡&quot;</span>;<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;result&quot;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;emoji&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>You scored <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>&#123;points&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span> out of&#123;&quot; &quot;&#125;</span><br><span class="language-xml">        &#123;maxPossiblePoints&#125;(&#123;Math.ceil(percentage)&#125;%)</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;highscore&quot;</span>&gt;</span>(Highscore: &#123;highscore&#125; points)<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;btn btn-ui&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> dispatch(&#123; type: &quot;restart&quot; &#125;)&#125;</span><br><span class="language-xml">      &gt;</span><br><span class="language-xml">        Restart quiz</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">FinishScreen</span>;<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>reactè¯¾ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>react</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>reactè¯¾ç¨‹8-reactåŸºç¡€çŸ¥è¯†</title>
    <link href="/2024/08/19/react%E8%AF%BE%E7%A8%8B8-react%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"/>
    <url>/2024/08/19/react%E8%AF%BE%E7%A8%8B8-react%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/</url>
    
    <content type="html"><![CDATA[<p>æœ¬èŠ‚è¯¾è¡¥å……äº†ä¸€äº›å…³äºReactæ¡†æ¶çš„åŸºç¡€çŸ¥è¯†ã€‚</p><span id="more"></span><h4 id="ä¸€ã€DOMå…ƒç´ "><a href="#ä¸€ã€DOMå…ƒç´ " class="headerlink" title="ä¸€ã€DOMå…ƒç´ "></a>ä¸€ã€DOMå…ƒç´ </h4><p>æ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼ˆDocument Object Modelï¼‰å…ƒç´ æ˜¯HTMLæˆ–XMLæ–‡æ¡£æ€»çš„å„ä¸ªèŠ‚ç‚¹ï¼Œè¿™äº›èŠ‚ç‚¹ä»£è¡¨æ–‡æ¡£çš„ç»“æ„å’Œå†…å®¹ã€‚åœ¨æµè§ˆå™¨ä¸­ï¼ŒDOM æä¾›äº†ä¸€ç§ç¼–ç¨‹æ¥å£ï¼Œä½¿å¾—å¼€å‘è€…å¯ä»¥é€šè¿‡ JavaScript åŠ¨æ€åœ°è®¿é—®å’Œæ“ä½œé¡µé¢å†…å®¹ã€‚HTML å…ƒç´ ï¼ˆå¦‚ <code>&lt;div&gt;</code>ã€<code>&lt;p&gt;</code>ã€<code>&lt;a&gt;</code> ç­‰ï¼‰åœ¨ DOM ä¸­è¡¨ç¤ºä¸ºå…ƒç´ èŠ‚ç‚¹ã€‚</p><p>é€šè¿‡ JavaScriptï¼Œå¼€å‘è€…å¯ä»¥ä½¿ç”¨å„ç§æ–¹æ³•å’Œå±æ€§æ¥æ“ä½œ DOM å…ƒç´ ï¼Œä»¥åŠ¨æ€ä¿®æ”¹é¡µé¢å†…å®¹å’Œç»“æ„ã€‚ä¾‹å¦‚ï¼š</p><ul><li><strong>é€‰æ‹© DOM å…ƒç´ </strong>ï¼šå¯ä»¥ä½¿ç”¨ <code>document.getElementById()</code>ã€<code>document.querySelector()</code> ç­‰æ–¹æ³•é€‰æ‹©ç‰¹å®šçš„ DOM å…ƒç´ ã€‚</li><li><strong>ä¿®æ”¹å†…å®¹æˆ–æ ·å¼</strong>ï¼šå¯ä»¥é€šè¿‡ä¿®æ”¹ <code>innerHTML</code>ã€<code>textContent</code> æˆ– <code>style</code> å±æ€§æ¥æ›´æ”¹å…ƒç´ çš„å†…å®¹æˆ–æ ·å¼ã€‚</li><li><strong>æ·»åŠ æˆ–ç§»é™¤å…ƒç´ </strong>ï¼šå¯ä»¥ä½¿ç”¨ <code>appendChild()</code>ã€<code>removeChild()</code> ç­‰æ–¹æ³•å‘ DOM ä¸­æ·»åŠ æˆ–ç§»é™¤å…ƒç´ ã€‚</li><li><strong>äº‹ä»¶å¤„ç†</strong>ï¼šå¯ä»¥ä¸º DOM å…ƒç´ æ·»åŠ äº‹ä»¶ç›‘å¬å™¨æ¥å¤„ç†ç”¨æˆ·äº¤äº’äº‹ä»¶ï¼ˆå¦‚ç‚¹å‡»ã€è¾“å…¥ç­‰ï¼‰ã€‚</li></ul><h4 id="äºŒã€Hook"><a href="#äºŒã€Hook" class="headerlink" title="äºŒã€Hook"></a>äºŒã€Hook</h4><p>React ä¸­çš„ Hook æ˜¯ä¸€ç»„ç‰¹æ®Šçš„å‡½æ•°ï¼Œå®ƒä»¬å…è®¸ä½ åœ¨å‡½æ•°ç»„ä»¶ä¸­ä½¿ç”¨ React çš„çŠ¶æ€å’Œå…¶ä»–ç‰¹æ€§ï¼Œè€Œæ— éœ€ç¼–å†™ç±»ç»„ä»¶ã€‚Hooks æ˜¯ React 16.8 ç‰ˆæœ¬å¼•å…¥çš„ï¼Œç›®çš„æ˜¯ç®€åŒ–ä»£ç å¹¶ä½¿ç»„ä»¶æ›´å®¹æ˜“ç†è§£å’Œå¤ç”¨ã€‚</p><p><strong>1ã€ä¸ºä»€ä¹ˆä½¿ç”¨ Hooksï¼Ÿ</strong></p><ul><li><strong>å‡½æ•°ç»„ä»¶çš„å±€é™æ€§</strong>ï¼šåœ¨ Hooks å¼•å…¥ä¹‹å‰ï¼Œåªæœ‰ç±»ç»„ä»¶å¯ä»¥ä½¿ç”¨çŠ¶æ€å’Œç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚è€Œå‡½æ•°ç»„ä»¶åˆ™åªèƒ½å¤„ç†ç®€å•çš„ã€æ— çŠ¶æ€çš„é€»è¾‘ã€‚</li><li><strong>Hooks çš„ä¼˜åŠ¿</strong>ï¼šé€šè¿‡ Hooksï¼Œä½ å¯ä»¥åœ¨å‡½æ•°ç»„ä»¶ä¸­ä½¿ç”¨çŠ¶æ€ã€ç®¡ç†å‰¯ä½œç”¨ã€ä»¥åŠè®¿é—®ç»„ä»¶ç”Ÿå‘½å‘¨æœŸç­‰åŠŸèƒ½ã€‚è¿™ä½¿å¾—å‡½æ•°ç»„ä»¶å¯ä»¥æ›¿ä»£ç±»ç»„ä»¶ï¼Œå¹¶ä¸”æ›´æ˜“äºç¼–å†™ã€å¤ç”¨å’Œæµ‹è¯•ã€‚</li></ul><p><strong>2ã€å¸¸è§çš„ Hooks</strong></p><ul><li><p>**<code>useState</code>**ï¼šç”¨äºåœ¨å‡½æ•°ç»„ä»¶ä¸­æ·»åŠ çŠ¶æ€ã€‚</p></li><li><p>**<code>useEffect</code>**ï¼šç”¨äºåœ¨å‡½æ•°ç»„ä»¶ä¸­å¤„ç†å‰¯ä½œç”¨ï¼Œæ¯”å¦‚æ•°æ®è·å–ã€è®¢é˜…æˆ–æ‰‹åŠ¨ä¿®æ”¹ DOMã€‚å®ƒç›¸å½“äºç±»ç»„ä»¶ä¸­çš„ <code>componentDidMount</code>ã€<code>componentDidUpdate</code> å’Œ <code>componentWillUnmount</code>ã€‚</p></li><li><p>**<code>useContext</code>**ï¼šå…è®¸ä½ åœ¨å‡½æ•°ç»„ä»¶ä¸­ä½¿ç”¨ React çš„ä¸Šä¸‹æ–‡ï¼ˆContextï¼‰ï¼Œä»è€Œé¿å…é€šè¿‡ç»„ä»¶æ ‘é€å±‚ä¼ é€’æ•°æ®ã€‚</p></li><li><p>**<code>useReducer</code>**ï¼šç”¨äºåœ¨å‡½æ•°ç»„ä»¶ä¸­ç®¡ç†æ›´å¤æ‚çš„çŠ¶æ€é€»è¾‘ï¼Œæ˜¯ <code>useState</code> çš„æ›¿ä»£æ–¹æ¡ˆã€‚å®ƒç±»ä¼¼äº Redux çš„ reducer æ¦‚å¿µã€‚</p></li></ul><p><strong>3ã€Hooks çš„è§„åˆ™</strong></p><ul><li><strong>åªèƒ½åœ¨å‡½æ•°ç»„ä»¶æˆ–è‡ªå®šä¹‰ Hook ä¸­è°ƒç”¨</strong>ï¼šä¸èƒ½åœ¨æ™®é€šçš„ JavaScript å‡½æ•°ã€ç±»ç»„ä»¶æˆ–å¾ªç¯ã€æ¡ä»¶è¯­å¥ä¸­è°ƒç”¨ Hookã€‚</li><li><strong>å¿…é¡»åœ¨é¡¶å±‚è°ƒç”¨</strong>ï¼šä¸èƒ½åœ¨åµŒå¥—çš„å‡½æ•°æˆ–ä»£ç å—ä¸­è°ƒç”¨ Hookã€‚è¿™æ˜¯ä¸ºäº†ä¿è¯æ¯æ¬¡æ¸²æŸ“æ—¶ Hook çš„è°ƒç”¨é¡ºåºä¸€è‡´ï¼Œä»è€Œç¡®ä¿çŠ¶æ€å’Œå‰¯ä½œç”¨çš„æ­£ç¡®æ€§ã€‚</li></ul><h4 id="ä¸‰ã€Reconciler"><a href="#ä¸‰ã€Reconciler" class="headerlink" title="ä¸‰ã€Reconciler"></a>ä¸‰ã€Reconciler</h4><p>åœ¨ React ä¸­ï¼Œ<strong>reconciler</strong> æ˜¯ä¸€ä¸ªå†…éƒ¨æœºåˆ¶ï¼Œè´Ÿè´£æ¯”è¾ƒå’Œåè°ƒï¼ˆreconcileï¼‰ç»„ä»¶çŠ¶æ€å˜åŒ–æ—¶çš„ UI æ›´æ–°è¿‡ç¨‹ã€‚å®ƒæ˜¯ React æ ¸å¿ƒéƒ¨åˆ†ä¹‹ä¸€ï¼Œå¸®åŠ©ç¡®å®šåœ¨æ¯æ¬¡æ¸²æŸ“æ—¶éœ€è¦æ›´æ–°å“ªäº›éƒ¨åˆ†çš„ UIï¼Œä»¥åŠå¦‚ä½•æœ€æœ‰æ•ˆåœ°è¿›è¡Œè¿™äº›æ›´æ–°ã€‚</p><p><strong>1ã€Reconciler çš„ä¸»è¦ä½œç”¨</strong></p><ul><li><strong>å·®å¼‚è®¡ç®—ï¼ˆDiffingï¼‰</strong>ï¼šå½“ React ç»„ä»¶çš„çŠ¶æ€æˆ–å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒReconciler è´Ÿè´£æ¯”è¾ƒæ–°æ—§è™šæ‹Ÿ DOM æ ‘ï¼Œæ‰¾å‡ºä¸¤è€…ä¹‹é—´çš„å·®å¼‚ã€‚è¿™ä¸€è¿‡ç¨‹ç§°ä¸ºâ€œdiffingâ€ã€‚</li><li><strong>æœ€å°åŒ–æ›´æ–°</strong>ï¼šé€šè¿‡ diffing è®¡ç®—ï¼ŒReconciler å¯ä»¥ç¡®å®šæœ€å°åŒ–çš„æ›´æ–°é›†ï¼Œå³éœ€è¦ä¿®æ”¹çš„èŠ‚ç‚¹ï¼Œè€Œä¸æ˜¯é‡æ–°æ¸²æŸ“æ•´ä¸ª UIã€‚è¿™æå‡äº†æ€§èƒ½ï¼Œå°¤å…¶æ˜¯åœ¨å¤§å‹å¤æ‚åº”ç”¨ä¸­ã€‚</li><li><strong>è§¦å‘æ¸²æŸ“æ›´æ–°</strong>ï¼šæ ¹æ® diffing çš„ç»“æœï¼ŒReconciler ä¼šå‘Šè¯‰æ¸²æŸ“å™¨ï¼ˆrendererï¼‰å“ªäº› DOM æ“ä½œéœ€è¦æ‰§è¡Œï¼Œä»è€Œæ›´æ–°é¡µé¢çš„ UIã€‚å¯¹äº web åº”ç”¨ï¼Œæ¸²æŸ“å™¨é€šå¸¸æ˜¯ React DOMã€‚</li></ul><p><strong>2ã€å·¥ä½œåŸç†</strong></p><p>Reconciler çš„æ ¸å¿ƒåœ¨äºå¦‚ä½•æœ‰æ•ˆåœ°è®¡ç®—å‡ºæ—§çš„è™šæ‹Ÿ DOMï¼ˆvirtual DOMï¼‰æ ‘ä¸æ–°çš„è™šæ‹Ÿ DOM æ ‘ä¹‹é—´çš„å·®å¼‚ï¼Œå¹¶ç”Ÿæˆéœ€è¦å¯¹å®é™… DOM è¿›è¡Œçš„æ›´æ–°æ“ä½œã€‚ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p><ul><li><strong>è™šæ‹Ÿ DOM</strong>ï¼šReact ä½¿ç”¨è™šæ‹Ÿ DOM æ¥è¡¨ç¤ºç”¨æˆ·ç•Œé¢çš„ç»“æ„ã€‚è™šæ‹Ÿ DOM æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ JavaScript å¯¹è±¡æ ‘ï¼Œæè¿°äº† UI çš„å½“å‰çŠ¶æ€ã€‚</li><li><strong>æ¯”è¾ƒï¼ˆComparingï¼‰</strong>ï¼šå½“ç»„ä»¶çŠ¶æ€æˆ–å±æ€§æ›´æ–°æ—¶ï¼ŒReact ä¼šåˆ›å»ºä¸€æ£µæ–°çš„è™šæ‹Ÿ DOM æ ‘ã€‚Reconciler ç„¶åä¼šæ¯”è¾ƒæ–°æ—§ä¸¤æ£µæ ‘ï¼Œæ‰¾å‡ºå®ƒä»¬ä¹‹é—´çš„å·®å¼‚ã€‚</li><li><strong>å·®å¼‚è®¡ç®—ï¼ˆDiffingï¼‰</strong>ï¼šReconciler ä½¿ç”¨äº†ä¸€ç§é«˜æ•ˆçš„ç®—æ³•ï¼Œç§°ä¸ºâ€œdiffingâ€ï¼Œæ¥æ‰¾å‡ºå“ªäº›èŠ‚ç‚¹æ”¹å˜äº†ã€‚è¿™åŒ…æ‹¬èŠ‚ç‚¹çš„å¢åˆ æ”¹ã€å±æ€§å˜åŒ–ç­‰ã€‚</li><li><strong>æ›´æ–°ï¼ˆUpdatingï¼‰</strong>ï¼šæ ¹æ® diffing çš„ç»“æœï¼ŒReconciler ä¼šç”Ÿæˆä¸€ç³»åˆ—æ“ä½œæŒ‡ä»¤ï¼ˆä¾‹å¦‚æ’å…¥èŠ‚ç‚¹ã€åˆ é™¤èŠ‚ç‚¹ã€æ›´æ–°å±æ€§ç­‰ï¼‰ï¼Œè¿™äº›æŒ‡ä»¤å°†è¢«ä¼ é€’ç»™æ¸²æŸ“å™¨ï¼Œæ¸²æŸ“å™¨æœ€ç»ˆä¼šå°†è¿™äº›å˜åŒ–åº”ç”¨åˆ°å®é™…çš„ DOM ä¸­ã€‚</li></ul><p>3ã€åè°ƒè¿‡ç¨‹</p><p>Reconciler ä¸»è¦è´Ÿè´£åè°ƒè™šæ‹Ÿ DOM æ ‘çš„æ›´æ–°è¿‡ç¨‹ï¼Œç¡®ä¿ UI çš„æ›´æ–°æ˜¯é«˜æ•ˆä¸”ä¸€è‡´çš„ã€‚åè°ƒè¿‡ç¨‹åŒ…æ‹¬ä»¥ä¸‹å†…å®¹ï¼š</p><ul><li><strong>æ ‘æ¯”è¾ƒ</strong>ï¼šReconciler ä¼šé€’å½’åœ°æ¯”è¾ƒæ–°æ—§è™šæ‹Ÿ DOM æ ‘ï¼Œæ‰¾å‡ºéœ€è¦æ›´æ–°çš„éƒ¨åˆ†ã€‚å¯¹äºæ¯ä¸€ä¸ªä¸åŒçš„éƒ¨åˆ†ï¼Œå®ƒä¼šç”Ÿæˆä¸€ä¸ªæ›´æ–°æŒ‡ä»¤ã€‚</li><li><strong>é”®å€¼ï¼ˆKeyï¼‰ä¼˜åŒ–</strong>ï¼šå½“æ¸²æŸ“åˆ—è¡¨æ—¶ï¼ˆä¾‹å¦‚ä½¿ç”¨ <code>map()</code> æ¸²æŸ“å¤šä¸ªå…ƒç´ ï¼‰ï¼ŒReconciler ä½¿ç”¨ <code>key</code> å±æ€§æ¥è·Ÿè¸ªæ¯ä¸ªå…ƒç´ ï¼Œä»è€Œæ›´é«˜æ•ˆåœ°æ›´æ–°åˆ—è¡¨é¡¹ã€‚è¿™é¿å…äº†ä¸å¿…è¦çš„èŠ‚ç‚¹é‡æ’å’Œé‡æ¸²æŸ“ã€‚</li><li><strong>é€’å½’æ›´æ–°</strong>ï¼šReconciler é€’å½’åœ°æ›´æ–°æ‰€æœ‰å­èŠ‚ç‚¹ï¼Œç¡®ä¿æ•´ä¸ªç»„ä»¶æ ‘éƒ½å¾—åˆ°é€‚å½“çš„æ›´æ–°ã€‚</li></ul><ol start="4"><li><strong>Fiber æ¶æ„</strong></li></ol><p>React 16 ç‰ˆæœ¬å¼•å…¥äº†æ–°çš„ Fiber æ¶æ„ï¼Œå¢å¼ºäº† Reconciler çš„åŠŸèƒ½ï¼Œä½¿å…¶èƒ½å¤Ÿæ›´å¥½åœ°å¤„ç†å¤§å‹æ›´æ–°ä»»åŠ¡ï¼Œå¹¶æ”¯æŒä¸­æ–­ä»»åŠ¡ã€ä¼˜å…ˆçº§å¤„ç†ç­‰é«˜çº§ç‰¹æ€§ã€‚Fiber Reconciler çš„ä¸»è¦æ”¹è¿›åŒ…æ‹¬ï¼š</p><ul><li><strong>å¯ä¸­æ–­æ¸²æŸ“</strong>ï¼šFiber æ¶æ„å…è®¸ React å°†é•¿æ—¶é—´è¿è¡Œçš„æ¸²æŸ“ä»»åŠ¡åˆ†æˆå¤šä¸ªå°ä»»åŠ¡ï¼Œä»è€Œåœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­å¯ä»¥å“åº”ç”¨æˆ·çš„äº¤äº’ã€‚</li><li><strong>ä»»åŠ¡ä¼˜å…ˆçº§</strong>ï¼šFiber å…è®¸ä¸ºä¸åŒçš„æ›´æ–°ä»»åŠ¡è®¾ç½®ä¼˜å…ˆçº§ï¼Œä½¿å¾—æ›´é‡è¦çš„ä»»åŠ¡å¯ä»¥è¢«ä¼˜å…ˆå¤„ç†ã€‚</li></ul><ol start="5"><li><strong>æ€»ç»“</strong></li></ol><p>åœ¨ React ä¸­ï¼ŒReconciler æ˜¯ä¸€ä¸ªå…³é”®çš„å†…éƒ¨æœºåˆ¶ï¼Œè´Ÿè´£ç®¡ç†å’Œä¼˜åŒ–ç»„ä»¶æ›´æ–°çš„æ•´ä¸ªè¿‡ç¨‹ã€‚å®ƒé€šè¿‡é«˜æ•ˆçš„ diffing ç®—æ³•æœ€å°åŒ– DOM æ“ä½œï¼Œç¡®ä¿é¡µé¢æ›´æ–°æ—¢å¿«é€Ÿåˆé«˜æ•ˆã€‚React çš„ Fiber æ¶æ„è¿›ä¸€æ­¥æå‡äº† Reconciler çš„æ€§èƒ½å’Œçµæ´»æ€§ï¼Œä½¿å¾— React èƒ½å¤Ÿæ›´å¥½åœ°å¤„ç†å¤æ‚çš„åº”ç”¨åœºæ™¯ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240826093436350.png" alt="image-20240826093436350"></p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240828193923359.png" alt="image-20240828193923359"></p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240828194014913.png" alt="image-20240828194014913"></p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240828194040762.png" alt="image-20240828194040762"></p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240828194112849.png" alt="image-20240828194112849"></p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240828194149277.png" alt="image-20240828194149277"></p><h4 id="å››ã€side-effect"><a href="#å››ã€side-effect" class="headerlink" title="å››ã€side effect"></a>å››ã€side effect</h4><p>åœ¨ React ä¸­ï¼Œâ€œside effectâ€ï¼ˆå‰¯ä½œç”¨ï¼‰é€šå¸¸æŒ‡çš„æ˜¯ç»„ä»¶åœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­æ‰§è¡Œçš„é‚£äº›ä¸æ¸²æŸ“æ— å…³çš„æ“ä½œã€‚å‰¯ä½œç”¨åŒ…æ‹¬ä½†ä¸é™äºä»¥ä¸‹æƒ…å†µï¼š</p><ol><li><strong>æ•°æ®è·å–ï¼ˆData Fetchingï¼‰</strong>ï¼š ä¾‹å¦‚ï¼Œä½ åœ¨ç»„ä»¶æ¸²æŸ“åä» API è·å–æ•°æ®ã€‚</li><li><strong>è®¢é˜…ï¼ˆSubscriptionsï¼‰</strong>ï¼š ä¾‹å¦‚ï¼Œè®¢é˜…æŸä¸ªäº‹ä»¶æˆ–æ•°æ®æºï¼Œåœ¨ç»„ä»¶å¸è½½æ—¶å–æ¶ˆè®¢é˜…ã€‚</li><li><strong>æ‰‹åŠ¨æ›´æ”¹ DOM</strong>ï¼š è™½ç„¶ React é€šå¸¸ä¼šç®¡ç† DOM æ“ä½œï¼Œä½†æœ‰æ—¶ä½ å¯èƒ½éœ€è¦æ‰‹åŠ¨æ›´æ”¹ DOMï¼Œå¦‚æ“ä½œç¬¬ä¸‰æ–¹åº“æˆ–è€…ç›´æ¥ä½¿ç”¨ <code>document</code> å¯¹è±¡ã€‚</li><li><strong>å®šæ—¶å™¨ï¼ˆTimersï¼‰</strong>ï¼š ä½¿ç”¨ <code>setTimeout</code> æˆ– <code>setInterval</code> è®¾ç½®å®šæ—¶å™¨ã€‚</li></ol><p>åœ¨ React ä¸­ï¼Œå¤„ç†å‰¯ä½œç”¨æœ€å¸¸ç”¨çš„æ–¹å¼æ˜¯ä½¿ç”¨ <code>useEffect</code> é’©å­ã€‚<code>useEffect</code> é’©å­å…è®¸ä½ åœ¨å‡½æ•°ç»„ä»¶ä¸­æ‰§è¡Œå‰¯ä½œç”¨ï¼Œå¹¶åœ¨å¿…è¦æ—¶æ¸…é™¤è¿™äº›å‰¯ä½œç”¨ã€‚</p><h4 id="äº”ã€ä¾èµ–æ•°ç»„"><a href="#äº”ã€ä¾èµ–æ•°ç»„" class="headerlink" title="äº”ã€ä¾èµ–æ•°ç»„"></a>äº”ã€ä¾èµ–æ•°ç»„</h4><p><code>useEffect</code> æ˜¯ React ä¸­ç”¨äºå¤„ç†å‰¯ä½œç”¨çš„é’©å­ï¼Œæ¯”å¦‚æ•°æ®è·å–ã€è®¢é˜…ã€æ‰‹åŠ¨æ›´æ”¹ DOM ç­‰ã€‚ä¾èµ–é¡¹æ•°ç»„å†³å®šäº† <code>useEffect</code> ä¸­çš„å›è°ƒå‡½æ•°ä½•æ—¶æ‰§è¡Œã€‚</p><p><strong>ç©ºæ•°ç»„ <code>[]</code></strong>:</p><ul><li>å¦‚æœä¾èµ–é¡¹æ•°ç»„ä¸ºç©ºï¼Œ<code>useEffect</code> ä¸­çš„å›è°ƒå‡½æ•°åªä¼šåœ¨ç»„ä»¶é¦–æ¬¡æ¸²æŸ“åæ‰§è¡Œä¸€æ¬¡ã€‚</li><li>ç›¸å½“äºç»„ä»¶çš„ <code>componentDidMount</code> ç”Ÿå‘½å‘¨æœŸé’©å­ã€‚</li></ul><p><strong>æ²¡æœ‰ä¾èµ–é¡¹æ•°ç»„</strong>:</p><ul><li>å¦‚æœä¸æä¾›ä¾èµ–é¡¹æ•°ç»„ï¼Œ<code>useEffect</code> ä¸­çš„å›è°ƒå‡½æ•°å°†åœ¨æ¯æ¬¡ç»„ä»¶æ¸²æŸ“åæ‰§è¡Œã€‚</li><li>ç›¸å½“äºæ¯æ¬¡ç»„ä»¶æ›´æ–°åçš„ <code>componentDidUpdate</code>ã€‚</li></ul><p><strong>å¸¦æœ‰ä¾èµ–é¡¹çš„æ•°ç»„ <code>[dep1, dep2, ...]</code></strong>:</p><ul><li>å¦‚æœä¾èµ–é¡¹æ•°ç»„ä¸­åŒ…å«ç‰¹å®šçš„å˜é‡ï¼Œ<code>useEffect</code> ä¸­çš„å›è°ƒå‡½æ•°åªæœ‰åœ¨è¿™äº›å˜é‡å‘ç”Ÿå˜åŒ–æ—¶æ‰ä¼šæ‰§è¡Œã€‚</li><li>è¿™å¯ä»¥ä¼˜åŒ–æ€§èƒ½ï¼Œé¿å…ä¸å¿…è¦çš„å‰¯ä½œç”¨æ‰§è¡Œã€‚</li></ul><h4 id="å…­ã€stale-closure"><a href="#å…­ã€stale-closure" class="headerlink" title="å…­ã€stale closure"></a>å…­ã€stale closure</h4><p>â€œStale closureâ€ æ˜¯ React å¼€å‘ä¸­ä¸€ä¸ªå¸¸è§çš„æœ¯è¯­ï¼ŒæŒ‡çš„æ˜¯åœ¨ä½¿ç”¨ React hooksï¼ˆå°¤å…¶æ˜¯ <code>useEffect</code>ã€<code>useCallback</code>ã€<code>useMemo</code> ç­‰ï¼‰æ—¶ï¼Œé—­åŒ…ï¼ˆclosureï¼‰ä¸­å¼•ç”¨äº†è¿‡æ—¶çš„å˜é‡æˆ–çŠ¶æ€å€¼ï¼Œå¯¼è‡´é€»è¾‘é”™è¯¯ã€‚</p><p>é—­åŒ…æ˜¯ JavaScript ä¸­ä¸€ä¸ªå‡½æ•°å¯ä»¥è®°ä½å…¶åˆ›å»ºæ—¶çš„ä¸Šä¸‹æ–‡çš„ç‰¹æ€§ã€‚é—­åŒ…ä½¿å¾—å†…éƒ¨å‡½æ•°å¯ä»¥è®¿é—®å¤–éƒ¨å‡½æ•°çš„å˜é‡ï¼Œå³ä½¿å¤–éƒ¨å‡½æ•°å·²ç»æ‰§è¡Œå®Œæ¯•ã€‚è¿™ç§ç‰¹æ€§åœ¨ React hooks ä¸­å¯èƒ½ä¼šå¯¼è‡´é—®é¢˜ï¼Œå°¤å…¶æ˜¯åœ¨ä¾èµ–é¡¹æ•°ç»„æ²¡æœ‰æ­£ç¡®è®¾ç½®æ—¶ã€‚</p><p>åœ¨ React ä¸­ï¼Œç»„ä»¶çš„æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šç”Ÿæˆæ–°çš„å‡½æ•°å’Œæ–°çš„é—­åŒ…ã€‚é—­åŒ…ä¸­æ•è·çš„å˜é‡å€¼æ˜¯å‡½æ•°åˆ›å»ºæ—¶çš„é‚£ä¸€åˆ»çš„å€¼ï¼Œè€Œä¸æ˜¯å½“å‰æ¸²æŸ“çš„æœ€æ–°å€¼ã€‚å¦‚æœä½ çš„ç»„ä»¶å¤šæ¬¡æ¸²æŸ“ï¼Œè€ŒæŸä¸ªé’©å­å‡½æ•°å†…éƒ¨çš„é—­åŒ…å¼•ç”¨äº†æ—§çš„å˜é‡æˆ–çŠ¶æ€å€¼ï¼Œé‚£ä¹ˆè¿™ä¸ªé—­åŒ…å°±è¢«ç§°ä¸ºâ€œstale closureâ€ï¼ˆé™ˆæ—§çš„é—­åŒ…ï¼‰ã€‚</p><p><strong>è§£å†³æ–¹æ³•ï¼š</strong></p><p>â€‹    <strong>å‡½æ•°å¼æ›´æ–°</strong>: å½“ä½¿ç”¨ <code>setState</code> æ—¶ï¼Œä½¿ç”¨å‡½æ•°å¼æ›´æ–°ï¼ˆå³ä¼ é€’ä¸€ä¸ªå‡½æ•°è€Œä¸æ˜¯ç›´æ¥ä¼ é€’æ–°å€¼ï¼‰ã€‚è¿™å¯ä»¥ç¡®ä¿ä½ æ€»æ˜¯åŸºäºæœ€æ–°çš„çŠ¶æ€æ›´æ–°ã€‚</p><p>â€‹    <strong>æ­£ç¡®è®¾ç½®ä¾èµ–é¡¹æ•°ç»„</strong>: åœ¨ <code>useEffect</code>ã€<code>useCallback</code> å’Œ <code>useMemo</code> ç­‰ hooks ä¸­ï¼Œç¡®ä¿ä¾èµ–é¡¹æ•°ç»„åŒ…å«æ‰€æœ‰åœ¨é—­åŒ…ä¸­å¼•ç”¨çš„çŠ¶æ€æˆ– propsã€‚è¿™æ · React å°±ä¼šåœ¨ä¾èµ–é¡¹å˜åŒ–æ—¶é‡æ–°æ‰§è¡Œå‡½æ•°ï¼Œé¿å…ä½¿ç”¨é™ˆæ—§çš„é—­åŒ…ã€‚</p><p>â€‹     <strong>ä½¿ç”¨ refs</strong>: åœ¨ä¸€äº›åœºæ™¯ä¸‹ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>useRef</code> æ¥å­˜å‚¨å€¼ï¼Œå› ä¸º <code>useRef</code> ä¸­çš„å€¼åœ¨æ¸²æŸ“ä¹‹é—´æ˜¯æŒä¹…çš„ï¼Œå¹¶ä¸”æ›´æ–°æ—¶ä¸ä¼šè§¦å‘ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ã€‚</p><h4 id="ä¸ƒã€æ´¾ç”Ÿæ€"><a href="#ä¸ƒã€æ´¾ç”Ÿæ€" class="headerlink" title="ä¸ƒã€æ´¾ç”Ÿæ€"></a>ä¸ƒã€æ´¾ç”Ÿæ€</h4><p>åœ¨Reactä¸­ï¼Œ**â€derived stateâ€ï¼ˆæ´¾ç”ŸçŠ¶æ€ï¼‰**é€šå¸¸æ˜¯æŒ‡é€šè¿‡è®¡ç®—æˆ–å¤„ç†ç»„ä»¶çš„å·²æœ‰çŠ¶æ€æˆ–propså¾—å‡ºçš„æ–°æ•°æ®ï¼Œè€Œä¸æ˜¯ç›´æ¥å­˜å‚¨åœ¨ç»„ä»¶çš„stateä¸­çš„æ•°æ®ã€‚æ´¾ç”ŸçŠ¶æ€ä¸åº”è¯¥å­˜å‚¨åœ¨stateä¸­ï¼Œå› ä¸ºå®ƒå¯ä»¥åœ¨æ¸²æŸ“æ—¶é€šè¿‡è®¡ç®—å¾—å‡ºï¼Œä»è€Œé¿å…å†—ä½™å’Œæ½œåœ¨çš„æ•°æ®ä¸ä¸€è‡´æ€§ã€‚</p><h4 id="å…«ã€useStateåˆå§‹åŒ–çŠ¶æ€"><a href="#å…«ã€useStateåˆå§‹åŒ–çŠ¶æ€" class="headerlink" title="å…«ã€useStateåˆå§‹åŒ–çŠ¶æ€"></a>å…«ã€useStateåˆå§‹åŒ–çŠ¶æ€</h4><p>æ–¹æ³•ä¸€ï¼šä½¿ç”¨å‡½æ•°åˆå§‹åŒ–</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> [watched, setWatched] = <span class="hljs-title function_">useState</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> storedValue = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">&quot;watched&quot;</span>);<br>  <span class="hljs-keyword">return</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(storedValue);<br>&#125;);<br><br></code></pre></td></tr></table></figure><p>æ–¹æ³•äºŒï¼šç›´æ¥åˆå§‹åŒ–</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> [watched, setWatched] = <span class="hljs-title function_">useState</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">&quot;watched&quot;</span>)));<br><br></code></pre></td></tr></table></figure><p><strong>æƒ°æ€§åˆå§‹åŒ–ï¼ˆLazy Initializationï¼‰</strong>ï¼š</p><ul><li><strong>æ–¹æ³•ä¸€</strong>ä½¿ç”¨çš„æ˜¯æƒ°æ€§åˆå§‹åŒ–ã€‚<code>useState</code>æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°æ—¶ï¼ŒReactä¼šåœ¨ç»„ä»¶åˆæ¬¡æ¸²æŸ“æ—¶è°ƒç”¨è¯¥å‡½æ•°ï¼Œå¹¶å°†å…¶è¿”å›å€¼ä½œä¸ºåˆå§‹çŠ¶æ€ã€‚è¿™æ„å‘³ç€å‡½æ•°åªä¼šåœ¨ç»„ä»¶é¦–æ¬¡æ¸²æŸ“æ—¶æ‰§è¡Œä¸€æ¬¡ã€‚</li><li><strong>æ–¹æ³•äºŒ</strong>ä¸­çš„<code>localStorage.getItem</code>å’Œ<code>JSON.parse</code>åœ¨ç»„ä»¶æ¯æ¬¡æ¸²æŸ“æ—¶éƒ½ä¼šæ‰§è¡Œï¼Œå³ä½¿çŠ¶æ€å·²ç»åˆå§‹åŒ–ï¼Œè¿™åœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½ä¼šå¯¼è‡´ä¸å¿…è¦çš„è®¡ç®—å¼€é”€ã€‚</li></ul><p><strong>æ€§èƒ½è€ƒè™‘</strong>ï¼š</p><ul><li><strong>æ–¹æ³•ä¸€</strong>æ›´é€‚åˆåœ¨åˆå§‹åŒ–è¿‡ç¨‹ä¸­å­˜åœ¨æ˜‚è´µæ“ä½œï¼ˆä¾‹å¦‚å¤æ‚çš„è®¡ç®—æˆ–æ•°æ®æå–ï¼‰æ—¶ä½¿ç”¨ï¼Œå› ä¸ºè¿™äº›æ“ä½œåªä¼šåœ¨ç»„ä»¶é¦–æ¬¡æ¸²æŸ“æ—¶æ‰§è¡Œä¸€æ¬¡ã€‚</li><li><strong>æ–¹æ³•äºŒ</strong>çš„æ€§èƒ½å¯èƒ½ç¨å¾®å·®ä¸€äº›ï¼Œå°¤å…¶æ˜¯åœ¨æœ‰å¤æ‚æ“ä½œæ—¶ï¼Œå› ä¸ºæ¯æ¬¡æ¸²æŸ“ç»„ä»¶éƒ½ä¼šæ‰§è¡ŒçŠ¶æ€åˆå§‹åŒ–çš„è¡¨è¾¾å¼ã€‚</li></ul><p><strong>ä»£ç çš„å¯è¯»æ€§</strong>ï¼š</p><ul><li><strong>æ–¹æ³•ä¸€</strong>å¯èƒ½æ›´å…·å¯è¯»æ€§ï¼Œç‰¹åˆ«æ˜¯å½“åˆå§‹åŒ–é€»è¾‘æ¯”è¾ƒå¤æ‚æ—¶ï¼Œä½¿ç”¨å‡½æ•°å½¢å¼å¯ä»¥è®©ä»£ç æ›´æ¸…æ™°ï¼Œå®¹æ˜“ç†è§£é€»è¾‘åˆ†æ­¥å¤„ç†çš„è¿‡ç¨‹ã€‚</li><li><strong>æ–¹æ³•äºŒ</strong>åœ¨ç®€å•çš„åˆå§‹åŒ–åœºæ™¯ä¸‹ä»£ç æ›´ç®€æ´ã€‚</li></ul><h4 id="ä¹ã€useRef"><a href="#ä¹ã€useRef" class="headerlink" title="ä¹ã€useRef"></a>ä¹ã€useRef</h4><p>ç‰¹ç‚¹ï¼š</p><p><strong>ä¿æŒè·¨æ¸²æŸ“çš„å¯å˜å€¼</strong>ï¼š</p><ul><li><code>useRef</code>è¿”å›çš„å¯¹è±¡æ˜¯ <code>&#123; current: value &#125;</code>ã€‚è¿™ä¸ªå¯¹è±¡åœ¨ç»„ä»¶çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…æ˜¯æŒä¹…çš„ï¼Œæ›´æ–°<code>current</code>å±æ€§ä¸ä¼šè§¦å‘é‡æ–°æ¸²æŸ“ã€‚è¿™ä½¿å¾—<code>useRef</code>éå¸¸é€‚åˆå­˜å‚¨è·¨æ¸²æŸ“å‘¨æœŸçš„æ•°æ®ï¼Œæ¯”å¦‚è®¡æ—¶å™¨IDã€ä¸Šä¸€æ¬¡çš„çŠ¶æ€å€¼æˆ–æŸä¸ªDOMèŠ‚ç‚¹çš„å¼•ç”¨ã€‚</li></ul><p><strong>è®¿é—®DOMå…ƒç´ </strong>ï¼š</p><ul><li><code>useRef</code>å¸¸ç”¨æ¥ç›´æ¥è®¿é—®DOMå…ƒç´ ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>ref</code>å±æ€§å°†<code>myRef</code>å¯¹è±¡èµ‹ç»™äº†ä¸€ä¸ªè¾“å…¥æ¡†ã€‚<code>myRef.current</code>æŒ‡å‘è¯¥DOMå…ƒç´ ï¼Œå¯ä»¥åœ¨æŒ‰é’®ç‚¹å‡»æ—¶è°ƒç”¨<code>focus()</code>æ–¹æ³•æ¥èšç„¦è¾“å…¥æ¡†ã€‚</li></ul><p><strong>ä¿å­˜ç»„ä»¶é—´ä¸å˜çš„æ•°æ®</strong>ï¼š</p><ul><li><code>useRef</code>å¯ä»¥ç”¨æ¥ä¿å­˜ä¸éœ€è¦è§¦å‘é‡æ–°æ¸²æŸ“çš„å˜é‡ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥ä½¿ç”¨<code>useRef</code>ä¿å­˜è®¡æ•°å™¨å€¼æˆ–çŠ¶æ€å˜é‡çš„å‰ä¸€ä¸ªå€¼ï¼Œè€Œæ— éœ€é€šè¿‡<code>useState</code>æ¥ç®¡ç†å®ƒä»¬ã€‚</li></ul><h4 id="åã€Custom-Hooksï¼ˆè‡ªå®šä¹‰é’©å­ï¼‰"><a href="#åã€Custom-Hooksï¼ˆè‡ªå®šä¹‰é’©å­ï¼‰" class="headerlink" title="åã€Custom Hooksï¼ˆè‡ªå®šä¹‰é’©å­ï¼‰"></a>åã€Custom Hooksï¼ˆè‡ªå®šä¹‰é’©å­ï¼‰</h4><p>å½“å¤šä¸ªç»„ä»¶éœ€è¦å…±äº«ç›¸ä¼¼çš„é€»è¾‘æ—¶ï¼Œå¯ä»¥å°†è¿™äº›é€»è¾‘æå–åˆ°ä¸€ä¸ªè‡ªå®šä¹‰Hookä¸­ï¼Œä»¥é¿å…é‡å¤ä»£ç ã€‚ä¾‹å¦‚ï¼Œå¤„ç†è¡¨å•è¾“å…¥çš„çŠ¶æ€ã€å¤„ç†æ•°æ®è·å–ï¼ˆå¦‚APIè¯·æ±‚ï¼‰çš„é€»è¾‘ç­‰ã€‚</p><h4 id="åä¸€ã€Fiber"><a href="#åä¸€ã€Fiber" class="headerlink" title="åä¸€ã€Fiber"></a>åä¸€ã€Fiber</h4><p>React çš„ Fiber æ˜¯ React 16 åŠå…¶åç»­ç‰ˆæœ¬ä¸­çš„ä¸€ç§æ–°æ¶æ„ï¼Œç”¨äºæå‡ UI æ¸²æŸ“çš„æ€§èƒ½å’Œçµæ´»æ€§ã€‚å®ƒé‡æ–°è®¾è®¡äº† React çš„åè°ƒï¼ˆreconciliationï¼‰ç®—æ³•ï¼Œä½¿å¾— React èƒ½å¤Ÿæ›´å¥½åœ°å¤„ç†å¤æ‚çš„åº”ç”¨åœºæ™¯ï¼Œå°¤å…¶æ˜¯åœ¨å“åº”ç”¨æˆ·äº¤äº’å’Œæ›´æ–°å¤§å‹ç»„ä»¶æ ‘æ—¶ã€‚Fiber æ˜¯ä¸€ç§æ•°æ®ç»“æ„å’Œæ‰§è¡Œæœºåˆ¶ï¼Œå®ƒä½¿å¾— React å¯ä»¥æ›´ç»†ç²’åº¦åœ°ç®¡ç†å’Œè°ƒåº¦ç»„ä»¶çš„æ›´æ–°ä»»åŠ¡ã€‚ä¸ä¼ ç»Ÿçš„åŒæ­¥æ¸²æŸ“ä¸åŒï¼ŒFiber å…è®¸å°†æ›´æ–°ä»»åŠ¡æ‹†åˆ†æˆå¤šä¸ªå°ä»»åŠ¡ï¼Œå¹¶æ ¹æ®ä¼˜å…ˆçº§æœ‰é€‰æ‹©åœ°æ‰§è¡Œï¼Œä»è€Œæé«˜äº†åº”ç”¨çš„å“åº”æ€§ã€‚</p><h5 id="ï¼ˆ1ï¼‰-Fiber-çš„è®¾è®¡ç›®æ ‡"><a href="#ï¼ˆ1ï¼‰-Fiber-çš„è®¾è®¡ç›®æ ‡" class="headerlink" title="ï¼ˆ1ï¼‰ Fiber çš„è®¾è®¡ç›®æ ‡"></a>ï¼ˆ1ï¼‰ <strong>Fiber çš„è®¾è®¡ç›®æ ‡</strong></h5><p>Fiber æ¶æ„çš„è®¾è®¡ç›®æ ‡ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p><ul><li><strong>å¯ä¸­æ–­æ¸²æŸ“</strong>ï¼šä¼ ç»Ÿçš„ React é‡‡ç”¨çš„æ˜¯åŒæ­¥é€’å½’ç®—æ³•ï¼Œè¿™æ„å‘³ç€ä¸€æ—¦å¼€å§‹æ¸²æŸ“ï¼Œå°±ä¼šé˜»å¡ä¸»çº¿ç¨‹ï¼Œç›´åˆ°æ•´ä¸ªæ¸²æŸ“è¿‡ç¨‹å®Œæˆã€‚Fiber é€šè¿‡å°†æ¸²æŸ“ä»»åŠ¡åˆ‡å‰²æˆå¤šä¸ªå°ç‰‡æ®µï¼Œä½¿å¾—æ¸²æŸ“è¿‡ç¨‹å¯ä»¥è¢«ä¸­æ–­ï¼Œä»è€Œåœ¨å¿…è¦æ—¶è®©å‡ºæ—¶é—´ç»™å…¶ä»–æ›´é«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡ã€‚</li><li><strong>ä»»åŠ¡ä¼˜å…ˆçº§</strong>ï¼šFiber å…è®¸ä¸ºä¸åŒçš„æ›´æ–°ä»»åŠ¡è®¾ç½®ä¼˜å…ˆçº§ã€‚ä¼˜å…ˆçº§è¾ƒé«˜çš„ä»»åŠ¡ï¼ˆä¾‹å¦‚ç”¨æˆ·äº¤äº’ï¼‰å¯ä»¥åœ¨ä½ä¼˜å…ˆçº§ä»»åŠ¡ï¼ˆä¾‹å¦‚åå°æ•°æ®åŒæ­¥ï¼‰ä¹‹å‰æ‰§è¡Œï¼Œä»è€Œæå‡ç”¨æˆ·ä½“éªŒã€‚</li><li><strong>å¹¶å‘æ¨¡å¼</strong>ï¼šFiber ä¸º React å¼•å…¥äº†å¹¶å‘æ¨¡å¼ï¼Œä½¿å¾— React èƒ½å¤Ÿåœ¨åå°æ¸²æŸ“ä»»åŠ¡æ—¶å¤„ç†ç”¨æˆ·è¾“å…¥æˆ–å…¶ä»–é«˜ä¼˜å…ˆçº§ä»»åŠ¡ï¼Œä»è€Œå‡å°‘é¡µé¢å¡é¡¿ç°è±¡ã€‚</li></ul><h5 id="ï¼ˆ2ï¼‰-Fiber-çš„å·¥ä½œåŸç†"><a href="#ï¼ˆ2ï¼‰-Fiber-çš„å·¥ä½œåŸç†" class="headerlink" title="ï¼ˆ2ï¼‰ Fiber çš„å·¥ä½œåŸç†"></a>ï¼ˆ2ï¼‰ Fiber çš„å·¥ä½œåŸç†</h5><p>Fiber å°†ç»„ä»¶æ›´æ–°çš„å·¥ä½œåˆ†æˆä¸¤ä¸ªä¸»è¦é˜¶æ®µï¼š<strong>æ¸²æŸ“é˜¶æ®µï¼ˆRender Phaseï¼‰</strong> å’Œ <strong>æäº¤é˜¶æ®µï¼ˆCommit Phaseï¼‰</strong>ã€‚</p><ul><li><strong>æ¸²æŸ“é˜¶æ®µ</strong>ï¼š<ul><li>åœ¨è¿™ä¸ªé˜¶æ®µï¼ŒReact ä¼šé€šè¿‡åè°ƒå™¨ï¼ˆReconcilerï¼‰è¿›è¡Œç»„ä»¶æ ‘çš„ diffingï¼ˆæ¯”è¾ƒï¼‰ï¼Œå†³å®šå“ªäº›éƒ¨åˆ†éœ€è¦æ›´æ–°ã€‚</li><li>è¿™ä¸ªè¿‡ç¨‹æ˜¯â€œå¯ä¸­æ–­çš„â€ï¼Œå³ React å¯ä»¥æš‚åœæ¸²æŸ“ï¼Œä»¥ä¾¿å¤„ç†å…¶ä»–æ›´ç´§æ€¥çš„ä»»åŠ¡ï¼Œç„¶åå†ç»§ç»­æ¸²æŸ“æœªå®Œæˆçš„éƒ¨åˆ†ã€‚</li></ul></li><li><strong>æäº¤é˜¶æ®µ</strong>ï¼š<ul><li>ä¸€æ—¦æ¸²æŸ“é˜¶æ®µå®Œæˆï¼ŒReact ä¼šè¿›å…¥æäº¤é˜¶æ®µï¼Œåœ¨è¿™ä¸ªé˜¶æ®µï¼Œæ‰€æœ‰çš„æ›´æ”¹éƒ½ä¼šè¢«åº”ç”¨åˆ°å®é™…çš„ DOM ä¸­ã€‚</li><li>è¿™ä¸ªé˜¶æ®µæ˜¯åŒæ­¥çš„ï¼Œå¹¶ä¸”ä¸å¯ä¸­æ–­ï¼Œå› ä¸ºå®ƒç›´æ¥å½±å“åˆ°ç”¨æˆ·ç•Œé¢çš„æ˜¾ç¤ºã€‚</li></ul></li></ul><h5 id="ï¼ˆ3ï¼‰Fiber-æ•°æ®ç»“æ„"><a href="#ï¼ˆ3ï¼‰Fiber-æ•°æ®ç»“æ„" class="headerlink" title="ï¼ˆ3ï¼‰Fiber æ•°æ®ç»“æ„"></a>ï¼ˆ3ï¼‰<strong>Fiber æ•°æ®ç»“æ„</strong></h5><p>Fiber æ˜¯ä¸€ç§é“¾è¡¨ç»“æ„ï¼Œæ¯ä¸ªç»„ä»¶å®ä¾‹å¯¹åº”ä¸€ä¸ª Fiber èŠ‚ç‚¹ã€‚Fiber èŠ‚ç‚¹åŒ…å«äº†å…³äºè¯¥ç»„ä»¶çš„å„ç§ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼š</p><ul><li><strong>ç±»å‹ï¼ˆTypeï¼‰</strong>ï¼šç»„ä»¶çš„ç±»å‹ï¼Œä¾‹å¦‚å‡½æ•°ç»„ä»¶ã€ç±»ç»„ä»¶æˆ–åŸç”Ÿ DOM èŠ‚ç‚¹ã€‚</li><li><strong>çŠ¶æ€ï¼ˆStateï¼‰</strong>ï¼šç»„ä»¶çš„æœ¬åœ°çŠ¶æ€å’ŒæŒ‚è½½ç‚¹ã€‚</li><li><strong>å­èŠ‚ç‚¹ã€å…„å¼ŸèŠ‚ç‚¹å’Œçˆ¶èŠ‚ç‚¹çš„å¼•ç”¨</strong>ï¼šç”¨æ¥æ„å»º Fiber æ ‘ã€‚</li><li><strong>æ›´æ–°é˜Ÿåˆ—ï¼ˆUpdate Queueï¼‰</strong>ï¼šä¿å­˜è¯¥ Fiber èŠ‚ç‚¹ä¸Šçš„æ‰€æœ‰çŠ¶æ€æ›´æ–°ã€‚</li></ul><h5 id="ï¼ˆ4ï¼‰ä¼˜å…ˆçº§è°ƒåº¦"><a href="#ï¼ˆ4ï¼‰ä¼˜å…ˆçº§è°ƒåº¦" class="headerlink" title="ï¼ˆ4ï¼‰ä¼˜å…ˆçº§è°ƒåº¦"></a>ï¼ˆ4ï¼‰<strong>ä¼˜å…ˆçº§è°ƒåº¦</strong></h5><p>Fiber é€šè¿‡ä¸€ä¸ªå«åš <code>scheduler</code> çš„æœºåˆ¶æ¥ç®¡ç†ä¸åŒæ›´æ–°ä»»åŠ¡çš„ä¼˜å…ˆçº§ã€‚Scheduler ä¼šæ ¹æ®ä»»åŠ¡çš„é‡è¦æ€§ä¸ºå…¶åˆ†é…ä¼˜å…ˆçº§ï¼Œå¹¶ç¡®ä¿é«˜ä¼˜å…ˆçº§ä»»åŠ¡ä¼˜å…ˆæ‰§è¡Œã€‚</p><ul><li><strong>é«˜ä¼˜å…ˆçº§ä»»åŠ¡</strong>ï¼šä¾‹å¦‚ç”¨æˆ·çš„è¾“å…¥å’ŒåŠ¨ç”»ï¼Œè¿™äº›ä»»åŠ¡éœ€è¦å¿«é€Ÿå“åº”ï¼Œå› è€Œå…·æœ‰è¾ƒé«˜ä¼˜å…ˆçº§ã€‚</li><li><strong>ä½ä¼˜å…ˆçº§ä»»åŠ¡</strong>ï¼šä¾‹å¦‚ç½‘ç»œè¯·æ±‚æˆ–ä¸ç´§æ€¥çš„çŠ¶æ€æ›´æ–°ï¼Œè¿™äº›ä»»åŠ¡å¯ä»¥åœ¨ç©ºé—²æ—¶é—´æ‰§è¡Œã€‚</li></ul><h5 id="ï¼ˆ5ï¼‰å¯ä¸­æ–­æ¸²æŸ“å’Œæ¢å¤"><a href="#ï¼ˆ5ï¼‰å¯ä¸­æ–­æ¸²æŸ“å’Œæ¢å¤" class="headerlink" title="ï¼ˆ5ï¼‰å¯ä¸­æ–­æ¸²æŸ“å’Œæ¢å¤"></a>ï¼ˆ5ï¼‰<strong>å¯ä¸­æ–­æ¸²æŸ“å’Œæ¢å¤</strong></h5><p>Fiber çš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºå…¶å¯ä¸­æ–­æ€§ã€‚å½“ React åœ¨æ¸²æŸ“æŸä¸ªç»„ä»¶æ—¶ï¼Œå¦‚æœé‡åˆ°ä¸€ä¸ªæ›´é«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡ï¼Œå®ƒå¯ä»¥æš‚åœå½“å‰ä»»åŠ¡ï¼Œå°†æ§åˆ¶æƒäº¤ç»™é«˜ä¼˜å…ˆçº§ä»»åŠ¡ã€‚åœ¨é«˜ä¼˜å…ˆçº§ä»»åŠ¡å®Œæˆåï¼ŒReact å¯ä»¥æ¢å¤ä¹‹å‰çš„æ¸²æŸ“ï¼Œç»§ç»­æœªå®Œæˆçš„å·¥ä½œã€‚</p><h5 id="ï¼ˆ6ï¼‰Concurrent-Modeï¼ˆå¹¶å‘æ¨¡å¼ï¼‰"><a href="#ï¼ˆ6ï¼‰Concurrent-Modeï¼ˆå¹¶å‘æ¨¡å¼ï¼‰" class="headerlink" title="ï¼ˆ6ï¼‰Concurrent Modeï¼ˆå¹¶å‘æ¨¡å¼ï¼‰"></a>ï¼ˆ6ï¼‰<strong>Concurrent Modeï¼ˆå¹¶å‘æ¨¡å¼ï¼‰</strong></h5><p>Fiber è¿˜ä¸º React å¼•å…¥äº†å¹¶å‘æ¨¡å¼ï¼ˆConcurrent Modeï¼‰ã€‚å¹¶å‘æ¨¡å¼ä¸‹ï¼ŒReact å¯ä»¥åœ¨åå°å¹¶å‘åœ°å¤„ç†å¤šä¸ªæ¸²æŸ“ä»»åŠ¡ï¼Œå¹¶åœ¨å¤„ç†ä»»åŠ¡çš„åŒæ—¶ç»§ç»­å“åº”ç”¨æˆ·è¾“å…¥ã€‚è¿™æ ·å¯ä»¥æ˜¾è‘—æå‡åº”ç”¨çš„æµç•…æ€§å’Œå“åº”é€Ÿåº¦ã€‚</p><h5 id="ï¼ˆ7ï¼‰Fiber-çš„ä¼˜ç¼ºç‚¹"><a href="#ï¼ˆ7ï¼‰Fiber-çš„ä¼˜ç¼ºç‚¹" class="headerlink" title="ï¼ˆ7ï¼‰Fiber çš„ä¼˜ç¼ºç‚¹"></a>ï¼ˆ7ï¼‰<strong>Fiber çš„ä¼˜ç¼ºç‚¹</strong></h5><p>ä¼˜ç‚¹ï¼š</p><ul><li><strong>æé«˜äº†æ¸²æŸ“çš„çµæ´»æ€§</strong>ï¼šé€šè¿‡å¯ä¸­æ–­å’Œæ¢å¤æ¸²æŸ“ï¼ŒReact å¯ä»¥æ›´å¥½åœ°ç®¡ç†å¤§å‹æ›´æ–°ä»»åŠ¡ã€‚</li><li><strong>å‡å°‘å¡é¡¿</strong>ï¼šé€šè¿‡ä»»åŠ¡ä¼˜å…ˆçº§è°ƒåº¦å’Œå¹¶å‘æ¨¡å¼ï¼ŒFiber å‡å°‘äº† UI æ›´æ–°æ—¶çš„å¡é¡¿ç°è±¡ã€‚</li><li><strong>å¢å¼ºç”¨æˆ·ä½“éªŒ</strong>ï¼šFiber æä¾›äº†æ›´é«˜æ•ˆçš„ç”¨æˆ·ç•Œé¢æ›´æ–°æœºåˆ¶ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†å¤§é‡çŠ¶æ€å˜åŒ–æ—¶ã€‚</li></ul><p>ç¼ºç‚¹ï¼š</p><ul><li><strong>å¤æ‚æ€§å¢åŠ </strong>ï¼šFiber å¼•å…¥äº†æ›´å¤šçš„å†…éƒ¨æœºåˆ¶ï¼Œå¢åŠ äº† React å†…éƒ¨çš„å¤æ‚æ€§ã€‚</li><li><strong>éœ€è¦é€‚åº”æ–°æ¨¡å¼</strong>ï¼šå¼€å‘è€…éœ€è¦ç†è§£ Fiber çš„å·¥ä½œåŸç†ï¼Œä»¥ä¾¿åœ¨å¤æ‚åº”ç”¨ä¸­æ›´å¥½åœ°ä½¿ç”¨ Reactã€‚</li></ul><h4 id="åäºŒã€Fiber-Tree"><a href="#åäºŒã€Fiber-Tree" class="headerlink" title="åäºŒã€Fiber Tree"></a>åäºŒã€Fiber Tree</h4><p>Fiber Tree æ˜¯ç”±å¤šä¸ª Fiber èŠ‚ç‚¹ç›¸äº’è¿æ¥è€Œå½¢æˆçš„æ ‘å½¢æ•°æ®ç»“æ„ã€‚ä¸ä¼ ç»Ÿçš„ Virtual DOM æ ‘ä¸åŒï¼ŒFiber Tree å…è®¸å¯¹æ¸²æŸ“å·¥ä½œè¿›è¡Œåˆ†ç‰‡å¤„ç†ï¼Œæ”¯æŒä¸­æ–­ã€æ¢å¤ã€ä»¥åŠä¼˜å…ˆçº§è°ƒåº¦ç­‰æ“ä½œã€‚è¿™ä½¿å¾— React èƒ½å¤Ÿæ›´æœ‰æ•ˆåœ°å¤„ç†å¤æ‚çš„ UI æ›´æ–°åœºæ™¯ã€‚</p><p>æ¯ä¸ª Fiber èŠ‚ç‚¹åŒ…å«äº†ä¸€äº›æè¿°ç»„ä»¶çš„ä¿¡æ¯å’ŒçŠ¶æ€ï¼Œå®ƒä»¬ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š</p><ol><li><strong>Type</strong>ï¼š<ul><li>è¡¨ç¤ºç»„ä»¶çš„ç±»å‹ï¼Œå¦‚å‡½æ•°ç»„ä»¶ã€ç±»ç»„ä»¶æˆ–åŸç”Ÿ DOM å…ƒç´ ã€‚</li></ul></li><li><strong>Key</strong>ï¼š<ul><li>ç”¨äºåœ¨åŒçº§ç»„ä»¶ä¸­æ ‡è¯†èŠ‚ç‚¹ï¼Œä»¥ä¾¿åœ¨æ›´æ–°æ—¶å¯ä»¥é«˜æ•ˆåœ°è¿›è¡Œ diff è¿ç®—ã€‚</li></ul></li><li><strong>StateNode</strong>ï¼š<ul><li>æŒ‡å‘ä¸å½“å‰ Fiber èŠ‚ç‚¹å¯¹åº”çš„ç»„ä»¶å®ä¾‹æˆ– DOM å…ƒç´ ã€‚</li></ul></li><li><strong>Return</strong>ï¼š<ul><li>æŒ‡å‘å½“å‰ Fiber èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ã€‚</li></ul></li><li><strong>Child</strong>ï¼š<ul><li>æŒ‡å‘å½“å‰ Fiber èŠ‚ç‚¹çš„ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹ã€‚</li></ul></li><li><strong>Sibling</strong>ï¼š<ul><li>æŒ‡å‘å½“å‰ Fiber èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹ã€‚</li></ul></li><li><strong>PendingProps å’Œ MemoizedProps</strong>ï¼š<ul><li>åˆ†åˆ«è¡¨ç¤ºå½“å‰æ›´æ–°çš„ props å’Œä¸Šä¸€æ¬¡æ¸²æŸ“æ—¶çš„ propsã€‚</li></ul></li><li><strong>UpdateQueue</strong>ï¼š<ul><li>å­˜å‚¨éœ€è¦åœ¨å½“å‰èŠ‚ç‚¹ä¸Šå¤„ç†çš„çŠ¶æ€æ›´æ–°æˆ–å‰¯ä½œç”¨ã€‚</li></ul></li><li><strong>Alternate</strong>ï¼š<ul><li>æŒ‡å‘ Fiber æ ‘ä¸­çš„å¦ä¸€ä¸ªå¯¹åº”èŠ‚ç‚¹ï¼Œè¿™åœ¨åŒç¼“å†²æŠ€æœ¯ï¼ˆdouble bufferingï¼‰ä¸­ç”¨äºç®¡ç†æ›´æ–°æ—¶çš„ Fiberã€‚</li></ul></li></ol><h5 id="Fiber-Tree-çš„å·¥ä½œåŸç†"><a href="#Fiber-Tree-çš„å·¥ä½œåŸç†" class="headerlink" title="Fiber Tree çš„å·¥ä½œåŸç†"></a>Fiber Tree çš„å·¥ä½œåŸç†</h5><p>åœ¨ React ä¸­ï¼ŒFiber Tree ä¸»è¦ç”¨äºä»¥ä¸‹å‡ ç§åœºæ™¯ï¼š</p><ol><li>åè°ƒè¿‡ç¨‹ï¼ˆReconciliationï¼‰ï¼š<ul><li>å½“ç»„ä»¶çŠ¶æ€æˆ– props å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒReact ä¼šé€šè¿‡ Fiber Tree æ¥è¿›è¡Œ diff è¿ç®—ï¼Œä»¥ç¡®å®šå“ªäº›éƒ¨åˆ†éœ€è¦æ›´æ–°ã€‚è¿™ä¸ªè¿‡ç¨‹æ˜¯å¯ä¸­æ–­çš„ï¼Œå› æ­¤ React å¯ä»¥ä¼˜å…ˆå¤„ç†é«˜ä¼˜å…ˆçº§ä»»åŠ¡ã€‚</li></ul></li><li>ä»»åŠ¡è°ƒåº¦ï¼š<ul><li>Fiber Tree é€šè¿‡ <code>scheduler</code> ç®¡ç†ä¸åŒä»»åŠ¡çš„ä¼˜å…ˆçº§ï¼Œå¹¶å†³å®šå“ªäº›ä»»åŠ¡åº”è¯¥é¦–å…ˆæ‰§è¡Œã€‚</li></ul></li><li>åŒç¼“å†²æŠ€æœ¯ï¼š<ul><li>Fiber Tree é€šè¿‡ <code>current</code> å’Œ <code>workInProgress</code> ä¸¤æ£µæ ‘è¿›è¡ŒåŒç¼“å†²ã€‚<code>current</code> æ˜¯å½“å‰å±å¹•ä¸Šæ˜¾ç¤ºçš„ Fiber æ ‘ï¼Œè€Œ <code>workInProgress</code> åˆ™æ˜¯æ­£åœ¨æ„å»ºçš„ Fiber æ ‘ã€‚å½“æ–°çš„æ›´æ–°å®Œæˆæ—¶ï¼ŒReact ä¼šäº¤æ¢è¿™ä¸¤æ£µæ ‘ã€‚</li></ul></li></ol><h5 id="æ„å»ºå’Œæ›´æ–°-Fiber-Tree-çš„è¿‡ç¨‹"><a href="#æ„å»ºå’Œæ›´æ–°-Fiber-Tree-çš„è¿‡ç¨‹" class="headerlink" title="æ„å»ºå’Œæ›´æ–° Fiber Tree çš„è¿‡ç¨‹"></a>æ„å»ºå’Œæ›´æ–° Fiber Tree çš„è¿‡ç¨‹</h5><ol><li>åˆæ¬¡æ¸²æŸ“ï¼š<ul><li>React ä¼šåˆ›å»ºæ•´ä¸ª Fiber Treeï¼Œå¹¶æ„å»ºç»„ä»¶çš„å®ä¾‹ä»¥åŠå®ƒä»¬å¯¹åº”çš„ DOM å…ƒç´ ã€‚</li></ul></li><li>æ›´æ–°è¿‡ç¨‹ï¼š<ul><li>å½“ç»„ä»¶çŠ¶æ€æˆ– props æ”¹å˜æ—¶ï¼ŒReact ä¼šåˆ›å»ºä¸€æ£µæ–°çš„ Fiber Treeï¼Œå¹¶ä¸æ—§çš„ Fiber Tree è¿›è¡Œå¯¹æ¯”ã€‚è¿™ç§å¯¹æ¯”å¯ä»¥é«˜æ•ˆåœ°æ‰¾å‡ºéœ€è¦æ›´æ–°çš„éƒ¨åˆ†ã€‚</li></ul></li><li>æäº¤é˜¶æ®µï¼š<ul><li>åœ¨æ›´æ–° Fiber Tree åï¼ŒReact ä¼šå°†å˜åŒ–åº”ç”¨åˆ°çœŸå®çš„ DOM ä¸Šã€‚è¿™æ˜¯ä¸å¯ä¸­æ–­çš„é˜¶æ®µï¼Œç¡®ä¿ç”¨æˆ·ç•Œé¢ä¸æœ€æ–°çŠ¶æ€åŒæ­¥ã€‚</li></ul></li></ol><h5 id="Fiber-Tree-çš„ä¼˜åŠ¿"><a href="#Fiber-Tree-çš„ä¼˜åŠ¿" class="headerlink" title="Fiber Tree çš„ä¼˜åŠ¿"></a>Fiber Tree çš„ä¼˜åŠ¿</h5><ol><li>æ€§èƒ½ä¼˜åŒ–ï¼š<ul><li>Fiber Tree å…è®¸å¯¹ UI æ›´æ–°è¿›è¡Œåˆ†ç‰‡å¤„ç†ï¼Œé¿å…äº†é•¿æ—¶é—´çš„ä¸»çº¿ç¨‹é˜»å¡ï¼Œæå‡äº†é¡µé¢çš„å“åº”æ€§ã€‚</li></ul></li><li>ä¼˜å…ˆçº§è°ƒåº¦ï¼š<ul><li>React å¯ä»¥æ ¹æ®ä»»åŠ¡çš„ä¼˜å…ˆçº§æ¥å†³å®šæ‰§è¡Œé¡ºåºï¼Œä»è€Œç¡®ä¿ç”¨æˆ·çš„äº¤äº’ä¼˜å…ˆå¾—åˆ°å“åº”ã€‚</li></ul></li><li>æ¸è¿›æ¸²æŸ“ï¼š<ul><li>Fiber Tree æ”¯æŒå¹¶å‘æ¨¡å¼ï¼Œä½¿å¾— React å¯ä»¥æ¸è¿›å¼åœ°æ¸²æŸ“å¤§å‹ç»„ä»¶æ ‘ã€‚</li></ul></li></ol><h4 id="åä¸‰ã€Keyçš„é‡è¦æ€§"><a href="#åä¸‰ã€Keyçš„é‡è¦æ€§" class="headerlink" title="åä¸‰ã€Keyçš„é‡è¦æ€§"></a>åä¸‰ã€Keyçš„é‡è¦æ€§</h4><p>åœ¨ React ä¸­ï¼Œ<code>key</code> æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å±æ€§ï¼Œç”¨äºå¸®åŠ© React é«˜æ•ˆåœ°æ›´æ–°å’Œæ¸²æŸ“åˆ—è¡¨ä¸­çš„å…ƒç´ ã€‚å®ƒåœ¨åˆ—è¡¨æ¸²æŸ“å’Œç»„ä»¶çš„é‡æ–°æ’åºä¸­å‘æŒ¥äº†é‡è¦ä½œç”¨ã€‚ä»¥ä¸‹æ˜¯ <code>key</code> çš„å‡ ä¸ªé‡è¦ä½œç”¨ï¼š</p><ol><li><strong>å¸®åŠ© React è¯†åˆ«å…ƒç´ </strong></li></ol><p><code>key</code> å±æ€§å¸®åŠ© React å”¯ä¸€æ ‡è¯†åˆ—è¡¨ä¸­çš„æ¯ä¸ªå…ƒç´ ã€‚å®ƒç”¨äºåŒºåˆ†æ¯ä¸ªå…ƒç´ ï¼Œä»è€Œå¸®åŠ© React ç¡®å®šå“ªäº›å…ƒç´ å·²ç»æ”¹å˜ã€æ·»åŠ æˆ–åˆ é™¤ã€‚è¿™ä½¿å¾— React åœ¨æ›´æ–°ç•Œé¢æ—¶èƒ½å¤Ÿæ›´é«˜æ•ˆåœ°è¿›è¡Œæ“ä½œã€‚</p><ol start="2"><li><strong>æé«˜æ¸²æŸ“æ•ˆç‡</strong></li></ol><p>å½“åˆ—è¡¨çš„å†…å®¹å‘ç”Ÿå˜åŒ–æ—¶ï¼ˆå¦‚å¢åŠ ã€åˆ é™¤æˆ–é‡æ–°æ’åºï¼‰ï¼ŒReact ä¾èµ– <code>key</code> æ¥ç¡®å®šå“ªäº›å…ƒç´ éœ€è¦é‡æ–°æ¸²æŸ“ã€‚å¦‚æœæ²¡æœ‰ <code>key</code>ï¼ŒReact ä¼šé‡æ–°æ¸²æŸ“æ•´ä¸ªåˆ—è¡¨ï¼Œè¿™æ ·ä¼šé™ä½æ€§èƒ½ã€‚ä½¿ç”¨ <code>key</code>ï¼ŒReact èƒ½å¤Ÿæœ€å°åŒ– DOM æ“ä½œï¼Œä»…æ›´æ–°å®é™…å˜åŒ–çš„éƒ¨åˆ†ã€‚</p><ol start="3"><li><strong>ç¨³å®šç»„ä»¶çŠ¶æ€</strong></li></ol><p><code>key</code> æœ‰åŠ©äºç¡®ä¿ç»„ä»¶çš„çŠ¶æ€åœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­ä¿æŒç¨³å®šã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªåˆ—è¡¨ä¸­çš„å…ƒç´ è¢«é‡æ–°æ’åºï¼Œä½†å®ƒä»¬çš„ <code>key</code> ä¸å˜ï¼ŒReact ä¼šä¿æŒè¿™äº›å…ƒç´ çš„çŠ¶æ€ï¼Œè€Œä¸æ˜¯é‡æ–°åˆ›å»ºå®ƒä»¬ã€‚è¿™æ ·å¯ä»¥é¿å…ç»„ä»¶çŠ¶æ€çš„ä¸¢å¤±æˆ–é‡ç½®ã€‚</p><ol start="4"><li><strong>å”¯ä¸€æ€§è¦æ±‚</strong></li></ol><p><code>key</code> å±æ€§çš„å€¼å¿…é¡»åœ¨åˆ—è¡¨ä¸­å”¯ä¸€ï¼Œä½†ä¸å¿…åœ¨æ•´ä¸ªåº”ç”¨ä¸­å”¯ä¸€ã€‚é€šå¸¸ï¼Œ<code>key</code> æ˜¯å…ƒç´ çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼ˆå¦‚ IDï¼‰ï¼Œæˆ–è€…åŸºäºå…ƒç´ å†…å®¹ç”Ÿæˆçš„å”¯ä¸€å€¼ã€‚ä½¿ç”¨ä¸å”¯ä¸€çš„ <code>key</code> ä¼šå¯¼è‡´ React æ— æ³•æ­£ç¡®è¯†åˆ«å’Œç®¡ç†å…ƒç´ ï¼Œä»è€Œå¯èƒ½å¯¼è‡´æ€§èƒ½é—®é¢˜æˆ–ä¸ä¸€è‡´çš„ UIã€‚</p>]]></content>
    
    
    <categories>
      
      <category>reactè¯¾ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>react</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>reactè¯¾ç¨‹7-usepopcorn-1</title>
    <link href="/2024/08/17/react%E8%AF%BE%E7%A8%8B7-usepopcorn/"/>
    <url>/2024/08/17/react%E8%AF%BE%E7%A8%8B7-usepopcorn/</url>
    
    <content type="html"><![CDATA[<p>æœ¬æ¬¡è¯¾ç¨‹æ„å»ºå‡ºä¸€ä¸ªç”µå½±æ¸…å•ç•Œé¢ï¼Œæ‹¥æœ‰æ›´å¤šçš„åŠŸèƒ½å’Œæ›´å¼ºçš„äº’åŠ¨æ€§ğŸ¤“ï¼ˆNOè¿™æ¬¡å…ˆå®ç°é™æ€ç½‘é¡µï¼‰ã€‚å’±ä»¬å°±æ˜¯äº‰å–è¿™æ¬¡ä¸å·æ‡’ï¼Œä¸ä»…æŠŠä»£ç æ‰“å®ŒæŠŠçŸ¥è¯†ç‚¹ä¹Ÿè·Ÿç€è®°å®Œå§ã€‚ã€‚ã€‚</p><span id="more"></span><p>ä¸€ä¸ªå°å°çš„å¿«æ·é”®ï¼šé¼ æ ‡æ‚¬åœåœ¨æŸä¸ªç»„ä»¶ï¼Œctrl+å·¦é”®&#x3D;&gt;ç›´æ¥å»ç¼–è¾‘è¿™ä¸ªç»„ä»¶ï¼ˆå‡½æ•°ï¼‰</p><p>å¦ä¸€ä¸ªå°å°çš„å¿«æ·é”®ï¼šcl&#x3D;&gt;console.log()</p><p>å•Šå•Šå•Šå•Šå•Šå•Šå•Šå•Šå•Šå•Šå•Šå•Šæˆ‘ä¸ºä»€ä¹ˆä¸æ—©ç‚¹åˆ‡æ¢åˆ°npmå›½å†…é•œåƒ!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!</p><p>npmä¸‹è½½é€Ÿåº¦çœŸçš„æ…¢çš„æˆ‘æƒ³åˆ€äºº<img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240818164718523.png" alt="image-20240818164718178" style="zoom:67%;" /><br><code>npm config set registry=https://registry.npmmirror.com</code> å‘½ä»¤ä¸€é”®åˆ‡æ¢</p><h3 id="ä¸€ã€çŸ¥è¯†ç‚¹è®²è§£"><a href="#ä¸€ã€çŸ¥è¯†ç‚¹è®²è§£" class="headerlink" title="ä¸€ã€çŸ¥è¯†ç‚¹è®²è§£"></a>ä¸€ã€çŸ¥è¯†ç‚¹è®²è§£</h3><h4 id="ï¼ˆ1ï¼‰ç»„ä»¶ï¼ˆcomponentï¼‰åˆ†è§£"><a href="#ï¼ˆ1ï¼‰ç»„ä»¶ï¼ˆcomponentï¼‰åˆ†è§£" class="headerlink" title="ï¼ˆ1ï¼‰ç»„ä»¶ï¼ˆcomponentï¼‰åˆ†è§£"></a>ï¼ˆ1ï¼‰ç»„ä»¶ï¼ˆcomponentï¼‰åˆ†è§£</h4><p>é¦–å…ˆéœ€è¦æ˜ç¡®çš„æ˜¯ï¼šä¸ç®¡ä½¿ç”¨ä¸€ä¸ªå¾ˆå¤§çš„ç»„ä»¶æˆ–è€…æ˜¯æ‹†åˆ†æˆå¾ˆå¤šå¾ˆå°çš„ç»„ä»¶éƒ½ä¼šä½¿ä»£ç å˜å¾—ç³Ÿç³•ã€‚<strong>é€»è¾‘åˆ†ç¦»</strong>å¾ˆé‡è¦ï¼Œè€Œä¸”è¦æ³¨é‡<strong>ä»£ç é‡ç”¨ï¼ï¼ï¼ï¼ï¼</strong>è®©ä»£ç å˜å¾—é«˜æ•ˆæ˜“æ‡‚ã€‚</p><h4 id="ï¼ˆ2ï¼‰ç»„ä»¶åˆ†ç±»"><a href="#ï¼ˆ2ï¼‰ç»„ä»¶åˆ†ç±»" class="headerlink" title="ï¼ˆ2ï¼‰ç»„ä»¶åˆ†ç±»"></a>ï¼ˆ2ï¼‰ç»„ä»¶åˆ†ç±»</h4><p>1ã€<strong>æ— çŠ¶æ€&#x2F;å±•ç¤ºç»„ä»¶ï¼ˆStateless&#x2F;Presentational Componentsï¼‰</strong></p><ul><li><strong>å®šä¹‰</strong>: ä¸»è¦è´Ÿè´£å±•ç¤º UIï¼ˆç”¨æˆ·ç•Œé¢ï¼‰ï¼Œä¸å¤„ç†åº”ç”¨çš„ä¸šåŠ¡é€»è¾‘ã€‚</li><li><strong>ç‰¹ç‚¹</strong>:<ul><li>ä¸»è¦é€šè¿‡ <code>props</code> æ¥æ”¶æ•°æ®ã€‚</li><li>ä»…è´Ÿè´£å±•ç¤ºï¼Œä¸æ¶‰åŠä¸šåŠ¡é€»è¾‘æˆ–çŠ¶æ€ç®¡ç†ã€‚</li><li>ç”±äºæ²¡æœ‰ä¸šåŠ¡é€»è¾‘ï¼Œé€šå¸¸å¯ä»¥åœ¨å¤šä¸ªåœ°æ–¹å¤ç”¨ã€‚</li><li>å¯ä»¥ä½¿ç”¨å‡½æ•°ç»„ä»¶ï¼Œä¹Ÿå¯ä»¥æ˜¯æ— çŠ¶æ€çš„ç±»ç»„ä»¶ã€‚</li></ul></li></ul><ol start="2"><li><strong>Stateful Componentsï¼ˆæœ‰çŠ¶æ€ç»„ä»¶ï¼‰</strong></li></ol><ul><li><p><strong>å®šä¹‰</strong>: è´Ÿè´£ç®¡ç†åº”ç”¨çš„çŠ¶æ€å’Œé€»è¾‘ï¼Œå¹¶å¯èƒ½ä¼šå°†æ•°æ®ä¼ é€’ç»™å±•ç¤ºç»„ä»¶ã€‚è¿™äº›ç»„ä»¶é€šå¸¸ä¼šä½¿ç”¨ <code>state</code> æ¥ç®¡ç†å…¶å†…éƒ¨çŠ¶æ€ã€‚</p></li><li><p><strong>ç‰¹ç‚¹</strong>:</p><ul><li><p>ç®¡ç†çŠ¶æ€: å¤„ç†åº”ç”¨çš„çŠ¶æ€ï¼ˆä½¿ç”¨ <code>state</code>ï¼‰ã€‚</p></li><li><p>å¤„ç†ä¸šåŠ¡é€»è¾‘: è´Ÿè´£åº”ç”¨çš„é€»è¾‘ï¼Œä¾‹å¦‚å¤„ç†ç”¨æˆ·è¾“å…¥ã€è°ƒç”¨ APIã€è®¡ç®—æ•°æ®ç­‰ã€‚</p></li><li><p>å®¹å™¨ç»„ä»¶: é€šå¸¸æ‰®æ¼”å®¹å™¨ç»„ä»¶çš„è§’è‰²ï¼Œå°†æ•°æ®å’Œé€»è¾‘ä¼ é€’ç»™å±•ç¤ºç»„ä»¶ã€‚</p></li><li><p>å®ç°: å¯ä»¥ä½¿ç”¨ç±»ç»„ä»¶ï¼ˆå…·æœ‰ <code>state</code> å’Œç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼‰æˆ–ä½¿ç”¨ React Hooks çš„å‡½æ•°ç»„ä»¶ã€‚</p></li></ul></li></ul><ol start="3"><li><strong>Structural Componentsï¼ˆç»“æ„ç»„ä»¶ï¼‰</strong></li></ol><ul><li><p><strong>å®šä¹‰</strong>: ä¸»è¦è´Ÿè´£åº”ç”¨çš„å¸ƒå±€å’Œç»“æ„ï¼ŒåŒ…æ‹¬ç»„ç»‡å…¶ä»–ç»„ä»¶çš„æ–¹å¼ã€‚è¿™äº›ç»„ä»¶é€šå¸¸ä¸å…³å¿ƒå…·ä½“çš„ä¸šåŠ¡é€»è¾‘æˆ–æ•°æ®å±•ç¤ºï¼Œè€Œæ˜¯è´Ÿè´£æ•´ä½“çš„ç•Œé¢å¸ƒå±€å’Œç»“æ„ã€‚</p></li><li><p><strong>ç‰¹ç‚¹</strong>:</p><ul><li><p>å¸ƒå±€å’Œç»“æ„: è´Ÿè´£å®šä¹‰ç»„ä»¶çš„å¸ƒå±€å’Œç»“æ„ï¼Œä¾‹å¦‚å®¹å™¨ã€ç½‘æ ¼ã€æ …æ ¼ç³»ç»Ÿç­‰ã€‚</p></li><li><p>åŒ…å«å…¶ä»–ç»„ä»¶: é€šå¸¸ä¼šåŒ…å«å…¶ä»–å±•ç¤ºç»„ä»¶æˆ–æœ‰çŠ¶æ€ç»„ä»¶ã€‚</p></li><li><p>ä¸å¤„ç†ä¸šåŠ¡é€»è¾‘: ä¸ç›´æ¥å¤„ç†åº”ç”¨çš„æ•°æ®æˆ–ä¸šåŠ¡é€»è¾‘ï¼Œåªè´Ÿè´£ç»„ç»‡å’Œå¸ƒå±€ã€‚</p></li></ul></li></ul><h4 id="ï¼ˆ3ï¼‰ä»€ä¹ˆå«åšä½¿ç”¨Compositionæ¥è§£å†³Prop-Drillingçš„é—®é¢˜"><a href="#ï¼ˆ3ï¼‰ä»€ä¹ˆå«åšä½¿ç”¨Compositionæ¥è§£å†³Prop-Drillingçš„é—®é¢˜" class="headerlink" title="ï¼ˆ3ï¼‰ä»€ä¹ˆå«åšä½¿ç”¨Compositionæ¥è§£å†³Prop Drillingçš„é—®é¢˜"></a>ï¼ˆ3ï¼‰ä»€ä¹ˆå«åšä½¿ç”¨Compositionæ¥è§£å†³Prop Drillingçš„é—®é¢˜</h4><p><strong>Composition</strong> æ˜¯ä¸€ç§ç”¨æ¥è§£å†³ <strong>Prop Drilling</strong>ï¼ˆå±æ€§ä¼ é€’ï¼‰é—®é¢˜çš„è®¾è®¡æ¨¡å¼ã€‚<strong>Prop Drilling</strong> æŒ‡çš„æ˜¯å°†æ•°æ®ä»çˆ¶ç»„ä»¶é€å±‚ä¼ é€’åˆ°æ·±å±‚åµŒå¥—çš„å­ç»„ä»¶ï¼Œè¿™æ ·å¯èƒ½ä¼šå¯¼è‡´ç»„ä»¶æ ‘ä¸­çš„ä¸­é—´ç»„ä»¶ä¸å¿…è¦åœ°æ¥æ”¶å’Œä¼ é€’æ•°æ®ï¼Œä½¿å¾—ä»£ç å˜å¾—å¤æ‚ä¸”éš¾ä»¥ç»´æŠ¤ã€‚<strong>Composition</strong> æ˜¯æŒ‡å°†å¤šä¸ªç»„ä»¶ç»„åˆåœ¨ä¸€èµ·ï¼Œä»¥å®ç°æ›´å¤æ‚çš„åŠŸèƒ½æˆ–å¸ƒå±€ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œç»„ä»¶å¯ä»¥ä¸“æ³¨äºå…¶è‡ªèº«çš„åŠŸèƒ½ï¼Œè€Œä¸æ˜¯æ¥æ”¶å’Œä¼ é€’å¤§é‡çš„ <code>props</code>ã€‚</p><h4 id="ï¼ˆ4ï¼‰defaultå€¼çš„è®¾ç½®"><a href="#ï¼ˆ4ï¼‰defaultå€¼çš„è®¾ç½®" class="headerlink" title="ï¼ˆ4ï¼‰defaultå€¼çš„è®¾ç½®"></a>ï¼ˆ4ï¼‰defaultå€¼çš„è®¾ç½®</h4><p>ä¸ºäº†å¢å¼ºç»„ä»¶çš„å¯é‡ç”¨æ€§ï¼Œé€šå¸¸ä¼šä½¿ç”¨ <code>props</code> ä¼ é€’æ•°æ®ã€å›è°ƒå‡½æ•°å’Œè¡Œä¸ºï¼Œè€Œä¸æ˜¯å°†æ•°æ®ç¡¬ç¼–ç åœ¨ç»„ä»¶å†…éƒ¨ã€‚è¿™æ ·ï¼Œç»„ä»¶å¯ä»¥æ ¹æ®ä¼ å…¥çš„ <code>props</code> åŠ¨æ€æ¸²æŸ“ä¸åŒçš„å†…å®¹æˆ–æ‰§è¡Œä¸åŒçš„æ“ä½œã€‚<code>default</code> å€¼ç”¨äºä¸ºç»„ä»¶å‚æ•°ã€å˜é‡æˆ–å±æ€§æä¾›é»˜è®¤å€¼ï¼Œå½“æœªæä¾›ç›¸åº”å€¼æ—¶ï¼Œç¨‹åºå°†ä½¿ç”¨è¿™äº›é»˜è®¤å€¼ã€‚é€šè¿‡åˆç†ä½¿ç”¨é»˜è®¤å€¼ï¼Œå¯ä»¥ç®€åŒ–ä»£ç ã€æé«˜å¯è¯»æ€§ï¼Œå¹¶å‡å°‘é”™è¯¯ã€‚<strong>PSï¼šå¯ä»¥ç”¨defaultå€¼æ¥åˆå§‹åŒ–çŠ¶æ€</strong></p><h3 id="äºŒã€ç»ƒä¹ "><a href="#äºŒã€ç»ƒä¹ " class="headerlink" title="äºŒã€ç»ƒä¹ "></a>äºŒã€ç»ƒä¹ </h3><h4 id="ï¼ˆ1ï¼‰å°†ä¸‹é¢çš„ç½‘é¡µç”±ä¸€ä¸ªå·¨å¤§çš„ç»„ä»¶åˆ†è§£æˆä¸‹å›¾çš„ç»„ä»¶æ ‘"><a href="#ï¼ˆ1ï¼‰å°†ä¸‹é¢çš„ç½‘é¡µç”±ä¸€ä¸ªå·¨å¤§çš„ç»„ä»¶åˆ†è§£æˆä¸‹å›¾çš„ç»„ä»¶æ ‘" class="headerlink" title="ï¼ˆ1ï¼‰å°†ä¸‹é¢çš„ç½‘é¡µç”±ä¸€ä¸ªå·¨å¤§çš„ç»„ä»¶åˆ†è§£æˆä¸‹å›¾çš„ç»„ä»¶æ ‘"></a>ï¼ˆ1ï¼‰å°†ä¸‹é¢çš„ç½‘é¡µç”±ä¸€ä¸ªå·¨å¤§çš„ç»„ä»¶åˆ†è§£æˆä¸‹å›¾çš„ç»„ä»¶æ ‘</h4><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240817161437915.png" alt="image-20240817161437915"></p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240817161356298.png" alt="image-20240817161356298" style="zoom: 67%;" /><h4 id="ï¼ˆ2ï¼‰æ„å»ºä¸€ä¸ªè¯„åˆ†ç»„ä»¶"><a href="#ï¼ˆ2ï¼‰æ„å»ºä¸€ä¸ªè¯„åˆ†ç»„ä»¶" class="headerlink" title="ï¼ˆ2ï¼‰æ„å»ºä¸€ä¸ªè¯„åˆ†ç»„ä»¶"></a>ï¼ˆ2ï¼‰æ„å»ºä¸€ä¸ªè¯„åˆ†ç»„ä»¶</h4><p><img src="C:/Users/å§šå§š/AppData/Roaming/Typora/typora-user-images/image-20240818142751400.png" alt="image-20240818142751400"></p><ul><li><p>ç‰¹ç‚¹ï¼šé¼ æ ‡æ‚¬åœåœ¨æ˜Ÿæ˜Ÿä¸Šæ—¶ä¼šæ˜¾ç¤ºæš‚æ—¶æ˜Ÿæ•°ï¼Œæ˜Ÿæ˜Ÿä¼šéšä¹‹è¢«é¢œè‰²å¡«æ»¡æˆ–ä»æœªç©ºå¿ƒã€‚ç‚¹å‡»æŸé¢—æ˜Ÿæ˜Ÿä¼šå›ºå®šæ˜Ÿæ•°å’Œæ»¡æ˜Ÿçš„æ•°é‡ã€‚</p></li><li><p>æ‹“å±•ï¼šå¢å¼ºç»„ä»¶çš„å¯é‡ç”¨æ€§ã€‚</p><ul><li><p>1ã€å°†æ˜Ÿæ˜Ÿçš„å¤§å°ã€é¢œè‰²ã€å­—ä½“çš„å¤§å°ã€é¢œè‰²ã€æœ€å¤§æ˜Ÿæ˜Ÿæ•°ã€é»˜è®¤æ˜Ÿæ˜Ÿæ•°ã€æ˜¾ç¤ºçš„å†…å®¹ç­‰ç­‰éƒ½é€šè¿‡<code>props</code>ï¼ˆå‚æ•°ï¼‰ä¼ é€’ã€‚ï¼ˆ<strong>å‚æ•°å¤ªå¤šä¼šå¢åŠ ä»£ç çš„å¤æ‚æ€§</strong>ï¼‰</p></li><li><p>2ã€ğŸŒŸğŸŒŸè€ƒè™‘åˆ°ç”¨æˆ·åœ¨æƒ³è¦ä½¿ç”¨è¿™ä¸ªç»„ä»¶çš„æ—¶å€™ï¼Œæƒ³è¦æ‹¿åˆ°ä¸€ä¸ªé‡è¦çš„å‚æ•°ï¼šæ˜Ÿæ•°ã€‚å› æ­¤æˆ‘ä»¬åœ¨æŸä¸ªç»„ä»¶ä¸­åº”ç”¨è¿™ä¸ªç»„ä»¶æ—¶ï¼Œéœ€è¦è®¾ç½®ä¸€ä¸ªçŠ¶æ€ï¼ˆæ¯”å¦‚ï¼‰ï¼šmovieRatingã€‚ç„¶åæŠŠsetMovieRatingå‡½æ•°é€šè¿‡å‚æ•°ä¼ é€’ç»™è¯„åˆ†ç»„ä»¶ã€‚åœ¨ç»„ä»¶ä¸­çš„è®¾ç½®æ˜Ÿæ•°çš„å‡½æ•°ä¸­å°†movieRatingä¹Ÿè®¾ç½®ä¸ºRatingã€‚</p></li></ul></li><li><p>å‚æ•°ç±»å‹æ£€æŸ¥ï¼š</p></li><li><p>1ã€PropTypeï¼š<code>PropTypes</code> æ˜¯ React å†…ç½®çš„ä¸€ä¸ªåº“ï¼Œç”¨äºåœ¨è¿è¡Œæ—¶æ£€æŸ¥ç»„ä»¶æ¥æ”¶åˆ°çš„ <code>props</code> æ˜¯å¦ç¬¦åˆæŒ‡å®šçš„ç±»å‹ã€‚å°½ç®¡åœ¨ React 17 ä¹‹åï¼Œ<code>PropTypes</code> è¢«ç§»å‡ºäº†æ ¸å¿ƒåº“ï¼Œä½†å®ƒä»ç„¶æ˜¯è¿›è¡Œç®€å•ç±»å‹æ£€æŸ¥çš„å¸¸ç”¨å·¥å…·ã€‚</p></li><li><p>2ã€TypeScriptï¼šåœ¨ TypeScript ä¸­ï¼Œç±»å‹æ£€æŸ¥æ˜¯é€šè¿‡é™æ€ç±»å‹ç³»ç»Ÿåœ¨ç¼–è¯‘æ—¶å®Œæˆçš„ï¼Œè¿™æ¯” <code>PropTypes</code> æ›´åŠ ä¸¥æ ¼å’Œå®‰å…¨ã€‚</p></li></ul><h3 id="ä¸‰ã€ä»£ç "><a href="#ä¸‰ã€ä»£ç " class="headerlink" title="ä¸‰ã€ä»£ç "></a>ä¸‰ã€ä»£ç </h3><h4 id="ï¼ˆ1ï¼‰usepopcorn"><a href="#ï¼ˆ1ï¼‰usepopcorn" class="headerlink" title="ï¼ˆ1ï¼‰usepopcorn"></a>ï¼ˆ1ï¼‰usepopcorn</h4><h5 id="App-js"><a href="#App-js" class="headerlink" title="App.js"></a>App.js</h5><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> &#123; useState &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><br><span class="hljs-keyword">const</span> tempMovieData = [<br>  &#123;<br>    <span class="hljs-attr">imdbID</span>: <span class="hljs-string">&quot;tt1375666&quot;</span>,<br>    <span class="hljs-title class_">Title</span>: <span class="hljs-string">&quot;Inception&quot;</span>,<br>    <span class="hljs-title class_">Year</span>: <span class="hljs-string">&quot;2010&quot;</span>,<br>    <span class="hljs-title class_">Poster</span>:<br>      <span class="hljs-string">&quot;https://m.media-amazon.com/images/M/MV5BMjAxMzY3NjcxNF5BMl5BanBnXkFtZTcwNTI5OTM0Mw@@._V1_SX300.jpg&quot;</span>,<br>  &#125;,<br>  &#123;<br>    <span class="hljs-attr">imdbID</span>: <span class="hljs-string">&quot;tt0133093&quot;</span>,<br>    <span class="hljs-title class_">Title</span>: <span class="hljs-string">&quot;The Matrix&quot;</span>,<br>    <span class="hljs-title class_">Year</span>: <span class="hljs-string">&quot;1999&quot;</span>,<br>    <span class="hljs-title class_">Poster</span>:<br>      <span class="hljs-string">&quot;https://m.media-amazon.com/images/M/MV5BNzQzOTk3OTAtNDQ0Zi00ZTVkLWI0MTEtMDllZjNkYzNjNTc4L2ltYWdlXkEyXkFqcGdeQXVyNjU0OTQ0OTY@._V1_SX300.jpg&quot;</span>,<br>  &#125;,<br>  &#123;<br>    <span class="hljs-attr">imdbID</span>: <span class="hljs-string">&quot;tt6751668&quot;</span>,<br>    <span class="hljs-title class_">Title</span>: <span class="hljs-string">&quot;Parasite&quot;</span>,<br>    <span class="hljs-title class_">Year</span>: <span class="hljs-string">&quot;2019&quot;</span>,<br>    <span class="hljs-title class_">Poster</span>:<br>      <span class="hljs-string">&quot;https://m.media-amazon.com/images/M/MV5BYWZjMjk3ZTItODQ2ZC00NTY5LWE0ZDYtZTI3MjcwN2Q5NTVkXkEyXkFqcGdeQXVyODk4OTc3MTY@._V1_SX300.jpg&quot;</span>,<br>  &#125;,<br>];<br><br><span class="hljs-keyword">const</span> tempWatchedData = [<br>  &#123;<br>    <span class="hljs-attr">imdbID</span>: <span class="hljs-string">&quot;tt1375666&quot;</span>,<br>    <span class="hljs-title class_">Title</span>: <span class="hljs-string">&quot;Inception&quot;</span>,<br>    <span class="hljs-title class_">Year</span>: <span class="hljs-string">&quot;2010&quot;</span>,<br>    <span class="hljs-title class_">Poster</span>:<br>      <span class="hljs-string">&quot;https://m.media-amazon.com/images/M/MV5BMjAxMzY3NjcxNF5BMl5BanBnXkFtZTcwNTI5OTM0Mw@@._V1_SX300.jpg&quot;</span>,<br>    <span class="hljs-attr">runtime</span>: <span class="hljs-number">148</span>,<br>    <span class="hljs-attr">imdbRating</span>: <span class="hljs-number">8.8</span>,<br>    <span class="hljs-attr">userRating</span>: <span class="hljs-number">10</span>,<br>  &#125;,<br>  &#123;<br>    <span class="hljs-attr">imdbID</span>: <span class="hljs-string">&quot;tt0088763&quot;</span>,<br>    <span class="hljs-title class_">Title</span>: <span class="hljs-string">&quot;Back to the Future&quot;</span>,<br>    <span class="hljs-title class_">Year</span>: <span class="hljs-string">&quot;1985&quot;</span>,<br>    <span class="hljs-title class_">Poster</span>:<br>      <span class="hljs-string">&quot;https://m.media-amazon.com/images/M/MV5BZmU0M2Y1OGUtZjIxNi00ZjBkLTg1MjgtOWIyNThiZWIwYjRiXkEyXkFqcGdeQXVyMTQxNzMzNDI@._V1_SX300.jpg&quot;</span>,<br>    <span class="hljs-attr">runtime</span>: <span class="hljs-number">116</span>,<br>    <span class="hljs-attr">imdbRating</span>: <span class="hljs-number">8.5</span>,<br>    <span class="hljs-attr">userRating</span>: <span class="hljs-number">9</span>,<br>  &#125;,<br>];<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">average</span> = (<span class="hljs-params">arr</span>) =&gt;<br>  arr.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">acc, cur, i, arr</span>) =&gt;</span> acc + cur / arr.<span class="hljs-property">length</span>, <span class="hljs-number">0</span>);<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> [movies, setMovies] = <span class="hljs-title function_">useState</span>(tempMovieData);<br>  <span class="hljs-keyword">const</span> [watched, setWatched] = <span class="hljs-title function_">useState</span>(tempWatchedData);<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">NavBar</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Search</span> /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">NumResults</span> <span class="hljs-attr">movies</span>=<span class="hljs-string">&#123;movies&#125;</span> /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">NavBar</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Main</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Box</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">MovieList</span> <span class="hljs-attr">movies</span>=<span class="hljs-string">&#123;movies&#125;</span> /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">Box</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Box</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">WatchedSummary</span> <span class="hljs-attr">watched</span>=<span class="hljs-string">&#123;watched&#125;</span> /&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">WatchedMovieList</span> <span class="hljs-attr">watched</span>=<span class="hljs-string">&#123;watched&#125;</span> /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">Box</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">Main</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">NavBar</span>(<span class="hljs-params">&#123; children &#125;</span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">nav</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;nav-bar&quot;</span>&gt;</span></span><br><span class="language-xml">      &#123;&quot; &quot;&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Logo</span> /&gt;</span></span><br><span class="language-xml">      &#123;children&#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Logo</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;logo&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">role</span>=<span class="hljs-string">&quot;img&quot;</span>&gt;</span>ğŸ¿<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>usePopcorn<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Search</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> [query, setQuery] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">&quot;&quot;</span>);<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;search&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;Search movies...&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;query&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;(e)</span> =&gt;</span> setQuery(e.target.value)&#125;</span><br><span class="language-xml">    /&gt;</span><br>  );<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">NumResults</span>(<span class="hljs-params">&#123; movies &#125;</span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;num-results&quot;</span>&gt;</span></span><br><span class="language-xml">      Found <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>&#123;movies.length&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span> results</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Main</span>(<span class="hljs-params">&#123; children &#125;</span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">main</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;main&quot;</span>&gt;</span>&#123;children&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span></span>;<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Box</span>(<span class="hljs-params">&#123; children &#125;</span>) &#123;<br>  <span class="hljs-keyword">const</span> [isOpen, setIsOpen] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">true</span>);<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;box&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;btn-toggle&quot;</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> setIsOpen((open) =&gt; !open)&#125;&gt;</span><br><span class="language-xml">        &#123;isOpen ? &quot;â€“&quot; : &quot;+&quot;&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      &#123;isOpen &amp;&amp; children&#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">MovieList</span>(<span class="hljs-params">&#123; movies &#125;</span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;list&quot;</span>&gt;</span></span><br><span class="language-xml">      &#123;movies?.map((movie) =&gt; (</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Movie</span> <span class="hljs-attr">movie</span>=<span class="hljs-string">&#123;movie&#125;</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;movie.imdbID&#125;</span> /&gt;</span></span><br><span class="language-xml">      ))&#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Movie</span>(<span class="hljs-params">&#123; movie &#125;</span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;movie.imdbID&#125;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&#123;movie.Poster&#125;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&#123;</span>`$&#123;<span class="hljs-attr">movie.Title</span>&#125; <span class="hljs-attr">poster</span>`&#125; /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>&#123;movie.Title&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>ğŸ—“<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;movie.Year&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">WatchedSummary</span>(<span class="hljs-params">&#123; watched &#125;</span>) &#123;<br>  <span class="hljs-keyword">const</span> avgImdbRating = <span class="hljs-title function_">average</span>(watched.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">movie</span>) =&gt;</span> movie.<span class="hljs-property">imdbRating</span>));<br>  <span class="hljs-keyword">const</span> avgUserRating = <span class="hljs-title function_">average</span>(watched.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">movie</span>) =&gt;</span> movie.<span class="hljs-property">userRating</span>));<br>  <span class="hljs-keyword">const</span> avgRuntime = <span class="hljs-title function_">average</span>(watched.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">movie</span>) =&gt;</span> movie.<span class="hljs-property">runtime</span>));<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;summary&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Movies you watched<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>#ï¸âƒ£<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;watched.length&#125; movies<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>â­ï¸<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;avgImdbRating&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>ğŸŒŸ<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;avgUserRating&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>â³<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;avgRuntime&#125; min<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">WatchedMovieList</span>(<span class="hljs-params">&#123; watched &#125;</span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;list&quot;</span>&gt;</span></span><br><span class="language-xml">      &#123;watched.map((movie) =&gt; (</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">WatchedMovie</span> <span class="hljs-attr">movie</span>=<span class="hljs-string">&#123;movie&#125;</span> /&gt;</span></span><br><span class="language-xml">      ))&#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">WatchedMovie</span>(<span class="hljs-params">&#123; movie &#125;</span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;movie.imdbID&#125;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&#123;movie.Poster&#125;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&#123;</span>`$&#123;<span class="hljs-attr">movie.Title</span>&#125; <span class="hljs-attr">poster</span>`&#125; /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>&#123;movie.Title&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>â­ï¸<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;movie.imdbRating&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>ğŸŒŸ<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;movie.userRating&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>â³<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;movie.runtime&#125; min<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br>  );<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="ï¼ˆ2ï¼‰StarRating-js"><a href="#ï¼ˆ2ï¼‰StarRating-js" class="headerlink" title="ï¼ˆ2ï¼‰StarRating.js"></a>ï¼ˆ2ï¼‰StarRating.js</h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> &#123; useState &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><span class="hljs-keyword">const</span> containerStyle = &#123;<br>  <span class="hljs-attr">display</span>: <span class="hljs-string">&quot;flex&quot;</span>,<br>  <span class="hljs-attr">alignItems</span>: <span class="hljs-string">&quot;center&quot;</span>,<br>  <span class="hljs-attr">gap</span>: <span class="hljs-string">&quot;16px&quot;</span>,<br>&#125;;<br><br><span class="hljs-keyword">const</span> starContainerStyle = &#123;<br>  <span class="hljs-attr">display</span>: <span class="hljs-string">&quot;flex&quot;</span>,<br>  <span class="hljs-comment">//gap: &quot;4px&quot;,</span><br>&#125;;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">StarRating</span>(<span class="hljs-params">&#123;</span><br><span class="hljs-params">  maxRating = <span class="hljs-number">5</span>,</span><br><span class="hljs-params">  color = <span class="hljs-string">&quot;#e3af40&quot;</span>,</span><br><span class="hljs-params">  size = <span class="hljs-number">48</span>,</span><br><span class="hljs-params">  className = <span class="hljs-string">&quot;&quot;</span>,</span><br><span class="hljs-params">  messages = [],</span><br><span class="hljs-params">  defaultRating = <span class="hljs-number">0</span>,</span><br><span class="hljs-params">&#125;</span>) &#123;<br>  <span class="hljs-keyword">const</span> [rating, setRating] = <span class="hljs-title function_">useState</span>(defaultRating);<br>  <span class="hljs-keyword">const</span> [tempRating, setTempRating] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);<br><br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleRating</span>(<span class="hljs-params">rating</span>) &#123;<br>    <span class="hljs-title function_">setRating</span>(rating);<br>  &#125;<br><br>  <span class="hljs-keyword">const</span> textStyle = &#123;<br>    <span class="hljs-attr">lineHeight</span>: <span class="hljs-string">&quot;1&quot;</span>,<br>    <span class="hljs-attr">margin</span>: <span class="hljs-string">&quot;0&quot;</span>,<br>    color,<br>    <span class="hljs-attr">fontSize</span>: <span class="hljs-string">`<span class="hljs-subst">$&#123;size / <span class="hljs-number">2.5</span>&#125;</span>px`</span>,<br>  &#125;;<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;containerStyle&#125;</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&#123;className&#125;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;starContainerStyle&#125;</span>&gt;</span></span><br><span class="language-xml">        &#123;Array.from(&#123; length: maxRating &#125;, (_, i) =&gt; (</span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">Star</span></span></span><br><span class="hljs-tag"><span class="language-xml">            <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;i&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">            <span class="hljs-attr">onRate</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> handleRating(i + 1)&#125;</span><br><span class="language-xml">            full=&#123;tempRating ? tempRating &gt;= i + 1 : rating &gt;= i + 1&#125;</span><br><span class="language-xml">            onHoverIn=&#123;() =&gt; setTempRating(i + 1)&#125;</span><br><span class="language-xml">            onHoverOut=&#123;() =&gt; setTempRating(0)&#125;</span><br><span class="language-xml">            color=&#123;color&#125;</span><br><span class="language-xml">            size=&#123;size&#125;</span><br><span class="language-xml">          /&gt;</span><br><span class="language-xml">        ))&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;textStyle&#125;</span>&gt;</span></span><br><span class="language-xml">        &#123;maxRating === messages.length</span><br><span class="language-xml">          ? messages[tempRating ? tempRating - 1 : rating - 1]</span><br><span class="language-xml">          : tempRating || rating || &quot;&quot;&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Star</span>(<span class="hljs-params">&#123; onRate, full, onHoverIn, onHoverOut, color, size &#125;</span>) &#123;<br>  <span class="hljs-keyword">const</span> starStyle = &#123;<br>    <span class="hljs-attr">width</span>: <span class="hljs-string">`<span class="hljs-subst">$&#123;size / <span class="hljs-number">1.5</span>&#125;</span>px`</span>,<br>    <span class="hljs-attr">height</span>: <span class="hljs-string">`<span class="hljs-subst">$&#123;size / <span class="hljs-number">1.5</span>&#125;</span>px`</span>,<br>    <span class="hljs-attr">display</span>: <span class="hljs-string">&quot;block&quot;</span>,<br>    <span class="hljs-attr">cursor</span>: <span class="hljs-string">&quot;pointer&quot;</span>,<br>  &#125;;<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">role</span>=<span class="hljs-string">&quot;button&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;starStyle&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;onRate&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">onMouseEnter</span>=<span class="hljs-string">&#123;onHoverIn&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">onMouseLeave</span>=<span class="hljs-string">&#123;onHoverOut&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">    &gt;</span></span><br><span class="language-xml">      &#123;full ? (</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">svg</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.w3.org/2000/svg&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">viewBox</span>=<span class="hljs-string">&quot;0 0 20 20&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">fill</span>=<span class="hljs-string">&#123;color&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">stroke</span>=<span class="hljs-string">&#123;color&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        &gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">path</span> <span class="hljs-attr">d</span>=<span class="hljs-string">&quot;M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z&quot;</span> /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">svg</span>&gt;</span></span><br><span class="language-xml">      ) : (</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">svg</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.w3.org/2000/svg&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">fill</span>=<span class="hljs-string">&quot;none&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">viewBox</span>=<span class="hljs-string">&quot;0 0 24 24&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">stroke</span>=<span class="hljs-string">&#123;color&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        &gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">path</span></span></span><br><span class="hljs-tag"><span class="language-xml">            <span class="hljs-attr">strokeLinecap</span>=<span class="hljs-string">&quot;round&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">            <span class="hljs-attr">strokeLinejoin</span>=<span class="hljs-string">&quot;round&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">            <span class="hljs-attr">strokeWidth</span>=<span class="hljs-string">&quot;&#123;2&#125;&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">            <span class="hljs-attr">d</span>=<span class="hljs-string">&quot;M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">svg</span>&gt;</span></span><br><span class="language-xml">      )&#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br>  );<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="ï¼ˆ3ï¼‰å¯æŠ˜å ä¼šè¯ï¼ˆå¯é‡ç”¨å°ç»„ä»¶ï¼‰"><a href="#ï¼ˆ3ï¼‰å¯æŠ˜å ä¼šè¯ï¼ˆå¯é‡ç”¨å°ç»„ä»¶ï¼‰" class="headerlink" title="ï¼ˆ3ï¼‰å¯æŠ˜å ä¼šè¯ï¼ˆå¯é‡ç”¨å°ç»„ä»¶ï¼‰"></a>ï¼ˆ3ï¼‰å¯æŠ˜å ä¼šè¯ï¼ˆå¯é‡ç”¨å°ç»„ä»¶ï¼‰</h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">ReactDOM</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react-dom/client&quot;</span>;<br><span class="hljs-comment">//import &quot;./index.css&quot;;</span><br><span class="hljs-comment">//import App from &quot;./App&quot;;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">StarRating</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./StarRating&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; useState &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;./style.css&quot;</span>;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Text</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">StarRating</span> <span class="hljs-attr">color</span>=<span class="hljs-string">&quot;blue&quot;</span> /&gt;</span></span>;<br>&#125;<br><br><span class="hljs-keyword">const</span> root = <span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">createRoot</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;root&quot;</span>));<br>root.<span class="hljs-title function_">render</span>(<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">React.StrictMode</span>&gt;</span></span><br><span class="language-xml">    &#123;/* <span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span> */&#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">StarRating</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">maxRating</span>=<span class="hljs-string">&#123;5&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">messages</span>=<span class="hljs-string">&#123;[</span>&quot;<span class="hljs-attr">Terrible</span>&quot;, &quot;<span class="hljs-attr">Bad</span>&quot;, &quot;<span class="hljs-attr">Okay</span>&quot;, &quot;<span class="hljs-attr">Good</span>&quot;, &quot;<span class="hljs-attr">Amazing</span>&quot;]&#125;</span></span><br><span class="hljs-tag"><span class="language-xml">    /&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">StarRating</span> <span class="hljs-attr">size</span>=<span class="hljs-string">&#123;35&#125;</span> <span class="hljs-attr">color</span>=<span class="hljs-string">&quot;red&quot;</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;test&quot;</span> <span class="hljs-attr">defaultRating</span>=<span class="hljs-string">&#123;3&#125;</span> /&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">Text</span> /&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">TextExpander</span>&gt;</span></span><br><span class="language-xml">      Space travel is the ultimate adventure! Imagine soaring past the stars and</span><br><span class="language-xml">      exploring new worlds. It&#x27;s the stuff of dreams and science fiction, but</span><br><span class="language-xml">      believe it or not, space travel is a real thing. Humans and robots are</span><br><span class="language-xml">      constantly venturing out into the cosmos to uncover its secrets and push</span><br><span class="language-xml">      the boundaries of what&#x27;s possible.</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">TextExpander</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">TextExpander</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">collapsedNumWords</span>=<span class="hljs-string">&#123;20&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">expandButtonText</span>=<span class="hljs-string">&quot;Show text&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">collapseButtonText</span>=<span class="hljs-string">&quot;Collapse text&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">buttonColor</span>=<span class="hljs-string">&quot;#ff6622&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">    &gt;</span></span><br><span class="language-xml">      Space travel requires some seriously amazing technology and collaboration</span><br><span class="language-xml">      between countries, private companies, and international space</span><br><span class="language-xml">      organizations. And while it&#x27;s not always easy (or cheap), the results are</span><br><span class="language-xml">      out of this world. Think about the first time humans stepped foot on the</span><br><span class="language-xml">      moon or when rovers were sent to roam around on Mars.</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">TextExpander</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">TextExpander</span> <span class="hljs-attr">expanded</span>=<span class="hljs-string">&#123;true&#125;</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;box&quot;</span>&gt;</span></span><br><span class="language-xml">      Space missions have given us incredible insights into our universe and</span><br><span class="language-xml">      have inspired future generations to keep reaching for the stars. Space</span><br><span class="language-xml">      travel is a pretty cool thing to think about. Who knows what we&#x27;ll</span><br><span class="language-xml">      discover next!</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">TextExpander</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">React.StrictMode</span>&gt;</span></span><br>);<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">TextExpander</span>(<span class="hljs-params">&#123;</span><br><span class="hljs-params">  collapsedNumWords = <span class="hljs-number">10</span>,</span><br><span class="hljs-params">  expandButtonText = <span class="hljs-string">&quot;show more&quot;</span>,</span><br><span class="hljs-params">  collapseButtonText = <span class="hljs-string">&quot;show less&quot;</span>,</span><br><span class="hljs-params">  buttonColor = <span class="hljs-string">&quot;red&quot;</span>,</span><br><span class="hljs-params">  expanded = <span class="hljs-literal">false</span>,</span><br><span class="hljs-params">  className,</span><br><span class="hljs-params">  children,</span><br><span class="hljs-params">&#125;</span>) &#123;<br>  <span class="hljs-keyword">const</span> [isExpanded, setIsExpanded] = <span class="hljs-title function_">useState</span>(expanded);<br>  <span class="hljs-keyword">const</span> displayText = isExpanded<br>    ? children<br>    : children.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot; &quot;</span>).<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, collapsedNumWords).<span class="hljs-title function_">join</span>(<span class="hljs-string">&quot; &quot;</span>) + <span class="hljs-string">&quot;...&quot;</span>;<br><br>  <span class="hljs-keyword">const</span> buttonStyle = &#123;<br>    <span class="hljs-attr">background</span>: <span class="hljs-string">&quot;none&quot;</span>,<br>    <span class="hljs-attr">border</span>: <span class="hljs-string">&quot;none&quot;</span>,<br>    <span class="hljs-attr">font</span>: <span class="hljs-string">&quot;inherit&quot;</span>,<br>    <span class="hljs-attr">cursor</span>: <span class="hljs-string">&quot;pointer&quot;</span>,<br>    <span class="hljs-attr">marginLeft</span>: <span class="hljs-string">&quot;6px&quot;</span>,<br>    <span class="hljs-attr">color</span>: buttonColor,<br>  &#125;;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&#123;className&#125;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;displayText&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> setIsExpanded((exp) =&gt; !exp)&#125; style=&#123;buttonStyle&#125;&gt;</span><br><span class="language-xml">        &#123;isExpanded ? collapseButtonText : expandButtonText&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>reactè¯¾ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>react</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>reactè¯¾ç¨‹6-eat-n-split</title>
    <link href="/2024/08/16/react%E8%AF%BE%E7%A8%8B6-eat-n-split/"/>
    <url>/2024/08/16/react%E8%AF%BE%E7%A8%8B6-eat-n-split/</url>
    
    <content type="html"><![CDATA[<p>æœ¬èŠ‚è¯¾æ„å»ºçš„æ˜¯ä¸€ä¸ªå°å·§çš„è´¦å•å°ç»„ä»¶ã€‚</p><span id="more"></span><p>å¦‚å›¾æ‰€ç¤ºï¼Œä¸€å…±å¯ä»¥è¢«åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼šæœ‹å‹åˆ—è¡¨ï¼›æ·»åŠ æœ‹å‹è¡¨ï¼›åˆ†è´¦å•è¡¨ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240819194647578.png" alt="image-20240819194647578"></p><h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><h4 id="css"><a href="#css" class="headerlink" title="&#x3D;&gt;css"></a>&#x3D;&gt;css</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-pseudo">:root</span> &#123;<br>  <span class="hljs-attr">--color-lightest</span>: <span class="hljs-number">#fff4e6</span>;<br>  <span class="hljs-attr">--color-light</span>: <span class="hljs-number">#ffe8cc</span>;<br>  <span class="hljs-attr">--color-medium</span>: <span class="hljs-number">#ffa94d</span>;<br>  <span class="hljs-attr">--color-dark</span>: <span class="hljs-number">#ff922b</span>;<br>&#125;<br><br>* &#123;<br>  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;<br>  <span class="hljs-attribute">box-sizing</span>: border-box;<br>&#125;<br><br><span class="hljs-selector-tag">html</span> &#123;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">62.5%</span>;<br>  <span class="hljs-attribute">font-family</span>: -apple-system, BlinkMacSystemFont, <span class="hljs-string">&quot;Segoe UI&quot;</span>, Roboto, Oxygen,<br>    Ubuntu, Cantarell, <span class="hljs-string">&quot;Open Sans&quot;</span>, <span class="hljs-string">&quot;Helvetica Neue&quot;</span>, sans-serif;<br>&#125;<br><br><span class="hljs-selector-tag">body</span> &#123;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">100vh</span>;<br>  <span class="hljs-attribute">color</span>: <span class="hljs-number">#495057</span>;<br>  <span class="hljs-attribute">display</span>: flex;<br>  <span class="hljs-attribute">align-items</span>: center;<br>  <span class="hljs-attribute">justify-content</span>: center;<br>&#125;<br><br><span class="hljs-selector-class">.app</span> &#123;<br>  <span class="hljs-attribute">min-height</span>: <span class="hljs-number">66vh</span>;<br>  <span class="hljs-attribute">display</span>: grid;<br>  <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-number">34rem</span> <span class="hljs-number">44rem</span>;<br>  <span class="hljs-attribute">column-gap</span>: <span class="hljs-number">4rem</span>;<br>  <span class="hljs-attribute">align-items</span>: start;<br>&#125;<br><br><span class="hljs-selector-class">.button</span> &#123;<br>  <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">var</span>(--color-medium);<br>  <span class="hljs-attribute">color</span>: <span class="hljs-number">#343a40</span>;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">0.8rem</span> <span class="hljs-number">1.2rem</span>;<br>  <span class="hljs-attribute">border</span>: none;<br>  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">7px</span>;<br>  <span class="hljs-attribute">font-weight</span>: bold;<br>  <span class="hljs-attribute">cursor</span>: pointer;<br>  <span class="hljs-attribute">transition</span>: <span class="hljs-number">0.3s</span>;<br>&#125;<br><br><span class="hljs-selector-class">.button</span><span class="hljs-selector-pseudo">:hover</span> &#123;<br>  <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">var</span>(--color-dark);<br>&#125;<br><br><span class="hljs-selector-class">.sidebar</span> <span class="hljs-selector-tag">ul</span> &#123;<br>  <span class="hljs-attribute">list-style</span>: none;<br>  <span class="hljs-attribute">display</span>: flex;<br>  <span class="hljs-attribute">flex-direction</span>: column;<br>  <span class="hljs-attribute">gap</span>: <span class="hljs-number">0.4rem</span>;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.4rem</span>;<br>  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">2rem</span>;<br>&#125;<br><br><span class="hljs-selector-class">.sidebar</span> <span class="hljs-selector-tag">li</span> &#123;<br>  <span class="hljs-attribute">display</span>: grid;<br>  <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-number">4.8rem</span> <span class="hljs-number">1</span>fr auto;<br>  <span class="hljs-attribute">align-items</span>: center;<br>  <span class="hljs-attribute">column-gap</span>: <span class="hljs-number">1.6rem</span>;<br><br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">1.2rem</span>;<br>  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">7px</span>;<br>  <span class="hljs-attribute">transition</span>: <span class="hljs-number">0.5s</span>;<br>&#125;<br><br><span class="hljs-selector-class">.selected</span>,<br><span class="hljs-selector-class">.sidebar</span> <span class="hljs-selector-tag">li</span><span class="hljs-selector-pseudo">:hover</span> &#123;<br>  <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">var</span>(--color-lightest);<br>&#125;<br><br><span class="hljs-selector-class">.sidebar</span> <span class="hljs-selector-tag">li</span> <span class="hljs-selector-tag">img</span> &#123;<br>  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;<br>  <span class="hljs-attribute">grid-row</span>: span <span class="hljs-number">2</span>;<br>&#125;<br><br><span class="hljs-selector-class">.sidebar</span> <span class="hljs-selector-tag">li</span> <span class="hljs-selector-tag">h3</span> &#123;<br>  <span class="hljs-attribute">grid-row</span>: <span class="hljs-number">1</span>;<br>  <span class="hljs-attribute">grid-column</span>: <span class="hljs-number">2</span>;<br>&#125;<br><br><span class="hljs-selector-class">.sidebar</span> <span class="hljs-selector-tag">li</span> <span class="hljs-selector-tag">p</span> &#123;<br>  <span class="hljs-attribute">grid-row</span>: <span class="hljs-number">2</span>;<br>  <span class="hljs-attribute">grid-column</span>: <span class="hljs-number">2</span>;<br>&#125;<br><br><span class="hljs-selector-class">.sidebar</span> <span class="hljs-selector-tag">li</span> <span class="hljs-selector-class">.button</span> &#123;<br>  <span class="hljs-attribute">grid-row</span>: span <span class="hljs-number">2</span>;<br>  <span class="hljs-attribute">grid-column</span>: <span class="hljs-number">3</span>;<br>&#125;<br><br><span class="hljs-selector-class">.sidebar</span> &gt; <span class="hljs-selector-class">.button</span> &#123;<br>  <span class="hljs-attribute">float</span>: right;<br>  <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">1.2rem</span>;<br>&#125;<br><br><span class="hljs-selector-class">.green</span> &#123;<br>  <span class="hljs-attribute">color</span>: <span class="hljs-number">#66a80f</span>;<br>&#125;<br><br><span class="hljs-selector-class">.red</span> &#123;<br>  <span class="hljs-attribute">color</span>: <span class="hljs-number">#e03131</span>;<br>&#125;<br><br><span class="hljs-selector-tag">form</span> &#123;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.6rem</span>;<br>  <span class="hljs-attribute">display</span>: grid;<br>  <span class="hljs-attribute">align-items</span>: center;<br>  <span class="hljs-attribute">gap</span>: <span class="hljs-number">1.2rem</span>;<br><br>  <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">var</span>(--color-lightest);<br>  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">7px</span>;<br>&#125;<br><br><span class="hljs-selector-class">.form-add-friend</span> &#123;<br>  <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-number">1</span>fr <span class="hljs-number">1.5</span>fr;<br>  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">1.6rem</span>;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">1.2rem</span>;<br>&#125;<br><span class="hljs-selector-class">.form-split-bill</span> &#123;<br>  <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-number">1</span>fr <span class="hljs-number">12rem</span>;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">3.2rem</span> <span class="hljs-number">4rem</span>;<br>&#125;<br><br><span class="hljs-selector-tag">label</span> &#123;<br>  <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">500</span>;<br>&#125;<br><br><span class="hljs-selector-tag">label</span><span class="hljs-selector-pseudo">::first-letter</span> &#123;<br>  <span class="hljs-attribute">display</span>: inline-block;<br>  <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">4px</span>;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.8rem</span>;<br>&#125;<br><br><span class="hljs-selector-tag">input</span>,<br>select &#123;<br>  <span class="hljs-attribute">font-family</span>: inherit;<br>  <span class="hljs-attribute">color</span>: inherit;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.5rem</span>;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">0.7rem</span>;<br>  <span class="hljs-attribute">text-align</span>: center;<br>  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-built_in">var</span>(--color-light);<br>  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;<br>  <span class="hljs-attribute">transition</span>: <span class="hljs-number">0.3s</span>;<br>&#125;<br><br><span class="hljs-selector-tag">input</span><span class="hljs-selector-pseudo">:focus</span>,<br>select<span class="hljs-selector-pseudo">:focus</span> &#123;<br>  <span class="hljs-attribute">outline</span>: none;<br>  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-built_in">var</span>(--color-dark);<br>&#125;<br><br><span class="hljs-selector-tag">form</span> <span class="hljs-selector-class">.button</span> &#123;<br>  <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">0.6rem</span>;<br>  <span class="hljs-attribute">grid-column</span>: <span class="hljs-number">2</span>;<br>&#125;<br><br><span class="hljs-selector-tag">form</span> <span class="hljs-selector-tag">h2</span> &#123;<br>  <span class="hljs-attribute">grid-column</span>: <span class="hljs-number">1</span> / -<span class="hljs-number">1</span>;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">2.2rem</span>;<br>  <span class="hljs-attribute">text-transform</span>: uppercase;<br>  <span class="hljs-attribute">letter-spacing</span>: -<span class="hljs-number">0.5px</span>;<br>  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">1.6rem</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="js"><a href="#js" class="headerlink" title="&#x3D;&gt;js"></a>&#x3D;&gt;js</h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> &#123; useState &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><br><span class="hljs-keyword">const</span> initialFriends = [<br>  &#123;<br>    <span class="hljs-attr">id</span>: <span class="hljs-number">118836</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Clark&quot;</span>,<br>    <span class="hljs-attr">image</span>: <span class="hljs-string">&quot;https://i.pravatar.cc/48?u=118836&quot;</span>,<br>    <span class="hljs-attr">balance</span>: -<span class="hljs-number">7</span>,<br>  &#125;,<br>  &#123;<br>    <span class="hljs-attr">id</span>: <span class="hljs-number">933372</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Sarah&quot;</span>,<br>    <span class="hljs-attr">image</span>: <span class="hljs-string">&quot;https://i.pravatar.cc/48?u=933372&quot;</span>,<br>    <span class="hljs-attr">balance</span>: <span class="hljs-number">20</span>,<br>  &#125;,<br>  &#123;<br>    <span class="hljs-attr">id</span>: <span class="hljs-number">499476</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Anthony&quot;</span>,<br>    <span class="hljs-attr">image</span>: <span class="hljs-string">&quot;https://i.pravatar.cc/48?u=499476&quot;</span>,<br>    <span class="hljs-attr">balance</span>: <span class="hljs-number">0</span>,<br>  &#125;,<br>];<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Button</span>(<span class="hljs-params">&#123; children, onClick &#125;</span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;onClick&#125;</span>&gt;</span></span><br><span class="language-xml">      &#123;children&#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> [showAddFriend, setShowAddFriend] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);<br>  <span class="hljs-keyword">const</span> [friends, setFriends] = <span class="hljs-title function_">useState</span>(initialFriends);<br>  <span class="hljs-keyword">const</span> [selectedFriend, setSelectFriend] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);<br><br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleAddFriend</span>(<span class="hljs-params">friend</span>) &#123;<br>    <span class="hljs-title function_">setFriends</span>(<span class="hljs-function">(<span class="hljs-params">friends</span>) =&gt;</span> [...friends, friend]);<br>    <span class="hljs-title function_">setShowAddFriend</span>(<span class="hljs-literal">false</span>);<br>  &#125;<br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleSelection</span>(<span class="hljs-params">friend</span>) &#123;<br>    <span class="hljs-title function_">setSelectFriend</span>(<span class="hljs-function">(<span class="hljs-params">cur</span>) =&gt;</span> (cur?.<span class="hljs-property">id</span> === friend.<span class="hljs-property">id</span> ? <span class="hljs-literal">null</span> : friend));<br>    <span class="hljs-title function_">setShowAddFriend</span>(<span class="hljs-literal">false</span>);<br>  &#125;<br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleSplitBill</span>(<span class="hljs-params">value</span>) &#123;<br>    <span class="hljs-title function_">setFriends</span>(<span class="hljs-function">(<span class="hljs-params">friends</span>) =&gt;</span><br>      friends.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">friend</span>) =&gt;</span><br>        friend.<span class="hljs-property">id</span> === selectedFriend.<span class="hljs-property">id</span><br>          ? &#123; ...friend, <span class="hljs-attr">balance</span>: friend.<span class="hljs-property">balance</span> + value &#125;<br>          : friend<br>      )<br>    );<br>    <span class="hljs-title function_">setSelectFriend</span>(<span class="hljs-literal">null</span>);<br>  &#125;<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;sidebar&quot;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">FriendList</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">friends</span>=<span class="hljs-string">&#123;friends&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">onSelection</span>=<span class="hljs-string">&#123;handleSelection&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">selectedFriend</span>=<span class="hljs-string">&#123;selectedFriend&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        /&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">        &#123;showAddFriend &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">FormAddFriend</span> <span class="hljs-attr">onAddFriends</span>=<span class="hljs-string">&#123;handleAddFriend&#125;</span> /&gt;</span>&#125;</span><br><span class="language-xml"></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> setShowAddFriend((e) =&gt; !e)&#125;&gt;</span><br><span class="language-xml">          &#123;showAddFriend ? &quot;Close&quot; : &quot;Add friend&quot;&#125;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">      &#123;selectedFriend &amp;&amp; (</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">FormSplitBill</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">selectedFriend</span>=<span class="hljs-string">&#123;selectedFriend&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">onSplitBill</span>=<span class="hljs-string">&#123;handleSplitBill&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;selectedFriend.id&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        /&gt;</span></span><br><span class="language-xml">      )&#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">FriendList</span>(<span class="hljs-params">&#123; friends, onSelection, selectedFriend &#125;</span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml">      &#123;friends.map((friend) =&gt; (</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Friend</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">friend</span>=<span class="hljs-string">&#123;friend&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;friend.id&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">onSelection</span>=<span class="hljs-string">&#123;onSelection&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">selectedFriend</span>=<span class="hljs-string">&#123;selectedFriend&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        /&gt;</span></span><br><span class="language-xml">      ))&#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Friend</span>(<span class="hljs-params">&#123; friend, onSelection, selectedFriend &#125;</span>) &#123;<br>  <span class="hljs-keyword">const</span> isSelected = selectedFriend?.<span class="hljs-property">id</span> === friend.<span class="hljs-property">id</span>;<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&#123;isSelected</span> ? &quot;<span class="hljs-attr">selected</span>&quot; <span class="hljs-attr">:</span> &quot;&quot;&#125;&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&#123;friend.image&#125;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&#123;friend.name&#125;</span> /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>&#123;friend.name&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span></span><br><span class="language-xml">      &#123;friend.balance &lt; 0 &amp;&amp; (</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;red&quot;</span>&gt;</span></span><br><span class="language-xml">          You owe &#123;friend.name&#125; &#123;Math.abs(friend.balance)&#125;$</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">      )&#125;</span><br><span class="language-xml">      &#123;friend.balance &gt; 0 &amp;&amp; (</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;green&quot;</span>&gt;</span></span><br><span class="language-xml">          &#123;friend.name&#125; owes you &#123;friend.balance&#125;$</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">      )&#125;</span><br><span class="language-xml">      &#123;friend.balance === 0 &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>You and your friend are even<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> onSelection(friend)&#125;&gt;</span><br><span class="language-xml">        &#123;isSelected ? &quot;Close&quot; : &quot;Select&quot;&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">FormAddFriend</span>(<span class="hljs-params">&#123; onAddFriends &#125;</span>) &#123;<br>  <span class="hljs-keyword">const</span> [name, setName] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">&quot;&quot;</span>);<br>  <span class="hljs-keyword">const</span> [image, setImage] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">&quot;https://i.pravatar.cc/48&quot;</span>);<br><br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleSubmit</span>(<span class="hljs-params">e</span>) &#123;<br>    e.<span class="hljs-title function_">preventDefault</span>();<br>    <span class="hljs-keyword">if</span> (!name || !image) <span class="hljs-keyword">return</span>;<br>    <span class="hljs-keyword">const</span> id = crypto.<span class="hljs-title function_">randomUUID</span>();<br><br>    <span class="hljs-keyword">const</span> newFriend = &#123;<br>      id,<br>      name,<br>      <span class="hljs-attr">image</span>: <span class="hljs-string">`<span class="hljs-subst">$&#123;image&#125;</span>?=<span class="hljs-subst">$&#123;id&#125;</span>`</span>,<br>      <span class="hljs-attr">balance</span>: <span class="hljs-number">0</span>,<br>    &#125;;<br><br>    <span class="hljs-title function_">onAddFriends</span>(newFriend);<br><br>    <span class="hljs-title function_">setName</span>(<span class="hljs-string">&quot;&quot;</span>);<br>    <span class="hljs-title function_">setImage</span>(<span class="hljs-string">&quot;https://i.pravatar.cc/48&quot;</span>);<br>  &#125;<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;form-add-friend&quot;</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">&#123;handleSubmit&#125;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>ğŸ‘§ğŸ»Friend name<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">input</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;name&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;(e)</span> =&gt;</span> setName(e.target.value)&#125;</span><br><span class="language-xml">      /&gt;</span><br><span class="language-xml"></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>ğŸ§£Image URL<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">input</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;image&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;(e)</span> =&gt;</span> setImage(e.target.value)&#125;</span><br><span class="language-xml">      /&gt;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>&gt;</span>Add<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">FormSplitBill</span>(<span class="hljs-params">&#123; selectedFriend, onSplitBill &#125;</span>) &#123;<br>  <span class="hljs-keyword">const</span> [bill, setBill] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">&quot;&quot;</span>);<br>  <span class="hljs-keyword">const</span> [paidByUser, setPaidByUser] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">&quot;&quot;</span>);<br>  <span class="hljs-keyword">const</span> paidByFriend = bill ? bill - paidByUser : <span class="hljs-string">&quot;&quot;</span>;<br>  <span class="hljs-keyword">const</span> [whoIsPaying, setWhoIsPaying] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">&quot;user&quot;</span>);<br><br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleSubmit</span>(<span class="hljs-params">e</span>) &#123;<br>    e.<span class="hljs-title function_">preventDefault</span>();<br>    <span class="hljs-keyword">if</span> (!bill || !paidByUser) <span class="hljs-keyword">return</span>;<br>    <span class="hljs-title function_">onSplitBill</span>(whoIsPaying === <span class="hljs-string">&quot;user&quot;</span> ? paidByFriend : -paidByUser);<br>  &#125;<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;form-split-bill&quot;</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">&#123;handleSubmit&#125;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Split a Bill With &#123;selectedFriend.name&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>ğŸ’œBill Value<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">input</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;bill&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;(e)</span> =&gt;</span> setBill(Number(e.target.value))&#125;</span><br><span class="language-xml">      /&gt;</span><br><span class="language-xml"></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>ğŸ”†Your expense<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">input</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;paidByUser&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;(e)</span> =&gt;</span> setPaidByUser(Number(e.target.value))&#125;</span><br><span class="language-xml">      /&gt;</span><br><span class="language-xml"></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>â˜€ï¸&#123;selectedFriend.name&#125;&#x27;s expense<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;paidByFriend&#125;</span> <span class="hljs-attr">disabled</span> /&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>ğŸ›ï¸Who<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">select</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;whoIsPaying&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;(e)</span> =&gt;</span> setWhoIsPaying(e.target.value)&#125;</span><br><span class="language-xml">      &gt;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;user&quot;</span>&gt;</span>You<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;friend&quot;</span>&gt;</span>&#123;selectedFriend.name&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>&gt;</span>Split bill<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span><br>  );<br>&#125;<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>reactè¯¾ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>react</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>reactè¯¾ç¨‹5-TravelList</title>
    <link href="/2024/08/16/react%E8%AF%BE%E7%A8%8B5-TravelList/"/>
    <url>/2024/08/16/react%E8%AF%BE%E7%A8%8B5-TravelList/</url>
    
    <content type="html"><![CDATA[<p>æœ¬èŠ‚è¯¾å»ºç«‹äº†ä¸€ä¸ªæ—…æ¸¸éœ€å¸¦ç‰©å“æ¸…å•Appï¼Œåœ¨æ„å»ºçš„æ—¶å€™ï¼Œç¬¬ä¸€æ­¥æ˜¯åˆ†æç»„ä»¶ï¼Œç¬¬äºŒæ­¥æ˜¯æ„å»ºé™æ€ç½‘é¡µï¼Œç„¶åæ‰æ˜¯å¼€å§‹å®ç°åŠ¨æ€åŠŸèƒ½ã€‚</p><span id="more"></span><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240816205602381.png" alt="image-20240816205602381"></p><h3 id="ä¸€ã€ä»£ç "><a href="#ä¸€ã€ä»£ç " class="headerlink" title="ä¸€ã€ä»£ç "></a>ä¸€ã€ä»£ç </h3><p>ï¼ˆ1ï¼‰index.css</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-keyword">@import</span> url(<span class="hljs-string">&quot;https://fonts.googleapis.com/css2?family=Monoton&amp;family=Quicksand:wght@500;700&amp;display=swap&quot;</span>);<br><br>* &#123;<br>  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;<br>  <span class="hljs-attribute">box-sizing</span>: border-box;<br>&#125;<br><br><span class="hljs-selector-tag">html</span> &#123;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">62.5%</span>;<br>&#125;<br><br><span class="hljs-selector-tag">body</span> &#123;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">2.4rem</span>;<br>  <span class="hljs-attribute">font-family</span>: sans-serif;<br>  <span class="hljs-attribute">color</span>: <span class="hljs-number">#367031</span>;<br>  <span class="hljs-attribute">font-family</span>: <span class="hljs-string">&quot;Quicksand&quot;</span>;<br>  <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">500</span>;<br>&#125;<br><br><span class="hljs-selector-class">.app</span> &#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">100vh</span>;<br>  <span class="hljs-attribute">display</span>: grid;<br>  <span class="hljs-attribute">grid-template-rows</span>: auto auto <span class="hljs-number">1</span>fr auto;<br>&#125;<br><br><span class="hljs-selector-tag">h1</span> &#123;<br>  <span class="hljs-attribute">text-align</span>: center;<br>  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#9ad0c4</span>;<br>  <span class="hljs-attribute">font-family</span>: <span class="hljs-string">&quot;Monoton&quot;</span>;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">8rem</span>;<br>  <span class="hljs-attribute">text-transform</span>: uppercase;<br>  <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">400</span>;<br>  <span class="hljs-attribute">word-spacing</span>: <span class="hljs-number">30px</span>;<br>  <span class="hljs-attribute">letter-spacing</span>: -<span class="hljs-number">5px</span>;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">2.4rem</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-selector-class">.add-form</span> &#123;<br>  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#74b8b1</span>;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">2.8rem</span> <span class="hljs-number">0</span>;<br>  <span class="hljs-attribute">display</span>: flex;<br>  <span class="hljs-attribute">align-items</span>: center;<br>  <span class="hljs-attribute">justify-content</span>: center;<br>  <span class="hljs-attribute">gap</span>: <span class="hljs-number">0.8rem</span>;<br>&#125;<br><br><span class="hljs-selector-tag">h3</span> &#123;<br>  <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">1.6rem</span>;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">2.4rem</span>;<br>&#125;<br><br><span class="hljs-selector-tag">button</span>,<br>select,<br><span class="hljs-selector-tag">input</span> &#123;<br>  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#d1d8c8</span>;<br>  <span class="hljs-attribute">color</span>: <span class="hljs-number">#295c59</span>;<br>  <span class="hljs-attribute">font-family</span>: inherit;<br>  <span class="hljs-attribute">border</span>: none;<br>  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">10rem</span>;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">1.2rem</span> <span class="hljs-number">3.2rem</span>;<br>  <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">700</span>;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.8rem</span>;<br>  <span class="hljs-attribute">cursor</span>: pointer;<br>&#125;<br><br><span class="hljs-selector-class">.add-form</span> <span class="hljs-selector-tag">button</span> &#123;<br>  <span class="hljs-attribute">text-transform</span>: uppercase;<br>  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#8cd3bc</span>;<br>&#125;<br><br><span class="hljs-selector-class">.list</span> &#123;<br>  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#8eb1ce</span>;<br>  <span class="hljs-attribute">color</span>: <span class="hljs-number">#e1ce98</span>;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">4rem</span> <span class="hljs-number">0</span>;<br><br>  <span class="hljs-attribute">display</span>: flex;<br>  <span class="hljs-attribute">justify-content</span>: space-between;<br>  <span class="hljs-attribute">flex-direction</span>: column;<br>  <span class="hljs-attribute">gap</span>: <span class="hljs-number">3.2rem</span>;<br>  <span class="hljs-attribute">align-items</span>: center;<br>&#125;<br><br><span class="hljs-selector-class">.actions</span> <span class="hljs-selector-tag">button</span>,<br><span class="hljs-selector-class">.list</span> select &#123;<br>  <span class="hljs-attribute">text-transform</span>: uppercase;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">0.8rem</span> <span class="hljs-number">2.4rem</span>;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.4rem</span>;<br>  <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">700</span>;<br>  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> <span class="hljs-number">0.8rem</span>;<br>&#125;<br><br><span class="hljs-selector-class">.list</span> <span class="hljs-selector-tag">ul</span> &#123;<br>  <span class="hljs-attribute">list-style</span>: none;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">80%</span>;<br>  <span class="hljs-attribute">overflow</span>: scroll;<br><br>  <span class="hljs-attribute">display</span>: grid;<br>  <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-built_in">repeat</span>(auto-fit, <span class="hljs-built_in">minmax</span>(<span class="hljs-number">250px</span>, <span class="hljs-number">1</span>fr));<br>  <span class="hljs-attribute">gap</span>: <span class="hljs-number">1.2rem</span>;<br>  <span class="hljs-attribute">justify-content</span>: center;<br>  <span class="hljs-attribute">align-content</span>: start;<br>&#125;<br><br><span class="hljs-selector-class">.list</span> <span class="hljs-selector-tag">li</span> &#123;<br>  <span class="hljs-attribute">display</span>: flex;<br>  <span class="hljs-attribute">align-items</span>: center;<br>  <span class="hljs-attribute">gap</span>: <span class="hljs-number">1.2rem</span>;<br>&#125;<br><br><span class="hljs-selector-tag">input</span><span class="hljs-selector-attr">[type=<span class="hljs-string">&quot;checkbox&quot;</span>]</span> &#123;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">2rem</span>;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">2rem</span>;<br>  accent-<span class="hljs-attribute">color</span>: <span class="hljs-number">#e5771f</span>;<br>&#125;<br><br><span class="hljs-selector-class">.list</span> <span class="hljs-selector-tag">li</span> <span class="hljs-selector-tag">button</span> &#123;<br>  <span class="hljs-attribute">cursor</span>: pointer;<br>  <span class="hljs-attribute">background</span>: none;<br>  <span class="hljs-attribute">border</span>: none;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.8rem</span>;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">0.8rem</span>;<br>  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(<span class="hljs-number">2px</span>);<br>&#125;<br><br><span class="hljs-selector-class">.stats</span> &#123;<br>  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#9ad0c4</span>;<br>  <span class="hljs-attribute">text-align</span>: center;<br>  <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">700</span>;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">3.2rem</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>ï¼ˆ2ï¼‰App.js</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> &#123; useState &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Logo</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./Logo&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Form</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./Form&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">PackingList</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./PackingList&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Stats</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./Stats&quot;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> [items, setItems] = <span class="hljs-title function_">useState</span>([]);<br><br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleAddItems</span>(<span class="hljs-params">item</span>) &#123;<br>    <span class="hljs-title function_">setItems</span>(<span class="hljs-function">(<span class="hljs-params">items</span>) =&gt;</span> [...items, item]);<br>  &#125;<br><br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleDeleteItems</span>(<span class="hljs-params">id</span>) &#123;<br>    <span class="hljs-title function_">setItems</span>(<span class="hljs-function">(<span class="hljs-params">items</span>) =&gt;</span> items.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> item.<span class="hljs-property">id</span> !== id));<br>  &#125;<br><br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleToggleItem</span>(<span class="hljs-params">id</span>) &#123;<br>    <span class="hljs-title function_">setItems</span>(<span class="hljs-function">(<span class="hljs-params">items</span>) =&gt;</span><br>      items.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span><br>        item.<span class="hljs-property">id</span> === id ? &#123; ...item, <span class="hljs-attr">packed</span>: !item.<span class="hljs-property">packed</span> &#125; : item<br>      )<br>    );<br>  &#125;<br><br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleClearItems</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> confirmed = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">confirm</span>(<br>      <span class="hljs-string">&quot;Are you sure you want to delete all items?&quot;</span><br>    );<br><br>    <span class="hljs-keyword">if</span> (confirmed) <span class="hljs-title function_">setItems</span>([]);<br>  &#125;<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Logo</span> /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Form</span> <span class="hljs-attr">onAddItems</span>=<span class="hljs-string">&#123;handleAddItems&#125;</span> /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">PackingList</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">items</span>=<span class="hljs-string">&#123;items&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onDeleteItem</span>=<span class="hljs-string">&#123;handleDeleteItems&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onToggleItem</span>=<span class="hljs-string">&#123;handleToggleItem&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onClearItems</span>=<span class="hljs-string">&#123;handleClearItems&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Stats</span> <span class="hljs-attr">items</span>=<span class="hljs-string">&#123;items&#125;</span> /&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br><br></code></pre></td></tr></table></figure><p>ï¼ˆ3ï¼‰Form.js</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> &#123; useState &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Form</span>(<span class="hljs-params">&#123; onAddItems &#125;</span>) &#123;<br>  <span class="hljs-keyword">const</span> [description, setDescription] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">&quot;&quot;</span>);<br>  <span class="hljs-keyword">const</span> [quantity, setQuantity] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">1</span>);<br><br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleSubmit</span>(<span class="hljs-params">e</span>) &#123;<br>    e.<span class="hljs-title function_">preventDefault</span>(); <span class="hljs-comment">//</span><br><br>    <span class="hljs-keyword">if</span> (!description) <span class="hljs-keyword">return</span>;<br>    <span class="hljs-keyword">const</span> newItem = &#123; description, quantity, <span class="hljs-attr">packed</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">id</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() &#125;;<br><br>    <span class="hljs-title function_">onAddItems</span>(newItem);<br>    <span class="hljs-title function_">setDescription</span>(<span class="hljs-string">&quot;&quot;</span>);<br>    <span class="hljs-title function_">setQuantity</span>(<span class="hljs-number">1</span>);<br>  &#125;<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;add-form&quot;</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">&#123;handleSubmit&#125;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>What do you need for your trip?<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">select</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;quantity&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;(e)</span> =&gt;</span> setQuantity(Number(e.target.value))&#125;</span><br><span class="language-xml">      &gt;</span><br><span class="language-xml">        &#123;Array.from(&#123; length: 20 &#125;, (_, i) =&gt; i + 1).map((num) =&gt; (</span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;num&#125;</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;num&#125;</span>&gt;</span></span><br><span class="language-xml">            &#123;num&#125;</span><br><span class="language-xml">          <span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span></span><br><span class="language-xml">        ))&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">input</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;Item...&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;description&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;(e)</span> =&gt;</span> setDescription(e.target.value)&#125;</span><br><span class="language-xml">      /&gt;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>Add<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span><br>  );<br>&#125;<br><br></code></pre></td></tr></table></figure><p>ï¼ˆ4ï¼‰Item.js</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Item</span>(<span class="hljs-params">&#123; item, onDeleteItem, onToggleItem &#125;</span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">      &#123;&quot; &quot;&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">input</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;item.packed&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> onToggleItem(item.id)&#125;</span><br><span class="language-xml">      /&gt;&#123;&quot; &quot;&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;item.packed</span> ? &#123; <span class="hljs-attr">textDecoration:</span> &quot;<span class="hljs-attr">line-through</span>&quot; &#125; <span class="hljs-attr">:</span> &#123;&#125;&#125;&gt;</span></span><br><span class="language-xml">        &#123;&quot; &quot;&#125;</span><br><span class="language-xml">        &#123;item.quantity&#125;ğŸ¶&#123;item.description&#125;&#123;&quot; &quot;&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>&#123;&quot; &quot;&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> onDeleteItem(item.id)&#125;&gt;âŒ<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>&#123;&quot; &quot;&#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br>  );<br>&#125;<br><br></code></pre></td></tr></table></figure><p>ï¼ˆ5ï¼‰PackingList.js</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> &#123; useState &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Item</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./Item&quot;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">PackingList</span>(<span class="hljs-params">&#123;</span><br><span class="hljs-params">  items,</span><br><span class="hljs-params">  onDeleteItem,</span><br><span class="hljs-params">  onToggleItem,</span><br><span class="hljs-params">  onClearItems,</span><br><span class="hljs-params">&#125;</span>) &#123;<br>  <span class="hljs-keyword">const</span> [sortBy, setSortBy] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">&quot;input&quot;</span>);<br><br>  <span class="hljs-keyword">let</span> sortedItems;<br><br>  <span class="hljs-keyword">if</span> (sortBy === <span class="hljs-string">&quot;input&quot;</span>) sortedItems = items;<br>  <span class="hljs-keyword">if</span> (sortBy === <span class="hljs-string">&quot;description&quot;</span>)<br>    sortedItems = items<br>      .<span class="hljs-title function_">slice</span>()<br>      .<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a.<span class="hljs-property">description</span>.<span class="hljs-title function_">localeCompare</span>(b.<span class="hljs-property">description</span>));<br>  <span class="hljs-keyword">if</span> (sortBy === <span class="hljs-string">&quot;packed&quot;</span>)<br>    sortedItems = items<br>      .<span class="hljs-title function_">slice</span>()<br>      .<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> <span class="hljs-title class_">Number</span>(a.<span class="hljs-property">packed</span>) - <span class="hljs-title class_">Number</span>(b.<span class="hljs-property">packed</span>));<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;list&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml">        &#123;sortedItems.map((item) =&gt; (</span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">Item</span></span></span><br><span class="hljs-tag"><span class="language-xml">            <span class="hljs-attr">item</span>=<span class="hljs-string">&#123;item&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">            <span class="hljs-attr">onDeleteItem</span>=<span class="hljs-string">&#123;onDeleteItem&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">            <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;item.id&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">            <span class="hljs-attr">onToggleItem</span>=<span class="hljs-string">&#123;onToggleItem&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          /&gt;</span></span><br><span class="language-xml">        ))&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;actions&quot;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;sortBy&#125;</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;(e)</span> =&gt;</span> setSortBy(e.target.value)&#125;&gt;</span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;input&quot;</span>&gt;</span>sort by input order<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;description&quot;</span>&gt;</span>sort by description<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;packed&quot;</span>&gt;</span>sort by packed<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;onClearItems&#125;</span>&gt;</span>Clear List<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br><br></code></pre></td></tr></table></figure><p>ï¼ˆ6ï¼‰Stats.js</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Stats</span>(<span class="hljs-params">&#123; items &#125;</span>) &#123;<br>  <span class="hljs-keyword">if</span> (!items.<span class="hljs-property">length</span>)<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;stats&quot;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">em</span>&gt;</span>Start adding some items to your packing list!<span class="hljs-tag">&lt;/<span class="hljs-name">em</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br>    );<br>  <span class="hljs-keyword">const</span> numItems = items.<span class="hljs-property">length</span>;<br>  <span class="hljs-keyword">const</span> numPacked = items.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> item.<span class="hljs-property">packed</span>).<span class="hljs-property">length</span>;<br>  <span class="hljs-keyword">const</span> percentage = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>((numPacked / numItems) * <span class="hljs-number">100</span>);<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">footer</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;stats&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">em</span>&gt;</span></span><br><span class="language-xml">        &#123;percentage === 100</span><br><span class="language-xml">          ? &quot;You got everything!Ready to go!&quot;</span><br><span class="language-xml">          : `You have $&#123;numItems&#125; items on your list,and you already packed </span><br><span class="language-xml">          $&#123;numPacked&#125; ($&#123;percentage&#125;%)`&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">em</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">footer</span>&gt;</span></span><br>  );<br>&#125;<br><br></code></pre></td></tr></table></figure><p>ï¼ˆ7ï¼‰Logo.js</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Logo</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>ğŸï¸Trip ListğŸœï¸<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>;<br>&#125;<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>reactè¯¾ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>react</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>reactè¯¾ç¨‹4-compoment</title>
    <link href="/2024/08/13/react%E8%AF%BE%E7%A8%8B4-compoment/"/>
    <url>/2024/08/13/react%E8%AF%BE%E7%A8%8B4-compoment/</url>
    
    <content type="html"><![CDATA[<p>è¿™æ¬¡è¯¾ç¨‹åˆ›å»ºäº†ä¸€ä¸ªå°ç»„ä»¶ï¼Œ</p><span id="more"></span><p>ä¸‹è½½äº†dev tools</p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240813195809998.png" alt="image-20240813195809998" style="zoom:33%;" /><h2 id="ä¸€ã€ä»£ç "><a href="#ä¸€ã€ä»£ç " class="headerlink" title="ä¸€ã€ä»£ç "></a>ä¸€ã€ä»£ç </h2><h4 id="ï¼ˆ1ï¼‰App-js"><a href="#ï¼ˆ1ï¼‰App-js" class="headerlink" title="ï¼ˆ1ï¼‰App.js"></a>ï¼ˆ1ï¼‰App.js</h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> &#123; useState &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><br><span class="hljs-keyword">const</span> messages = [<br>  <span class="hljs-string">&quot;Learn React âš›ï¸&quot;</span>,<br>  <span class="hljs-string">&quot;Apply for jobs ğŸ’¼&quot;</span>,<br>  <span class="hljs-string">&quot;Invest your new income ğŸ¤‘&quot;</span>,<br>];<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> [step, setStep] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">1</span>);<br>  <span class="hljs-keyword">const</span> [isOpen, setIsOpen] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">true</span>);<br><br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">handlePrevious</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">if</span> (step &gt; <span class="hljs-number">1</span>) <span class="hljs-title function_">setStep</span>(<span class="hljs-function">(<span class="hljs-params">s</span>) =&gt;</span> s - <span class="hljs-number">1</span>);<br>  &#125;<br><br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleNext</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">if</span> (step &lt; <span class="hljs-number">3</span>) <span class="hljs-title function_">setStep</span>(<span class="hljs-function">(<span class="hljs-params">s</span>) =&gt;</span> s + <span class="hljs-number">1</span>);<br>  &#125;<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;close&quot;</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> setIsOpen((is) =&gt; !is)&#125;&gt;</span><br><span class="language-xml">        <span class="hljs-symbol">&amp;times;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      &#123;isOpen &amp;&amp; (</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;steps&quot;</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;numbers&quot;</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&#123;</span>`$&#123;<span class="hljs-attr">step</span> &gt;</span>= 1 ? &quot;active&quot; : &quot;&quot;&#125;`&#125;&gt;1<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&#123;</span>`$&#123;<span class="hljs-attr">step</span> &gt;</span>= 2 ? &quot;active&quot; : &quot;&quot;&#125;`&#125;&gt;2<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&#123;</span>`$&#123;<span class="hljs-attr">step</span> === <span class="hljs-string">3</span> ? &quot;<span class="hljs-attr">active</span>&quot; <span class="hljs-attr">:</span> &quot;&quot;&#125;`&#125;&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">StepMessage</span> <span class="hljs-attr">step</span>=<span class="hljs-string">&#123;step&#125;</span>&gt;</span>&#123;messages[step - 1]&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">StepMessage</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;buttons&quot;</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">bgColor</span>=<span class="hljs-string">&quot;#7950f2&quot;</span> <span class="hljs-attr">textColor</span>=<span class="hljs-string">&quot;#fff&quot;</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;handlePrevious&#125;</span>&gt;</span></span><br><span class="language-xml">              <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>ğŸ‘ˆ<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>Previous</span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">bgColor</span>=<span class="hljs-string">&quot;#7950f2&quot;</span> <span class="hljs-attr">textColor</span>=<span class="hljs-string">&quot;#fff&quot;</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;handleNext&#125;</span>&gt;</span></span><br><span class="language-xml">              Next<span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>ğŸ‘‰<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      )&#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">StepMessage</span>(<span class="hljs-params">&#123; step, children &#125;</span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;message&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>Step &#123;step&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span></span><br><span class="language-xml">      &#123;children&#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Button</span>(<span class="hljs-params">&#123; textColor, bgColor, onClick, children &#125;</span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;</span> <span class="hljs-attr">backgroundColor:</span> <span class="hljs-attr">bgColor</span>, <span class="hljs-attr">color:</span> <span class="hljs-attr">textColor</span> &#125;&#125;</span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;onClick&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">    &gt;</span></span><br><span class="language-xml">      &#123;children&#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br>  );<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="ï¼ˆ2ï¼‰index-css"><a href="#ï¼ˆ2ï¼‰index-css" class="headerlink" title="ï¼ˆ2ï¼‰index.css"></a>ï¼ˆ2ï¼‰index.css</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><code class="hljs css">* &#123;<br>  <span class="hljs-attribute">box-sizing</span>: border-box;<br>&#125;<br><br><span class="hljs-selector-tag">body</span> &#123;<br>  <span class="hljs-attribute">font-family</span>: sans-serif;<br>  <span class="hljs-attribute">color</span>: <span class="hljs-number">#333</span>;<br>&#125;<br><br><span class="hljs-selector-class">.steps</span> &#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">600px</span>;<br>  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f7f7f7</span>;<br>  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">7px</span>;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">25px</span> <span class="hljs-number">100px</span>;<br>  <span class="hljs-attribute">margin</span>: <span class="hljs-number">100px</span> auto;<br>&#125;<br><br><span class="hljs-selector-class">.numbers</span> &#123;<br>  <span class="hljs-attribute">display</span>: flex;<br>  <span class="hljs-attribute">justify-content</span>: space-between;<br>&#125;<br><br><span class="hljs-selector-class">.numbers</span> &gt; <span class="hljs-selector-tag">div</span> &#123;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">40px</span>;<br>  aspect-ratio: <span class="hljs-number">1</span>;<br>  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#e7e7e7</span>;<br>  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>;<br>  <span class="hljs-attribute">display</span>: flex;<br>  <span class="hljs-attribute">align-items</span>: center;<br>  <span class="hljs-attribute">justify-content</span>: center;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">18px</span>;<br>&#125;<br><br><span class="hljs-selector-class">.numbers</span> <span class="hljs-selector-class">.active</span> &#123;<br>  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#7950f2</span>;<br>  <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;<br>&#125;<br><br><span class="hljs-selector-class">.message</span> &#123;<br>  <span class="hljs-attribute">text-align</span>: center;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">20px</span>;<br>  <span class="hljs-attribute">margin</span>: <span class="hljs-number">40px</span> <span class="hljs-number">0</span>;<br>  <span class="hljs-attribute">font-weight</span>: bold;<br><br>  <span class="hljs-attribute">display</span>: flex;<br>  <span class="hljs-attribute">flex-direction</span>: column;<br>  <span class="hljs-attribute">align-items</span>: center;<br>&#125;<br><br><span class="hljs-selector-class">.buttons</span> &#123;<br>  <span class="hljs-attribute">display</span>: flex;<br>  <span class="hljs-attribute">justify-content</span>: space-between;<br>&#125;<br><br><span class="hljs-selector-class">.buttons</span> <span class="hljs-selector-tag">button</span> &#123;<br>  <span class="hljs-attribute">border</span>: none;<br>  <span class="hljs-attribute">cursor</span>: pointer;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span> <span class="hljs-number">15px</span>;<br>  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">100px</span>;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;<br>  <span class="hljs-attribute">font-weight</span>: bold;<br><br>  <span class="hljs-attribute">display</span>: flex;<br>  <span class="hljs-attribute">align-items</span>: center;<br>  <span class="hljs-attribute">gap</span>: <span class="hljs-number">10px</span>;<br>&#125;<br><br><span class="hljs-selector-class">.buttons</span> <span class="hljs-selector-tag">button</span> <span class="hljs-selector-tag">span</span> &#123;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;<br>  <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-selector-tag">h3</span> &#123;<br>  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;<br>  <span class="hljs-attribute">text-transform</span>: uppercase;<br>&#125;<br><br><span class="hljs-selector-class">.close</span> &#123;<br>  <span class="hljs-attribute">position</span>: absolute;<br>  <span class="hljs-attribute">top</span>: <span class="hljs-number">16px</span>;<br>  <span class="hljs-attribute">right</span>: <span class="hljs-number">16px</span>;<br>  <span class="hljs-attribute">border</span>: none;<br>  <span class="hljs-attribute">background</span>: none;<br>  <span class="hljs-attribute">cursor</span>: pointer;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">40px</span>;<br>  <span class="hljs-attribute">color</span>: inherit;<br>&#125;<br><br><span class="hljs-selector-class">.close</span><span class="hljs-selector-pseudo">:hover</span> &#123;<br>  <span class="hljs-attribute">color</span>: <span class="hljs-number">#7950f2</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="äºŒã€é‡ç‚¹å›é¡¾"><a href="#äºŒã€é‡ç‚¹å›é¡¾" class="headerlink" title="äºŒã€é‡ç‚¹å›é¡¾"></a>äºŒã€é‡ç‚¹å›é¡¾</h3><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240816203708314.png" alt="image-20240816203708314"></p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240816203858922.png" alt="image-20240816203858922"></p><p>çŠ¶æ€çš„åº”ç”¨ï¼ˆéå¸¸ä¹‹é‡è¦ï¼‰</p><p>å›è°ƒå‡½æ•°</p><p>htmlè¡¨å•ï¼šonSubmitï¼ˆæŒ‰ä¸‹Enteré”®ä¹Ÿå¯ä»¥æäº¤ï¼‰ä¸onClickç›‘å¬äº‹ä»¶çš„ä¸åŒ</p><p>å—æ§å…ƒç´ </p><p>onClickï¼ˆï¼‰ç›‘æ§</p><p>çŠ¶æ€æå‡ï¼ˆåˆ°æœ€è¿‘å…¬å…±ç¥–å…ˆï¼‰</p><p>é‡ç”¨ç»„ä»¶ã€childrenä¼ é€’</p>]]></content>
    
    
    <categories>
      
      <category>reactè¯¾ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>react</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>reactè¯¾ç¨‹3-pizza_menu</title>
    <link href="/2024/08/13/react%E8%AF%BE%E7%A8%8B3-pizza_menu/"/>
    <url>/2024/08/13/react%E8%AF%BE%E7%A8%8B3-pizza_menu/</url>
    
    <content type="html"><![CDATA[<p>è®°å½•åšå‡ºçš„pizza menué¡¹ç›®ï¼Œæ€»ç»“ä¸€ä¸‹react å†…å®¹ã€‚</p><span id="more"></span><h3 id="ä¸€ã€"><a href="#ä¸€ã€" class="headerlink" title="ä¸€ã€"></a>ä¸€ã€</h3><h4 id="ï¼ˆ1ï¼‰ç»„ä»¶æ ‘"><a href="#ï¼ˆ1ï¼‰ç»„ä»¶æ ‘" class="headerlink" title="ï¼ˆ1ï¼‰ç»„ä»¶æ ‘"></a>ï¼ˆ1ï¼‰ç»„ä»¶æ ‘</h4><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240813151436338.png" alt="image-20240813151436338" style="zoom: 33%;" /><h4 id="ï¼ˆ2ï¼‰JSXä¸HTML"><a href="#ï¼ˆ2ï¼‰JSXä¸HTML" class="headerlink" title="ï¼ˆ2ï¼‰JSXä¸HTML"></a>ï¼ˆ2ï¼‰JSXä¸HTML</h4><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240813151557741.png" alt="image-20240813151557741"></p><h3 id="äºŒã€ä»£ç "><a href="#äºŒã€ä»£ç " class="headerlink" title="äºŒã€ä»£ç "></a>äºŒã€ä»£ç </h3><h4 id="ï¼ˆ1ï¼‰index-css"><a href="#ï¼ˆ1ï¼‰index-css" class="headerlink" title="ï¼ˆ1ï¼‰index.css"></a>ï¼ˆ1ï¼‰index.css</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-keyword">@import</span> url(<span class="hljs-string">&quot;https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,300;0,400;0,500;1,300&amp;display=swap&quot;</span>);<br><br>* &#123;<br>  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;<br>  <span class="hljs-attribute">box-sizing</span>: border-box;<br>&#125;<br><br><span class="hljs-selector-tag">html</span> &#123;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">62.5%</span>;<br>&#125;<br><br><span class="hljs-selector-tag">body</span> &#123;<br>  <span class="hljs-attribute">font-family</span>: <span class="hljs-string">&quot;Roboto Mono&quot;</span>, sans-serif;<br>  <span class="hljs-attribute">color</span>: <span class="hljs-number">#252525</span>;<br>  <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">400</span>;<br>  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f7f2e9</span>;<br>  <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1.6rem</span> solid <span class="hljs-number">#edc84b</span>;<br>  <span class="hljs-attribute">min-height</span>: <span class="hljs-number">100vh</span>;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">3.2rem</span>;<br>  <span class="hljs-attribute">padding-bottom</span>: <span class="hljs-number">6rem</span>;<br>&#125;<br><br><span class="hljs-selector-class">.container</span> &#123;<br>  <span class="hljs-attribute">max-width</span>: <span class="hljs-number">80rem</span>;<br>  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;<br><br>  <span class="hljs-attribute">display</span>: flex;<br>  <span class="hljs-attribute">flex-direction</span>: column;<br>  <span class="hljs-attribute">align-items</span>: center;<br>  <span class="hljs-attribute">gap</span>: <span class="hljs-number">4.8rem</span>;<br>&#125;<br><br><span class="hljs-comment">/* *************** */</span><br><br><span class="hljs-selector-class">.header</span> &#123;<br>  <span class="hljs-attribute">align-self</span>: stretch;<br>&#125;<br><br><span class="hljs-selector-class">.header</span> <span class="hljs-selector-tag">h1</span> &#123;<br>  <span class="hljs-comment">/* Non-accessible color */</span><br>  <span class="hljs-attribute">color</span>: <span class="hljs-number">#edc84b</span>;<br>  <span class="hljs-comment">/* color: #af8602; */</span><br><br>  <span class="hljs-attribute">text-transform</span>: uppercase;<br>  <span class="hljs-attribute">text-align</span>: center;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">5.2rem</span>;<br>  <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">300</span>;<br>  <span class="hljs-attribute">letter-spacing</span>: <span class="hljs-number">3px</span>;<br>  <span class="hljs-attribute">position</span>: relative;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;<br>  <span class="hljs-attribute">display</span>: block;<br>&#125;<br><br><span class="hljs-selector-class">.header</span> <span class="hljs-selector-tag">h1</span><span class="hljs-selector-pseudo">::before</span>,<br><span class="hljs-selector-class">.header</span> <span class="hljs-selector-tag">h1</span><span class="hljs-selector-pseudo">::after</span> &#123;<br>  <span class="hljs-attribute">display</span>: block;<br>  <span class="hljs-attribute">content</span>: <span class="hljs-string">&quot;&quot;</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">3px</span>;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">4rem</span>;<br>  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#edc84b</span>;<br>  <span class="hljs-attribute">position</span>: absolute;<br>  <span class="hljs-attribute">top</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">50%</span> - <span class="hljs-number">1px</span>);<br>&#125;<br><br><span class="hljs-selector-class">.header</span> <span class="hljs-selector-tag">h1</span><span class="hljs-selector-pseudo">::before</span> &#123;<br>  <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-selector-class">.header</span> <span class="hljs-selector-tag">h1</span><span class="hljs-selector-pseudo">::after</span> &#123;<br>  <span class="hljs-attribute">right</span>: <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-comment">/* *************** */</span><br><br><span class="hljs-selector-class">.menu</span> &#123;<br>  <span class="hljs-attribute">display</span>: flex;<br>  <span class="hljs-attribute">flex-direction</span>: column;<br>  <span class="hljs-attribute">align-items</span>: center;<br>  <span class="hljs-attribute">gap</span>: <span class="hljs-number">4rem</span>;<br>&#125;<br><br><span class="hljs-selector-class">.menu</span> <span class="hljs-selector-tag">h2</span> &#123;<br>  <span class="hljs-attribute">display</span>: inline-block;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">1rem</span> <span class="hljs-number">0</span>;<br>  <span class="hljs-attribute">border-top</span>: <span class="hljs-number">2px</span> solid currentColor;<br>  <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">2px</span> solid currentColor;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">2.4rem</span>;<br>  <span class="hljs-attribute">text-transform</span>: uppercase;<br>  <span class="hljs-attribute">letter-spacing</span>: <span class="hljs-number">3px</span>;<br>  <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">500</span>;<br>&#125;<br><br><span class="hljs-selector-class">.menu</span> &gt; <span class="hljs-selector-tag">p</span> &#123;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.5rem</span>;<br>  <span class="hljs-attribute">text-align</span>: center;<br>  <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1.6</span>;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">80%</span>;<br>&#125;<br><br><span class="hljs-selector-class">.pizzas</span> &#123;<br>  <span class="hljs-attribute">list-style</span>: none;<br>  <span class="hljs-attribute">display</span>: grid;<br>  <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-number">1</span>fr <span class="hljs-number">1</span>fr;<br>  <span class="hljs-attribute">gap</span>: <span class="hljs-number">4.8rem</span>;<br>&#125;<br><br><span class="hljs-selector-class">.pizza</span> &#123;<br>  <span class="hljs-attribute">display</span>: flex;<br>  <span class="hljs-attribute">gap</span>: <span class="hljs-number">3.2rem</span>;<br>&#125;<br><br><span class="hljs-selector-class">.pizza</span> <span class="hljs-selector-tag">img</span> &#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">12rem</span>;<br>  aspect-ratio: <span class="hljs-number">1</span>;<br>  <span class="hljs-attribute">align-self</span>: start;<br>&#125;<br><br><span class="hljs-selector-class">.pizza</span> <span class="hljs-selector-tag">div</span> &#123;<br>  <span class="hljs-attribute">display</span>: flex;<br>  <span class="hljs-attribute">flex-direction</span>: column;<br>  <span class="hljs-attribute">gap</span>: <span class="hljs-number">0.8rem</span>;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">0.4rem</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-selector-class">.pizza</span> <span class="hljs-selector-tag">h3</span> &#123;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">2rem</span>;<br>  <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">400</span>;<br>&#125;<br><br><span class="hljs-selector-class">.pizza</span> <span class="hljs-selector-tag">p</span> &#123;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.4rem</span>;<br>  <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">300</span>;<br>  <span class="hljs-attribute">font-style</span>: italic;<br>  <span class="hljs-attribute">margin-bottom</span>: auto;<br>&#125;<br><br><span class="hljs-selector-class">.pizza</span> <span class="hljs-selector-tag">span</span> &#123;<br>  <span class="hljs-attribute">display</span>: block;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.6rem</span>;<br>&#125;<br><br><span class="hljs-selector-class">.pizza</span><span class="hljs-selector-class">.sold-out</span> &#123;<br>  <span class="hljs-attribute">color</span>: <span class="hljs-number">#888</span>;<br>&#125;<br><br><span class="hljs-selector-class">.pizza</span><span class="hljs-selector-class">.sold-out</span> <span class="hljs-selector-tag">img</span> &#123;<br>  <span class="hljs-attribute">filter</span>: <span class="hljs-built_in">grayscale</span>();<br>  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.8</span>;<br>&#125;<br><br><span class="hljs-comment">/* *************** */</span><br><br><span class="hljs-selector-class">.footer</span> &#123;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.4rem</span>;<br>&#125;<br><br><span class="hljs-selector-class">.order</span> &#123;<br>  <span class="hljs-attribute">display</span>: flex;<br>  <span class="hljs-attribute">flex-direction</span>: column;<br>  <span class="hljs-attribute">align-items</span>: center;<br>  <span class="hljs-attribute">gap</span>: <span class="hljs-number">2.4rem</span>;<br>&#125;<br><br><span class="hljs-selector-class">.btn</span> &#123;<br>  <span class="hljs-attribute">color</span>: inherit;<br>  <span class="hljs-attribute">font-family</span>: inherit;<br>  <span class="hljs-attribute">border</span>: none;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.4rem</span>;<br>  <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">500</span>;<br>  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#edc84b</span>;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">1.4rem</span> <span class="hljs-number">3.2rem</span>;<br>  <span class="hljs-attribute">cursor</span>: pointer;<br>  <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.2s</span>;<br>&#125;<br><br><span class="hljs-selector-class">.btn</span><span class="hljs-selector-pseudo">:hover</span> &#123;<br>  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#e9bb24</span>;<br>&#125;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">SPACING SYSTEM (px)</span><br><span class="hljs-comment">2 / 4 / 8 / 12 / 16 / 24 / 32 / 40 / 48 / 64 / 80 / 96 / 128</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">FONT SIZE SYSTEM (px)</span><br><span class="hljs-comment">10 / 12 / 14 / 16 / 18 / 20 / 24 / 30 / 36 / 44 /52 / 62 / 74 / 86 / 98</span><br><span class="hljs-comment">*/</span><br><br></code></pre></td></tr></table></figure><h4 id="ï¼ˆ2ï¼‰index-js"><a href="#ï¼ˆ2ï¼‰index-js" class="headerlink" title="ï¼ˆ2ï¼‰index.js"></a>ï¼ˆ2ï¼‰index.js</h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">ReactDOM</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react-dom/client&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;./index.css&quot;</span>;<br><br><span class="hljs-keyword">const</span> pizzaData = [<br>  &#123;<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Focaccia&quot;</span>,<br>    <span class="hljs-attr">ingredients</span>: <span class="hljs-string">&quot;Bread with italian olive oil and rosemary&quot;</span>,<br>    <span class="hljs-attr">price</span>: <span class="hljs-number">6</span>,<br>    <span class="hljs-attr">photoName</span>: <span class="hljs-string">&quot;pizzas/focaccia.jpg&quot;</span>,<br>    <span class="hljs-attr">soldOut</span>: <span class="hljs-literal">false</span>,<br>  &#125;,<br>  &#123;<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Pizza Margherita&quot;</span>,<br>    <span class="hljs-attr">ingredients</span>: <span class="hljs-string">&quot;Tomato and mozarella&quot;</span>,<br>    <span class="hljs-attr">price</span>: <span class="hljs-number">10</span>,<br>    <span class="hljs-attr">photoName</span>: <span class="hljs-string">&quot;pizzas/margherita.jpg&quot;</span>,<br>    <span class="hljs-attr">soldOut</span>: <span class="hljs-literal">false</span>,<br>  &#125;,<br>  &#123;<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Pizza Spinaci&quot;</span>,<br>    <span class="hljs-attr">ingredients</span>: <span class="hljs-string">&quot;Tomato, mozarella, spinach, and ricotta cheese&quot;</span>,<br>    <span class="hljs-attr">price</span>: <span class="hljs-number">12</span>,<br>    <span class="hljs-attr">photoName</span>: <span class="hljs-string">&quot;pizzas/spinaci.jpg&quot;</span>,<br>    <span class="hljs-attr">soldOut</span>: <span class="hljs-literal">false</span>,<br>  &#125;,<br>  &#123;<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Pizza Funghi&quot;</span>,<br>    <span class="hljs-attr">ingredients</span>: <span class="hljs-string">&quot;Tomato, mozarella, mushrooms, and onion&quot;</span>,<br>    <span class="hljs-attr">price</span>: <span class="hljs-number">12</span>,<br>    <span class="hljs-attr">photoName</span>: <span class="hljs-string">&quot;pizzas/funghi.jpg&quot;</span>,<br>    <span class="hljs-attr">soldOut</span>: <span class="hljs-literal">false</span>,<br>  &#125;,<br>  &#123;<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Pizza Salamino&quot;</span>,<br>    <span class="hljs-attr">ingredients</span>: <span class="hljs-string">&quot;Tomato, mozarella, and pepperoni&quot;</span>,<br>    <span class="hljs-attr">price</span>: <span class="hljs-number">15</span>,<br>    <span class="hljs-attr">photoName</span>: <span class="hljs-string">&quot;pizzas/salamino.jpg&quot;</span>,<br>    <span class="hljs-attr">soldOut</span>: <span class="hljs-literal">true</span>,<br>  &#125;,<br>  &#123;<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Pizza Prosciutto&quot;</span>,<br>    <span class="hljs-attr">ingredients</span>: <span class="hljs-string">&quot;Tomato, mozarella, ham, aragula, and burrata cheese&quot;</span>,<br>    <span class="hljs-attr">price</span>: <span class="hljs-number">18</span>,<br>    <span class="hljs-attr">photoName</span>: <span class="hljs-string">&quot;pizzas/prosciutto.jpg&quot;</span>,<br>    <span class="hljs-attr">soldOut</span>: <span class="hljs-literal">false</span>,<br>  &#125;,<br>];<br><span class="hljs-comment">//æ•´ä¸ªåº”ç”¨ç•Œé¢</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Header</span> /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Menu</span> /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Footer</span> /&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Header</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-comment">//const style = &#123; color: &quot;red&quot;, fontSize: &quot;48px&quot;, textTransform: &quot;uppercase&quot; &#125;;</span><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">header</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;header&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Fast React Pizza Co.<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Menu</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> pizzas = pizzaData;<br>  <span class="hljs-comment">//const pizzas = [];</span><br>  <span class="hljs-keyword">const</span> numPizzas = pizzas.<span class="hljs-property">length</span>;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">main</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;menu&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Our menu<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">      &#123;numPizzas &gt; 0 ? (</span><br><span class="language-xml">        <span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">            Authentic Italian cuisine.6 creative dishes to choose from. All  from our stone oven,all organic,all delicious.</span><br><span class="language-xml">          <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;pizzas&quot;</span>&gt;</span></span><br><span class="language-xml">            &#123;pizzaData.map((pizza) =&gt; (</span><br><span class="language-xml">              <span class="hljs-tag">&lt;<span class="hljs-name">Pizza</span> <span class="hljs-attr">pizzaObj</span>=<span class="hljs-string">&#123;pizza&#125;</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;pizza.name&#125;</span> /&gt;</span></span><br><span class="language-xml">            ))&#125;</span><br><span class="language-xml">          <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/&gt;</span></span><br>      ) : (<br>        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>we&#x27;re still work on our menu,please come back later :)<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br>      )&#125;<br>    &lt;/main&gt;<br>  );<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Pizza</span>(<span class="hljs-params">&#123; pizzaObj &#125;</span>) &#123;<br>  <span class="hljs-comment">//if (pizzaObj.soldOut) return null;</span><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&#123;</span>`<span class="hljs-attr">pizza</span> $&#123;<span class="hljs-attr">pizzaObj.soldOut</span> ? &quot;<span class="hljs-attr">sold-out</span>&quot; <span class="hljs-attr">:</span> &quot;&quot;&#125;`&#125;&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&#123;pizzaObj.photoName&#125;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&#123;pizzaObj.name&#125;</span> /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>&#123;pizzaObj.name&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>&#123;pizzaObj.ingredients&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;pizzaObj.soldOut ? &quot;SOLD OUT&quot; : pizzaObj.price&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Footer</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> hour = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getHours</span>();<br>  <span class="hljs-keyword">const</span> openHour = <span class="hljs-number">12</span>;<br>  <span class="hljs-keyword">const</span> closeHour = <span class="hljs-number">19</span>;<br>  <span class="hljs-keyword">const</span> isOpen = hour &gt;= openHour &amp;&amp; hour &lt;= closeHour;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">footer</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;footer&quot;</span>&gt;</span></span><br><span class="language-xml">      &#123;isOpen ? (</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Order</span> <span class="hljs-attr">closeHour</span>=<span class="hljs-string">&#123;closeHour&#125;</span> /&gt;</span></span><br><span class="language-xml">      ) : (</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">          we&#x27;re happy to welcome you between &#123;openHour&#125;:00 and &#123;closeHour&#125;:00</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">      )&#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">footer</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Order</span> (props) &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(props);<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;order&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">        we&#x27;re open until &#123;props.closeHour&#125;:00.Come visit us or order unline.</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;btn&quot;</span>&gt;</span>Order<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">const</span> root = <span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">createRoot</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;root&quot;</span>));<br>root.<span class="hljs-title function_">render</span>(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span></span>);<br><span class="hljs-comment">/*strict : can check bug</span><br><span class="hljs-comment">root.render(</span><br><span class="hljs-comment">    &lt;React.StrictMode&gt;</span><br><span class="hljs-comment">        &lt;App /&gt;</span><br><span class="hljs-comment">    &lt;/React.StrictMode&gt;</span><br><span class="hljs-comment">);*/</span><br><br></code></pre></td></tr></table></figure><h3 id="ä¸‰ã€Summary"><a href="#ä¸‰ã€Summary" class="headerlink" title="ä¸‰ã€Summary"></a>ä¸‰ã€Summary</h3><p>ï¼ˆ1ï¼‰map</p><p>ï¼ˆ2ï¼‰ï¼Ÿï¼š</p><p>ï¼ˆ3ï¼‰fragment </p><p>ï¼ˆ4ï¼‰render</p><p>ï¼ˆ5ï¼‰destrcution and props</p><p>ï¼ˆ6ï¼‰æ¡ä»¶å±•ç¤ºcss </p><p>ï¼ˆ7ï¼‰emojiç½‘ç«™ï¼š<a href="https://emojipedia.org/">https://emojipedia.org/</a></p>]]></content>
    
    
    <categories>
      
      <category>reactè¯¾ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>react</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>reactè¯¾ç¨‹2-kick off</title>
    <link href="/2024/08/11/react%E8%AF%BE%E7%A8%8B2-kick-off/"/>
    <url>/2024/08/11/react%E8%AF%BE%E7%A8%8B2-kick-off/</url>
    
    <content type="html"><![CDATA[<p>å¼€å§‹æ•´åˆæ¯”è¾ƒå°çš„é¡µé¢</p><span id="more"></span><p>æœ€å¥½ä¸è¦åµŒå¥—å‡½æ•°å£°æ˜</p><h3 id="ä¸€ã€Babel"><a href="#ä¸€ã€Babel" class="headerlink" title="ä¸€ã€Babel"></a>ä¸€ã€Babel</h3><p>Babel æ˜¯ä¸€ä¸ªå¹¿æ³›ä½¿ç”¨çš„ JavaScript ç¼–è¯‘å™¨ï¼Œä¸»è¦ç”¨äºå°†ç°ä»£ JavaScript ä»£ç ï¼ˆES6+ï¼‰è½¬æ¢ä¸ºä¸æ—§æµè§ˆå™¨å…¼å®¹çš„ä»£ç ã€‚å®ƒèƒ½å¤Ÿå°†æ–°ç‰ˆæœ¬çš„ JavaScript è¯­æ³•å’Œç‰¹æ€§ç¼–è¯‘ä¸ºæ›´æ—§ç‰ˆæœ¬ï¼Œä»è€Œç¡®ä¿ä»£ç å¯ä»¥åœ¨ä¸æ”¯æŒè¿™äº›æ–°ç‰¹æ€§çš„ç¯å¢ƒä¸­è¿è¡Œã€‚</p><p>Babel çš„ä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š</p><ol><li><strong>è¯­æ³•è½¬æ¢</strong>ï¼šå°†ç°ä»£ JavaScript è¯­æ³•ï¼ˆå¦‚ç®­å¤´å‡½æ•°ã€ç±»ã€æ¨¡æ¿å­—ç¬¦ä¸²ç­‰ï¼‰è½¬æ¢ä¸ºè¾ƒæ—§çš„ç­‰æ•ˆä»£ç ã€‚</li><li><strong>æ’ä»¶ç³»ç»Ÿ</strong>ï¼šBabel æä¾›äº†ä¸€ä¸ªå¼ºå¤§çš„æ’ä»¶ç³»ç»Ÿï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®éœ€è¦å®šåˆ¶ Babel çš„è¡Œä¸ºï¼Œä¾‹å¦‚æ·»åŠ æ”¯æŒ TypeScriptã€React JSX ç­‰ã€‚</li><li><strong>Polyfill</strong>ï¼šé€šè¿‡ <code>@babel/polyfill</code>ï¼Œå¯ä»¥åœ¨æ—§æµè§ˆå™¨ä¸­å¼•å…¥æ–° JavaScript æ ‡å‡†åº“åŠŸèƒ½ï¼ˆå¦‚ Promiseã€Map ç­‰ï¼‰ã€‚</li><li><strong>ä»£ç è½¬æ¢</strong>ï¼šBabel è¿˜å¯ä»¥ç”¨äºä»£ç çš„å…¶ä»–è½¬æ¢ï¼Œä¾‹å¦‚é‡å‘½åå˜é‡ã€åˆ é™¤æœªä½¿ç”¨çš„ä»£ç ç­‰ã€‚</li></ol><p>åœ¨ React é¡¹ç›®ä¸­ï¼ŒBabel é€šå¸¸ä¸ Webpack ä¸€èµ·ä½¿ç”¨ï¼Œé€šè¿‡é…ç½® Babel Loader æ¥å¤„ç† JavaScript æ–‡ä»¶çš„è½¬æ¢ï¼Œä½¿å¾—å¼€å‘è€…å¯ä»¥ä½¿ç”¨æœ€æ–°çš„ JavaScript ç‰¹æ€§è¿›è¡Œå¼€å‘ï¼ŒåŒæ—¶ç¡®ä¿ä»£ç çš„å…¼å®¹æ€§ã€‚</p><h3 id="äºŒã€webpack"><a href="#äºŒã€webpack" class="headerlink" title="äºŒã€webpack"></a>äºŒã€webpack</h3><p>Webpack æ˜¯ä¸€ä¸ªç°ä»£ JavaScript åº”ç”¨çš„æ¨¡å—æ‰“åŒ…å·¥å…·ï¼ˆbundlerï¼‰ã€‚å®ƒçš„ä¸»è¦åŠŸèƒ½æ˜¯å°†å„ç§èµ„æºï¼ˆJavaScriptã€CSSã€å›¾ç‰‡ç­‰ï¼‰ä½œä¸ºæ¨¡å—è¿›è¡Œæ‰“åŒ…ï¼Œä»è€Œç”Ÿæˆå¯ä»¥åœ¨æµè§ˆå™¨ä¸­è¿è¡Œçš„æ–‡ä»¶ã€‚Webpack çš„æ ¸å¿ƒæ€æƒ³æ˜¯æŠŠæ‰€æœ‰çš„é¡¹ç›®èµ„æºéƒ½è§†ä¸ºæ¨¡å—ï¼Œæ— è®ºæ˜¯ JavaScript ä»£ç ã€æ ·å¼è¡¨è¿˜æ˜¯å›¾ç‰‡ç­‰èµ„æºï¼Œæœ€ç»ˆæ‰“åŒ…æˆä¸€ä¸ªæˆ–å¤šä¸ªè¾“å‡ºæ–‡ä»¶ï¼Œä»¥ä¾¿åœ¨æµè§ˆå™¨ä¸­æ›´é«˜æ•ˆåœ°åŠ è½½ã€‚</p><p>ä»¥ä¸‹æ˜¯ Webpack çš„ä¸€äº›æ ¸å¿ƒæ¦‚å¿µï¼š</p><ol><li><strong>Entryï¼ˆå…¥å£ï¼‰</strong>ï¼š<ul><li>Webpack ä»ä¸€ä¸ªæˆ–å¤šä¸ªå…¥å£æ–‡ä»¶å¼€å§‹æ„å»ºä¾èµ–å…³ç³»å›¾ï¼Œæ‰¾å‡ºé¡¹ç›®ä¸­æ‰€æœ‰çš„æ¨¡å—åŠå…¶ä¾èµ–å…³ç³»ã€‚</li><li>é»˜è®¤å…¥å£æ–‡ä»¶æ˜¯ <code>./src/index.js</code>ï¼Œä½†å¯ä»¥é€šè¿‡ Webpack é…ç½®æ–‡ä»¶ (<code>webpack.config.js</code>) æ¥æŒ‡å®šã€‚</li></ul></li><li><strong>Outputï¼ˆè¾“å‡ºï¼‰</strong>ï¼š<ul><li>é…ç½®è¾“å‡ºæ–‡ä»¶çš„åç§°å’Œè·¯å¾„ã€‚æ‰“åŒ…åçš„æ–‡ä»¶é€šå¸¸å‘½åä¸º <code>bundle.js</code>ï¼Œä½†ä¹Ÿå¯ä»¥è‡ªå®šä¹‰ã€‚</li><li>ä¾‹å¦‚ï¼Œå°†è¾“å‡ºæ–‡ä»¶æ”¾åœ¨ <code>./dist</code> ç›®å½•ä¸‹ã€‚</li></ul></li><li><strong>Loadersï¼ˆåŠ è½½å™¨ï¼‰</strong>ï¼š<ul><li>Loaders ç”¨äºè½¬æ¢ä¸åŒç±»å‹çš„æ¨¡å—ï¼Œå¦‚å°† ES6+ çš„ JavaScript è½¬æ¢ä¸ºå…¼å®¹çš„ ES5ï¼Œæˆ–è€…å°† SCSS æ–‡ä»¶ç¼–è¯‘ä¸º CSSã€‚</li><li>å¸¸ç”¨çš„åŠ è½½å™¨æœ‰ <code>babel-loader</code>ï¼ˆå¤„ç† JavaScriptï¼‰ã€<code>css-loader</code>ï¼ˆå¤„ç† CSSï¼‰ã€<code>file-loader</code>ï¼ˆå¤„ç†æ–‡ä»¶èµ„æºï¼‰ç­‰ã€‚</li></ul></li><li><strong>Pluginsï¼ˆæ’ä»¶ï¼‰</strong>ï¼š<ul><li>æ’ä»¶ç”¨äºæ‰§è¡Œå¤æ‚çš„ä»»åŠ¡ï¼Œå¦‚ä¼˜åŒ–æ‰“åŒ…æ–‡ä»¶çš„å¤§å°ã€ç”Ÿæˆ HTML æ–‡ä»¶ã€æå– CSS æ–‡ä»¶ç­‰ã€‚</li><li>å¸¸è§çš„æ’ä»¶æœ‰ <code>HtmlWebpackPlugin</code>ï¼ˆç”Ÿæˆ HTML æ–‡ä»¶ï¼‰ã€<code>MiniCssExtractPlugin</code>ï¼ˆæå– CSS åˆ°å•ç‹¬æ–‡ä»¶ï¼‰ã€<code>UglifyJsPlugin</code>ï¼ˆå‹ç¼© JavaScript æ–‡ä»¶ï¼‰ç­‰ã€‚</li></ul></li><li><strong>Modeï¼ˆæ¨¡å¼ï¼‰</strong>ï¼š<ul><li>Webpack æä¾›äº†ä¸¤ç§æ¨¡å¼ï¼š<code>development</code> å’Œ <code>production</code>ã€‚</li><li><code>development</code> æ¨¡å¼é€‚ç”¨äºå¼€å‘ç¯å¢ƒï¼Œå…·æœ‰æ›´å¥½çš„è°ƒè¯•ä½“éªŒï¼Œä»£ç ä¸ä¼šè¢«å‹ç¼©ã€‚</li><li><code>production</code> æ¨¡å¼é€‚ç”¨äºç”Ÿäº§ç¯å¢ƒï¼Œä»£ç ä¼šè¢«ä¼˜åŒ–å’Œå‹ç¼©ï¼Œä»¥æé«˜æ€§èƒ½ã€‚</li></ul></li><li><strong>DevServer</strong>ï¼š<ul><li>Webpack DevServer æ˜¯ä¸€ä¸ªå¼€å‘æœåŠ¡å™¨ï¼Œå®ƒå¯ä»¥å®æ—¶é‡æ–°åŠ è½½é¡µé¢ï¼Œæä¾›çƒ­æ¨¡å—æ›¿æ¢ï¼ˆHot Module Replacementï¼ŒHMRï¼‰åŠŸèƒ½ï¼Œä½¿å¼€å‘è¿‡ç¨‹æ›´åŠ é«˜æ•ˆã€‚</li></ul></li></ol><p>åœ¨å®é™…åº”ç”¨ä¸­ï¼ŒWebpack é€šå¸¸ä¸ Babelã€Sassã€PostCSS ç­‰å·¥å…·ç»“åˆä½¿ç”¨ï¼Œä»¥æ„å»ºç°ä»£ Web åº”ç”¨ç¨‹åºã€‚é€šè¿‡é…ç½® Webpackï¼Œä½ å¯ä»¥åœ¨å¼€å‘è¿‡ç¨‹ä¸­äº«å—æ¨¡å—åŒ–å¼€å‘çš„ä¾¿åˆ©ï¼ŒåŒæ—¶ç¡®ä¿æœ€ç»ˆç”Ÿæˆçš„æ–‡ä»¶åœ¨æ€§èƒ½å’Œå…¼å®¹æ€§ä¸Šè¾¾åˆ°æœ€ä½³çŠ¶æ€ã€‚</p><h3 id="ä¸‰ã€Reactçš„åˆ†ç¦»ç‰¹æ€§"><a href="#ä¸‰ã€Reactçš„åˆ†ç¦»ç‰¹æ€§" class="headerlink" title="ä¸‰ã€Reactçš„åˆ†ç¦»ç‰¹æ€§"></a>ä¸‰ã€Reactçš„åˆ†ç¦»ç‰¹æ€§</h3><p>React æ¡†æ¶çš„ç¡®ä¸ä¼ ç»Ÿçš„åˆ†ç¦»å¼ï¼ˆHTMLã€CSSã€JavaScript åˆ†ç¦»ï¼‰å¼€å‘æ–¹å¼æœ‰æ‰€ä¸åŒã€‚åœ¨ React ä¸­ï¼Œå¼€å‘è€…é€šå¸¸ä¼šå°†é€»è¾‘ã€ç»“æ„å’Œæ ·å¼ç»„åˆåœ¨ä¸€ä¸ªç»„ä»¶å†…ï¼Œä½¿ç”¨ JavaScript æ¥åˆ›å»ºç”¨æˆ·ç•Œé¢ã€‚è¿™ç§æ–¹æ³•ç§°ä¸º<strong>ç»„ä»¶åŒ–å¼€å‘</strong>ï¼Œå…¶æ ¸å¿ƒç†å¿µæ˜¯å°† UI æ‹†åˆ†ä¸ºç‹¬ç«‹ã€å¯å¤ç”¨çš„ç»„ä»¶ã€‚</p><p>å°½ç®¡ React ä¸å†åƒä¼ ç»Ÿæ–¹å¼é‚£æ ·ä¸¥æ ¼åˆ†ç¦» HTMLã€CSSã€JSï¼Œä½†å®ƒä¾ç„¶åœ¨ä¸åŒå±‚æ¬¡ä¸Šä½“ç°äº†åˆ†ç¦»æ€§ï¼š</p><ol><li><strong>ç»„ä»¶åˆ†ç¦»</strong></li></ol><ul><li>React å¼ºè°ƒå°†é¡µé¢åˆ†è§£æˆå¤šä¸ªç‹¬ç«‹çš„ç»„ä»¶ï¼Œæ¯ä¸ªç»„ä»¶åªè´Ÿè´£è‡ªå·±çš„åŠŸèƒ½å’ŒçŠ¶æ€ç®¡ç†ã€‚è¿™ç§åˆ†ç¦»æ–¹å¼ä½¿å¾—ä»£ç æ›´åŠ æ¨¡å—åŒ–å’Œå¯ç»´æŠ¤ã€‚</li><li>æ¯ä¸ªç»„ä»¶å¯ä»¥åŒ…å«è‡ªå·±çš„ç»“æ„ï¼ˆHTMLï¼‰ã€æ ·å¼ï¼ˆCSSï¼‰ã€é€»è¾‘ï¼ˆJSï¼‰ï¼Œå¹¶ä¸”å¯ä»¥ç‹¬ç«‹å¼€å‘ã€æµ‹è¯•å’Œå¤ç”¨ã€‚</li></ul><ol start="2"><li><strong>JSX çš„è¯­ä¹‰åˆ†ç¦»</strong></li></ol><ul><li>åœ¨ React ä¸­ï¼ŒJSX å…è®¸å¼€å‘è€…åœ¨ JavaScript ä¸­ç¼–å†™ç±»ä¼¼ HTML çš„è¯­æ³•ã€‚å°½ç®¡çœ‹ä¼¼æ··åˆäº† HTML å’Œ JavaScriptï¼Œä½†å…¶å® JSX åªæ˜¯ React çš„è¯­æ³•ç³–ï¼Œæœ€ç»ˆä¼šè¢«ç¼–è¯‘æˆçº¯ JavaScriptã€‚</li><li>é€šè¿‡ JSXï¼Œç»“æ„åŒ–çš„ UI ä»£ç åµŒå…¥åœ¨ JavaScript ä¸­ï¼Œä½†ä»ç„¶ä¿æŒäº†é€»è¾‘å’Œå±•ç¤ºä¹‹é—´çš„æ¸…æ™°åˆ†ç¦»ã€‚ä»£ç è¯­ä¹‰åŒ–ä¹Ÿå¾—åˆ°äº†å¢å¼ºï¼Œå› ä¸º JSX è¯­æ³•æ¯”ä¼ ç»Ÿçš„å­—ç¬¦ä¸²æ‹¼æ¥æ–¹å¼æ›´ç›´è§‚ã€‚</li></ul><ol start="3"><li><strong>CSS-in-JS</strong></li></ol><ul><li>React ç”Ÿæ€ä¸­æœ‰è®¸å¤šæ ·å¼è§£å†³æ–¹æ¡ˆï¼Œæ¯”å¦‚ styled-componentsã€emotionï¼Œå®ƒä»¬å…è®¸åœ¨ JavaScript æ–‡ä»¶ä¸­ç¼–å†™æ ·å¼ã€‚è¿™ç§æ–¹å¼ä½¿æ ·å¼ä¸ç»„ä»¶é€»è¾‘ç´§å¯†ç»‘å®šï¼Œé¿å…äº†ä¼ ç»Ÿå…¨å±€ CSS å¸¦æ¥çš„æ ·å¼å†²çªé—®é¢˜ã€‚</li><li>CSS-in-JS æä¾›äº†æ ·å¼çš„å±€éƒ¨ä½œç”¨åŸŸï¼ˆscoped stylingï¼‰ï¼Œä»è€Œå®ç°äº†æ ·å¼çš„éš”ç¦»å’Œç»„ä»¶åŒ–ç®¡ç†ã€‚</li></ul><ol start="4"><li><strong>Context å’Œ Hooks çš„é€»è¾‘åˆ†ç¦»</strong></li></ol><ul><li>React æä¾›äº† Context å’Œ Hooksï¼Œä½¿å¾—çŠ¶æ€ç®¡ç†å’Œä¸šåŠ¡é€»è¾‘å¯ä»¥ä¸ UI ç»„ä»¶åˆ†ç¦»ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ <code>useContext</code> å’Œ <code>useReducer</code> ç­‰ Hookï¼Œå¯ä»¥å°†å…¨å±€çŠ¶æ€é€»è¾‘ä¸å…·ä½“ç»„ä»¶è§£è€¦ï¼Œä»è€Œæé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¤ç”¨æ€§ã€‚</li><li>é€šè¿‡è‡ªå®šä¹‰ Hooksï¼Œå¼€å‘è€…å¯ä»¥å°†å¯å¤ç”¨çš„é€»è¾‘æŠ½å–å‡ºæ¥ï¼Œå¹¶åœ¨å¤šä¸ªç»„ä»¶ä¸­å…±äº«ï¼Œè€Œä¸éœ€è¦é‡å¤ä»£ç ã€‚</li></ul><ol start="5"><li><strong>CSS Modules</strong></li></ol><ul><li>CSS Modules æ˜¯ React ä¸­å¦ä¸€ç§å¸¸ç”¨çš„æ ·å¼è§£å†³æ–¹æ¡ˆï¼Œå®ƒå…è®¸å¼€å‘è€…å°†æ ·å¼åˆ†ç¦»æˆå„ä¸ªæ¨¡å—ï¼Œå¹¶è‡ªåŠ¨ä¸ºæ¯ä¸ªæ¨¡å—ç”Ÿæˆå”¯ä¸€çš„ç±»åï¼Œä»¥é¿å…æ ·å¼å†²çªã€‚</li><li>ä½¿ç”¨ CSS Modules æ—¶ï¼Œæ ·å¼æ–‡ä»¶ä»ç„¶å¯ä»¥ä¿æŒä¸ç»„ä»¶åˆ†ç¦»ï¼ŒåŒæ—¶ç¡®ä¿äº†æ ·å¼çš„ä½œç”¨èŒƒå›´åªé™äºå½“å‰ç»„ä»¶ã€‚</li></ul><ol start="6"><li><strong>æ–‡ä»¶ç»“æ„çš„åˆ†ç¦»</strong></li></ol><ul><li>è™½ç„¶ React é¼“åŠ±åœ¨ç»„ä»¶å†…éƒ¨è¿›è¡Œç»„åˆï¼Œä½†å¼€å‘è€…ä¾ç„¶å¯ä»¥æ ¹æ®é¡¹ç›®éœ€æ±‚å°†ç»„ä»¶ã€æ ·å¼å’Œé€»è¾‘ä»£ç åˆ†å¸ƒåœ¨ä¸åŒçš„æ–‡ä»¶ä¸­ã€‚</li><li>ä¾‹å¦‚ï¼Œå¯ä»¥æœ‰ä¸€ä¸ª <code>components</code> æ–‡ä»¶å¤¹æ¥å­˜æ”¾ç»„ä»¶ï¼Œä¸€ä¸ª <code>styles</code> æ–‡ä»¶å¤¹æ¥å­˜æ”¾æ ·å¼æ–‡ä»¶ï¼Œä¸€ä¸ª <code>services</code> æ–‡ä»¶å¤¹æ¥å¤„ç†ä¸šåŠ¡é€»è¾‘å’Œ API è¯·æ±‚ã€‚</li></ul><p>React ä¸­çš„â€œåˆ†ç¦»æ€§â€æ›´å¤šåœ°ä½“ç°åœ¨é€»è¾‘å±‚æ¬¡çš„åˆ†ç¦»ï¼Œè€Œéæ–‡ä»¶å±‚æ¬¡çš„åˆ†ç¦»ã€‚é€šè¿‡ç»„ä»¶åŒ–å¼€å‘ã€JSXã€CSS-in-JSã€Contextã€Hooks ç­‰æœºåˆ¶ï¼ŒReact ä¿æŒäº†ä»£ç çš„æ¨¡å—åŒ–å’Œå¯ç»´æŠ¤æ€§ï¼Œå³ä½¿ç»“æ„ã€æ ·å¼å’Œé€»è¾‘è¢«åˆå¹¶åœ¨ä¸€èµ·ã€‚è¿™ç§æ–¹å¼æ›´é€‚åˆç°ä»£å‰ç«¯å¼€å‘çš„éœ€æ±‚ï¼Œæä¾›äº†æ›´å¥½çš„ä»£ç ç»„ç»‡æ–¹å¼å’Œå¼€å‘ä½“éªŒã€‚</p><h3 id="å››ã€é‡ç”¨ç»„ä»¶çš„ä»£ç å®ä¾‹"><a href="#å››ã€é‡ç”¨ç»„ä»¶çš„ä»£ç å®ä¾‹" class="headerlink" title="å››ã€é‡ç”¨ç»„ä»¶çš„ä»£ç å®ä¾‹"></a>å››ã€é‡ç”¨ç»„ä»¶çš„ä»£ç å®ä¾‹</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Menu</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">main</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;menu&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Our menu<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;pizza&quot;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Pizza</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;Pizza Spinaci&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">ingredients</span>=<span class="hljs-string">&quot;Tomato, mozarella, spinach, and ricotta cheese&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">photoName</span>=<span class="hljs-string">&quot;pizzas\spinaci.jpg&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">price</span>=<span class="hljs-string">&#123;10&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Pizza</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;Pizza Funghi&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">ingredients</span>=<span class="hljs-string">&quot;Tomato, mozarella, mushrooms, and onion&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">price</span>=<span class="hljs-string">&#123;12&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">photoName</span>=<span class="hljs-string">&quot;pizzas/funghi.jpg&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Pizza</span>(<span class="hljs-params">props</span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&#123;props.photoName&#125;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&#123;props.name&#125;</span> /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>&#123;props.name&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>&#123;props.ingredients&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;props.price&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>reactè¯¾ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>react</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>reactè¯¾ç¨‹1-preparing</title>
    <link href="/2024/08/08/react%E8%AF%BE%E7%A8%8B1-preparing/"/>
    <url>/2024/08/08/react%E8%AF%BE%E7%A8%8B1-preparing/</url>
    
    <content type="html"><![CDATA[<p>å¤„ç†æ•°æ®+åœ¨ç”¨æˆ·ç•Œé¢å±•ç¤ºæ•°æ®â€”â€”&gt;<strong>ç”¨æˆ·ç•Œé¢(user interface)ä¸æ•°æ®åŒæ­¥</strong></p><span id="more"></span><h3 id="ä¸€ã€reactç®€ä»‹"><a href="#ä¸€ã€reactç®€ä»‹" class="headerlink" title="ä¸€ã€reactç®€ä»‹"></a>ä¸€ã€reactç®€ä»‹</h3><p>å¤„ç†æ•°æ®+åœ¨ç”¨æˆ·ç•Œé¢å±•ç¤ºæ•°æ®â€”â€”&gt;ç”¨æˆ·ç•Œé¢(user interface)ä¸æ•°æ®åŒæ­¥</p><p>reactåŸºæœ¬ä¸Šæ˜¯å…³äºcomponentçš„ï¼Œå®ƒçš„åŸºæœ¬ä»»åŠ¡å°±æ˜¯<strong>è·å–ç»„ä»¶çš„å½“å‰çŠ¶æ€å¹¶å°†å®ƒä»¬ç»˜åˆ¶åœ¨webç•Œé¢ä¸Š</strong>ã€‚å¦å¤–ä¸€ä»¶å¯¹ç»„ä»¶åšçš„äº‹æƒ…å°±æ˜¯ï¼š<strong>é‡ç”¨</strong>ï¼ˆï¼‰ã€‚ä»¥åŠ<strong>ç»„ä»¶åµŒå¥—</strong>ã€‚</p><p>è¿œç¦»DOMçš„çº¯å‡€çš„JSã€‚â€”â€”&gt;JXS</p><p>å¦‚ä½•å¾ˆå¥½åœ°å“åº”å˜åŒ–ï¼Ÿï¼š<strong>state</strong></p><p>reactå®é™…ä¸Šæ˜¯ä¸€ä¸ªåº“ã€‚</p><p>å»ºç«‹åœ¨reactä¸Šçš„æ¡†æ¶ï¼šNext.jså’ŒRemix</p><p>è¿„ä»Šä¸ºæ­¢æœ€å—æ¬¢è¿çš„æ¡†æ¶ï¼š1ã€è®¸å¤šå¤§å‹å…¬å¸å¾ˆä¹…ä¹‹å‰å°±å·²ç»å¼€å§‹ä½¿ç”¨reactï¼›2ã€æ‹¥æœ‰å·¨å¤§çš„å°±ä¸šå¸‚åœºå’Œå¾ˆé«˜çš„éœ€æ±‚ï¼›3ã€æ‹¥æœ‰è®¸å¤šä¸“ä¸šç¤¾åŒºä¸ºå¼€å‘äººå‘˜æä¾›æ”¯æŒ</p><p>æœ€åˆæ˜¯èµ·æºäºç¤¾äº¤è½¯ä»¶ã€‚</p><h3 id="äºŒã€Node-JS"><a href="#äºŒã€Node-JS" class="headerlink" title="äºŒã€Node.JS"></a>äºŒã€Node.JS</h3><p>Node.js æ˜¯ä¸€ä¸ªåŸºäº Chrome V8 å¼•æ“çš„ JavaScript è¿è¡Œæ—¶ç¯å¢ƒã€‚å®ƒä½¿å¾— JavaScript ä¸ä»…å¯ä»¥åœ¨æµè§ˆå™¨ä¸­è¿è¡Œï¼Œè¿˜å¯ä»¥åœ¨æœåŠ¡å™¨ç«¯è¿è¡Œã€‚ç®€å•æ¥è¯´ï¼ŒNode.js è®©ä½ èƒ½å¤Ÿä½¿ç”¨ JavaScript ç¼–å†™æœåŠ¡å™¨ç«¯åº”ç”¨ç¨‹åºã€‚ä»¥ä¸‹æ˜¯ Node.js çš„ä¸»è¦ç”¨é€”å’Œç‰¹ç‚¹ï¼š</p><ol><li><strong>æœåŠ¡å™¨ç«¯ç¼–ç¨‹</strong></li></ol><ul><li>ä½¿ç”¨ Node.js å¯ä»¥ç¼–å†™æœåŠ¡å™¨ç«¯ä»£ç ï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥ç”¨ JavaScript åˆ›å»ºåå°æœåŠ¡ã€å¤„ç†è¯·æ±‚å’Œå“åº”ã€ç®¡ç†æ•°æ®åº“ç­‰ã€‚Node.js å¸¸ç”¨äºæ„å»º RESTful APIã€Web åº”ç”¨ç¨‹åºã€å®æ—¶èŠå¤©åº”ç”¨ç­‰ã€‚</li></ul><ol start="2"><li><strong>äº‹ä»¶é©±åŠ¨ä¸éé˜»å¡ I&#x2F;O</strong></li></ol><ul><li>Node.js çš„æœ€å¤§ç‰¹ç‚¹ä¹‹ä¸€æ˜¯å…¶äº‹ä»¶é©±åŠ¨å’Œéé˜»å¡ I&#x2F;O æ¨¡å‹ã€‚è¿™ä½¿å¾—å®ƒéå¸¸é€‚åˆå¤„ç†é«˜å¹¶å‘çš„è¯·æ±‚ï¼Œæ¯”å¦‚éœ€è¦åŒæ—¶å¤„ç†å¤§é‡è¿æ¥çš„æœåŠ¡å™¨ã€‚å› ä¸ºå®ƒæ˜¯éé˜»å¡çš„ï¼Œæ‰€ä»¥å³ä½¿æœ‰å¤§é‡è¯·æ±‚åŒæ—¶åˆ°æ¥ï¼ŒNode.js ä¹Ÿä¸ä¼šå› ä¸ºæŸä¸ªè¯·æ±‚åœ¨ç­‰å¾…æ•°æ®è€Œé˜»å¡å…¶ä»–è¯·æ±‚ã€‚</li></ul><ol start="3"><li><strong>å…¨æ ˆå¼€å‘</strong></li></ol><ul><li>ç”±äº Node.js ä½¿ç”¨ JavaScript è¯­è¨€ï¼Œå‰ç«¯å¼€å‘äººå‘˜å¯ä»¥åœ¨æŒæ¡ JavaScript çš„åŸºç¡€ä¸Šï¼Œæ— ç¼åœ°è¿‡æ¸¡åˆ°åç«¯å¼€å‘ï¼Œå®ç°å…¨æ ˆå¼€å‘ã€‚æ¯”å¦‚ä½¿ç”¨ Express æ¡†æ¶å¯ä»¥å¾ˆæ–¹ä¾¿åœ°åˆ›å»ºå’Œç®¡ç†åç«¯æœåŠ¡ã€‚</li></ul><ol start="4"><li><strong>ä¸°å¯Œçš„åŒ…ç”Ÿæ€ç³»ç»Ÿ</strong></li></ol><ul><li>Node.js å…·æœ‰ä¸€ä¸ªåºå¤§çš„åŒ…ç®¡ç†ç³»ç»Ÿï¼Œå³ npmï¼ˆNode Package Managerï¼‰ã€‚é€šè¿‡ npmï¼Œå¼€å‘è€…å¯ä»¥è®¿é—®æ•°åä¸‡è®¡çš„å¼€æºåŒ…å’Œæ¨¡å—ï¼Œå¤§å¤§ç®€åŒ–äº†å¼€å‘è¿‡ç¨‹ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ <code>express</code> å¯ä»¥å¿«é€Ÿæ­å»º web æœåŠ¡å™¨ï¼Œä½¿ç”¨ <code>mongoose</code> å¯ä»¥è½»æ¾æ“ä½œ MongoDB æ•°æ®åº“ã€‚</li></ul><ol start="5"><li><strong>è·¨å¹³å°</strong></li></ol><ul><li>Node.js æ˜¯è·¨å¹³å°çš„ï¼Œå¯ä»¥åœ¨ Windowsã€Linuxã€macOS ç­‰æ“ä½œç³»ç»Ÿä¸Šè¿è¡Œï¼Œè¿™ä½¿å¾—å®ƒæˆä¸ºäº†ä¸€ä¸ªéå¸¸çµæ´»çš„å¼€å‘å·¥å…·ã€‚</li></ul><ol start="6"><li><strong>å®æ—¶åº”ç”¨</strong></li></ol><ul><li>Node.js éå¸¸é€‚åˆå¼€å‘å®æ—¶åº”ç”¨ç¨‹åºï¼Œæ¯”å¦‚èŠå¤©å®¤ã€åœ¨çº¿æ¸¸æˆã€ååŒå·¥å…·ç­‰ï¼Œå› ä¸ºå®ƒèƒ½å¤„ç†å¤§é‡çš„å¹¶å‘è¿æ¥å¹¶ä¸”å“åº”é€Ÿåº¦éå¸¸å¿«ã€‚</li></ul><ol start="7"><li><strong>å¼€å‘å·¥å…·å’Œæ„å»ºå·¥å…·</strong></li></ol><ul><li>Node.js ä¹Ÿè¢«å¹¿æ³›ç”¨äºå¼€å‘å·¥å…·çš„æ„å»ºï¼Œå¦‚ webpackã€gulp ç­‰ï¼Œå¸®åŠ©å‰ç«¯å¼€å‘è€…è¿›è¡Œé¡¹ç›®çš„æ‰“åŒ…ã€æ„å»ºã€æµ‹è¯•å’Œéƒ¨ç½²ã€‚</li></ul><p><strong>ä¸¾ä¾‹åº”ç”¨åœºæ™¯ï¼š</strong></p><ul><li><strong>Web æœåŠ¡å™¨</strong>ï¼šä½¿ç”¨ Express.js åˆ›å»ºçš„ Web åº”ç”¨ã€‚</li><li><strong>API æœåŠ¡</strong>ï¼šRESTful APIï¼Œç”¨äºä¸æ•°æ®åº“äº¤äº’å¹¶æä¾›æ•°æ®æœåŠ¡ã€‚</li><li><strong>å®æ—¶åº”ç”¨</strong>ï¼šèŠå¤©åº”ç”¨ã€ååŒç¼–è¾‘å·¥å…·ï¼ˆå¦‚ Google Docsï¼‰ã€‚</li><li><strong>å¼€å‘å·¥å…·</strong>ï¼šå‰ç«¯æ‰“åŒ…å·¥å…·ï¼ˆå¦‚ Webpackï¼‰ã€ä»»åŠ¡è¿è¡Œå™¨ï¼ˆå¦‚ Gulpï¼‰ã€‚</li></ul><p>æ€»ä¹‹ï¼ŒNode.js æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œé€‚åˆéœ€è¦é«˜å¹¶å‘å¤„ç†å’Œå®æ—¶äº¤äº’çš„åº”ç”¨åœºæ™¯ï¼Œå°¤å…¶æ˜¯åœ¨ Web å¼€å‘é¢†åŸŸæœ‰ç€å¹¿æ³›çš„åº”ç”¨ã€‚</p><h3 id="ä¸‰ã€å‡†å¤‡å·¥ä½œ"><a href="#ä¸‰ã€å‡†å¤‡å·¥ä½œ" class="headerlink" title="ä¸‰ã€å‡†å¤‡å·¥ä½œ"></a>ä¸‰ã€å‡†å¤‡å·¥ä½œ</h3><p>ï¼ˆ1ï¼‰å®‰è£… VS codeçš„ä¾èµ–ï¼š</p><p>1ã€ESlintï¼ˆå‘ç°bugï¼‰</p><p>2ã€Prettierï¼ˆè‡ªåŠ¨æ ¼å¼åŒ–ä»£ç ä½¿å…¶æ›´ç¾è§‚ï¼‰</p><p>3ã€One Monokai Theme</p><p>4ã€material icon Theme</p><p>ï¼ˆ2ï¼‰è®¾ç½®</p><p>auto saveè°ƒæ•´ä¸º  onFocusChange</p><p>default Formatterè°ƒæ•´ä¸ºPrettier</p><p>Format on saveæ‰“å¼€</p><p>eslint runæ”¹ä¸ºon save</p><p>ï¼ˆ3ï¼‰å¿«æ·é”®</p><p>1ã€æ–°å»ºä¸€ä¸ªç©ºçš„HTMLæ–‡ä»¶æ—¶ï¼Œè¾“å…¥ï¼ç‚¹å‡»Enterå°±ä¼šæ„å»ºå‡ºä¸€ä¸ªç©ºçš„HTMLç»“æ„</p><p>2ã€rfc+Enterï¼Œåˆ›å»ºä¸€ä¸ªç©ºçš„ç»„ä»¶å‡½æ•°ç»“æ„</p><p>ï¼ˆ4ï¼‰å®‰è£…å¥½npm ä»¥åŠnpmä¾èµ–ï¼Œä¸‹è½½react-start-app@5æ¥åˆ›å»ºé¡¹ç›®ï¼Œ<strong>npm start</strong>æ¥è¿è¡Œé¡¹ç›®</p>]]></content>
    
    
    <categories>
      
      <category>reactè¯¾ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>react</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>webå¼€å‘è¯¾ç¨‹4--è´ªåƒè›‡å°æ¸¸æˆ</title>
    <link href="/2024/08/07/2024-08-07-web%E5%BC%80%E5%8F%91%E8%AF%BE%E7%A8%8B4--%E8%B4%AA%E5%90%83%E8%9B%87%E5%B0%8F%E6%B8%B8%E6%88%8F/"/>
    <url>/2024/08/07/2024-08-07-web%E5%BC%80%E5%8F%91%E8%AF%BE%E7%A8%8B4--%E8%B4%AA%E5%90%83%E8%9B%87%E5%B0%8F%E6%B8%B8%E6%88%8F/</url>
    
    <content type="html"><![CDATA[<p>ç½‘é¡µç«¯çš„è´ªåƒè›‡å°æ¸¸æˆï¼Œæ”¯æŒå®šåˆ¶ï¼Œç›®å‰åŠŸèƒ½å°šå°‘</p><span id="more"></span><h4 id="index-html"><a href="#index-html" class="headerlink" title="index.html"></a>index.html</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;style.css&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Snake<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;snake.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;input.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;food.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;snakeUtils.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;game.js&quot;</span> <span class="hljs-attr">defer</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;game-board&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;game-start&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Start Game<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;start-button&quot;</span>&gt;</span>Start<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;game-over&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Game Over<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;restart-button&quot;</span>&gt;</span>Restart<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br><br></code></pre></td></tr></table></figure><h4 id="style-css"><a href="#style-css" class="headerlink" title="style.css"></a>style.css</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-comment">/* No need to edit this file! */</span><br><br><span class="hljs-selector-tag">body</span> &#123;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">100vh</span>;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">100vw</span>;<br>  <span class="hljs-attribute">display</span>: flex;<br>  <span class="hljs-attribute">justify-content</span>: center;<br>  <span class="hljs-attribute">align-items</span>: center;<br>  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;<br>  <span class="hljs-attribute">background-color</span>: gray;<br>&#125;<br><br><span class="hljs-selector-id">#game-board</span> &#123;<br>  <span class="hljs-attribute">background-color</span>: black;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">100vmin</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">100vmin</span>;<br>  <span class="hljs-attribute">display</span>: grid;<br>  <span class="hljs-attribute">grid-template-rows</span>: <span class="hljs-built_in">repeat</span>(<span class="hljs-number">21</span>, <span class="hljs-number">1</span>fr);<br>  <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-built_in">repeat</span>(<span class="hljs-number">21</span>, <span class="hljs-number">1</span>fr);<br>&#125;<br><br><span class="hljs-comment">/* .snake &#123;</span><br><span class="hljs-comment">  background-color: rgb(58, 90, 160);</span><br><span class="hljs-comment">  border: 0.25vmin solid rgb(78, 66, 126);</span><br><span class="hljs-comment">&#125; */</span><br><br><span class="hljs-selector-class">.snake</span>&#123;<br>  <span class="hljs-attribute">background-image</span>: <span class="hljs-built_in">url</span>(<span class="hljs-string">&#x27;IMG_20240731_162343.jpg&#x27;</span>); <span class="hljs-comment">/* æ›¿æ¢ä¸ºä½ çš„è›‡å¤´å›¾ç‰‡è·¯å¾„ */</span><br>  <span class="hljs-attribute">background-size</span>: <span class="hljs-number">4.76vmin</span> <span class="hljs-number">4.76vmin</span>; <span class="hljs-comment">/* è®¾ç½®å›¾ç‰‡çš„å¤§å°ï¼Œä½¿å…¶é€‚åº”åƒç´ å— */</span><br>  <span class="hljs-attribute">background-position</span>: center; <span class="hljs-comment">/* å›¾ç‰‡å±…ä¸­å¯¹é½ */</span><br>&#125;<br><br><span class="hljs-comment">/* .food &#123;</span><br><span class="hljs-comment">  background-color: rgb(182, 111, 139);</span><br><span class="hljs-comment">  border: 0.25vmin solid gray;</span><br><span class="hljs-comment">&#125; */</span><br><br><span class="hljs-selector-class">.food</span> &#123;<br>  <span class="hljs-attribute">background-image</span>: <span class="hljs-built_in">url</span>(<span class="hljs-string">&#x27;th.jpg&#x27;</span>); <span class="hljs-comment">/* æ›¿æ¢ä¸ºä½ çš„è›‡å¤´å›¾ç‰‡è·¯å¾„ */</span><br>  <span class="hljs-attribute">background-size</span>: <span class="hljs-number">4.76vmin</span> <span class="hljs-number">4.76vmin</span>; <span class="hljs-comment">/* è®¾ç½®å›¾ç‰‡çš„å¤§å°ï¼Œä½¿å…¶é€‚åº”åƒç´ å— */</span><br>&#125;<br><br><span class="hljs-selector-id">#game-start</span>, <span class="hljs-selector-id">#game-over</span> &#123;<br>  <span class="hljs-attribute">position</span>: absolute;<br>  <span class="hljs-attribute">top</span>: <span class="hljs-number">50%</span>;<br>  <span class="hljs-attribute">left</span>: <span class="hljs-number">50%</span>;<br>  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translate</span>(-<span class="hljs-number">50%</span>, -<span class="hljs-number">50%</span>);<br>  <span class="hljs-attribute">display</span>: flex;<br>  <span class="hljs-attribute">justify-content</span>: center;<br>  <span class="hljs-attribute">align-items</span>: center;<br>  <span class="hljs-attribute">flex-direction</span>: column;<br>  <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.8</span>); <span class="hljs-comment">/* æ·»åŠ åŠé€æ˜èƒŒæ™¯ */</span><br>  <span class="hljs-attribute">color</span>: white; <span class="hljs-comment">/* æ–‡å­—é¢œè‰² */</span><br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;<br>  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">10px</span>;<br>  <span class="hljs-attribute">text-align</span>: center;<br>  <span class="hljs-attribute">z-index</span>: <span class="hljs-number">1000</span>; <span class="hljs-comment">/* ç¡®ä¿å®ƒä»¬åœ¨å…¶ä»–å†…å®¹ä¸Šé¢ */</span><br>&#125;<br><br><span class="hljs-selector-id">#game-start</span> &#123;<br>  <span class="hljs-attribute">display</span>: flex;<br>&#125;<br><br><span class="hljs-selector-id">#game-over</span> &#123;<br>  <span class="hljs-attribute">display</span>: none;<br>  <span class="hljs-comment">/* display: flex; */</span><br>&#125;<br><br><span class="hljs-selector-tag">button</span> &#123;<br>  <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20px</span>;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span> <span class="hljs-number">20px</span>;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="game-js"><a href="#game-js" class="headerlink" title="game.js"></a>game.js</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">SNAKE_SPEED</span> = <span class="hljs-number">5</span>;<br><br><span class="hljs-keyword">const</span> gameBoard = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;game-board&#x27;</span>);<br><span class="hljs-keyword">const</span> gameStartOverlay = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;game-start&#x27;</span>);<br><span class="hljs-keyword">const</span> gameOverOverlay = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;game-over&#x27;</span>);<br><br><span class="hljs-keyword">let</span> isGameRunning = <span class="hljs-literal">false</span>;<br><span class="hljs-keyword">let</span> gameInterval;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">init</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;start-button&#x27;</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;click&#x27;</span>, startGame);<br>  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;restart-button&#x27;</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;click&#x27;</span>, restartGame);<br>&#125;;<br><br><span class="hljs-variable language_">window</span>.<span class="hljs-property">onload</span> = init;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">main</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>  <span class="hljs-keyword">if</span> (!isGameRunning) <span class="hljs-keyword">return</span>;<br>  <span class="hljs-title function_">update</span>();<br>  <span class="hljs-title function_">draw</span>();<br>  <span class="hljs-keyword">if</span> (<span class="hljs-title function_">checkGameOver</span>()) &#123;<br>    <span class="hljs-title function_">gameOver</span>();<br>  &#125;<br>  <span class="hljs-comment">// TODO 4.3, 4.4: Add Game Over Alert, and clear interval!</span><br>&#125;;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">startGame</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Starting game...&#x27;</span>);<br>  isGameRunning = <span class="hljs-literal">true</span>;<br>  gameStartOverlay.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">&#x27;none&#x27;</span>; <span class="hljs-comment">// éšè—æ¸¸æˆå¼€å§‹ç•Œé¢</span><br>  gameOverOverlay.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">&#x27;none&#x27;</span>; <span class="hljs-comment">// éšè—æ¸¸æˆç»“æŸç•Œé¢</span><br>  gameBoard.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">&#x27;&#x27;</span>; <span class="hljs-comment">// æ¸…ç©ºæ¸¸æˆæ¿</span><br>  <span class="hljs-title function_">resetGame</span>(); <span class="hljs-comment">// é‡ç½®æ¸¸æˆçŠ¶æ€</span><br>  <span class="hljs-keyword">if</span> (gameInterval) <span class="hljs-built_in">clearInterval</span>(gameInterval); <span class="hljs-comment">// æ¸…é™¤ä¹‹å‰çš„å®šæ—¶å™¨</span><br>  gameInterval = <span class="hljs-built_in">setInterval</span>(main, <span class="hljs-number">1000</span> / <span class="hljs-variable constant_">SNAKE_SPEED</span>); <span class="hljs-comment">// å¯åŠ¨æ–°çš„æ¸¸æˆå¾ªç¯</span><br>&#125;;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">restartGame</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Restarting game...&#x27;</span>);<br>  isGameRunning = <span class="hljs-literal">true</span>;<br>  gameOverOverlay.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">&#x27;none&#x27;</span>; <span class="hljs-comment">// éšè—æ¸¸æˆç»“æŸç•Œé¢</span><br>  gameBoard.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">&#x27;&#x27;</span>; <span class="hljs-comment">// æ¸…ç©ºæ¸¸æˆæ¿</span><br>  <span class="hljs-title function_">resetGame</span>(); <span class="hljs-comment">// é‡ç½®æ¸¸æˆçŠ¶æ€</span><br>  <span class="hljs-keyword">if</span> (gameInterval) <span class="hljs-built_in">clearInterval</span>(gameInterval); <span class="hljs-comment">// æ¸…é™¤ä¹‹å‰çš„å®šæ—¶å™¨</span><br>  gameInterval = <span class="hljs-built_in">setInterval</span>(main, <span class="hljs-number">1000</span> / <span class="hljs-variable constant_">SNAKE_SPEED</span>); <span class="hljs-comment">// å¯åŠ¨æ–°çš„æ¸¸æˆå¾ªç¯</span><br>&#125;;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">gameOver</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Game Over&#x27;</span>); <br>  isGameRunning = <span class="hljs-literal">false</span>;<br>  <span class="hljs-built_in">clearInterval</span>(gameInterval); <span class="hljs-comment">// åœæ­¢æ¸¸æˆå¾ªç¯</span><br>  gameOverOverlay.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">&#x27;block&#x27;</span>; <span class="hljs-comment">// æ˜¾ç¤ºæ¸¸æˆç»“æŸç•Œé¢</span><br>&#125;;<br><span class="hljs-comment">// TODO 4.4: Define the interval ID</span><br><span class="hljs-comment">// HINT: ONLY EDIT THE LINE BELOW!</span><br><span class="hljs-comment">//setInterval(main, 1000 / SNAKE_SPEED);</span><br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">update</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Updating&#x27;</span>);<br>  <span class="hljs-title function_">updateSnake</span>();<br>  <span class="hljs-title function_">updateFood</span>();<br>  <span class="hljs-comment">// TODO 4.2: Update Game State</span><br>&#125;;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">draw</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>  gameBoard.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">&#x27;&#x27;</span>;<br>  <span class="hljs-title function_">drawSnake</span>(gameBoard);<br>  <span class="hljs-title function_">drawFood</span>(gameBoard);<br>&#125;;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">checkGameOver</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">snakeOutOfBounds</span>() || <span class="hljs-title function_">snakeIntersectSelf</span>(); <span class="hljs-comment">// æ£€æŸ¥æ¸¸æˆç»“æŸæ¡ä»¶</span><br>&#125;;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">resetGame</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>  <span class="hljs-comment">// é‡ç½®è›‡çš„ä½ç½®</span><br>  snakeBody = [<br>    &#123; <span class="hljs-attr">x</span>: <span class="hljs-number">11</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">11</span> &#125;,<br>    &#123; <span class="hljs-attr">x</span>: <span class="hljs-number">11</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">10</span> &#125;,<br>    &#123; <span class="hljs-attr">x</span>: <span class="hljs-number">11</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">9</span> &#125;<br>  ];<br>  <br>  <span class="hljs-comment">// é‡ç½®é£Ÿç‰©çš„ä½ç½®</span><br>  food = <span class="hljs-title function_">getNewFoodPosition</span>();<br>  <br>  <span class="hljs-comment">// å¯ä»¥æ·»åŠ å…¶ä»–åˆå§‹åŒ–é€»è¾‘</span><br>&#125;;<br><br><br><span class="hljs-comment">// TODO 4.1: Create a function that checks if the game is over</span><br><br></code></pre></td></tr></table></figure><h4 id="food-js"><a href="#food-js" class="headerlink" title="food.js"></a>food.js</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> food = &#123; <span class="hljs-attr">x</span>: <span class="hljs-number">4</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">16</span> &#125;;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">updateFood</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-title function_">onSnake</span>(food)) &#123;<br>    <span class="hljs-title function_">growSnake</span>();<br>    food = <span class="hljs-title function_">getNewFoodPosition</span>();<br>  &#125;<br>&#125;;<br><br><span class="hljs-comment">// Don&#x27;t change me!</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">drawFood</span> = (<span class="hljs-params">gameBoard</span>) =&gt; &#123;<br>  <span class="hljs-keyword">const</span> foodElement = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&#x27;div&#x27;</span>);<br>  foodElement.<span class="hljs-property">style</span>.<span class="hljs-property">gridRowStart</span> = food.<span class="hljs-property">y</span>;<br>  foodElement.<span class="hljs-property">style</span>.<span class="hljs-property">gridColumnStart</span> = food.<span class="hljs-property">x</span>;<br>  foodElement.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">&#x27;food&#x27;</span>);<br>  gameBoard.<span class="hljs-title function_">appendChild</span>(foodElement);<br>&#125;;<br><br></code></pre></td></tr></table></figure><h4 id="snake-js"><a href="#snake-js" class="headerlink" title="snake.js"></a>snake.js</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> snakeBody = [<br>  &#123; <span class="hljs-attr">x</span>: <span class="hljs-number">11</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">11</span> &#125;,<br>  &#123; <span class="hljs-attr">x</span>: <span class="hljs-number">11</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">10</span> &#125;,<br>  &#123; <span class="hljs-attr">x</span>: <span class="hljs-number">11</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">9</span> &#125;,<br>];<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">updateSnake</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>  <span class="hljs-comment">// Remove tail segment</span><br>  snakeBody.<span class="hljs-title function_">pop</span>();<br><br>  <span class="hljs-comment">// Add new head segment</span><br>  <span class="hljs-keyword">const</span> newHead = &#123; ...snakeBody[<span class="hljs-number">0</span>] &#125;;<br>  <span class="hljs-keyword">const</span> snakeDirection = <span class="hljs-title function_">getInputDirection</span>();<br><br>  newHead.<span class="hljs-property">x</span> += snakeDirection.<span class="hljs-property">x</span>;<br>  newHead.<span class="hljs-property">y</span> += snakeDirection.<span class="hljs-property">y</span>;<br><br>  <span class="hljs-keyword">if</span> (<span class="hljs-title function_">outOfBounds</span>(newHead)) &#123;<br>    <span class="hljs-title function_">gameOver</span>(); <span class="hljs-comment">// å¤„ç†æ¸¸æˆç»“æŸé€»è¾‘</span><br>    <span class="hljs-keyword">return</span>;<br>  &#125;<br><br>  snakeBody.<span class="hljs-title function_">unshift</span>(newHead);<br>&#125;;<br><br><span class="hljs-comment">// Don&#x27;t change this function!</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">drawSnake</span> = (<span class="hljs-params">gameBoard</span>) =&gt; &#123;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; snakeBody.<span class="hljs-property">length</span>; i++) &#123;<br>    <span class="hljs-keyword">const</span> segment = snakeBody[i];<br>    <span class="hljs-keyword">const</span> snakeElement = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&#x27;div&#x27;</span>);<br>    snakeElement.<span class="hljs-property">style</span>.<span class="hljs-property">gridRowStart</span> = segment.<span class="hljs-property">y</span>;<br>    snakeElement.<span class="hljs-property">style</span>.<span class="hljs-property">gridColumnStart</span> = segment.<span class="hljs-property">x</span>;<br>    <span class="hljs-comment">// if (i === 0) &#123;</span><br>    <span class="hljs-comment">//   snakeElement.classList.add(&#x27;snake-head&#x27;);</span><br>    <span class="hljs-comment">// &#125; else &#123;</span><br>    <span class="hljs-comment">//   snakeElement.classList.add(&#x27;snake&#x27;);</span><br>    <span class="hljs-comment">// &#125;</span><br>    snakeElement.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">&#x27;snake&#x27;</span>);<br>    gameBoard.<span class="hljs-title function_">appendChild</span>(snakeElement);<br>  &#125;<br>&#125;;<br><br></code></pre></td></tr></table></figure><h4 id="snakeUtils-js"><a href="#snakeUtils-js" class="headerlink" title="snakeUtils.js"></a>snakeUtils.js</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">GRID_SIZE</span> = <span class="hljs-number">21</span>;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">onSnake</span> = (<span class="hljs-params">position</span>) =&gt; &#123;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; snakeBody.<span class="hljs-property">length</span>; i++) &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-title function_">equalPositions</span>(position, snakeBody[i])) &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>&#125;;<br><br><span class="hljs-comment">// const gameOver = () =&gt; &#123;</span><br><span class="hljs-comment">//   console.log(&#x27;Game Over&#x27;);</span><br><span class="hljs-comment">//   // æ¸…ç©ºæ¸¸æˆæ¿</span><br><span class="hljs-comment">//   gameBoard.innerHTML = &#x27;&#x27;;</span><br><span class="hljs-comment">// &#125;;</span><br><br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">equalPositions</span> = (<span class="hljs-params">pos1, pos2</span>) =&gt; &#123;<br>  <span class="hljs-keyword">return</span> pos1.<span class="hljs-property">x</span> === pos2.<span class="hljs-property">x</span> &amp;&amp; pos1.<span class="hljs-property">y</span> === pos2.<span class="hljs-property">y</span>;<br>&#125;;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">growSnake</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>  snakeBody.<span class="hljs-title function_">push</span>(&#123; ...snakeBody[snakeBody.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>] &#125;);<br>&#125;;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">getNewFoodPosition</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>  <span class="hljs-keyword">let</span> randomFoodPosition = <span class="hljs-title function_">randomGridPosition</span>();<br>  <span class="hljs-keyword">while</span> (<span class="hljs-title function_">onSnake</span>(randomFoodPosition)) &#123;<br>    randomFoodPosition = <span class="hljs-title function_">randomGridPosition</span>();<br>  &#125;<br>  <span class="hljs-keyword">return</span> randomFoodPosition;<br>&#125;;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">randomGridPosition</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>  <span class="hljs-keyword">return</span> &#123;<br>    <span class="hljs-attr">x</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-variable constant_">GRID_SIZE</span>) + <span class="hljs-number">1</span>,<br>    <span class="hljs-attr">y</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-variable constant_">GRID_SIZE</span>) + <span class="hljs-number">1</span>,<br>  &#125;;<br>&#125;;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">outOfBounds</span> = (<span class="hljs-params">position</span>) =&gt; &#123;<br>    <span class="hljs-keyword">return</span> position.<span class="hljs-property">x</span> &lt; <span class="hljs-number">1</span> || position.<span class="hljs-property">x</span> &gt; <span class="hljs-variable constant_">GRID_SIZE</span> || position.<span class="hljs-property">y</span> &lt; <span class="hljs-number">1</span> || position.<span class="hljs-property">y</span> &gt; <span class="hljs-variable constant_">GRID_SIZE</span>;<br>&#125;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">snakeOutOfBounds</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">outOfBounds</span>(snakeBody[<span class="hljs-number">0</span>]);<br>&#125;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">snakeIntersectSelf</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt; snakeBody.<span class="hljs-property">length</span>; i++) &#123;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-title function_">equalPositions</span>(snakeBody[<span class="hljs-number">0</span>], snakeBody[i])) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="input-js"><a href="#input-js" class="headerlink" title="input.js"></a>input.js</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> inputDirection = &#123; <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">1</span> &#125;;<br><br><span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;keydown&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">if</span> (event.<span class="hljs-property">key</span> === <span class="hljs-string">&#x27;ArrowUp&#x27;</span> &amp;&amp; inputDirection.<span class="hljs-property">x</span> !== <span class="hljs-number">0</span>) &#123;<br>    inputDirection = &#123; <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: -<span class="hljs-number">1</span> &#125;;<br>  &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (event.<span class="hljs-property">key</span> === <span class="hljs-string">&#x27;ArrowDown&#x27;</span> &amp;&amp; inputDirection.<span class="hljs-property">x</span> !== <span class="hljs-number">0</span>) &#123;<br>    inputDirection = &#123; <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">1</span> &#125;;<br>  &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (event.<span class="hljs-property">key</span> === <span class="hljs-string">&#x27;ArrowRight&#x27;</span> &amp;&amp; inputDirection.<span class="hljs-property">y</span> !== <span class="hljs-number">0</span>) &#123;<br>    inputDirection = &#123; <span class="hljs-attr">x</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span> &#125;;<br>  &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (event.<span class="hljs-property">key</span> === <span class="hljs-string">&#x27;ArrowLeft&#x27;</span> &amp;&amp; inputDirection.<span class="hljs-property">y</span> !== <span class="hljs-number">0</span>) &#123;<br>    inputDirection = &#123; <span class="hljs-attr">x</span>: -<span class="hljs-number">1</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span> &#125;;<br>  &#125;<br>&#125;);<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">getInputDirection</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>  <span class="hljs-keyword">return</span> inputDirection;<br>&#125;;<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>webå¼€å‘è¯¾ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>web</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>webå¼€å‘è¯¾ç¨‹3--HTML and CSS</title>
    <link href="/2024/08/04/web%E5%BC%80%E5%8F%91%E8%AF%BE%E7%A8%8B3--HTML-and-CSS/"/>
    <url>/2024/08/04/web%E5%BC%80%E5%8F%91%E8%AF%BE%E7%A8%8B3--HTML-and-CSS/</url>
    
    <content type="html"><![CDATA[<p>æœ¬æ¬¡è¯¾ç¨‹å­¦ä¹ HTMLå’ŒCSS</p><span id="more"></span><h3 id="ä¸€ã€HTML"><a href="#ä¸€ã€HTML" class="headerlink" title="ä¸€ã€HTML"></a>ä¸€ã€HTML</h3><p>1ã€</p><p>Hypertext markup languageï¼ˆè¶…æ–‡æœ¬æ ‡è®°è¯­è¨€ï¼‰</p><p>æ˜¯ç½‘ç»œæµè§ˆå™¨ç”¨æ¥æè¿°ç½‘é¡µå†…å®¹å’Œç»“æ„çš„è¯­è¨€ï¼Œæ˜¯ç½‘é¡µçš„éª¨æ¶å’Œæ ¸å¿ƒç»“æ„ï¼Œä¹Ÿå¯ä»¥æŠŠå®ƒçœ‹ä½œåµŒå¥—çš„ç›’å­ã€‚</p><p>divå°±åƒä¸€ä¸ªç©ºç™½çš„ç”»å¸ƒ..</p><p>but..accessibility, not descriptive. Itâ€™s ambiguousï¼ˆæ¨¡ç³Šçš„ï¼‰, hard to organize, hard to targetï¼ˆå®šä½ï¼‰, bad style, too clutteredï¼ˆä¹±ï¼‰, itâ€™s more work.</p><p>åˆ©ç”¨<strong>MDN</strong>ç½‘ç«™å­¦ä¹ ï¼æ›´æ–°é€Ÿåº¦å¾ˆå¿«â€¦</p><h3 id="äºŒã€CSS"><a href="#äºŒã€CSS" class="headerlink" title="äºŒã€CSS"></a>äºŒã€CSS</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">div</span> &#123;<br><span class="hljs-attribute">color</span>: red;<br>   <span class="hljs-attribute">font-family</span>: Arial;<br>   <span class="hljs-attribute">font-size</span>: <span class="hljs-number">24pt</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>ID  vs  Class</p><p>Only one   VS    Multiple</p><p>å»ºè®®åªä½¿ç”¨ç±»</p><p>utility classes å®ç”¨ç±»ï¼šåªä½¿ç”¨ä¸€ä¸ªCSSå±æ€§ä¿®æ”¹</p><p>fonts.google.com  å­—ä½“ç½‘é¡µ</p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/976789a0-8f9b-11eb-85f6-6fac77c0c9b3.png" alt="é¢è¯•å®˜ï¼šè¯´è¯´ä½ å¯¹ç›’å­æ¨¡å‹çš„ç†è§£? | webå‰ç«¯é¢è¯•- é¢è¯•å®˜ç³»åˆ—" style="zoom: 50%;" /><p>å®šä¹‰ç©ºé—´å…ƒç´ çš„æ–¹å¼</p><p>weblab.to&#x2F;flex</p>]]></content>
    
    
    <categories>
      
      <category>webå¼€å‘è¯¾ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>web</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>webå¼€å‘è¯¾ç¨‹2--Command line and Git</title>
    <link href="/2024/08/04/web%E5%BC%80%E5%8F%91%E8%AF%BE%E7%A8%8B2--Command-line-and-Git/"/>
    <url>/2024/08/04/web%E5%BC%80%E5%8F%91%E8%AF%BE%E7%A8%8B2--Command-line-and-Git/</url>
    
    <content type="html"><![CDATA[<img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240804145935038.png" alt="image-20240804145935038" style="zoom:80%;" /><p>go over Command line  and use command lines to run some Git commands and learn about Git as well.</p><span id="more"></span><h3 id="ä¸€ã€å‘½ä»¤è¡Œè¯­å¥"><a href="#ä¸€ã€å‘½ä»¤è¡Œè¯­å¥" class="headerlink" title="ä¸€ã€å‘½ä»¤è¡Œè¯­å¥"></a>ä¸€ã€å‘½ä»¤è¡Œè¯­å¥</h3><p>pwdï¼šprint working directoryï¼ˆå½“å‰å·¥ä½œç›®å½•ï¼‰<img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240804150539650.png" alt="image-20240804150539650" style="zoom: 67%;" /></p><p>rm file nameï¼šremove</p><p>touch f nï¼šcreat </p><p>mkdir folder name:creat a folder</p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240804151036413.png" alt="image-20240804151036413" style="zoom: 67%;" /><h3 id="äºŒã€Gitâ€”â€”A-version-control-system"><a href="#äºŒã€Gitâ€”â€”A-version-control-system" class="headerlink" title="äºŒã€Gitâ€”â€”A version-control system"></a>äºŒã€Gitâ€”â€”A version-control system</h3><h4 id="ï¼ˆ1ï¼‰problems-with-coding-in-projects"><a href="#ï¼ˆ1ï¼‰problems-with-coding-in-projects" class="headerlink" title="ï¼ˆ1ï¼‰problems with coding in projects"></a>ï¼ˆ1ï¼‰problems with coding in projects</h4><ol><li>Synchronizationï¼ˆåŒæ­¥ï¼‰ of files (no one knows which file is the most up-to-date)</li><li>Collaborationï¼ˆåˆä½œï¼‰ of files (if there are two version of the same file, both of them fix a different problem, itâ€™s hard to know how to join the files)</li><li>Version history (if we break something, we canâ€™t go back to a working copy)</li></ol><h4 id="ï¼ˆ2ï¼‰what-does-git-doï¼Ÿ-åŸºæœ¬åŸç†"><a href="#ï¼ˆ2ï¼‰what-does-git-doï¼Ÿ-åŸºæœ¬åŸç†" class="headerlink" title="ï¼ˆ2ï¼‰what does git doï¼Ÿ(åŸºæœ¬åŸç†)"></a>ï¼ˆ2ï¼‰what does git doï¼Ÿ(åŸºæœ¬åŸç†)</h4><p>track changes  by doing math(computing the <strong>difference</strong> every time you make changes)</p><h4 id="ï¼ˆ3ï¼‰some-terminologyï¼ˆåŸºæœ¬æœ¯è¯­ï¼‰"><a href="#ï¼ˆ3ï¼‰some-terminologyï¼ˆåŸºæœ¬æœ¯è¯­ï¼‰" class="headerlink" title="ï¼ˆ3ï¼‰some terminologyï¼ˆåŸºæœ¬æœ¯è¯­ï¼‰"></a>ï¼ˆ3ï¼‰some terminologyï¼ˆåŸºæœ¬æœ¯è¯­ï¼‰</h4><p>1.<strong>Repository</strong>â€”â€” a set of files to track changes on(gitä»“åº“)</p><p>2.<strong>Commit</strong>â€”â€”a set of  changes in a repository transitioning from one version to the next</p><p>3.<strong>Log</strong>â€”â€”the set of commits for each version of the repository</p><ul><li>commit (n.)- a packaged set of changes</li><li>push (v.)- to send commits to the git server</li><li>pull (V.)- to get most updated files from the git server</li></ul><p>           </p><h3 id="ä¸‰ã€"><a href="#ä¸‰ã€" class="headerlink" title="ä¸‰ã€"></a>ä¸‰ã€</h3><p>git init</p><p>git status</p><p>git remote add origin <code>https://github.com/Yaodeer/catbook-react</code>(è¿æ¥è¿œç¨‹ä»“åº“)</p><p>git push </p><p>ä¸€äº›å‘½ä»¤è¡Œè¯­å¥ï¼š</p><p><a href="https://training.github.com/downloads/github-git-cheat-sheet/">GitHub Git Cheat Sheet - GitHub Cheatsheets</a></p><p>git cloneäº†å·¥ç¨‹åˆ°ç”µè„‘ä¸Šå¹¶è¿æ¥åˆ°äº†æˆ‘è‡ªå·±çš„ä»“åº“ï¼Œé»˜è®¤åˆ†æ”¯mainï¼š</p><p><code>git clone https://github.com/weblab-workshops/catbook-react.git</code></p><h3 id=""><a href="#" class="headerlink" title=""></a></h3>]]></content>
    
    
    <categories>
      
      <category>webå¼€å‘è¯¾ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>web</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>webå¼€å‘è¯¾ç¨‹1--kick off</title>
    <link href="/2024/08/04/web%E5%BC%80%E5%8F%91%E8%AF%BE%E7%A8%8B1--kick-off/"/>
    <url>/2024/08/04/web%E5%BC%80%E5%8F%91%E8%AF%BE%E7%A8%8B1--kick-off/</url>
    
    <content type="html"><![CDATA[<p>å‡†å¤‡èŠ±æ—¶é—´è·Ÿå­¦ä¸€ä¸‹MITçš„webå¼€å‘è¯¾ç¨‹ï¼Œå¸Œæœ›å¯ä»¥åšæŒä¸‹å»ã€‚æœ¬ç¯‡ä¸»è¦æ˜¯ç€æ‰‹å­¦ä¹ ä¹‹å‰éœ€è¦äº†è§£çš„å†…å®¹ã€‚</p><span id="more"></span><p>ä½œä¸šé“¾æ¥ï¼š<a href="https://gaudy-basketball-f66.notion.site/web-lab-Students-Page-2f46514f5dd441acbde22a3ae36d60ff">web.lab Students Page! (notion.site)</a></p><h3 id="ä¸€ã€è¯¾ç¨‹å®‰æ’"><a href="#ä¸€ã€è¯¾ç¨‹å®‰æ’" class="headerlink" title="ä¸€ã€è¯¾ç¨‹å®‰æ’"></a>ä¸€ã€è¯¾ç¨‹å®‰æ’</h3><p>week1â€”â€”build an app from scratch together</p><p>week2â€”â€”advanced topics</p><p>week3â€”â€”code code code</p><p>week4â€”â€”CODE CODE CODE</p><h3 id="äºŒã€ç®€è¿°"><a href="#äºŒã€ç®€è¿°" class="headerlink" title="äºŒã€ç®€è¿°"></a>äºŒã€ç®€è¿°</h3><p>HTMLâ€”â€”build the structure of your website that contains all the components(ç»„ä»¶) that we see and all the informationã€all the text images things like that.</p><p>CSSï¼ˆCascading Style Sheetså±‚å æ ·å¼è¡¨ï¼‰â€”â€”basically tells the website how to look,how to make it look good</p><p>JavaScriptâ€”â€”provides any sort of motion or information of fetching,so it can make your website more interactive and functional(åŠŸèƒ½æ€§çš„)</p><p>Assetsï¼ˆèµ„æºï¼‰â€”â€”like images,videos</p><h3 id="ä¸‰ã€è¦æ±‚"><a href="#ä¸‰ã€è¦æ±‚" class="headerlink" title="ä¸‰ã€è¦æ±‚"></a>ä¸‰ã€è¦æ±‚</h3><p>1ã€Functionally</p><p>2ã€Usability</p><p>3ã€Aesthetics</p><p>4ã€Concept Exection</p>]]></content>
    
    
    <categories>
      
      <category>webå¼€å‘è¯¾ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>web</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>springbootå­¦ä¹ è®°å½•</title>
    <link href="/2024/07/31/springboot%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/"/>
    <url>/2024/07/31/springboot%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<p>.<span id="more"></span></p><h3 id="ä¸€ã€å…¥é—¨"><a href="#ä¸€ã€å…¥é—¨" class="headerlink" title="ä¸€ã€å…¥é—¨"></a>ä¸€ã€å…¥é—¨</h3><h4 id="1ã€æ¦‚è¿°"><a href="#1ã€æ¦‚è¿°" class="headerlink" title="1ã€æ¦‚è¿°"></a>1ã€æ¦‚è¿°</h4><p>1ï¼‰æœç´¢springboot.ioæŸ¥æ‰¾ä½¿ç”¨æ‰‹å†Œï¼ˆå…¨è‹±çš„æˆ‘å¾ˆéš¾çœ‹æ‡‚â€¦â€¦ï¼‰</p><p>2ï¼‰springbootæä¾›äº†ä¸€ç§å¿«é€Ÿå¼€å‘springé¡¹ç›®çš„æ–¹å¼ï¼ˆè‡ªåŠ¨é…ç½®ã€èµ·æ­¥ä¾èµ–ï¼ˆMavenï¼‰ï¼‰</p><p>3ï¼‰springbooté¡¹ç›®æ„å»ºæ—¶é‡‡ç”¨jarçš„æ‰“åŒ…æ–¹å¼</p><p>4ï¼‰start.spring.io   åœ¨å®˜ç½‘é…ç½®spring booté¡¹ç›®</p><p>5ï¼‰soutâ€”â€”system.out.println</p><h4 id="2ã€å®ç°åŸºæœ¬æ¡ˆä¾‹"><a href="#2ã€å®ç°åŸºæœ¬æ¡ˆä¾‹" class="headerlink" title="2ã€å®ç°åŸºæœ¬æ¡ˆä¾‹"></a>2ã€å®ç°åŸºæœ¬æ¡ˆä¾‹</h4><p>æ­å»ºspringbootå·¥ç¨‹ï¼Œå®šä¹‰HelloController.hello()æ–¹æ³•ï¼Œè¿”å›æŒ‡å®šå†…å®¹ã€‚</p><p>1ï¼‰åˆ›å»ºMavené¡¹ç›®</p><p>2ï¼‰å¯¼å…¥SpringBootèµ·æ­¥ä¾èµ–ï¼ˆåˆ›å»ºé¡¹ç›®æ—¶å‹¾é€‰SpringWebå’ŒThymeleafä¾èµ–ï¼‰</p><p>3ï¼‰å®šä¹‰Controller</p><p>4ï¼‰ç¼–å†™å¼•å¯¼ç±»ï¼ˆç°åœ¨ç‰ˆæœ¬è‡ªåŠ¨ç”Ÿæˆï¼Œæ˜¯Springbooté¡¹ç›®çš„å…¥å£ï¼‰</p><p>5ï¼‰å¯åŠ¨æµ‹è¯•</p><h4 id="3ã€èµ·æ­¥ä¾èµ–åŸç†"><a href="#3ã€èµ·æ­¥ä¾èµ–åŸç†" class="headerlink" title="3ã€èµ·æ­¥ä¾èµ–åŸç†"></a>3ã€èµ·æ­¥ä¾èµ–åŸç†</h4><p>1ï¼‰åœ¨spring-boot-starter-parentä¸­å®šä¹‰äº†å„ç§æŠ€æœ¯çš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œç»„åˆäº†ä¸€å¥—æœ€ä¼˜æ­é…çš„æŠ€æœ¯ç‰ˆæœ¬ã€‚</p><p>2ï¼‰åœ¨å„ç§starterä¸­ï¼Œå®šä¹‰äº†å®Œæˆè¯¥åŠŸèƒ½éœ€è¦çš„åæ ‡åˆé›†ï¼Œå…¶ä¸­å¤§éƒ¨åˆ†ç‰ˆæœ¬ä¿¡æ¯æ¥è‡ªäºçˆ¶å·¥ç¨‹ã€‚</p><p>3ï¼‰æˆ‘ä»¬çš„å¿ è¯šç»§æ‰¿parentï¼Œå¼•å…¥starteråï¼Œé€šè¿‡ä¾èµ–ä¼ é€’ï¼Œå°±å¯ä»¥ç®€å•æ–¹ä¾¿è·å¾—éœ€è¦çš„jaråŒ…ï¼Œå¹¶ä¸”ä¸ä¼šå­˜åœ¨ç‰ˆæœ¬å†²çªç­‰é—®é¢˜ã€‚</p><h3 id="äºŒã€é…ç½®æ–‡ä»¶"><a href="#äºŒã€é…ç½®æ–‡ä»¶" class="headerlink" title="äºŒã€é…ç½®æ–‡ä»¶"></a>äºŒã€é…ç½®æ–‡ä»¶</h3><p>spring bootæ˜¯åŸºäºçº¦å®šçš„ï¼Œæ‰€ä»¥å¾ˆå¤šé…ç½®éƒ½æœ‰é»˜è®¤å€¼ï¼Œå¦‚æœæƒ³ç”¨è‡ªå·±çš„é…ç½®æ›¿æ¢é»˜è®¤å€¼ï¼Œå°±å¯ä»¥ç”¨application.propertiesæˆ–è€…application.ymlï¼ˆ&#x2F;yamlï¼‰è¿›è¡Œé…ç½®ã€‚</p><h4 id="1ã€ä¸¤ç§é…ç½®æ–‡ä»¶"><a href="#1ã€ä¸¤ç§é…ç½®æ–‡ä»¶" class="headerlink" title="1ã€ä¸¤ç§é…ç½®æ–‡ä»¶"></a>1ã€ä¸¤ç§é…ç½®æ–‡ä»¶</h4><p>propertiesï¼š   server.port&#x3D;8085ï¼ˆé”®&#x3D;å€¼ï¼‰</p><p>yml&#x2F;yaml:          server:                           ï¼ˆæ¢è¡Œç¼©è¿›ï¼‰</p><p>â€‹                      port: 8080</p><p>åœ¨åŒä¸€çº§ç›®å½•ä¸‹çš„ä¼˜å…ˆçº§ï¼šproperties&gt;yml&gt;yaml</p><h4 id="2ã€YAMLæ–‡ä»¶æ˜¯ä»¥æ•°æ®ä¸ºæ ¸å¿ƒçš„ï¼Œæ¯”xmlæ›´åŠ ç®€æ´ï¼Œç›¸å¯¹äºpropertiesæ¥è¯´æ›´å®¹æ˜“çœ‹å‡ºé…ç½®å±äºå“ªä¸ªå±‚çº§ã€‚"><a href="#2ã€YAMLæ–‡ä»¶æ˜¯ä»¥æ•°æ®ä¸ºæ ¸å¿ƒçš„ï¼Œæ¯”xmlæ›´åŠ ç®€æ´ï¼Œç›¸å¯¹äºpropertiesæ¥è¯´æ›´å®¹æ˜“çœ‹å‡ºé…ç½®å±äºå“ªä¸ªå±‚çº§ã€‚" class="headerlink" title="2ã€YAMLæ–‡ä»¶æ˜¯ä»¥æ•°æ®ä¸ºæ ¸å¿ƒçš„ï¼Œæ¯”xmlæ›´åŠ ç®€æ´ï¼Œç›¸å¯¹äºpropertiesæ¥è¯´æ›´å®¹æ˜“çœ‹å‡ºé…ç½®å±äºå“ªä¸ªå±‚çº§ã€‚"></a>2ã€<strong>YAML</strong>æ–‡ä»¶æ˜¯ä»¥æ•°æ®ä¸ºæ ¸å¿ƒçš„ï¼Œæ¯”xmlæ›´åŠ ç®€æ´ï¼Œç›¸å¯¹äºpropertiesæ¥è¯´æ›´å®¹æ˜“çœ‹å‡ºé…ç½®å±äºå“ªä¸ªå±‚çº§ã€‚</h4><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240801145449469.png" alt="image-20240801145449469" style="zoom:67%;" /><p>   1ï¼‰å¤§å°å†™æ•æ„Ÿã€2ï¼‰æ•°å€¼å‰å¿…é¡»æœ‰ç©ºæ ¼ä½œä¸ºåˆ†éš”ç¬¦ã€3ï¼‰ç¼©è¿›ä»£è¡¨å±‚çº§å…³ç³»ï¼Œä¸èƒ½ä½¿ç”¨Tabï¼Œåªèƒ½ä½¿ç”¨ç©ºæ ¼ï¼Œç©ºæ ¼æ•°ä¸é‡è¦ï¼Œåªéœ€è¦ç›¸åŒå±‚çº§çš„å…ƒç´ å·¦ä¾§å¯¹é½å³å¯ã€‚4ï¼‰#è¡¨æ³¨é‡Š</p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240801150220414.png" alt="image-20240801150220414" style="zoom:67%;" /><p>å‚æ•°å¼•ç”¨ï¼š ${key}</p><h4 id="3ã€é…ç½®æ–‡ä»¶è¯»å–"><a href="#3ã€é…ç½®æ–‡ä»¶è¯»å–" class="headerlink" title="3ã€é…ç½®æ–‡ä»¶è¯»å–"></a>3ã€é…ç½®æ–‡ä»¶è¯»å–</h4><p><em>ä¸‰ç§æ–¹æ³•</em></p><p>â€‹@value</p><p>â€‹Environment</p><p>â€‹@ConfigurationProperties:æ˜¯æˆ‘ä»¬é…ç½®æ–‡ä»¶çš„å†…å®¹å’Œå¯¹è±¡åšæ˜ å°„</p><h5 id="ï¼ˆ1ï¼‰è¯»å–å®ä¾‹æ–¹æ³•ä¸€ï¼ˆ-valueï¼‰"><a href="#ï¼ˆ1ï¼‰è¯»å–å®ä¾‹æ–¹æ³•ä¸€ï¼ˆ-valueï¼‰" class="headerlink" title="ï¼ˆ1ï¼‰è¯»å–å®ä¾‹æ–¹æ³•ä¸€ï¼ˆ@valueï¼‰"></a>ï¼ˆ1ï¼‰è¯»å–å®ä¾‹æ–¹æ³•ä¸€ï¼ˆ@valueï¼‰</h5><p>å¦‚æœæƒ³è¦åœ¨&#x2F;helloè·¯å¾„è¾“å‡ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œcontrolleræ–‡ä»¶å¯ä»¥è¿™ä¹ˆå†™ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> org.example.demoa;<br><br>#<span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Value;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RestController;<br><br><span class="hljs-meta">@RestController</span>      <span class="hljs-comment">//RESTfulæ§åˆ¶å™¨ï¼Œè¿”å›JSONæ•°æ®</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloController</span> &#123;<br>   <br>    <span class="hljs-meta">@RequestMapping(&quot;/hello&quot;)</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">hello</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Hello Spring Boot!&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å¦‚æœæƒ³è¦è¯»å–é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥å°†æ–‡ä»¶ä¿®æ”¹ä¸ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> org.example.demoa;<br><br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.Value;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RequestParam;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RestController;<br><br><span class="hljs-meta">@RestController</span>      <span class="hljs-comment">//RESTfulæ§åˆ¶å™¨ï¼Œè¿”å›JSONæ•°æ®</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloController</span> &#123;<br>   <span class="hljs-meta">@Value(&quot;$&#123;name&#125;&quot;)</span> <br>   <span class="hljs-keyword">private</span> String name;   <span class="hljs-comment">//è¯»å–nameçš„èµ‹ç»™å­—ç¬¦ä¸²name</span><br>   <span class="hljs-meta">@Value(&quot;$&#123;person.name&#125;&quot;)</span>    <br>   <span class="hljs-keyword">private</span> String name1;<br>   <span class="hljs-meta">@Value(&quot;$&#123;address[1]&#125;&quot;)</span>   <span class="hljs-comment">//è¯»å–æ•°ç»„çš„ç¬¬ä¸€ä¸ªå€¼</span><br>   <span class="hljs-keyword">private</span> String name2;<br>   <span class="hljs-meta">@RequestMapping(&quot;/hello2&quot;)</span><br>   <span class="hljs-keyword">public</span> String <span class="hljs-title function_">hello</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(name);     <span class="hljs-comment">//è¾“å‡ºnameçš„å€¼ï¼Œåœ¨æ§åˆ¶å°å¯ä»¥çœ‹åˆ°è¾“å‡º</span><br>      <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Hello Spring Boot!&quot;</span>;<br>   &#125;<br>   <br>   <span class="hljs-meta">@RequestMapping(&quot;/hello&quot;)</span><br>   <span class="hljs-keyword">public</span> String <span class="hljs-title function_">hello</span><span class="hljs-params">()</span> &#123;<br>       <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Hello Spring Boot!&quot;</span>;<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-08-01%20161321.png"  /><h5 id="ï¼ˆ2ï¼‰è¯»å–é…ç½®æ–¹æ³•äºŒï¼ˆEnvironmentï¼‰"><a href="#ï¼ˆ2ï¼‰è¯»å–é…ç½®æ–¹æ³•äºŒï¼ˆEnvironmentï¼‰" class="headerlink" title="ï¼ˆ2ï¼‰è¯»å–é…ç½®æ–¹æ³•äºŒï¼ˆEnvironmentï¼‰"></a>ï¼ˆ2ï¼‰è¯»å–é…ç½®æ–¹æ³•äºŒï¼ˆEnvironmentï¼‰</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Autowired</span><br><span class="hljs-keyword">private</span> Enviroment env;  <span class="hljs-comment">//æ³¨å…¥envå¯¹è±¡ï¼Œä¸è¦å¼„é”™åŒ…</span><br><br><span class="hljs-comment">//ä»¥ä¸‹å†…å®¹æ˜¯å†™åœ¨å‡½æ•°ä½“å†…</span><br>System.out.println(env.getProperty(<span class="hljs-string">&quot;person.name&quot;</span>));<br><br></code></pre></td></tr></table></figure><h5 id="ï¼ˆ3ï¼‰è¯»å–é…ç½®æ–‡ä»¶æ–¹æ³•ä¸‰ï¼ˆ-ConfigurationPropertiesï¼‰"><a href="#ï¼ˆ3ï¼‰è¯»å–é…ç½®æ–‡ä»¶æ–¹æ³•ä¸‰ï¼ˆ-ConfigurationPropertiesï¼‰" class="headerlink" title="ï¼ˆ3ï¼‰è¯»å–é…ç½®æ–‡ä»¶æ–¹æ³•ä¸‰ï¼ˆ@ConfigurationPropertiesï¼‰"></a>ï¼ˆ3ï¼‰è¯»å–é…ç½®æ–‡ä»¶æ–¹æ³•ä¸‰ï¼ˆ@ConfigurationPropertiesï¼‰</h5><p>æ³¨ï¼šymlæ–‡ä»¶å¦‚ä¸‹</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">8085</span><br><span class="hljs-attr">name:</span> <span class="hljs-string">abc</span><br><span class="hljs-attr">person:</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">Yaoyao</span><br>  <span class="hljs-attr">age:</span> <span class="hljs-number">21</span><br><span class="hljs-attr">address:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">beijing</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">shanghai</span><br></code></pre></td></tr></table></figure><p>1ã€ç¬¬ä¸€æ­¥ï¼Œæ–°å»ºä¸€ä¸ªpersonç±»ï¼Œæ·»åŠ å±æ€§ä¸ymlå¯¹åº”ã€‚å³é”®ç”Ÿæˆgetter å’Œ setterï¼Œç„¶åæ·»åŠ æ³¨è§£ï¼š@Componentï¼ˆè®©å®ƒè¢«è¯†åˆ«ï¼‰å’Œ@ConfigurationPropertiesã€‚æ­¤æ—¶å¦‚æœç”Ÿæˆä¸€ä¸ªPersonå¯¹è±¡å«personï¼Œå†è¾“å‡ºå®ƒçš„å€¼ï¼Œåˆ™è¾“å‡ºçš„nameå€¼æ˜¯abcï¼Œageè¯»å–ä¸äº†å› æ­¤è¾“å‡ºé»˜è®¤å€¼0.å› æ­¤ã€‚å¯¼å…¥@ConfigurationPropertiesæ—¶ï¼Œè¦ç”¨è¿™æ ·çš„å½¢å¼ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@ConfigurationProperties(prefix=&quot;person&quot;)</span><br></code></pre></td></tr></table></figure><p>2ã€controlleræ–‡ä»¶ä¸­æ³¨å…¥ä¸€ä¸ªPersonå¯¹è±¡ï¼Œç”¨@Autowiredæ³¨è§£æ¥æ³¨å…¥ã€‚å¹¶æ‰“å°ã€‚</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">@Autowired</span><br><span class="hljs-keyword">private</span> Person person;<br><br>System.<span class="hljs-keyword">out</span>.println(person);<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬ä¼šå‘ç°æ‰“å°å‡ºæ¥çš„ç»“æœæ˜¯org.example.demo.Person@347d42b6ï¼Œè¿™æ˜¯å› ä¸ºé»˜è®¤æƒ…å†µä¸‹ä¼šæ‰“å°å‡ºå¯¹è±¡çš„ç±»åå’Œå¯¹è±¡çš„å“ˆå¸Œç ã€‚å¦‚æœæƒ³è¦æ‰“å°å‡ºå¯¹è±¡çš„å…·ä½“å±æ€§å€¼ï¼Œåˆ™éœ€è¦åœ¨Personç±»ä¸­é‡å†™toStringï¼ˆï¼‰æ–¹æ³•ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Person&#123;name=&#x27;&quot;</span> + name + <span class="hljs-string">&quot;&#x27;, age=&quot;</span> + age + <span class="hljs-string">&quot;&#125;&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ­¤æ—¶æ‰“å°å‡ºæ¥çš„ç»“æœå°±å˜æˆäº†Person{name&#x3D;â€™Yaoyaoâ€™, age&#x3D;21}</p><p>3ã€è¯»å–æ•°ç»„</p><p>1ï¼‰å°†addressæ•°ç»„å¤åˆ¶åˆ°personä¸‹ï¼Œåœ¨Personé‡ŒåŠ å…¥å­—ç¬¦ä¸²æ•°ç»„private String[] address</p><p>å¹¶åœ¨Personé‡ŒåŠ å…¥getter å’Œ setterï¼Œä¸éœ€é‡å†™toStringã€‚</p><p>2ï¼‰controlleræ–‡ä»¶ä¸­è¾“å…¥person.getaddressï¼Œalt+enteré”®å¿«æ·ç”Ÿæˆå¸¸é‡ã€‚æ¥ç€æ‰“å°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">String[] address = person.getAddress();<br>    <span class="hljs-keyword">for</span>(String s : address)&#123;<br>        System.out.println(s);<br>    &#125;<br></code></pre></td></tr></table></figure><p>æ§åˆ¶å°ä¼šæ‰“å°å‡ºbeijingå’Œshanghaiã€‚</p><h4 id="4ã€profile"><a href="#4ã€profile" class="headerlink" title="4ã€profile"></a>4ã€profile</h4><p>æˆ‘ä»¬åœ¨å¼€å‘spring bootåº”ç”¨æ—¶ï¼Œé€šå¸¸åŒä¸€å¥—ç¨‹åºä¼šè¢«å®‰è£…åˆ°ä¸åŒçš„ç¯å¢ƒï¼Œæ¯”å¦‚å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç­‰ã€‚å…¶ä¸­æ•°æ®åº“åœ°å€ã€æœåŠ¡å™¨ç«¯å£ç­‰é…ç½®éƒ½ä¸åŒï¼Œå¦‚æœæ¯æ¬¡æ‰“åŒ…æ—¶éƒ½è¦ä¿®æ”¹é…ç½®æ–‡ä»¶åˆ™éå¸¸éº»çƒ¦ï¼Œprofileå°±æ˜¯ç”¨æ¥è¿›è¡ŒåŠ¨æ€é…ç½®åˆ‡æ¢çš„ã€‚</p><h5 id="ï¼ˆ1ï¼‰profileé…ç½®â€”â€”å¤šprofileæ–‡ä»¶æ–¹å¼"><a href="#ï¼ˆ1ï¼‰profileé…ç½®â€”â€”å¤šprofileæ–‡ä»¶æ–¹å¼" class="headerlink" title="ï¼ˆ1ï¼‰profileé…ç½®â€”â€”å¤šprofileæ–‡ä»¶æ–¹å¼"></a>ï¼ˆ1ï¼‰profileé…ç½®â€”â€”å¤šprofileæ–‡ä»¶æ–¹å¼</h5><p>åˆ›å»ºå¤šä¸ªpropertiesæ–‡ä»¶ï¼Œåˆ†åˆ«å‘½åä¸ºapplication-dev.propertiesï¼ˆå¼€å‘ï¼‰ã€application-test.propertiesï¼ˆæµ‹è¯•ï¼‰ã€application-pro.propertiesï¼ˆç”Ÿäº§ï¼‰ã€‚å¦‚æœåˆ†åˆ«åœ¨é‡Œé¢è®¾ç½®äº†ç«¯å£å·ï¼Œè¿™æ—¶å€™ç›´æ¥è¿è¡Œï¼Œä¼šæ˜¾ç¤ºTomcatä»æ—§è¿è¡Œåœ¨é»˜è®¤ç«¯å£8080ï¼Œå› ä¸ºæ²¡æœ‰é…ç½®æ–‡ä»¶è¢«æ¿€æ´»ã€‚å¦‚æœæƒ³è¦æ¿€æ´»æŸä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œå¯ä»¥åœ¨ä¸»é…ç½®æ–‡ä»¶ä¸­åŠ å…¥<strong>spring.profiles.active&#x3D;dev</strong>ï¼›è¿™æ—¶å°±æ¿€æ´»äº†application-dev.properties</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240801175409410.png" alt="image-20240801175409410"></p><h5 id="ï¼ˆ2ï¼‰profileé…ç½®â€”â€”ymlå¤šæ–‡æ¡£æ–¹å¼ï¼ˆæ›´åŠ ç®€æ´ï¼‰"><a href="#ï¼ˆ2ï¼‰profileé…ç½®â€”â€”ymlå¤šæ–‡æ¡£æ–¹å¼ï¼ˆæ›´åŠ ç®€æ´ï¼‰" class="headerlink" title="ï¼ˆ2ï¼‰profileé…ç½®â€”â€”ymlå¤šæ–‡æ¡£æ–¹å¼ï¼ˆæ›´åŠ ç®€æ´ï¼‰"></a>ï¼ˆ2ï¼‰profileé…ç½®â€”â€”ymlå¤šæ–‡æ¡£æ–¹å¼ï¼ˆæ›´åŠ ç®€æ´ï¼‰</h5><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240801214745825.png" alt="image-20240801214745825" style="zoom:67%;" /><p>ï¼ˆéœ€è¦æŠŠåˆšåˆšçš„é‚£äº›é…ç½®æ³¨é‡Šæ‰ï¼‰(è®°å¾—ç©ºæ ¼ï¼Œä¸è¦æŠŠserverå†™æˆseverã€‚ã€‚æœäº†ï¼Œæ‰¾åŠå¤©é”™è¯¯)</p><h5 id="ï¼ˆ3ï¼‰ä¸ä¾èµ–ideaä¿®æ”¹é…ç½®å’Œæ¿€æ´»å·¥ç¨‹"><a href="#ï¼ˆ3ï¼‰ä¸ä¾èµ–ideaä¿®æ”¹é…ç½®å’Œæ¿€æ´»å·¥ç¨‹" class="headerlink" title="ï¼ˆ3ï¼‰ä¸ä¾èµ–ideaä¿®æ”¹é…ç½®å’Œæ¿€æ´»å·¥ç¨‹"></a>ï¼ˆ3ï¼‰ä¸ä¾èµ–ideaä¿®æ”¹é…ç½®å’Œæ¿€æ´»å·¥ç¨‹</h5><p>å³è¾¹æ‰¾åˆ°packageé€‰é¡¹å°†å·¥ç¨‹æ‰“åŒ…æˆjaræ–‡ä»¶</p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240801181439994.png" alt="image-20240801181439994" style="zoom: 67%;" /><p>æ‰¾åˆ°æ–‡ä»¶ä½ç½®æ‰“å¼€ç»ˆç«¯ï¼Œjava -jar .\demo1-0.0.1-SNAPSHOT.jarè¿è¡Œã€‚</p><p>å¦‚æœæƒ³è¦åœ¨è¿™é‡Œé…ç½®å‚æ•°ï¼Œjava -jar .\demo1-0.0.1-SNAPSHOT.jar â€“spring.profiles.active&#x3D;test</p><h4 id="5ã€å†…å¤–éƒ¨é…ç½®æ–‡ä»¶åŠ è½½é¡ºåº"><a href="#5ã€å†…å¤–éƒ¨é…ç½®æ–‡ä»¶åŠ è½½é¡ºåº" class="headerlink" title="5ã€å†…å¤–éƒ¨é…ç½®æ–‡ä»¶åŠ è½½é¡ºåº"></a>5ã€å†…å¤–éƒ¨é…ç½®æ–‡ä»¶åŠ è½½é¡ºåº</h4><p>1ï¼‰å†…éƒ¨</p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240803140132561.png" alt="image-20240803140132561" style="zoom:50%;" /><p>å…¶ä¸­æˆ‘ä»¬ç”¨çš„åœ¨resourcesç›®å½•ä¸‹çš„propertiesé…ç½®æ–‡ä»¶å±äºç¬¬å››ç§</p><p>2ï¼‰å¤–éƒ¨</p><p>å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œçš„æ–¹å¼æ¥ä¿®æ”¹é…ç½®ã€‚</p><p>æ–¹æ³•ä¸€ï¼šåœ¨è¿è¡ŒjaråŒ…è¯­å¥åé¢åŠ ä¸Š â€“server.port&#x3D;8053è¿™æ ·ç±»ä¼¼çš„é…ç½®è¯­å¥</p><p>æ–¹æ³•äºŒï¼šåœ¨è¿è¡ŒjaråŒ…è¯­å¥åé¢åŠ ä¸Š â€“spring.config.location&#x3D;&#x2F;æ”¾ç½®çš„å¤–éƒ¨é…ç½®æ–‡ä»¶çš„è·¯å¾„</p>]]></content>
    
    
    <categories>
      
      <category>xxx</category>
      
    </categories>
    
    
    <tags>
      
      <tag>-spring boot -java</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>é€šè¿‡ideaåŸºäºmavenæ–°å»ºspring booté¡¹ç›®å¹¶è¿è¡Œï¼ˆ2024ç‰ˆæœ¬ï¼‰</title>
    <link href="/2024/07/01/%E9%80%9A%E8%BF%87idea%E5%9F%BA%E4%BA%8Emaven%E6%96%B0%E5%BB%BAspring-boot%E9%A1%B9%E7%9B%AE%E5%B9%B6%E8%BF%90%E8%A1%8C%EF%BC%882024%E7%89%88%E6%9C%AC%EF%BC%89/"/>
    <url>/2024/07/01/%E9%80%9A%E8%BF%87idea%E5%9F%BA%E4%BA%8Emaven%E6%96%B0%E5%BB%BAspring-boot%E9%A1%B9%E7%9B%AE%E5%B9%B6%E8%BF%90%E8%A1%8C%EF%BC%882024%E7%89%88%E6%9C%AC%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<p>æ­¤åšå®¢è®°å½•å¦‚ä½•æˆåŠŸè¿è¡Œä¸€ä¸ªspring booté¡¹ç›®å¹¶ç”¨APIFOXè¿›è¡Œæµ‹è¯•ã€‚</p><span id="more"></span><p>è¿è¡Œé¡¹ç›®è¿è¡Œäº†å¾ˆä¹…éƒ½æ˜¯ä¸æŠ¥é”™ä½†æ˜¯åŠ è½½ä¸å‡ºç•Œé¢çš„æƒ…å†µï¼Œä¸€å¼€å§‹ä»¥ä¸ºæ˜¯ç‰ˆæœ¬ä¸åŒ¹é…çš„åŸå› ï¼Œåæ¥å‘ç°å…¶å®ä¸æ˜¯ï¼ï¼ˆç°åœ¨å®‰è£…äº†JDK22ã€17ã€11ä¸‰ä¸ªç‰ˆæœ¬â€¦â€¦å·²è€å®ï¼‰ç›®å‰IDEAç‰ˆæœ¬æ˜¯æœ€æ–°ç‰ˆ2024.1.4ï¼ŒJDKæ˜¯22ç‰ˆæœ¬ï¼Œmavenä¹Ÿæ˜¯æœ€æ–°ç‰ˆã€‚</p><h3 id="ä¸€ã€å‡†å¤‡å·¥ä½œ"><a href="#ä¸€ã€å‡†å¤‡å·¥ä½œ" class="headerlink" title="ä¸€ã€å‡†å¤‡å·¥ä½œ"></a>ä¸€ã€å‡†å¤‡å·¥ä½œ</h3><h4 id="1ã€é¦–å…ˆéœ€è¦é…ç½®JDKã€mavenä¸¤ä¸ªè½¯ä»¶"><a href="#1ã€é¦–å…ˆéœ€è¦é…ç½®JDKã€mavenä¸¤ä¸ªè½¯ä»¶" class="headerlink" title="1ã€é¦–å…ˆéœ€è¦é…ç½®JDKã€mavenä¸¤ä¸ªè½¯ä»¶"></a>1ã€é¦–å…ˆéœ€è¦é…ç½®JDKã€mavenä¸¤ä¸ªè½¯ä»¶</h4><h5 id="ï¼ˆ1ï¼‰ä¸‹è½½è½¯ä»¶"><a href="#ï¼ˆ1ï¼‰ä¸‹è½½è½¯ä»¶" class="headerlink" title="ï¼ˆ1ï¼‰ä¸‹è½½è½¯ä»¶"></a>ï¼ˆ1ï¼‰ä¸‹è½½è½¯ä»¶</h5><p>JDKï¼š<a href="https://www.oracle.com/java/technologies/downloads/#jdk22-windows">https://www.oracle.com/java/technologies/downloads/#jdk22-windows</a></p><p>æˆ‘ä¸€èˆ¬ä¼šä¸‹è½½æœ€æ–°ç‰ˆï¼ˆä½†æ˜¯è€ç‰ˆå…¼å®¹æ€§ä¼šæ›´å¥½ä¸€äº›ï¼‰</p><p>mavenï¼š<a href="https://maven.apache.org/download.cgi">https://maven.apache.org/download.cgi</a>  ä¸‹æ»‘æ‰¾åˆ°å¦‚å›¾æ‰€ç¤ºç‰ˆæœ¬ä¸‹è½½</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240701104309249.png" alt="image-20240701104309249"></p><h5 id="ï¼ˆ2ï¼‰é…ç½®ç¯å¢ƒå˜é‡"><a href="#ï¼ˆ2ï¼‰é…ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="ï¼ˆ2ï¼‰é…ç½®ç¯å¢ƒå˜é‡"></a>ï¼ˆ2ï¼‰é…ç½®ç¯å¢ƒå˜é‡</h5><p>åœ¨ç³»ç»Ÿå˜é‡ä¸‹æ·»åŠ å¦‚ä¸‹æ‰€ç¤ºä¸¤ä¸ªç¯å¢ƒå˜é‡ï¼Œå˜é‡å€¼æ˜¯æ–‡ä»¶çš„åœ°å€ï¼ˆæŒ‰ç…§è‡ªå·±çš„æ–‡ä»¶åœ°å€æ·»åŠ ï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-07-01%20110538.png" alt="å±å¹•æˆªå›¾ 2024-07-01 110538"></p><p>åœ¨ç³»ç»Ÿå˜é‡ä¸­æ‰¾åˆ°Pathå˜é‡ï¼Œç‚¹å‡»ç¼–è¾‘ï¼Œåœ¨åé¢æ·»åŠ å¦‚ä¸‹æ‰€ç¤ºä¸¤æ¡</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240701110456636.png" alt="image-20240701110456636"></p><p>cmdæ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼Œå‡ºç°å¦‚å›¾æ‰€ç¤ºçš„ä¿¡æ¯ï¼Œæ˜¾ç¤ºäº†mavenå’ŒJDKç‰ˆæœ¬ï¼Œè¯´æ˜é…ç½®æˆåŠŸã€‚</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript">mvn -<span class="hljs-built_in">version</span><br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240701110615522.png" alt="image-20240701110615522"></p><h4 id="2ã€-ä¸‹è½½IntelliJ-IDEA"><a href="#2ã€-ä¸‹è½½IntelliJ-IDEA" class="headerlink" title="2ã€  ä¸‹è½½IntelliJ IDEA"></a>2ã€  ä¸‹è½½IntelliJ IDEA</h4><p>ä»æ—§æ˜¯å»å®˜ç½‘ä¸‹è½½ï¼š<a href="https://www.jetbrains.com.cn/idea/download/?section=windows">ä¸‹è½½ IntelliJ IDEA â€“ é¢†å…ˆçš„ Java å’Œ Kotlin IDE (jetbrains.com.cn)</a></p><p>ä½†æ˜¯æˆ‘ä»¬ä¼šå‘ç°è¿™æ˜¯æ”¶è´¹çš„ï¼Œäºæ˜¯åªèƒ½å»ä¸‹è½½ç ´è§£ç‰ˆã€‚æ­¤å¤„è´´ä¸Šæˆ‘å½“æ—¶å‚è€ƒçš„é“¾æ¥ï¼š</p><p><a href="https://www.quanxiaoha.com/idea-pojie/idea-pojie-20241.html">IDEA 2024.1 æœ€æ–°æ¿€æ´»ç ï¼Œç ´è§£ç‰ˆå®‰è£…æ•™ç¨‹ï¼ˆäº²æµ‹æœ‰æ•ˆ~ï¼‰ - çŠ¬å°å“ˆæ•™ç¨‹ (quanxiaoha.com)</a></p><h3 id="äºŒã€å¼€å§‹åˆ›å»ºé¡¹ç›®"><a href="#äºŒã€å¼€å§‹åˆ›å»ºé¡¹ç›®" class="headerlink" title="äºŒã€å¼€å§‹åˆ›å»ºé¡¹ç›®"></a>äºŒã€å¼€å§‹åˆ›å»ºé¡¹ç›®</h3><p>æˆ‘è¿è¡Œå‡ºæ¥çš„ç»“æœæ˜¯è¿™æ ·çš„ï¼š</p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240701144938865.png" alt="image-20240701144938865" style="zoom: 67%;" /><p>è™½ç„¶å¾ˆç®€å•ä½†æ˜¯æäº†ä¸€ä¸‹åˆåŠ ä¸€æ™šä¸Šâ€¦â€¦ä¸çŸ¥é“ä¸ºä»€ä¹ˆè·Ÿç€æ•™ç¨‹æˆ–è€…GPTéƒ½å¼„ä¸å‡ºæ¥ï¼Œæ€»æ˜¯å„ç§æŠ¥é”™â€¦â€¦åæ¥GPTçªç„¶æ´»äº†ï¼Œæˆ‘è°ƒæ•´äº†ä¸€ä¸‹æ–‡ä»¶ç»“æ„ç„¶åå°±æˆåŠŸäº†ï¼ï¼</p><h4 id="1ã€å®‰è£…æ’ä»¶ï¼ˆå¯é€‰ï¼‰"><a href="#1ã€å®‰è£…æ’ä»¶ï¼ˆå¯é€‰ï¼‰" class="headerlink" title="1ã€å®‰è£…æ’ä»¶ï¼ˆå¯é€‰ï¼‰"></a>1ã€å®‰è£…æ’ä»¶ï¼ˆå¯é€‰ï¼‰</h4><p>å¾ˆå¤šæ’ä»¶éƒ½æ˜¯å†…ç½®çš„ï¼Œæˆ‘åªè¿·è¿·ç³Šç³Šå®‰è£…äº†ä¸€ä¸ªwl spring assistantï¼Œä¹Ÿä¸çŸ¥é“æœ‰ä»€ä¹ˆç”¨ã€‚ä¸è¿‡é¦–å…ˆè¦å®‰è£…çš„è¿˜æ˜¯æ±‰åŒ–åŒ…ã€‚æŒ‰ç…§æˆ‘æœåˆ°çš„æ•™ç¨‹ï¼Œåº”è¯¥æ˜¯è¦å®‰è£…Spring Initializrè¿™ä¸ªæ’ä»¶çš„ï¼Œä½†æ˜¯å®ƒéœ€è¦Spring  boot helperè¿™ä¸ªæ’ä»¶æ‰èƒ½æ­£å¸¸å·¥ä½œã€‚ä½†æ˜¯Spring  boot helperä¹Ÿéœ€è¦è´­ä¹°ï¼Œå…è´¹çš„è€ç‰ˆæœ¬ä¹Ÿéœ€è¦è€ç‰ˆæœ¬çš„ideaæ‰è¡Œã€‚ï¼ˆåœ¨æˆ‘æ¿€æƒ…å¸è½½æ–°ç‰ˆæœ¬ä¸‹è½½è€ç‰ˆæœ¬åï¼Œæˆ‘å‘ç°è€ç‰ˆæœ¬çš„ç ´è§£å¸–å­å¤§å¤šéƒ½å¤±æ•ˆäº†â€¦â€¦ï¼‰</p><h4 id="2ã€æ–°å»ºé¡¹ç›®"><a href="#2ã€æ–°å»ºé¡¹ç›®" class="headerlink" title="2ã€æ–°å»ºé¡¹ç›®"></a>2ã€æ–°å»ºé¡¹ç›®</h4><p>ï¼ˆ1ï¼‰å¦‚å›¾ï¼Œç”±äºæˆ‘æ²¡æœ‰ä¸‹è½½Spring Initializrè¿™ä¸ªæ’ä»¶ï¼Œæ‰€ä»¥æˆ‘åªèƒ½é€‰æ‹©Spring Bootè¿™ä¸ªé€‰é¡¹ï¼Œå’Œç½‘ä¸Šçš„æ•™ç¨‹éƒ½ä¸ä¸€æ ·ï¼ˆæ‰€ä»¥æˆ‘æ‰æ€¥åˆ‡æƒ³ä¸‹è½½è¿‡å»çš„ç‰ˆæœ¬ï¼Œä½†æ˜¯å¤±è´¥äº†anywayï¼‰ã€‚</p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240701145920537.png" alt="image-20240701145920537" style="zoom: 50%;" /><p>ä½†æ˜¯å½“æˆ‘æœ€ç»ˆæ”¾å¼ƒä¸‹è½½è€ç‰ˆæœ¬ï¼Œåˆç°æºœæºœæŠŠæ–°ç‰ˆæœ¬è£…å¥½åï¼ŒæŠŠé¼ æ ‡æ”¾åœ¨Spring Bootè¿™ä¸ªé€‰é¡¹ä¸Šé¢æ—¶ï¼Œå®ƒæ˜¾ç¤ºäº†è¿™æ ·ä¸€å¥è¯ã€‚ã€‚ã€‚ã€‚ï¼ˆæ‰€ä»¥å…¶å®æ˜¯ä¸€æ ·çš„ï¼Œå¥½åƒæ²¡æœ‰ä»€ä¹ˆä¸åŒï¼ï¼‰</p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240701150249468.png" style="zoom: 80%;" /><p>ï¼ˆ2ï¼‰å³è¾¹æˆ‘é€‰çš„å°±æ˜¯è¿™æ ·ï¼Œåªæ”¹åŠ¨äº†åœˆå‡ºçš„åœ°æ–¹ï¼Œæœ€ä¸Šé¢åç§°å¯ä»¥è‡ªå·±è®¾ç½®ã€‚</p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240701150551021.png" alt="image-20240701150551021" style="zoom: 67%;" /><p>ï¼ˆ3ï¼‰é€‰æ‹©ä¾èµ–é¡¹</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240701150654448.png" alt="image-20240701150654448"><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240701150713132.png" alt="image-20240701150713132"></p><p>ç”±äºè¿™ä¸ªé¡¹ç›®æ¯”è¾ƒç®€å•æ‰€ä»¥å°±é€‰æ‹©äº†è¿™ä¸¤ä¸ªï¼Œæš‚æ—¶ä¸éœ€è¦æ•°æ®åº“çš„ä¾èµ–é¡¹ã€‚</p><p>ç„¶åé¡¹ç›®å°±åˆ›å»ºå¥½äº†ï¼</p><h3 id="ä¸‰ã€é…ç½®é¡¹ç›®"><a href="#ä¸‰ã€é…ç½®é¡¹ç›®" class="headerlink" title="ä¸‰ã€é…ç½®é¡¹ç›®"></a>ä¸‰ã€é…ç½®é¡¹ç›®</h3><p>è¿›å…¥é¡¹ç›®åï¼ŒæŠŠé‡è¦æ–‡ä»¶å¤¹å±•å¼€åæ˜¯è¿™æ ·ï¼ˆåˆšæ–°å»ºé¡¹ç›®æ²¡æœ‰targetæ–‡ä»¶å¤¹ï¼‰</p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240701152318300.png" alt="image-20240701152318300" style="zoom:67%;" /><p>å…¶å®æˆ‘ä¸æ˜¯å¾ˆæ˜ç™½ä¸ºä»€ä¹ˆä¼šå‡ºç°testæ–‡ä»¶å¤¹ï¼ˆä¸ç®¡é¡¹ç›®æ€ä¹ˆå‘½åéƒ½ä¼šå‡ºç°ï¼Œä½†æ˜¯æœ€å¼€å§‹æ˜¯æ²¡æœ‰çš„â€¦â€¦ä¸çŸ¥é“æ˜¯ä¸æ˜¯æˆ‘æŒ‰äº†ä»€ä¹ˆä¸è¯¥æŒ‰çš„ï¼‰ä¸‹é¢è¿™ä¸¤ä¸ªæ–‡ä»¶æ˜¯å¯ä»¥è¿è¡Œçš„ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240701152517651.png" alt="image-20240701152517651"><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240701152534710.png" alt="image-20240701152534710"></p><p>ç¬¬ä¸€æ­¥ï¼šéœ€è¦æ·»åŠ ä¸¤ä¸ªæ–‡ä»¶ã€‚å³é”®ä¸‹é¢ä»»æ„ä¸€ä¸ªè½¯ä»¶åŒ…ï¼Œé€‰æ‹©æ·»åŠ ä¸€ä¸ªjavaç±»ï¼Œæˆ‘å‘½åä¸ºäº†helloController</p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240701152723798.png" alt="image-20240701152723798" style="zoom:67%;" /><p>åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ï¼ˆè¯·çœ‹æ³¨é‡Šè¦ç‚¹ï¼ä¸ç„¶ä¼šæŠ¥é”™ï¼‰ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> org.example.test; <span class="hljs-comment">//æ³¨æ„testè¿™ä¸ªå•è¯æ˜¯è¦æ”¹æˆä½ çš„é¡¹ç›®åå­—çš„</span><br><br><span class="hljs-keyword">import</span> org.springframework.stereotype.Controller;  <span class="hljs-comment">//ä¸ç”¨æ”¹</span><br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.GetMapping;  <span class="hljs-comment">//ä¸ç”¨æ”¹</span><br><br><span class="hljs-meta">@Controller</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">helloController</span> &#123;  <span class="hljs-comment">//è¿™ä¸ªç±»åè¦å’Œåˆšåˆšåˆ›å»ºçš„javaç±»åä¸€è‡´</span><br><br>    <span class="hljs-meta">@GetMapping(&quot;/&quot;)</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">home</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;index&quot;</span>; <span class="hljs-comment">// è¿”å›æ¨¡æ¿æ–‡ä»¶çš„åç§°ï¼Œä¸éœ€è¦æ‰©å±•å</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç„¶åå³é”®è¿™ä¸ªæ–‡ä»¶å¤¹é€‰æ‹©æ–°å»ºä¸€ä¸ªhtmlæ–‡ä»¶ï¼Œå‘½åä¸ºindex</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240701153234536.png" alt="image-20240701153234536"></p><p>åœ¨æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ï¼ˆbodyå†…æ·»åŠ å†…å®¹ï¼Œ&lt; br&#x2F; &gt;æ˜¯æ¢è¡Œç¬¦ï¼‰</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>hello<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>##################<span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span>  <br>############<span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ç¬¬äºŒæ­¥å°±å¯ä»¥ç‚¹å‡»è¿è¡Œäº†ã€‚ä½†æ˜¯æ­¤æ—¶å¯èƒ½ä¼šæŠ¥é”™ï¼Œå¦‚ä½ çš„æŠ¥é”™åŸå› æ˜¯å¦‚ä¸‹å›¾ï¼Œé‚£ä¹ˆåº”è¯¥æ˜¯è·Ÿæˆ‘ä¸€æ ·ï¼Œå› ä¸ºé»˜è®¤ç«¯å£å·8080å·²ç»è¢«å ç”¨äº†ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240701153703817.png" alt="image-20240701153703817"></p><p>è§£å†³æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œå°±æ˜¯æ¢ä¸ªç«¯å£å·ï¼Œç‚¹å¼€ä¸‹é¢çš„æ–‡ä»¶ï¼Œåœ¨å…¶æœ€ä¸Šæ–¹æ·»åŠ ä¸€è¡Œä»£ç server.port&#x3D;8016ï¼ˆå¯ä»¥è‡ªå·±æ”¹ç«¯å£å·ï¼‰ï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥é€‰æ‹©åœ¨ç®¡ç†å‘˜ç»ˆç«¯ç»ˆæ­¢8080ç«¯å£è¿è¡Œï¼Œä½†æ˜¯è¿˜æ˜¯æ”¹ä¸ªç«¯å£æ›´ç®€å•ï¼‰</p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240701153818223.png" alt="image-20240701153818223" style="zoom:80%;" /><p>ç„¶ååº”è¯¥å°±èƒ½è¿è¡ŒæˆåŠŸäº†ï¼è¿™æ—¶æˆ‘ä»¬åœ¨ç”µè„‘ä¸Šè®¿é—®localhost:8016ï¼ˆç«¯å£å·ï¼‰ï¼Œå°±å¯ä»¥çœ‹è§æˆ‘ä»¬åœ¨htmlä¸­å†™çš„å†…å®¹äº†ã€‚</p><h3 id="å››ã€APIæµ‹è¯•"><a href="#å››ã€APIæµ‹è¯•" class="headerlink" title="å››ã€APIæµ‹è¯•"></a>å››ã€APIæµ‹è¯•</h3><h4 id="1ã€åœ¨å®˜ç½‘ä¸‹è½½APIFox"><a href="#1ã€åœ¨å®˜ç½‘ä¸‹è½½APIFox" class="headerlink" title="1ã€åœ¨å®˜ç½‘ä¸‹è½½APIFox"></a>1ã€åœ¨å®˜ç½‘ä¸‹è½½APIFox</h4><p><a href="https://apifox.com/">https://apifox.com/</a></p><h4 id="2ã€åˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ç›®"><a href="#2ã€åˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ç›®" class="headerlink" title="2ã€åˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ç›®"></a>2ã€åˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ç›®</h4><p>é¡¹ç›®ç±»å‹é€‰æ‹©html</p><h4 id="3ã€æ·»åŠ ä¸€ä¸ªæ–°çš„æ¥å£"><a href="#3ã€æ·»åŠ ä¸€ä¸ªæ–°çš„æ¥å£" class="headerlink" title="3ã€æ·»åŠ ä¸€ä¸ªæ–°çš„æ¥å£"></a>3ã€æ·»åŠ ä¸€ä¸ªæ–°çš„æ¥å£</h4><p>é…ç½®è¯·æ±‚ï¼š</p><ul><li>è¯·æ±‚æ–¹æ³•ï¼šGET</li><li>è¯·æ±‚ URLï¼š&#96;<a href="http://localhost:8016â€˜">http://localhost:8016â€˜</a></li><li>æ·»åŠ æŸ¥è¯¢å‚æ•°ï¼šnameï¼ˆå¯é€‰ï¼‰</li><li>è¿”å›ç›¸åº”çš„å†…å®¹æ ¼å¼é€‰html</li></ul><h4 id="4ã€ç‚¹å‡»å‘é€æŒ‰é’®æŸ¥çœ‹å“åº”"><a href="#4ã€ç‚¹å‡»å‘é€æŒ‰é’®æŸ¥çœ‹å“åº”" class="headerlink" title="4ã€ç‚¹å‡»å‘é€æŒ‰é’®æŸ¥çœ‹å“åº”"></a>4ã€ç‚¹å‡»å‘é€æŒ‰é’®æŸ¥çœ‹å“åº”</h4><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240701163121572.png" alt="image-20240701163121572"></p><h3 id="äº”ã€ä¸€äº›é—®é¢˜è®°å½•"><a href="#äº”ã€ä¸€äº›é—®é¢˜è®°å½•" class="headerlink" title="äº”ã€ä¸€äº›é—®é¢˜è®°å½•"></a>äº”ã€ä¸€äº›é—®é¢˜è®°å½•</h3><h4 id="1ã€ä¾èµ–é¡¹thymeleafçš„ä½œç”¨"><a href="#1ã€ä¾èµ–é¡¹thymeleafçš„ä½œç”¨" class="headerlink" title="1ã€ä¾èµ–é¡¹thymeleafçš„ä½œç”¨"></a>1ã€ä¾èµ–é¡¹thymeleafçš„ä½œç”¨</h4><p>å°† Thymeleaf é›†æˆåˆ° Spring Boot åº”ç”¨ä¸­ï¼Œä½¿å¾—ä½ å¯ä»¥ä½¿ç”¨ Thymeleaf ä½œä¸ºæ¨¡æ¿å¼•æ“æ¥æ¸²æŸ“ HTML é¡µé¢ã€‚</p><p>å¦‚æœä¸€å¼€å§‹æ–°å»ºé¡¹ç›®æ—¶æ²¡æœ‰æ·»åŠ è¿™ä¸ªä¾èµ–é¡¹ï¼Œä¹Ÿå¯ä»¥æ‰“å¼€pom.xmlæ–‡ä»¶ä¸­æ·»åŠ </p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="2ã€Controlleræ–‡ä»¶çš„ä½œç”¨"><a href="#2ã€Controlleræ–‡ä»¶çš„ä½œç”¨" class="headerlink" title="2ã€Controlleræ–‡ä»¶çš„ä½œç”¨"></a>2ã€Controlleræ–‡ä»¶çš„ä½œç”¨</h4><p>æ§åˆ¶å™¨ï¼ˆControllerï¼‰æ˜¯ç”¨äºå¤„ç† HTTP è¯·æ±‚çš„æ ¸å¿ƒç»„ä»¶ã€‚æ§åˆ¶å™¨çš„ä¸»è¦èŒè´£æ˜¯æ¥æ”¶ç”¨æˆ·çš„è¾“å…¥ï¼Œå¹¶æ ¹æ®è¯¥è¾“å…¥è¿”å›ç›¸åº”çš„å“åº”ã€‚æ§åˆ¶å™¨é€šå¸¸ä¸è§†å›¾æ¨¡æ¿æˆ– RESTful API ç»“åˆä½¿ç”¨ã€‚</p><p>ä¸Šé¢çš„helloControlleræ–‡ä»¶æŒ‰ç†æ¥è¯´åº”è¯¥å‘½åä¸ºHomeControllerï¼Œè¡¨ç¤ºç«¯å£å·åŸŸåä¸åŠ ä»»ä½•åç»­è·¯å¾„ï¼Œå¤„ç†æ ¹è·¯å¾„â€™ &#x2F; â€˜å¹¶è¿”å›index.htmlæ¨¡æ¿ã€‚</p><p>ç„¶åæˆ‘ä»¬è¿˜å¯ä»¥æ–°å»ºä¸€ä¸ªHelloControlleræ–‡ä»¶ï¼Œç”¨äºå¤„ç† â€™ hello â€˜ è·¯å¾„å¹¶è¿”å›ä¸€ä¸ªç®€å•çš„å­—ç¬¦ä¸²å“åº”ã€‚ä¾‹å¦‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> org.example.demoa;<br><br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.GetMapping;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RequestParam;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RestController;<br><br><span class="hljs-meta">@RestController</span>      <span class="hljs-comment">//RESTfulæ§åˆ¶å™¨ï¼Œè¿”å›JSONæ•°æ®</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloController</span> &#123;<br><br>    <span class="hljs-meta">@GetMapping(&quot;/hello&quot;)</span>  <span class="hljs-comment">//æ‹¬å·é‡Œæ˜¯è·¯å¾„</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">hello</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam(value = &quot;name&quot;, defaultValue = &quot;World&quot;)</span> String name)</span> &#123;<br>        <span class="hljs-keyword">return</span> String.format(<span class="hljs-string">&quot;Hello, %s!&quot;</span>, name);  <span class="hljs-comment">//è¿”å›Hello Worldï¼</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>xxx</category>
      
    </categories>
    
    
    <tags>
      
      <tag>spring boot</tag>
      
      <tag>java</tag>
      
      <tag>maven</tag>
      
      <tag>IntelliJ IDEA</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>é…ç½®æœåŠ¡å™¨è®°å½•</title>
    <link href="/2024/06/29/%E9%85%8D%E7%BD%AE%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%AE%B0%E5%BD%95/"/>
    <url>/2024/06/29/%E9%85%8D%E7%BD%AE%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%AE%B0%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<p>åœ¨é˜¿é‡Œäº‘å¹³å°å…è´¹é¢†å–äº†ä¸ƒä¸ªæœˆæœåŠ¡å™¨ä½¿ç”¨æƒï¼Œåœ¨è¿™é‡Œè®°å½•ä¸€ä¸‹é…ç½®ç»è¿‡ã€‚</p><span id="more"></span><h3 id="ä¸€ã€æœåŠ¡å™¨"><a href="#ä¸€ã€æœåŠ¡å™¨" class="headerlink" title="ä¸€ã€æœåŠ¡å™¨"></a>ä¸€ã€æœåŠ¡å™¨</h3><h4 id="1ã€äº‘æœåŠ¡å™¨çš„ä½¿ç”¨æµç¨‹"><a href="#1ã€äº‘æœåŠ¡å™¨çš„ä½¿ç”¨æµç¨‹" class="headerlink" title="1ã€äº‘æœåŠ¡å™¨çš„ä½¿ç”¨æµç¨‹"></a>1ã€äº‘æœåŠ¡å™¨çš„ä½¿ç”¨æµç¨‹</h4><p>ï¼ˆ1ï¼‰<strong>è·å–</strong>äº‘æœåŠ¡å™¨ECSâ€”â€”ç™»å½•<a href="http://www.aliyun.com,è´­ä¹°æˆ–å…è´¹é¢†ç”¨äº‘æœåŠ¡å™¨ecs/">www.aliyun.comï¼Œè´­ä¹°æˆ–å…è´¹é¢†ç”¨äº‘æœåŠ¡å™¨ECS</a></p><p>ï¼ˆ2ï¼‰<strong>ç™»å½•</strong>äº‘æœåŠ¡å™¨ECSâ€”â€”è¿œç¨‹ç™»å½•ECSå®ä¾‹é…ç½®ä¸»æœºç¯å¢ƒ</p><p>ï¼ˆ3ï¼‰<strong>ç®¡ç†</strong>äº‘æœåŠ¡å™¨ECSâ€”â€”åœ¨äº‘æœåŠ¡å™¨ä¸Šæ­å»ºä¸ªäººç½‘ç«™ï¼Œç®¡ç†å¹¶ç»´æŠ¤ç½‘ç«™</p><p>ï¼ˆ4ï¼‰<strong>é‡Šæ”¾</strong>äº‘æœåŠ¡å™¨ECSâ€”â€”ä¸éœ€è¦ECSå®ä¾‹æ—¶é‡Šæ”¾èµ„æºï¼ŒèŠ‚çœè´¹ç”¨</p><h4 id="2ã€ç™»å½•äº‘æœåŠ¡å™¨-windowsç³»ç»Ÿ"><a href="#2ã€ç™»å½•äº‘æœåŠ¡å™¨-windowsç³»ç»Ÿ" class="headerlink" title="2ã€ç™»å½•äº‘æœåŠ¡å™¨(windowsç³»ç»Ÿ)"></a>2ã€ç™»å½•äº‘æœåŠ¡å™¨(windowsç³»ç»Ÿ)</h4><p>ï¼ˆ1ï¼‰ç‚¹å‡»è¿œç¨‹ç®¡ç†ä¹‹åç‚¹å‡»ç«‹å³ç™»å½•ï¼Œè¿›å…¥ä»¥ä¸‹ç•Œé¢ï¼Œç¬¬ä¸€æ¬¡ç™»é™†çš„æ—¶å€™éœ€è¦è®¾ç½®å¯†ç ï¼Œéœ€è¦è®°ä½è¿™ä¸ªå¯†ç ã€‚ç¡®å®šåå°±ç™»é™†ä¸Šäº†è¿™ä¸ªæœåŠ¡å™¨ï¼›</p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240701100745300.png" alt="image-20240701100745300" style="zoom: 50%;" /><p>ï¼ˆ2ï¼‰æˆ‘ä¸€èˆ¬åœ¨ç”µè„‘ç»ˆç«¯è¿›è¡Œç™»å½•ï¼Œcmdæ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥ä»¥ä¸‹è¯­å¥ç™»å½•ï¼›</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">ssh <span class="hljs-symbol">root@</span>å…¬ç½‘IP<br></code></pre></td></tr></table></figure><p>å‡ºç°ä»¥ä¸‹ç•Œé¢ï¼Œè¯´æ˜ç™»é™†æˆåŠŸï¼Œç°åœ¨å¯ä»¥åœ¨æœåŠ¡å™¨ä¸­è¿›è¡Œé…ç½®äº†ã€‚</p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240701101436004.png" alt="image-20240701101436004" style="zoom:50%;" /><h3 id="äºŒã€é…ç½®MySQL"><a href="#äºŒã€é…ç½®MySQL" class="headerlink" title="äºŒã€é…ç½®MySQL"></a>äºŒã€é…ç½®MySQL</h3>]]></content>
    
    
    <categories>
      
      <category>xxx</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ubuntu</tag>
      
      <tag>ECS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Leetcodeåˆ·é¢˜è®°å½•ï¼ˆä¸åˆ†ç±»ç‰ˆï¼‰</title>
    <link href="/2024/05/24/Leetcode%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95%EF%BC%88%E4%B8%8D%E5%88%86%E7%B1%BB%E7%89%88%EF%BC%89/"/>
    <url>/2024/05/24/Leetcode%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95%EF%BC%88%E4%B8%8D%E5%88%86%E7%B1%BB%E7%89%88%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<p>å°½é‡ä¿è¯æ¯å¤©è‡³å°‘åšä¸¤é¢˜ï¼Œä¿æŒæ‰‹æ„Ÿã€‚ç´¯è®¡11é¢˜ã€‚</p><span id="more"></span><h3 id="2024-5-24"><a href="#2024-5-24" class="headerlink" title="2024&#x2F;5&#x2F;24"></a>2024&#x2F;5&#x2F;24</h3><h4 id="ï¼ˆ1ï¼‰æ¥é›¨æ°´"><a href="#ï¼ˆ1ï¼‰æ¥é›¨æ°´" class="headerlink" title="ï¼ˆ1ï¼‰æ¥é›¨æ°´"></a>ï¼ˆ1ï¼‰æ¥é›¨æ°´</h4><p><a href="https://leetcode.cn/problems/trapping-rain-water/description/">42. æ¥é›¨æ°´ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><p>è®°å¾—ç¬¬ä¸€æ¬¡çœ‹åˆ°è¿™é¢˜ï¼Œä¸¤çœ¼ä¸€é»‘å°±æ²¡ç®¡äº†ã€‚æ˜¨æ™šç¡è§‰æ—¶çªç„¶æƒ³åˆ°ï¼Œæƒ³äº†åŠå¤©ï¼Œä»Šå¤©å†™çš„æ—¶å€™ä¹Ÿæ²¡å†™å‡ºæ¥ã€‚æ€»ç»“é”™è¯¯åŸå› æ˜¯ï¼š1ã€æƒ³åˆ°äº†è¦è®°å½•å·¦è¾¹æœ€å¤§å€¼å’Œå³è¾¹æœ€å¤§å€¼ï¼Œä½†æ˜¯è®°å½•çš„éå¸¸ç¬¨æ‹™ï¼›2ã€è®°å½•çš„æœ€å¤§å€¼ä¸æ˜¯çœŸçš„æœ€å¤§å€¼ï¼Œè€Œæ˜¯æ¯ä¸ªå‡¹é™·ä¸¤è¾¹çš„æœ€å¤§å€¼ã€‚è¿˜æ˜¯é¢˜æ„Ÿä¸å¤Ÿä»¥åŠæ€è·¯ä¸å¤Ÿçµæ´»ã€‚åˆšå¥½è¿™é“é¢˜ç”¨åˆ°çš„å¾ˆå¤šæ–¹æ³•æ˜¯æˆ‘ä¸ä¼šçš„ï¼Œé‚è®°å½•ã€‚</p><h5 id="æ–¹æ³•ä¸€ï¼š"><a href="#æ–¹æ³•ä¸€ï¼š" class="headerlink" title="æ–¹æ³•ä¸€ï¼š"></a>æ–¹æ³•ä¸€ï¼š</h5><p>ï¼ˆå·²è¶…æ—¶ï¼‰åˆ†åˆ«è®°å½•é«˜åº¦ä¸º1ã€2ã€3â€¦â€¦ç­‰è¿™ä¸€è¡Œèƒ½æ¥å¤šå°‘é›¨æ°´ã€‚éœ€è¦éå†ä¸¤å±‚ï¼Œè®°å½•å½“å‰åˆ—çš„å·¦è¾¹å’Œå³è¾¹æ˜¯å¦æœ‰å€¼ï¼Œè‹¥æœ‰åˆ™è¿™ä¸€å—å¯ä»¥æ¥åˆ°é›¨æ°´ã€‚æ—¶é—´å¤æ‚åº¦O(n2);</p><h5 id="æ–¹æ³•äºŒï¼š"><a href="#æ–¹æ³•äºŒï¼š" class="headerlink" title="æ–¹æ³•äºŒï¼š"></a>æ–¹æ³•äºŒï¼š</h5><p>åŠ¨æ€è§„åˆ’ï¼š1ã€ç”¨ä¸¤ä¸ªæ•°ç»„leftmax[]å’Œrightmax[]åˆ†åˆ«è®°å½•æŸä¸ªä½ç½®å·¦è¾¹é«˜åº¦çš„æœ€å¤§å€¼å’Œå³è¾¹é«˜åº¦çš„æœ€å¤§å€¼ã€‚ä¸¤ä¸ªæœ€å¤§å€¼ä¸­å°çš„é‚£ä¸ªå‡å»å®ƒçš„é«˜åº¦å°±æ˜¯è¿™ä¸€åˆ—èƒ½æ¥åˆ°çš„é›¨æ°´é‡ï¼›2ã€å¦‚ä½•å¾—åˆ°ä¸¤ä¸ªæ•°ç»„çš„å€¼ï¼Ÿï¼ˆåŠ¨æ€è§„åˆ’ï¼‰leftmax[0]&#x3D;h[0]ï¼Œrightmax[n-1]&#x3D;h[n-1]ã€‚ä»å·¦å‘å³éå†ï¼Œå¾—åˆ°ç­‰å¼ï¼šleft[ i ]&#x3D;max( left[ i-1],h[ i] ) , ä»å³å‘å·¦éå†ï¼Œå¾—åˆ°right[i]&#x3D;max(right[ i+1],h[ i ])ï¼›</p><p>æ—¶é—´å¤æ‚åº¦ï¼šOï¼ˆnï¼‰ï¼Œç©ºé—´å¤æ‚åº¦ï¼šOï¼ˆnï¼‰</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-type">int</span> left[<span class="hljs-number">20004</span>],right[<span class="hljs-number">20004</span>];  <br><span class="hljs-type">int</span> cnt,tmp;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">trap</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; h)</span> </span>&#123;<br>   <span class="hljs-type">int</span> n=h.<span class="hljs-built_in">size</span>();<br>   left[<span class="hljs-number">0</span>]=h[<span class="hljs-number">0</span>],right[n<span class="hljs-number">-1</span>]=h[n<span class="hljs-number">-1</span>];<br>   <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;n;i++)&#123;<br>      left[i]=<span class="hljs-built_in">max</span>(left[i<span class="hljs-number">-1</span>],h[i]);<br>      right[n-i<span class="hljs-number">-1</span>]=<span class="hljs-built_in">max</span>(right[n-i],h[i]);<br>   &#125;<br>   <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;n<span class="hljs-number">-1</span>;i++)&#123;<br>      tmp=<span class="hljs-built_in">min</span>(left[i],right[i]);<br>      cnt+=tmp-h[i];<br>   &#125;<br>   <span class="hljs-keyword">return</span> cnt;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="æ–¹æ³•ä¸‰ï¼š"><a href="#æ–¹æ³•ä¸‰ï¼š" class="headerlink" title="æ–¹æ³•ä¸‰ï¼š"></a>æ–¹æ³•ä¸‰ï¼š</h5><p>å•è°ƒæ ˆï¼šå•è°ƒæ ˆå†…å­˜å‚¨çš„æ˜¯ä¸‹æ ‡ã€‚å¦‚æœè¯¥ä¸‹æ ‡é«˜åº¦å°äºæ ˆé¡¶ï¼Œå…¥æ ˆï¼›å¦åˆ™å¼€å§‹è®¡ç®—ä¸¤ä¸ªä¸‹æ ‡ä¹‹é—´å¯ä»¥æ¥çš„é›¨æ°´é‡</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-type">int</span> cnt;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">trap</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; h)</span> </span>&#123;<br>   stack&lt;<span class="hljs-type">int</span>&gt; r;<br>   <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;h,<span class="hljs-built_in">size</span>();i++)&#123;<br>      <span class="hljs-keyword">while</span>(!r.<span class="hljs-built_in">empty</span>()&amp;&amp;h[r.<span class="hljs-built_in">top</span>()]&lt;h[i])&#123;<br>         <span class="hljs-type">int</span> cur=t.<span class="hljs-built_in">top</span>();<br>         r.<span class="hljs-built_in">pop</span>();<br>         <span class="hljs-keyword">if</span>(r.<span class="hljs-built_in">empty</span>())<br>            <span class="hljs-keyword">break</span>;<br>         cnt+=(<span class="hljs-built_in">min</span>(h[r.<span class="hljs-built_in">top</span>()],h[i])-h[cur])*(i-r.<span class="hljs-built_in">top</span>()<span class="hljs-number">-1</span>);<br>      &#125;<br>      r.<span class="hljs-built_in">push</span>(i);<br>   &#125;<br>   <span class="hljs-keyword">return</span> cnt;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2024-5-28"><a href="#2024-5-28" class="headerlink" title="2024&#x2F;5&#x2F;28"></a>2024&#x2F;5&#x2F;28</h3><h4 id="ï¼ˆ1ï¼‰åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„ï¼ˆå­—ç¬¦ä¸²ã€æ•°ç»„ï¼‰"><a href="#ï¼ˆ1ï¼‰åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„ï¼ˆå­—ç¬¦ä¸²ã€æ•°ç»„ï¼‰" class="headerlink" title="ï¼ˆ1ï¼‰åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„ï¼ˆå­—ç¬¦ä¸²ã€æ•°ç»„ï¼‰"></a>ï¼ˆ1ï¼‰åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„ï¼ˆå­—ç¬¦ä¸²ã€æ•°ç»„ï¼‰</h4><p><a href="https://leetcode.cn/problems/merge-sorted-array/description/?envType=study-plan-v2&envId=top-interview-150">88. åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><h5 id="æ–¹æ³•ä¸€ï¼š-1"><a href="#æ–¹æ³•ä¸€ï¼š-1" class="headerlink" title="æ–¹æ³•ä¸€ï¼š"></a>æ–¹æ³•ä¸€ï¼š</h5><p>ç›´æ¥åˆå¹¶ç„¶åæ’åºï¼ˆæ—¶é—´å¤æ‚åº¦O(m+n)log(m+n)ï¼‰</p><h5 id="æ–¹æ³•äºŒï¼š-1"><a href="#æ–¹æ³•äºŒï¼š-1" class="headerlink" title="æ–¹æ³•äºŒï¼š"></a>æ–¹æ³•äºŒï¼š</h5><p>é€†åºåŒæŒ‡é’ˆï¼šmã€nåˆ†åˆ«æŒ‡å‘ä¸¤ä¸ªæ•°ç»„æœ€åä¸€ä¸ªï¼ˆä¸æ˜¯0çš„ï¼‰å…ƒç´ ï¼Œç„¶åæ¯æ¬¡ä½œæ¯”è¾ƒï¼Œå°†å¤§çš„æ•°å­—æ”¾åœ¨æ•°ç»„çš„æœ€åä¸€ä¸ªä½ç½®ï¼Œç›¸åº”æŒ‡é’ˆå’Œä½ç½®å‰ç§»ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">merge</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; nums1, <span class="hljs-type">int</span> m, vector&lt;<span class="hljs-type">int</span>&gt;&amp; nums2, <span class="hljs-type">int</span> n)</span> </span>&#123;<br> <span class="hljs-type">int</span> i=m+n<span class="hljs-number">-1</span>;<br>   <span class="hljs-keyword">while</span>(n&gt;<span class="hljs-number">0</span>)&#123;<br>      <span class="hljs-keyword">if</span>(m&gt;<span class="hljs-number">0</span>&amp;&amp;nums1[m<span class="hljs-number">-1</span>]&gt;nums2[n<span class="hljs-number">-1</span>])&#123;<br>         nums1[i--]=nums2[m<span class="hljs-number">-1</span>];<br>         m--;<br>      &#125;<br>      <span class="hljs-keyword">else</span>&#123;<br>nums1[i--]=nums2[n<span class="hljs-number">-1</span>];<br>         n--;         <br>      &#125;<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2024-5-29"><a href="#2024-5-29" class="headerlink" title="2024&#x2F;5&#x2F;29"></a>2024&#x2F;5&#x2F;29</h3><h4 id="ï¼ˆ1ï¼‰é•¿åº¦æœ€å°çš„å­æ•°ç»„ï¼ˆäºŒåˆ†ã€å‰ç¼€å’Œã€æ»‘åŠ¨çª—å£ï¼‰"><a href="#ï¼ˆ1ï¼‰é•¿åº¦æœ€å°çš„å­æ•°ç»„ï¼ˆäºŒåˆ†ã€å‰ç¼€å’Œã€æ»‘åŠ¨çª—å£ï¼‰" class="headerlink" title="ï¼ˆ1ï¼‰é•¿åº¦æœ€å°çš„å­æ•°ç»„ï¼ˆäºŒåˆ†ã€å‰ç¼€å’Œã€æ»‘åŠ¨çª—å£ï¼‰"></a>ï¼ˆ1ï¼‰é•¿åº¦æœ€å°çš„å­æ•°ç»„ï¼ˆäºŒåˆ†ã€å‰ç¼€å’Œã€æ»‘åŠ¨çª—å£ï¼‰</h4><p><a href="https://leetcode.cn/problems/minimum-size-subarray-sum/description/?envType=study-plan-v2&envId=top-interview-150">209. é•¿åº¦æœ€å°çš„å­æ•°ç»„ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><h5 id="æ–¹æ³•ä¸€ï¼šæš´åŠ›æ³•ï¼ˆè¶…æ—¶ï¼‰"><a href="#æ–¹æ³•ä¸€ï¼šæš´åŠ›æ³•ï¼ˆè¶…æ—¶ï¼‰" class="headerlink" title="æ–¹æ³•ä¸€ï¼šæš´åŠ›æ³•ï¼ˆè¶…æ—¶ï¼‰"></a>æ–¹æ³•ä¸€ï¼šæš´åŠ›æ³•ï¼ˆè¶…æ—¶ï¼‰</h5><h5 id="æ–¹æ³•äºŒï¼š-2"><a href="#æ–¹æ³•äºŒï¼š-2" class="headerlink" title="æ–¹æ³•äºŒï¼š"></a>æ–¹æ³•äºŒï¼š</h5><p>å‰ç¼€å’Œ+äºŒåˆ†æŸ¥æ‰¾ï¼šåœ¨æƒ³åˆ°ä½¿ç”¨å‰ç¼€å’Œä¹‹åï¼Œéœ€è¦ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾æ‰¾åˆ°æƒ³è¦çš„ä¸‹æ ‡æ‰èƒ½ä½¿æ—¶é—´å¤æ‚åº¦ä¸‹é™ã€‚è€Œåœ¨æ¯ä¸ªè¯­è¨€ä¸­éƒ½å·²ç»æœ‰å†…ç½®çš„äºŒåˆ†æŸ¥æ‰¾å‡½æ•°ï¼Œæ‰¾åˆ°å¤§äºæˆ–è€…ç­‰äºæŸä¸ªæ•°çš„ç¬¬ä¸€ä¸ªä½ç½®ã€‚c++ï¼šlower_boundã€‚æ—¶é—´å¤æ‚åº¦ï¼šnlog(n)</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">minSubArrayLen</span><span class="hljs-params">(<span class="hljs-type">int</span> target, vector&lt;<span class="hljs-type">int</span>&gt;&amp; nums)</span> </span>&#123;<br><span class="hljs-type">int</span> n=nums.<span class="hljs-built_in">size</span>();<br>   <span class="hljs-keyword">if</span>(n==<span class="hljs-number">0</span>)<br>      <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>   <span class="hljs-type">int</span> ans=INT_MAX;   <span class="hljs-comment">//è¡¨ç¤ºæœ€å¤§çš„æ•´æ•°ï¼Œåœ¨åé¢çš„æ¯”è¾ƒæ—¶æœ‰ç”¨</span><br>   <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">sum</span><span class="hljs-params">(n+<span class="hljs-number">1</span>,<span class="hljs-number">0</span>)</span></span>;   <span class="hljs-comment">//sum[i]å­˜å‚¨çš„æ˜¯nums[0]åˆ°nums[i-1]çš„å’Œï¼Œå› æ­¤è¦è®¾ç½®n+1çš„é•¿åº¦ï¼Œsum[0]=0,sum[1]=nums[0]â€¦â€¦</span><br>   <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++)<br>      sum[i]=sum[i<span class="hljs-number">-1</span>]+nums[i];   <span class="hljs-comment">//è®¡ç®—å‰ç¼€å’Œ</span><br>   <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++)&#123;<br>      <span class="hljs-type">int</span> s=target+sum[i<span class="hljs-number">-1</span>];   <span class="hljs-comment">//å°†ç›®æ ‡åŠ ä¸Šå½“å‰åæ ‡çš„å‰ç¼€å’Œï¼Œæ–¹ä¾¿æŸ¥æ‰¾ï¼ˆi-1ä¸ºå­ä¸²ç¬¬ä¸€ä¸ªåæ ‡ï¼‰</span><br>      <span class="hljs-keyword">auto</span> bound=<span class="hljs-built_in">lower_bound</span>(sum.<span class="hljs-built_in">begin</span>(),sum.<span class="hljs-built_in">end</span>(),s);  <span class="hljs-comment">//æ³¨æ„æŸ¥æ‰¾å¾—åˆ°çš„æ˜¯ä½ç½®</span><br>      <span class="hljs-keyword">if</span>(bound!=sum.<span class="hljs-built_in">end</span>())<br>         ans=<span class="hljs-built_in">min</span>(ans,bound-sum.<span class="hljs-built_in">begin</span>()-(i<span class="hljs-number">-1</span>));  <br>   &#125;<br>   <span class="hljs-keyword">return</span> ans==INT_MAX?<span class="hljs-number">0</span>:ans;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="æ–¹æ³•ä¸‰ï¼š-1"><a href="#æ–¹æ³•ä¸‰ï¼š-1" class="headerlink" title="æ–¹æ³•ä¸‰ï¼š"></a>æ–¹æ³•ä¸‰ï¼š</h5><p>æ»‘åŠ¨çª—å£ï¼šè®¾ç½®å·¦å³æŒ‡é’ˆè¡¨ç¤ºçª—å£çš„ä¸¤è¾¹ï¼Œä¿è¯çª—å£å†…å…ƒç´ ä¹‹å’Œæ»¡è¶³è¦æ±‚æ—¶ï¼Œå·¦æŒ‡é’ˆå³ç§»ï¼Œä¸æ–­ä¿å­˜å·¦å³æŒ‡é’ˆç›¸å·®æœ€å°çš„é‚£ä¸ªå€¼ã€‚å½“çª—å£ä¸ç¬¦åˆè¦æ±‚æ—¶ï¼Œå³æŒ‡é’ˆç»§ç»­å³ç§»ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">min</span><span class="hljs-params">(<span class="hljs-type">int</span> target,vetor&lt;<span class="hljs-type">int</span>&gt; num)</span></span>&#123;<br>   <span class="hljs-type">int</span> n=num.<span class="hljs-built_in">size</span>();<br>   <span class="hljs-keyword">if</span>(!n)  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>   <span class="hljs-type">int</span> ans=INT_MAX,l=<span class="hljs-number">0</span>,r=<span class="hljs-number">0</span>,sum=<span class="hljs-number">0</span>;<br>   <span class="hljs-keyword">while</span>(r&lt;n)&#123;<br>      sum+=num[r];<br>      <span class="hljs-keyword">while</span>(sum&gt;=target)&#123;<br>         ans=<span class="hljs-built_in">min</span>(ans,r-l+<span class="hljs-number">1</span>);<br>         sum-=num[l];<br>         l++;<br>      &#125;<br>      r++;<br>   &#125;<br>   <span class="hljs-keyword">return</span> ans==INT_MAX?<span class="hljs-number">0</span>:ans;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ï¼ˆ2ï¼‰æœç´¢äºŒç»´çŸ©é˜µï¼ˆäºŒåˆ†æ³•ï¼‰"><a href="#ï¼ˆ2ï¼‰æœç´¢äºŒç»´çŸ©é˜µï¼ˆäºŒåˆ†æ³•ï¼‰" class="headerlink" title="ï¼ˆ2ï¼‰æœç´¢äºŒç»´çŸ©é˜µï¼ˆäºŒåˆ†æ³•ï¼‰"></a>ï¼ˆ2ï¼‰æœç´¢äºŒç»´çŸ©é˜µï¼ˆäºŒåˆ†æ³•ï¼‰</h4><h5 id="æ–¹æ³•ä¸€ï¼šä¸¤æ¬¡äºŒåˆ†æŸ¥æ‰¾"><a href="#æ–¹æ³•ä¸€ï¼šä¸¤æ¬¡äºŒåˆ†æŸ¥æ‰¾" class="headerlink" title="æ–¹æ³•ä¸€ï¼šä¸¤æ¬¡äºŒåˆ†æŸ¥æ‰¾"></a>æ–¹æ³•ä¸€ï¼šä¸¤æ¬¡äºŒåˆ†æŸ¥æ‰¾</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">searchMatrix</span><span class="hljs-params">(vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt;&amp; num, <span class="hljs-type">int</span> t)</span> </span>&#123;<br><span class="hljs-keyword">auto</span> row=<span class="hljs-built_in">upper_bound</span>(num.<span class="hljs-built_in">begin</span>(),num.<span class="hljs-built_in">end</span>(),t,[](<span class="hljs-type">const</span> <span class="hljs-type">int</span> b,<span class="hljs-type">const</span> vector&lt;<span class="hljs-type">int</span>&gt; &amp;a)&#123;<span class="hljs-keyword">return</span> b&lt;a[<span class="hljs-number">0</span>];&#125;);  <span class="hljs-comment">//æ‰¾åˆ°ç¬¬ä¸€ä¸ªå…ƒç´ å¤§äºç»™å®šå…ƒç´ çš„é‚£ä¸€è¡Œ</span><br>   <span class="hljs-keyword">if</span>(row==num.<span class="hljs-built_in">begin</span>())  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>   --row;<br>   <span class="hljs-keyword">return</span> <span class="hljs-built_in">binary_search</span>(row-&gt;<span class="hljs-built_in">begin</span>(),row-&gt;<span class="hljs-built_in">end</span>(),t);<br>   <span class="hljs-comment">//äºŒåˆ†æŸ¥æ‰¾å‡½æ•°ï¼Œæ‰¾åˆ°ç­‰äºç»™å®šå…ƒç´ çš„ä¸‹æ ‡ï¼Œæ‰¾ä¸åˆ°å°±è¿”å›false</span><br>&#125;<br></code></pre></td></tr></table></figure><h5 id="æ–¹æ³•äºŒï¼šä¸€æ¬¡äºŒåˆ†æŸ¥æ‰¾ï¼ˆå‡æƒ³æˆä¸€ç»´æ•°ç»„ï¼‰"><a href="#æ–¹æ³•äºŒï¼šä¸€æ¬¡äºŒåˆ†æŸ¥æ‰¾ï¼ˆå‡æƒ³æˆä¸€ç»´æ•°ç»„ï¼‰" class="headerlink" title="æ–¹æ³•äºŒï¼šä¸€æ¬¡äºŒåˆ†æŸ¥æ‰¾ï¼ˆå‡æƒ³æˆä¸€ç»´æ•°ç»„ï¼‰"></a>æ–¹æ³•äºŒï¼šä¸€æ¬¡äºŒåˆ†æŸ¥æ‰¾ï¼ˆå‡æƒ³æˆä¸€ç»´æ•°ç»„ï¼‰</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">searchMatrix</span><span class="hljs-params">(vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt;&amp; num, <span class="hljs-type">int</span> t)</span> </span>&#123;<br>   <span class="hljs-type">int</span> m=num.<span class="hljs-built_in">size</span>(),n=num[<span class="hljs-number">0</span>].size;   <span class="hljs-comment">//å¾—åˆ°è¡Œæ•°(m)å’Œåˆ—æ•°(n)</span><br>   <span class="hljs-type">int</span> low=<span class="hljs-number">0</span>,high=m*n<span class="hljs-number">-1</span>;<br>   <span class="hljs-keyword">while</span>(low&lt;high)&#123;<br>      <span class="hljs-type">int</span> mid=(high-low)/<span class="hljs-number">2</span>+low;  <span class="hljs-comment">//é˜²æ­¢æº¢å‡º</span><br>      <span class="hljs-type">int</span> x=num[mid/n][mid%n];   <span class="hljs-comment">//æ³¨æ„æ˜¯nï¼ï¼ï¼ä¸æ˜¯m</span><br>      <span class="hljs-keyword">if</span>(x&lt;t)<br>         low=mid+<span class="hljs-number">1</span>;<br>      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(x&gt;t)<br>         high=mid<span class="hljs-number">-1</span>;<br>      <span class="hljs-keyword">else</span><br>         <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>   &#125;<br>   <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ï¼ˆ3ï¼‰æ‰“å®¶åŠ«èˆï¼ˆä¸€ç»´åŠ¨æ€è§„åˆ’ï¼‰"><a href="#ï¼ˆ3ï¼‰æ‰“å®¶åŠ«èˆï¼ˆä¸€ç»´åŠ¨æ€è§„åˆ’ï¼‰" class="headerlink" title="ï¼ˆ3ï¼‰æ‰“å®¶åŠ«èˆï¼ˆä¸€ç»´åŠ¨æ€è§„åˆ’ï¼‰"></a>ï¼ˆ3ï¼‰æ‰“å®¶åŠ«èˆï¼ˆä¸€ç»´åŠ¨æ€è§„åˆ’ï¼‰</h4><p><a href="https://leetcode.cn/problems/house-robber/description/?envType=study-plan-v2&envId=top-interview-150">198. æ‰“å®¶åŠ«èˆ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><p>ç¬¬ä¸€æ­¥ï¼šå®šä¹‰å­é—®é¢˜ï¼šä»ké—´æˆ¿å±‹ä¸­å¯ä»¥å·åˆ°çš„æœ€å¤§é‡‘é¢</p><p>ç¬¬äºŒæ­¥ï¼šåˆ—å‡ºé€’æ¨å…³ç³»ã€‚é¢˜ç›®è¦æ±‚ä¸èƒ½å¤Ÿå·ä¸¤é—´ç›¸é‚»çš„æˆ¿å±‹ï¼Œå› æ­¤å·ké—´æˆ¿å±‹å°±æœ‰äº†ä¸¤ä¸ªé€‰æ‹©ï¼Œf[k]&#x3D;max( f[k-1] , f[k-2]+num[k-1] )ï¼›</p><p>ç¬¬ä¸‰æ­¥ï¼šå†™å‡ºå·²çŸ¥å€¼ã€‚f[0]&#x3D;0,f[1]&#x3D;num[0];</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">rob</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; num)</span></span>&#123;<br>   <span class="hljs-type">int</span> n=num.<span class="hljs-built_in">size</span>();<br>   <span class="hljs-keyword">if</span>(!n)  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>   <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">add</span><span class="hljs-params">(n+<span class="hljs-number">1</span>,<span class="hljs-number">0</span>)</span></span>;<br>   add[<span class="hljs-number">1</span>]=num[<span class="hljs-number">0</span>];<br>   <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;n;i++)&#123;<br>      add[i+<span class="hljs-number">1</span>]=<span class="hljs-built_in">max</span>(add[i],add[i<span class="hljs-number">-1</span>]+num[i]);<br>   &#125;<br>   <span class="hljs-keyword">return</span> add[n];<br>&#125;<br></code></pre></td></tr></table></figure><p>ç¬¬å››æ­¥ï¼šç©ºé—´ä¼˜åŒ–ã€‚æˆ‘ä»¬å‘ç°æ¯æ¬¡éƒ½åªéœ€è¦ç”¨åˆ°æ•°ç»„çš„æœ€åä¸¤ä¸ªå€¼ï¼Œå› æ­¤ç”¨ä¸¤ä¸ªæ•´æ•°ä¿å­˜è¿™ä¸¤ä¸ªå€¼å³å¯ï¼Œä¸éœ€è¦å¤šä½™ç©ºé—´ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">rob</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; num)</span></span>&#123;<br>   <span class="hljs-type">int</span> pre=<span class="hljs-number">0</span>,cur=<span class="hljs-number">0</span>,ans;<br>   <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i:num)&#123;<br>      ans=<span class="hljs-built_in">max</span>(pre+i,cur);<br>      pre=cur;<br>      cur=ans;<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ï¼ˆ4ï¼‰ä¸‰è§’å½¢æœ€å°è·¯å¾„å’Œï¼ˆäºŒç»´åŠ¨æ€è§„åˆ’ï¼‰"><a href="#ï¼ˆ4ï¼‰ä¸‰è§’å½¢æœ€å°è·¯å¾„å’Œï¼ˆäºŒç»´åŠ¨æ€è§„åˆ’ï¼‰" class="headerlink" title="ï¼ˆ4ï¼‰ä¸‰è§’å½¢æœ€å°è·¯å¾„å’Œï¼ˆäºŒç»´åŠ¨æ€è§„åˆ’ï¼‰"></a>ï¼ˆ4ï¼‰ä¸‰è§’å½¢æœ€å°è·¯å¾„å’Œï¼ˆäºŒç»´åŠ¨æ€è§„åˆ’ï¼‰</h4><p><a href="https://leetcode.cn/problems/triangle/description/?envType=study-plan-v2&envId=top-interview-150">120. ä¸‰è§’å½¢æœ€å°è·¯å¾„å’Œ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><h5 id="æ–¹æ³•ä¸€ï¼šåŠ¨æ€è§„åˆ’ï¼ˆè‡ªåº•å‘ä¸Šï¼‰-ä¸æ”¹åŠ¨åŸæ•°ç»„"><a href="#æ–¹æ³•ä¸€ï¼šåŠ¨æ€è§„åˆ’ï¼ˆè‡ªåº•å‘ä¸Šï¼‰-ä¸æ”¹åŠ¨åŸæ•°ç»„" class="headerlink" title="æ–¹æ³•ä¸€ï¼šåŠ¨æ€è§„åˆ’ï¼ˆè‡ªåº•å‘ä¸Šï¼‰(ä¸æ”¹åŠ¨åŸæ•°ç»„)"></a>æ–¹æ³•ä¸€ï¼šåŠ¨æ€è§„åˆ’ï¼ˆè‡ªåº•å‘ä¸Šï¼‰(ä¸æ”¹åŠ¨åŸæ•°ç»„)</h5><p>è®¾dp[i] [j]è¡¨ç¤ºç¬¬iè¡Œç¬¬jä¸ªå…ƒç´ åˆ°æœ€åä¸€è¡Œçš„æœ€çŸ­è·¯å¾„ï¼Œåˆ™å¯ä»¥å¾—åˆ°çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š                      dp[i] [j]&#x3D;min(dp[i+1] [j] , dp[i+1] [j+1]) +triangle[i] [j]ï¼Œåˆ™dp[0] [0]ä¸ºæ‰€éœ€å€¼ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">minimumTotal</span><span class="hljs-params">(vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt;&amp; triangle)</span> </span>&#123;<br>   <span class="hljs-type">int</span> n=triangle.<span class="hljs-built_in">size</span>();<br>   <span class="hljs-type">int</span>[][] dp=<span class="hljs-keyword">new</span> <span class="hljs-type">int</span>[n+<span class="hljs-number">1</span>][n+<span class="hljs-number">1</span>];<br>   <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=n<span class="hljs-number">-1</span>;i&gt;=<span class="hljs-number">0</span>;i--)&#123;<br>      <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">0</span>;j&lt;=i;j++)&#123;<br>         dp[i][j]=<span class="hljs-built_in">min</span>(dp[i+j][j],dp[i+<span class="hljs-number">1</span>][j+<span class="hljs-number">1</span>])+triangle[i][j];<br>      &#125;<br>   &#125;<br>   <span class="hljs-keyword">return</span> dp[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>];<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="æ–¹æ³•äºŒï¼šåŠ¨æ€è§„åˆ’ï¼ˆç©ºé—´ä¼˜åŒ–ï¼‰"><a href="#æ–¹æ³•äºŒï¼šåŠ¨æ€è§„åˆ’ï¼ˆç©ºé—´ä¼˜åŒ–ï¼‰" class="headerlink" title="æ–¹æ³•äºŒï¼šåŠ¨æ€è§„åˆ’ï¼ˆç©ºé—´ä¼˜åŒ–ï¼‰"></a>æ–¹æ³•äºŒï¼šåŠ¨æ€è§„åˆ’ï¼ˆç©ºé—´ä¼˜åŒ–ï¼‰</h5><p>æˆ‘ä»¬ä¼šå‘ç°æ¯æ¬¡åªéœ€è¦ç”¨åˆ°ä¸¤ä¸ªå…ˆå‰å€¼ï¼Œå› æ­¤ä¸éœ€è¦ç”¨åˆ°äºŒç»´æ•°ç»„ã€‚dpæ•°ç»„ä¸æ–­ä¿å­˜æ¯ä¸€è¡Œæ¯ä¸ªå€¼éå†åˆ°æœ€åä¸€è¡Œçš„æœ€çŸ­è·¯å¾„ä¹‹å’Œã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">minimumTotal</span><span class="hljs-params">(vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt;&amp; triangle)</span> </span>&#123;<br>   <span class="hljs-type">int</span> n=triangle.<span class="hljs-built_in">size</span>();<br>   <span class="hljs-type">int</span>[] dp=<span class="hljs-keyword">new</span> <span class="hljs-type">int</span>[n+<span class="hljs-number">1</span>];<br>   <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=n<span class="hljs-number">-1</span>;i&gt;=<span class="hljs-number">0</span>;i--)&#123;<br>      <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">0</span>;j&lt;=i;j++)&#123;<br>         dp[j]=<span class="hljs-built_in">min</span>(dp[j],dp[j+<span class="hljs-number">1</span>])+triangle[i][j];<br>      &#125;<br>   &#125;<br>   <span class="hljs-keyword">return</span> dp[<span class="hljs-number">0</span>];<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2024-5-30"><a href="#2024-5-30" class="headerlink" title="2024&#x2F;5&#x2F;30"></a>2024&#x2F;5&#x2F;30</h3><h4 id="ï¼ˆ1ï¼‰æœ€å°è·¯å¾„å’Œï¼ˆäºŒç»´åŠ¨æ€è§„åˆ’ï¼‰"><a href="#ï¼ˆ1ï¼‰æœ€å°è·¯å¾„å’Œï¼ˆäºŒç»´åŠ¨æ€è§„åˆ’ï¼‰" class="headerlink" title="ï¼ˆ1ï¼‰æœ€å°è·¯å¾„å’Œï¼ˆäºŒç»´åŠ¨æ€è§„åˆ’ï¼‰"></a>ï¼ˆ1ï¼‰æœ€å°è·¯å¾„å’Œï¼ˆäºŒç»´åŠ¨æ€è§„åˆ’ï¼‰</h4><p><a href="https://leetcode.cn/problems/minimum-path-sum/description/?envType=study-plan-v2&envId=top-interview-150">64. æœ€å°è·¯å¾„å’Œ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><p>è·Ÿæ˜¨å¤©åšçš„é¢˜æ€è·¯å¾ˆåƒï¼ˆç›¸å½“äºå·ä¸ªå°æ‡’hhhï¼‰ï¼Œä¹Ÿæ˜¯ä¸æ»‘åœ°acäº†ï¼Œå°±æ˜¯æ²¡æœ‰ç©ºé—´ä¼˜åŒ–</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">minPathSum</span><span class="hljs-params">(vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt;&amp; grid)</span> </span>&#123;<br>        <span class="hljs-type">int</span> m=grid.<span class="hljs-built_in">size</span>(),n=grid[<span class="hljs-number">0</span>].<span class="hljs-built_in">size</span>();<br>        <span class="hljs-type">int</span> dp[<span class="hljs-number">205</span>][<span class="hljs-number">205</span>];<br>        dp[m<span class="hljs-number">-1</span>][n<span class="hljs-number">-1</span>]=grid[m<span class="hljs-number">-1</span>][n<span class="hljs-number">-1</span>];<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=m<span class="hljs-number">-2</span>;i&gt;=<span class="hljs-number">0</span>;i--)<br>            dp[i][n<span class="hljs-number">-1</span>]=dp[i+<span class="hljs-number">1</span>][n<span class="hljs-number">-1</span>]+grid[i][n<span class="hljs-number">-1</span>];<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=n<span class="hljs-number">-2</span>;i&gt;=<span class="hljs-number">0</span>;i--)<br>            dp[m<span class="hljs-number">-1</span>][i]=dp[m<span class="hljs-number">-1</span>][i+<span class="hljs-number">1</span>]+grid[m<span class="hljs-number">-1</span>][i];  <br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=m<span class="hljs-number">-2</span>;i&gt;=<span class="hljs-number">0</span>;i--)&#123;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=n<span class="hljs-number">-2</span>;j&gt;=<span class="hljs-number">0</span>;j--)&#123;<br>                dp[i][j]=<span class="hljs-built_in">min</span>(dp[i+<span class="hljs-number">1</span>][j],dp[i][j+<span class="hljs-number">1</span>])+grid[i][j];<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> dp[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>];<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p>è¯•ç€ç©ºé—´ä¼˜åŒ–ä¸€ä¸‹ï¼š(åˆ†ç±»è®¨è®ºåœ°å¥½ç‹—å±ï¼Œä½†æ˜¯ä¸çŸ¥é“æ€ä¹ˆåˆ†æƒ…å†µæ›´ç®€å•äº†ã€‚ã€‚ã€‚)</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">minPathSum</span><span class="hljs-params">(vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt;&amp; grid)</span> </span>&#123;<br>   <span class="hljs-type">int</span> m=grid.<span class="hljs-built_in">size</span>(),n=grid[<span class="hljs-number">0</span>].<span class="hljs-built_in">size</span>();<br>   <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">dp</span><span class="hljs-params">(n,<span class="hljs-number">0</span>)</span></span>;<br>   dp[<span class="hljs-number">0</span>]=grid[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>];<br>   <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;m;i++)&#123;<br>      <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">0</span>;j&lt;n;j++)&#123;<br>         <span class="hljs-keyword">if</span>(i==<span class="hljs-number">0</span>&amp;&amp;j!=<span class="hljs-number">0</span>)<br>            dp[j]=dp[j<span class="hljs-number">-1</span>]+grid[i][j];<br>         <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(j==<span class="hljs-number">0</span>&amp;&amp;i!=<span class="hljs-number">0</span>)<br>            dp[j]=dp[j]+grid[i][j];<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(i!=<span class="hljs-number">0</span>&amp;&amp;j!=<span class="hljs-number">0</span>)<br>            dp[j]=<span class="hljs-built_in">min</span>(dp[j<span class="hljs-number">-1</span>],dp[j])+grid[i][j];<br>      &#125;<br>   &#125;<br>   <span class="hljs-keyword">return</span> dp[n<span class="hljs-number">-1</span>];<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ï¼ˆ2ï¼‰ä¸åŒè·¯å¾„ï¼ˆäºŒç»´åŠ¨è§„ã€éšœç¢ç‰©ï¼‰"><a href="#ï¼ˆ2ï¼‰ä¸åŒè·¯å¾„ï¼ˆäºŒç»´åŠ¨è§„ã€éšœç¢ç‰©ï¼‰" class="headerlink" title="ï¼ˆ2ï¼‰ä¸åŒè·¯å¾„ï¼ˆäºŒç»´åŠ¨è§„ã€éšœç¢ç‰©ï¼‰"></a>ï¼ˆ2ï¼‰ä¸åŒè·¯å¾„ï¼ˆäºŒç»´åŠ¨è§„ã€éšœç¢ç‰©ï¼‰</h4><p><a href="https://leetcode.cn/problems/unique-paths-ii/description/?envType=study-plan-v2&envId=top-interview-150">63. ä¸åŒè·¯å¾„ II - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><h5 id="æ–¹æ³•ä¸€ï¼šåŠ¨è§„æ•°ç»„å­˜å‚¨è¯¥ä½ç½®çš„è·¯å¾„å’Œï¼Œé‡åˆ°éšœç¢ç‰©è¯¥ä½ç½®è·¯å¾„æ•°å˜ä¸ºé›¶ã€‚"><a href="#æ–¹æ³•ä¸€ï¼šåŠ¨è§„æ•°ç»„å­˜å‚¨è¯¥ä½ç½®çš„è·¯å¾„å’Œï¼Œé‡åˆ°éšœç¢ç‰©è¯¥ä½ç½®è·¯å¾„æ•°å˜ä¸ºé›¶ã€‚" class="headerlink" title="æ–¹æ³•ä¸€ï¼šåŠ¨è§„æ•°ç»„å­˜å‚¨è¯¥ä½ç½®çš„è·¯å¾„å’Œï¼Œé‡åˆ°éšœç¢ç‰©è¯¥ä½ç½®è·¯å¾„æ•°å˜ä¸ºé›¶ã€‚"></a>æ–¹æ³•ä¸€ï¼šåŠ¨è§„æ•°ç»„å­˜å‚¨è¯¥ä½ç½®çš„è·¯å¾„å’Œï¼Œé‡åˆ°éšœç¢ç‰©è¯¥ä½ç½®è·¯å¾„æ•°å˜ä¸ºé›¶ã€‚</h5><p>ACï¼Œä½†æ˜¯ç©ºé—´å¤æ‚åº¦æœ‰ç‚¹é«˜ï¼Œè€Œä¸”åœ¨åˆå§‹åŒ–çš„æ—¶å€™å®¹æ˜“çŠ¯é”™ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">uniquePathsWithObstacles</span><span class="hljs-params">(vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt;&amp; obstacleGrid)</span> </span>&#123;<br><span class="hljs-type">int</span> m=obstacleGrid.<span class="hljs-built_in">size</span>(),n=obstacleGrid[<span class="hljs-number">0</span>].<span class="hljs-built_in">size</span>();<br>   <span class="hljs-type">int</span> dp[<span class="hljs-number">105</span>][<span class="hljs-number">105</span>];<br>   dp[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]=obstacleGrid[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]==<span class="hljs-number">1</span>?<span class="hljs-number">0</span>:<span class="hljs-number">1</span>;<br>   <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;m;i++)<br>      dp[i][<span class="hljs-number">0</span>]=dp[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>];<br>   <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;n;i++)<br>      dp[<span class="hljs-number">0</span>][i]=dp[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>];<br>   <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;m;i++)&#123;<br>      <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>;j&lt;n;j++)&#123;<br>         <span class="hljs-keyword">if</span>(obstacleGrid[i][j])<br>            dp[i][j]=<span class="hljs-number">0</span>;<br>         <span class="hljs-keyword">else</span><br>            dp[i][j]=dp[i<span class="hljs-number">-1</span>][j]+dp[i][j<span class="hljs-number">-1</span>];<br>      &#125;<br>   &#125;<br>   <span class="hljs-keyword">return</span> dp[m<span class="hljs-number">-1</span>][n<span class="hljs-number">-1</span>];<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="æ–¹æ³•äºŒï¼šç©ºé—´ä¼˜åŒ–ï¼ˆæ»šåŠ¨æ•°ç»„ï¼‰"><a href="#æ–¹æ³•äºŒï¼šç©ºé—´ä¼˜åŒ–ï¼ˆæ»šåŠ¨æ•°ç»„ï¼‰" class="headerlink" title="æ–¹æ³•äºŒï¼šç©ºé—´ä¼˜åŒ–ï¼ˆæ»šåŠ¨æ•°ç»„ï¼‰"></a>æ–¹æ³•äºŒï¼šç©ºé—´ä¼˜åŒ–ï¼ˆæ»šåŠ¨æ•°ç»„ï¼‰</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">uniquePathsWithObstacles</span><span class="hljs-params">(vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt;&amp; obstacleGrid)</span> </span>&#123;<br>   <span class="hljs-type">int</span> m=obstacleGrid.<span class="hljs-built_in">size</span>(),n=obstacleGrid[<span class="hljs-number">0</span>].<span class="hljs-built_in">size</span>();<br>   <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">dp</span><span class="hljs-params">(n,<span class="hljs-number">0</span>)</span></span>;<br>   dp[<span class="hljs-number">0</span>]=obstacleGrid[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]==<span class="hljs-number">1</span>?<span class="hljs-number">0</span>:<span class="hljs-number">1</span>;<br>   <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;m;i++)&#123;<br>      <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">0</span>;j&lt;n;j++)&#123;<br>         <span class="hljs-keyword">if</span>(obstacleGrid[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>])<br>            dp[j]=<span class="hljs-number">0</span>;<br>         <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(j&gt;<span class="hljs-number">0</span>)<br>            dp[j]+=dp[j<span class="hljs-number">-1</span>];<br>      &#125;<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ï¼ˆ3ï¼‰æœ€é•¿å›æ–‡å­ä¸²"><a href="#ï¼ˆ3ï¼‰æœ€é•¿å›æ–‡å­ä¸²" class="headerlink" title="ï¼ˆ3ï¼‰æœ€é•¿å›æ–‡å­ä¸²"></a>ï¼ˆ3ï¼‰æœ€é•¿å›æ–‡å­ä¸²</h4><p><a href="https://leetcode.cn/problems/longest-palindromic-substring/description/?envType=study-plan-v2&envId=top-interview-150">5. æœ€é•¿å›æ–‡å­ä¸² - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><h5 id="æ–¹æ³•ä¸€ï¼šä¸­å¿ƒæ‰©å±•æ³•"><a href="#æ–¹æ³•ä¸€ï¼šä¸­å¿ƒæ‰©å±•æ³•" class="headerlink" title="æ–¹æ³•ä¸€ï¼šä¸­å¿ƒæ‰©å±•æ³•"></a>æ–¹æ³•ä¸€ï¼šä¸­å¿ƒæ‰©å±•æ³•</h5><p>åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼š1ã€å›æ–‡ä¸²é•¿åº¦æ˜¯å¥‡æ•°ï¼›2ã€å›æ–‡ä¸²é•¿åº¦æ˜¯å¶æ•°ã€‚å› æ­¤ä»ä¸­å¿ƒå‘å¤–æ‰©å±•æ—¶ä¹Ÿå°±æœ‰ä¸¤ç§æƒ…å†µï¼š1ã€ä¸­å¿ƒæ˜¯å½“å‰å€¼ï¼›2ã€ä¸­å¿ƒæ˜¯å½“å‰å€¼ä¸å³è¾¹å€¼</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function">string <span class="hljs-title">longestPalindrome</span><span class="hljs-params">(string s)</span> </span>&#123;<br>   <span class="hljs-type">int</span> n=s.<span class="hljs-built_in">size</span>(),pre=<span class="hljs-number">0</span>,maxL=<span class="hljs-number">0</span>;<br>   <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;i++)&#123;<br>      <span class="hljs-type">int</span> l=i<span class="hljs-number">-1</span>,r=i;<br>      <span class="hljs-keyword">for</span>(;l&gt;=<span class="hljs-number">0</span>&amp;&amp;r&lt;n&amp;&amp;s[l]==s[r];l--,r++);<br>      <span class="hljs-keyword">if</span>(maxL&lt;r-l+<span class="hljs-number">1</span>)&#123;<br>         maxL=r-l+<span class="hljs-number">1</span>;<br>         pre=l+<span class="hljs-number">1</span>;<br>      &#125;<br>      l=i<span class="hljs-number">-1</span>,r=i+<span class="hljs-number">1</span>;<br>      <span class="hljs-keyword">for</span>(;l&gt;=<span class="hljs-number">0</span>&amp;&amp;r&lt;n&amp;&amp;s[l]==s[r];l--,r++);<br>      <span class="hljs-keyword">if</span>(maxL&lt;r-l+<span class="hljs-number">1</span>)&#123;<br>         maxL=r-l+<span class="hljs-number">1</span>;<br>         pre=l+<span class="hljs-number">1</span>;<br>      &#125;<br>   &#125;<br>   <span class="hljs-keyword">return</span> s.<span class="hljs-built_in">substr</span>(pre,maxL);<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="æ–¹æ³•äºŒï¼šåŠ¨æ€è§„åˆ’"><a href="#æ–¹æ³•äºŒï¼šåŠ¨æ€è§„åˆ’" class="headerlink" title="æ–¹æ³•äºŒï¼šåŠ¨æ€è§„åˆ’"></a>æ–¹æ³•äºŒï¼šåŠ¨æ€è§„åˆ’</h4><p>ä¸çŸ¥é“ä¸ºä»€ä¹ˆåŠ›æ‰£ä¸èƒ½å®Œå…¨é€šè¿‡â€¦â€¦ä¸ç†è§£</p><p>ç†è§£äº†ï¼Œå› ä¸ºæ²¡æœ‰åˆå§‹åŒ–ä¸ºfalseå•Šå•Šå•Šå•Šæˆ‘è¦æ°”æ­»äº†</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function">string <span class="hljs-title">longestPalindrome</span><span class="hljs-params">(string s)</span> </span>&#123;<br>    <span class="hljs-type">int</span> len=s.<span class="hljs-built_in">length</span>();<br>    <span class="hljs-type">int</span> left=<span class="hljs-number">0</span>,right=<span class="hljs-number">0</span>,res=<span class="hljs-number">0</span>;<span class="hljs-comment">//è®°å½•å·¦å³è¾¹ç•Œå’Œå³-å·¦çš„é•¿åº¦</span><br>    <span class="hljs-type">bool</span> dp[<span class="hljs-number">1005</span>][<span class="hljs-number">1005</span>]=&#123;<span class="hljs-literal">false</span>&#125;;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=len<span class="hljs-number">-1</span>;i&gt;=<span class="hljs-number">0</span>;i--)&#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=i;j&lt;len;j++)&#123;<span class="hljs-comment">//j=iè¿™æ­¥å°±å°†æ¯ä¸ªå•ä¸ªå­—ç¬¦dpèµ‹ä¸ºäº†true</span><br>            <span class="hljs-keyword">if</span>(s[i]==s[j]&amp;&amp;(j - i &lt;= <span class="hljs-number">1</span> || dp[i + <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>]))&#123;<br>                dp[i][j] = <span class="hljs-literal">true</span>;<br>                <span class="hljs-keyword">if</span>(j-i&gt;res)&#123;<br>                    res=j-i;<span class="hljs-comment">//resè®°å¾—ä¹Ÿå¾—æ›´æ–°ï¼</span><br>                    left=i;<br>                    right=j;<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> s.<span class="hljs-built_in">substr</span>(left,res+<span class="hljs-number">1</span>);<span class="hljs-comment">//å·¦é—­å³å¼€</span><br>&#125; <br></code></pre></td></tr></table></figure><h4 id="ï¼ˆ4ï¼‰åˆ é™¤æœ‰åºæ•°ç»„ä¸­çš„é‡å¤é¡¹-IIï¼ˆåŒæŒ‡é’ˆï¼‰"><a href="#ï¼ˆ4ï¼‰åˆ é™¤æœ‰åºæ•°ç»„ä¸­çš„é‡å¤é¡¹-IIï¼ˆåŒæŒ‡é’ˆï¼‰" class="headerlink" title="ï¼ˆ4ï¼‰åˆ é™¤æœ‰åºæ•°ç»„ä¸­çš„é‡å¤é¡¹ IIï¼ˆåŒæŒ‡é’ˆï¼‰"></a>ï¼ˆ4ï¼‰åˆ é™¤æœ‰åºæ•°ç»„ä¸­çš„é‡å¤é¡¹ IIï¼ˆåŒæŒ‡é’ˆï¼‰</h4><p><a href="https://leetcode.cn/problems/remove-duplicates-from-sorted-array-ii/">80. åˆ é™¤æœ‰åºæ•°ç»„ä¸­çš„é‡å¤é¡¹ II</a></p><h5 id="æ–¹æ³•ä¸€ï¼šåŒæŒ‡é’ˆï¼ˆï¼Ÿï¼‰"><a href="#æ–¹æ³•ä¸€ï¼šåŒæŒ‡é’ˆï¼ˆï¼Ÿï¼‰" class="headerlink" title="æ–¹æ³•ä¸€ï¼šåŒæŒ‡é’ˆï¼ˆï¼Ÿï¼‰"></a>æ–¹æ³•ä¸€ï¼šåŒæŒ‡é’ˆï¼ˆï¼Ÿï¼‰</h5><p>è‡ªå·±å†™çš„ï¼Œæœ‰ç‚¹ä¸‘é™‹â€¦â€¦</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">removeDuplicates</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; nums)</span> </span>&#123;<br>        <span class="hljs-keyword">if</span>(nums.<span class="hljs-built_in">size</span>()&lt;<span class="hljs-number">3</span>)<br>            <span class="hljs-keyword">return</span> nums.<span class="hljs-built_in">size</span>();<br>        <span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">while</span>(i&lt;nums.<span class="hljs-built_in">size</span>()<span class="hljs-number">-1</span>)&#123;<br>            <span class="hljs-type">int</span> j=i+<span class="hljs-number">2</span>;<br>            <span class="hljs-keyword">while</span>(j&lt;nums.<span class="hljs-built_in">size</span>()&amp;&amp;nums[i]==nums[i+<span class="hljs-number">1</span>]&amp;&amp;nums[i]==nums[j])&#123;<br>                nums.<span class="hljs-built_in">erase</span>(nums.<span class="hljs-built_in">begin</span>()+j);<br>            &#125;<br>            <span class="hljs-keyword">if</span>(nums[i]==nums[i+<span class="hljs-number">1</span>])<br>                i+=<span class="hljs-number">2</span>;<br>            <span class="hljs-keyword">else</span><br>                i+=<span class="hljs-number">1</span>;<br>        &#125; <br>        <span class="hljs-keyword">return</span> nums.<span class="hljs-built_in">size</span>();       <br>    &#125;<br></code></pre></td></tr></table></figure><h5 id="æ–¹æ³•äºŒï¼šå•æŒ‡é’ˆ"><a href="#æ–¹æ³•äºŒï¼šå•æŒ‡é’ˆ" class="headerlink" title="æ–¹æ³•äºŒï¼šå•æŒ‡é’ˆ"></a>æ–¹æ³•äºŒï¼šå•æŒ‡é’ˆ</h5><p>é¦–å…ˆï¼Œå®šä¹‰ä¸€ä¸ªæŒ‡é’ˆ <code>i</code>ï¼Œç”¨æ¥è®°å½•ä¸é‡å¤å…ƒç´ çš„ä½ç½®ã€‚</p><p>éå†æ•°ç»„ <code>nums</code>ï¼Œå¯¹äºæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´  <code>num</code>ï¼š</p><ul><li>å¦‚æœ <code>i</code> å°äº 2ï¼ˆå³æ•°ç»„å‰ä¸¤ä¸ªå…ƒç´ ï¼‰ï¼Œæˆ–è€…å½“å‰å…ƒç´  <code>num</code> å¤§äº <code>nums[i - 2]</code>ï¼ˆè¯´æ˜å½“å‰å…ƒç´ å’Œå‰ä¸¤ä¸ªå…ƒç´ ä¸ç›¸åŒï¼‰ï¼Œåˆ™å°†å½“å‰å…ƒç´  <code>num</code> èµ‹å€¼ç»™ <code>nums[i]</code>ï¼Œå¹¶å°†æŒ‡é’ˆ <code>i</code> å‘åç§»åŠ¨ä¸€ä½ï¼Œç›¸å½“äºå°†å½“å‰å…ƒç´ ä¿ç•™ä¸‹æ¥ã€‚</li><li>å¦‚æœå½“å‰å…ƒç´  <code>num</code> å’Œ <code>nums[i - 2]</code> ç›¸åŒï¼ˆè¯´æ˜å½“å‰å…ƒç´ å·²ç»é‡å¤å‡ºç°ä¸¤æ¬¡ä»¥ä¸Šï¼‰ï¼Œåˆ™ä¸åšä»»ä½•æ“ä½œï¼Œç›´æ¥ç»§ç»­éå†ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚</li></ul><p>æœ€åè¿”å›æŒ‡é’ˆ <code>i</code>ï¼Œå³ä¸ºåˆ é™¤é‡å¤å…ƒç´ åæ•°ç»„çš„æ–°é•¿åº¦ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title">removeDuplicates</span><span class="hljs-params">(<span class="hljs-type">int</span>[] nums)</span> </span>&#123;<br>       <span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;<br>       <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> num : nums) &#123;<br>           <span class="hljs-keyword">if</span> (i &lt; <span class="hljs-number">2</span> || num &gt; nums[i - <span class="hljs-number">2</span>]) &#123;<br>               nums[i++] = num;<br>           &#125;<br>       &#125;<br>       <span class="hljs-keyword">return</span> i;<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ï¼ˆ5ï¼‰ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº"><a href="#ï¼ˆ5ï¼‰ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº" class="headerlink" title="ï¼ˆ5ï¼‰ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº"></a>ï¼ˆ5ï¼‰ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº</h4><p><a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock/">121. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº</a></p><p>è‡ªå·±å†™çš„ä»£ç å¤ªä¸‘é™‹äº†è€Œä¸”è¿˜æœ‰bugï¼ˆä¸çŸ¥é“ä¸ºå•¥ï¼‰ï¼Œè¿™æ˜¯chatgptå†™çš„ï¼Œè·Ÿæˆ‘ä¸€æ ·çš„æ€è·¯æ€ä¹ˆå°±è¿™ä¹ˆç®€æ´å‘¢å‘ƒå‘ƒå‘ƒï¼Œæ€ä¹ˆä¸ç®—å¤©æ‰å‘¢</p><p>æˆ‘ç”¨äº†ä¸¤ä¸ªæ•°ç»„å»è®°å½•â€¦â€¦å·¦è¾¹æœ€å°å€¼å’Œå³è¾¹æœ€å¤§å€¼ï¼Œæ€ä¹ˆä¸ç®—æ„šè ¢å‘¢â€¦â€¦</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">maxProfit</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; prices)</span> </span>&#123;<br>    <span class="hljs-type">int</span> minPrice = INT_MAX;<br>    <span class="hljs-type">int</span> maxProfit = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> price : prices) &#123;<br>        minPrice = <span class="hljs-built_in">min</span>(minPrice, price);   <span class="hljs-comment">//è®°å½•åˆ°ç›®å‰ä½ç½®çš„è‚¡ç¥¨ä»·æ ¼æœ€å°å€¼</span><br>        maxProfit = <span class="hljs-built_in">max</span>(maxProfit, price - minPrice);  <span class="hljs-comment">//ç»´æŠ¤åˆ©æ¶¦æœ€å¤§å€¼</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> maxProfit;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2024-5-31"><a href="#2024-5-31" class="headerlink" title="2024&#x2F;5&#x2F;31"></a>2024&#x2F;5&#x2F;31</h3><h4 id="ï¼ˆ1ï¼‰ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº-ï¼ˆåŠ¨è§„ã€è´ªå¿ƒï¼‰"><a href="#ï¼ˆ1ï¼‰ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº-ï¼ˆåŠ¨è§„ã€è´ªå¿ƒï¼‰" class="headerlink" title="ï¼ˆ1ï¼‰ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº||ï¼ˆåŠ¨è§„ã€è´ªå¿ƒï¼‰"></a>ï¼ˆ1ï¼‰ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº||ï¼ˆåŠ¨è§„ã€è´ªå¿ƒï¼‰</h4><p><a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-ii/?envType=study-plan-v2&envId=top-interview-150">122. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº II - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><h5 id="æ–¹æ³•ä¸€ï¼šç›´æ¥æ±‚è§£-è´ªå¿ƒ"><a href="#æ–¹æ³•ä¸€ï¼šç›´æ¥æ±‚è§£-è´ªå¿ƒ" class="headerlink" title="æ–¹æ³•ä¸€ï¼šç›´æ¥æ±‚è§£&#x2F;è´ªå¿ƒ"></a>æ–¹æ³•ä¸€ï¼šç›´æ¥æ±‚è§£&#x2F;è´ªå¿ƒ</h5><p>æŒ‰ç…§ç›´æ¥æ±‚è§£çš„æ€è·¯ï¼Œå¦‚æœè¦ä½¿åˆ©æ¶¦æœ€å¤§åŒ–ï¼Œåªéœ€è¦æŠŠè‚¡ç¥¨ä»·æ ¼çœ‹æˆæŠ˜çº¿å›¾ï¼Œè®¡ç®—æ¯ä¸€æ¬¡ä¸Šå‡çš„åˆ©æ¶¦ã€‚å¦‚æœæŠŠè·ç¦»çœ‹ä¸º1ï¼Œå°±çœ‹æ¯ä¸¤å¤©æ˜¯å¦æœ‰åˆ©æ¶¦ï¼Œåªè¦æœ‰å°±å¢åŠ åˆ©æ¶¦å€¼ã€‚</p><p>æŒ‰ç…§è´ªå¿ƒçš„æ€è·¯ï¼Œç”±äºè‚¡ç¥¨çš„è´­ä¹°æ²¡æœ‰é™åˆ¶ï¼Œå› æ­¤ç›¸å½“äºæ‰¾åˆ°è‹¥å¹²ä¸ªä¸ç›¸äº¤çš„åŒºé—´ï¼Œä½¿åŒºé—´å†…åˆ©æ¶¦å’Œæœ€å¤§ã€‚å¦‚æœåŒºé—´é•¿åº¦ä¸º1ï¼Œä¹Ÿå°±ç­‰åŒäºäº†åˆšåˆšçš„æ€è·¯ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">maxProfit</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; prices)</span> </span>&#123;<br><span class="hljs-type">int</span> maxp=<span class="hljs-number">0</span>,n=prices.<span class="hljs-built_in">size</span>();<br>   <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n<span class="hljs-number">-1</span>;i++)<br>     maxp+=<span class="hljs-built_in">max</span>(<span class="hljs-number">0</span>,prices[i+<span class="hljs-number">1</span>]-prices[i]);  <span class="hljs-comment">//çœå»äº†æ¯æ¬¡åˆ¤æ–­ä¸¤ä¸ªè‚¡ç¥¨å€¼çš„å¤§å°</span><br>   <span class="hljs-keyword">return</span> maxp;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="æ–¹æ³•äºŒï¼šåŠ¨æ€è§„åˆ’-1"><a href="#æ–¹æ³•äºŒï¼šåŠ¨æ€è§„åˆ’-1" class="headerlink" title="æ–¹æ³•äºŒï¼šåŠ¨æ€è§„åˆ’"></a>æ–¹æ³•äºŒï¼šåŠ¨æ€è§„åˆ’</h5><p>è™½ç„¶çŸ¥é“å¯ä»¥åŠ¨æ€è§„åˆ’ä½†æ˜¯å°±æ˜¯æƒ³ä¸åˆ°æ€ä¹ˆè§„åˆ’ï¼ï¼ï¼</p><p>é¦–å…ˆè¦è®¾ç½®çŠ¶æ€ï¼Œå¯ä»¥è®¾ç½®dp[i] [0]è¡¨ç¤ºç¬¬iå¤©äº¤æ˜“å®Œæ—¶æ‰‹é‡Œæ²¡æœ‰è‚¡ç¥¨çš„æœ€å¤§åˆ©æ¶¦ï¼Œdp[i] [1]åˆ™è¡¨ç¤ºæ‰‹é‡Œæœ‰è‚¡ç¥¨ã€‚ä¸‹é¢å°±å¯ä»¥åˆ—çŠ¶æ€è½¬ç§»æ–¹ç¨‹ã€‚ï¼ˆä¸€å¼€å§‹çœŸçš„æƒ³å¤æ‚äº†ï¼Œæ‰€ä»¥å®Œå…¨ä¸çŸ¥é“è¿™æ€ä¹ˆè½¬ç§»ï¼‰å¯¹äºdp[i] [0]ï¼Œæœ‰ä¸¤ç§æƒ…å†µï¼š1ã€dp[i] [0]&#x3D;dp[i-1] [0]ï¼ˆå’Œå‰ä¸€å¤©ä¿æŒä¸€è‡´ï¼‰                              2ã€dp[i] [0]&#x3D;dp[i-1] [1]+prices[i]ï¼ˆå‰ä¸€å¤©æœ‰è‚¡ç¥¨ï¼Œä»Šå¤©å–å‡ºï¼Œè·å¾—ä»Šå¤©çš„æ”¶ç›Šï¼Œä¸ç”¨ç®¡æˆæœ¬ï¼‰å¯¹äºdp[i] [1]ï¼š1ã€dp[i] [1]&#x3D;dp[i-1] [1]ï¼›2ã€dp[i] [1]&#x3D;dp[i-1] [0]-prices[i]</p><p>éå†ç»“æŸåï¼Œæˆ‘ä»¬æ‰‹ä¸­æœ‰ä¸¤ä¸ªå€¼ï¼Œdp[n-1] [0]å’Œdp[n-1] [1]ï¼Œæ˜¾ç„¶æœ€åæ‰‹é‡Œæ²¡æœ‰è‚¡ç¥¨çš„è¯åˆ©æ¶¦æ‰æ˜¯æœ€å¤§çš„ï¼Œå› æ­¤åº”è¯¥è¿”å›dp[n-1] [0]ã€‚</p><p>å¯¹äºè¿™é“é¢˜ä¹Ÿå¯ä»¥ç©ºé—´ä¼˜åŒ–ï¼Œå› ä¸ºæ¯æ¬¡éƒ½åªæ˜¯ç”¨åˆ°äº†å‰ä¸€å¤©çš„ä¸¤ä¸ªå€¼è€Œå·²ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">maxProfit</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; prices)</span> </span>&#123;<br><span class="hljs-type">int</span> n=prices.<span class="hljs-built_in">size</span>(),dp0,dp1,newdp0,newdp1;<br>   dp0=<span class="hljs-number">0</span>,dp1=-prices[<span class="hljs-number">0</span>];<br>   <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;n;i++)&#123;<br>      newdp0=<span class="hljs-built_in">max</span>(dp0,dp1+prices[i]);<br>      newdp1=<span class="hljs-built_in">max</span>(dp1,dp0-prices[i]);<br>      dp0=newdp0;<br>      dp1=newdp1;<br>   &#125;<br>   <span class="hljs-keyword">return</span> dp0;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ï¼ˆ2ï¼‰ä¸‰æ•°ä¹‹å’Œï¼ˆåŒæŒ‡é’ˆï¼‰"><a href="#ï¼ˆ2ï¼‰ä¸‰æ•°ä¹‹å’Œï¼ˆåŒæŒ‡é’ˆï¼‰" class="headerlink" title="ï¼ˆ2ï¼‰ä¸‰æ•°ä¹‹å’Œï¼ˆåŒæŒ‡é’ˆï¼‰"></a>ï¼ˆ2ï¼‰ä¸‰æ•°ä¹‹å’Œï¼ˆåŒæŒ‡é’ˆï¼‰</h4><p><a href="https://leetcode.cn/problems/3sum/description/?envType=study-plan-v2&envId=top-interview-150">15. ä¸‰æ•°ä¹‹å’Œ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><h5 id="æ–¹æ³•ä¸€-è‡ªå·±å†™çš„ï¼ˆæˆ‘ä¹Ÿæƒ³å†™åŒæŒ‡é’ˆæ³•ï¼Ÿï¼Ÿï¼‰"><a href="#æ–¹æ³•ä¸€-è‡ªå·±å†™çš„ï¼ˆæˆ‘ä¹Ÿæƒ³å†™åŒæŒ‡é’ˆæ³•ï¼Ÿï¼Ÿï¼‰" class="headerlink" title="æ–¹æ³•ä¸€:è‡ªå·±å†™çš„ï¼ˆæˆ‘ä¹Ÿæƒ³å†™åŒæŒ‡é’ˆæ³•ï¼Ÿï¼Ÿï¼‰"></a>æ–¹æ³•ä¸€:è‡ªå·±å†™çš„ï¼ˆæˆ‘ä¹Ÿæƒ³å†™åŒæŒ‡é’ˆæ³•ï¼Ÿï¼Ÿï¼‰</h5><p>é€šè¿‡äº†308&#x2F;313ä¸ªç”¨ä¾‹å‘œå‘œå‘œæˆ‘å“­æ­»ã€‚æœ€åæ˜¯æ—¶é—´è¶…äº†ï¼Œæˆ‘çš„ä»£ç å¥½ä¸‘é™‹â€¦â€¦æ„Ÿè§‰è¶…æ—¶é—´åº”è¯¥æ˜¯å› ä¸ºç”¨åˆ°äº†æŸ¥æ‰¾å‡½æ•°ï¼Œæœ‰ç‚¹ä¸‘é™‹ã€‚ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs c++">vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt; <span class="hljs-built_in">threeSum</span>(vector&lt;<span class="hljs-type">int</span>&gt;&amp; nums) &#123;<br>        <span class="hljs-type">int</span> n=nums.<span class="hljs-built_in">size</span>(),cur;<br>        vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt; num;<br>     <span class="hljs-built_in">sort</span>(nums.<span class="hljs-built_in">begin</span>(),nums.<span class="hljs-built_in">end</span>());<br>        <span class="hljs-keyword">if</span>(n&lt;<span class="hljs-number">3</span>||nums[<span class="hljs-number">0</span>]&gt;<span class="hljs-number">0</span>||nums[n<span class="hljs-number">-1</span>]&lt;<span class="hljs-number">0</span>)<br>            <span class="hljs-keyword">return</span> num;<br>        vector&lt;<span class="hljs-type">int</span>&gt; tmp;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n<span class="hljs-number">-2</span>;i++)&#123;<br>            <span class="hljs-keyword">if</span>(nums[i]&gt;<span class="hljs-number">0</span>)<br>                <span class="hljs-keyword">break</span>;<br>           <span class="hljs-keyword">if</span>(i&gt;<span class="hljs-number">0</span>&amp;&amp;nums[i]=nums[i+<span class="hljs-number">1</span>])<br>              <span class="hljs-keyword">continue</span>;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=i+<span class="hljs-number">1</span>;j&lt;n<span class="hljs-number">-1</span>;j++)&#123;<br>                cur=nums[i]+nums[j];<br>                cur=<span class="hljs-number">0</span>-cur;<br>                <span class="hljs-keyword">auto</span> it=<span class="hljs-built_in">find</span>(nums.<span class="hljs-built_in">begin</span>()+j+<span class="hljs-number">1</span>,nums.<span class="hljs-built_in">end</span>(),cur);<br>                <span class="hljs-keyword">if</span>(it!=nums.<span class="hljs-built_in">end</span>())&#123;<br>                    tmp=&#123;nums[i],nums[j],nums[it-nums.<span class="hljs-built_in">begin</span>()]&#125;;<br>                    <span class="hljs-keyword">if</span>(num.<span class="hljs-built_in">empty</span>()||<span class="hljs-built_in">find</span>(num.<span class="hljs-built_in">begin</span>(),num.<span class="hljs-built_in">end</span>(),tmp)==num.<span class="hljs-built_in">end</span>())<br>                    num.<span class="hljs-built_in">push_back</span>(tmp);<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> num;<br>    &#125;<br></code></pre></td></tr></table></figure><h5 id="æ–¹æ³•äºŒï¼šï¼ˆç›¸å‘ï¼‰åŒæŒ‡é’ˆæ³•"><a href="#æ–¹æ³•äºŒï¼šï¼ˆç›¸å‘ï¼‰åŒæŒ‡é’ˆæ³•" class="headerlink" title="æ–¹æ³•äºŒï¼šï¼ˆç›¸å‘ï¼‰åŒæŒ‡é’ˆæ³•"></a>æ–¹æ³•äºŒï¼šï¼ˆç›¸å‘ï¼‰åŒæŒ‡é’ˆæ³•</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs c++">vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt; <span class="hljs-built_in">threeSum</span>(vector&lt;<span class="hljs-type">int</span>&gt;&amp; nums) &#123;<br>   <span class="hljs-built_in">sort</span>(nums.<span class="hljs-built_in">begin</span>(),nums.<span class="hljs-built_in">end</span>());  <span class="hljs-comment">//ç¬¬ä¸€æ­¥æ’åº</span><br>   vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt; num;    <br>   <span class="hljs-type">int</span> n=nums.<span class="hljs-built_in">size</span>();   <span class="hljs-comment">//æˆ‘å¥½ä¸å®¹æ˜“ä¸¥è°¨ä¸€ä¼šä¸Šæ¥å°±åˆ¤æ–­næ˜¯ä¸æ˜¯å°äº3ï¼Œç»“æœé¢˜ç›®å†™äº†n&gt;=3</span><br>   <span class="hljs-keyword">if</span>(nums[n<span class="hljs-number">-1</span>]+num[n<span class="hljs-number">-2</span>]+nums[n<span class="hljs-number">-3</span>]&lt;<span class="hljs-number">0</span>)  <span class="hljs-keyword">return</span> num;   <span class="hljs-comment">//æœ€å¤§ä¸‰æ•°å’Œéƒ½å°äº0äº†</span><br>   <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n<span class="hljs-number">-2</span>;i++)&#123;<br>      <span class="hljs-type">int</span> x=nums[i];<br>      <span class="hljs-keyword">if</span>(i&amp;&amp;x=nums[i<span class="hljs-number">-1</span>])   <span class="hljs-keyword">break</span>;  <span class="hljs-comment">//è·³è¿‡é‡å¤å…ƒç´ </span><br>      <span class="hljs-keyword">if</span>(nums[i]+num[i+<span class="hljs-number">1</span>]+nums[i+<span class="hljs-number">2</span>]&gt;<span class="hljs-number">0</span>)   <span class="hljs-keyword">break</span>;   <span class="hljs-comment">//ä¸‰æ•°ä¹‹å’Œå·²ç»å¤§äº0</span><br>      <span class="hljs-keyword">if</span>(nums[n<span class="hljs-number">-1</span>]+num[n<span class="hljs-number">-2</span>]+nums[i]&lt;<span class="hljs-number">0</span>)   <span class="hljs-keyword">continue</span>;  <span class="hljs-comment">//å’Œæœ€å¤§ä¸¤ä¸ªæ•°ç›¸åŠ éƒ½å¤§äº0</span><br>      <span class="hljs-type">int</span> j=i+<span class="hljs-number">1</span>,k=n<span class="hljs-number">-1</span>;   <span class="hljs-comment">//ä¸€å‰ä¸€åä¸¤ä¸ªæŒ‡é’ˆ</span><br>      <span class="hljs-keyword">while</span>(j&lt;k)&#123;<br>         <span class="hljs-type">int</span> t=x+nums[j]+nums[k];<br>         <span class="hljs-keyword">if</span>(t&gt;<span class="hljs-number">0</span>)  k--;<br>         <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(t&lt;<span class="hljs-number">0</span>)  s--;<br>         <span class="hljs-keyword">else</span>&#123;<br>            num.push_back&#123;x,nums[j],nums[k]&#125;;<br>            <span class="hljs-keyword">for</span>(++j;j&lt;k&amp;&amp;nums[j]==nums[j<span class="hljs-number">-1</span>];++j);<br>            <span class="hljs-keyword">for</span>(--k;j&lt;k&amp;&amp;nums[k]==nums[k+<span class="hljs-number">1</span>];--k);  <span class="hljs-comment">//è·³è¿‡é‡å¤çš„æ•°å­—</span><br>         &#125;<br>      &#125;<br>   &#125;<br>   <span class="hljs-keyword">return</span> num;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ï¼ˆ3ï¼‰ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº-ï¼ˆkæ¬¡ï¼‰-åŠ¨æ€è§„åˆ’"><a href="#ï¼ˆ3ï¼‰ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº-ï¼ˆkæ¬¡ï¼‰-åŠ¨æ€è§„åˆ’" class="headerlink" title="ï¼ˆ3ï¼‰ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº|||ï¼ˆkæ¬¡ï¼‰(åŠ¨æ€è§„åˆ’)"></a>ï¼ˆ3ï¼‰ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº|||ï¼ˆkæ¬¡ï¼‰(åŠ¨æ€è§„åˆ’)</h4><p><a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iv/description/">188. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº IV - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><p>æˆ‘æ˜¯çœŸçš„æ²¡æœ‰æƒ³åˆ°è¿˜æœ‰|||â€¦â€¦åé¢å¥½åƒè¿˜æœ‰IVã€‚ä»Šå¤©ä¸‹åˆéƒ½è¦ä¹°å–è‚¡ç¥¨å•¦ï¼Œå“ˆå“ˆå“ˆï¼ˆè‹¦ç¬‘ï¼‰</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">maxProfit</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; prices)</span> </span>&#123;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> inf=INT_MIN/<span class="hljs-number">2</span>;  <span class="hljs-comment">//é™¤ä»¥äºŒæ˜¯ä¸ºäº†é˜²æ­¢æº¢å‡º</span><br>   <span class="hljs-type">int</span> n=prices.<span class="hljs-built_in">size</span>();<br>   <span class="hljs-type">int</span> buy1=inf; <span class="hljs-comment">//ç¬¬ä¸€æ¬¡ä¹°åçš„æœ€å¤§æ”¶ç›Šï¼Œåˆå§‹å€¼è®¾ç½®ä¸ºæœ€ä½</span><br>   <span class="hljs-type">int</span> sell1=<span class="hljs-number">0</span>;  <span class="hljs-comment">//ç¬¬ä¸€æ¬¡å–æ‰åçš„æœ€å¤§æ”¶ç›Š</span><br>   <span class="hljs-type">int</span> buy2=inf;<br>   <span class="hljs-type">int</span> sell2=<span class="hljs-number">0</span>;<br>   <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;i++)&#123;  <span class="hljs-comment">//å˜é‡æ›´æ–°çš„é¡ºåºå¯ä»¥éšæ„è°ƒæ¢</span><br>      sell1=<span class="hljs-built_in">max</span>(sell1,buy1+prices[i]);<br>      buy1=<span class="hljs-built_in">max</span>(buy1,-prices[i]);<br>      sell2=<span class="hljs-built_in">max</span>(sell2,buy2+prices[i]);<br>      buy2=<span class="hljs-built_in">max</span>(buy2,sell1-prices[i]);<br>   &#125;<br>   <span class="hljs-keyword">return</span> sell2;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ï¼ˆ4ï¼‰ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœŸï¼ˆkæ¬¡ï¼‰"><a href="#ï¼ˆ4ï¼‰ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœŸï¼ˆkæ¬¡ï¼‰" class="headerlink" title="ï¼ˆ4ï¼‰ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœŸï¼ˆkæ¬¡ï¼‰"></a>ï¼ˆ4ï¼‰ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœŸï¼ˆkæ¬¡ï¼‰</h4><p><a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iv/description/?envType=study-plan-v2&envId=top-interview-150">188. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº IV - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">maxProfit</span><span class="hljs-params">(<span class="hljs-type">int</span> k, vector&lt;<span class="hljs-type">int</span>&gt;&amp; prices)</span> </span>&#123;<br><span class="hljs-type">int</span> n=prices.<span class="hljs-built_in">size</span>();<br>   k=<span class="hljs-built_in">min</span>(k,n/<span class="hljs-number">2</span>);<br>   <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">buy</span><span class="hljs-params">(k+<span class="hljs-number">1</span>)</span></span>;<br>   <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">sell</span><span class="hljs-params">(k+<span class="hljs-number">1</span>)</span></span>;<br>   <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;i++)&#123;<br>      buy[i]=INT_MIN/<span class="hljs-number">2</span>;<br>      sell[i]=<span class="hljs-number">0</span>;<br>   &#125;<br>   <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;i++)&#123;<br>      <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>;j&lt;=k;j++)&#123;<br>         buy[j]=<span class="hljs-built_in">max</span>(buy[j],sell[j<span class="hljs-number">-1</span>]-prices[i]);<br>         sell[j]=<span class="hljs-built_in">max</span>(sell[j],buy[j<span class="hljs-number">-1</span>]+prices[i]);<br>      &#125;<br>   &#125;<br>   <span class="hljs-keyword">return</span> sell[k];<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ï¼ˆ5ï¼‰é˜¶ä¹˜åçš„0ï¼ˆæ•°å­¦ï¼‰"><a href="#ï¼ˆ5ï¼‰é˜¶ä¹˜åçš„0ï¼ˆæ•°å­¦ï¼‰" class="headerlink" title="ï¼ˆ5ï¼‰é˜¶ä¹˜åçš„0ï¼ˆæ•°å­¦ï¼‰"></a>ï¼ˆ5ï¼‰é˜¶ä¹˜åçš„0ï¼ˆæ•°å­¦ï¼‰</h4><p><a href="https://leetcode.cn/problems/factorial-trailing-zeroes/description/?envType=study-plan-v2&envId=top-interview-150">172. é˜¶ä¹˜åçš„é›¶ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><p>è¿™å±…ç„¶æ˜¯ä¸­ç­‰ï¼Ÿï¼Ÿä½ çš„ä¸­ç­‰æˆ‘çš„ä¸­ç­‰å¥½åƒä¸ä¸€æ ·ï¼Ÿï¼Ÿè‡ªå·±acäº†ä½†æ˜¯è´´ä¸ªå¤æ‚åº¦æ›´å°çš„è§£æ³•</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">trailingZeroes</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span> </span>&#123;<br>   <span class="hljs-type">int</span> ans=<span class="hljs-number">0</span>;<br>   <span class="hljs-keyword">while</span>(n)&#123;<br>      n=n/<span class="hljs-number">5</span>;<br>      ans+=n;<br>   &#125;<br>   <span class="hljs-keyword">return</span> ans;  <span class="hljs-comment">//å°±æ˜¯~è¿™ä¹ˆç®€å•</span><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="2024-6-1"><a href="#2024-6-1" class="headerlink" title="2024&#x2F;6&#x2F;1"></a>2024&#x2F;6&#x2F;1</h2><p>ä¼‘æ¯ä¸€å¤©ã€‚ã€‚å¤´ç–¼</p><h3 id="2024-6-2"><a href="#2024-6-2" class="headerlink" title="2024&#x2F;6&#x2F;2"></a>2024&#x2F;6&#x2F;2</h3><h4 id="ï¼ˆ1ï¼‰ç›´çº¿ä¸Šæœ€å¤šçš„ç‚¹æ•°"><a href="#ï¼ˆ1ï¼‰ç›´çº¿ä¸Šæœ€å¤šçš„ç‚¹æ•°" class="headerlink" title="ï¼ˆ1ï¼‰ç›´çº¿ä¸Šæœ€å¤šçš„ç‚¹æ•°"></a>ï¼ˆ1ï¼‰ç›´çº¿ä¸Šæœ€å¤šçš„ç‚¹æ•°</h4><p><a href="https://leetcode.cn/problems/max-points-on-a-line/description/?envType=study-plan-v2&envId=top-interview-150">149. ç›´çº¿ä¸Šæœ€å¤šçš„ç‚¹æ•° - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><p>æšä¸¾ç›´çº¿+å“ˆå¸Œè¡¨ï¼šå¤–å±‚å¾ªç¯éå†æ¯ä¸€ä¸ªç‚¹ï¼Œæ±‚å‡ºè·Ÿè¯¥ç‚¹åœ¨åŒä¸€æ¡ç›´çº¿ä¸Šçš„ç‚¹çš„æœ€å¤§å€¼ï¼Œç„¶åå†å¾—åˆ°æ‰€æœ‰ç‚¹ä¸­çš„æœ€å¤§å€¼ã€‚é¢˜ç›®ä¸­ç”¨å­—ç¬¦ä¸²ä¿å­˜æ–œç‡ï¼Œæ±‚å‡ºxåæ ‡å·®å’Œyåæ ‡å·®åï¼Œæ±‚å‡ºä»–ä»¬çš„æœ€å¤§å…¬çº¦æ•°ï¼Œåˆ†åˆ«é™¤å»å†å­˜å‚¨ï¼Œå¯ä»¥æœ‰æ•ˆçš„ç»´æŠ¤ç›¸åŒæ–œç‡çš„å“ˆå¸Œè¡¨ï¼Œä¹Ÿå¯ä»¥å¾ˆå¥½åœ°ä½¿xåæ ‡å·®ä¸º0çš„æƒ…å†µæ–¹ä¾¿å­˜å‚¨ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">maxPoints</span><span class="hljs-params">(vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt;&amp; points)</span> </span>&#123;<br>        <span class="hljs-type">int</span> n = points.<span class="hljs-built_in">size</span>(), ans = <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>            map&lt;string, <span class="hljs-type">int</span>&gt; map;  <span class="hljs-comment">//æ¯æ¬¡å¾ªç¯éƒ½è¦é‡æ–°æ„é€ å“ˆå¸Œè¡¨</span><br>            <span class="hljs-type">int</span> maxv = <span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = i + <span class="hljs-number">1</span>; j &lt; n; j++) &#123;<br>                <span class="hljs-type">int</span> x1 = points[i][<span class="hljs-number">0</span>], y1 = points[i][<span class="hljs-number">1</span>], x2 = points[j][<span class="hljs-number">0</span>], y2 = points[j][<span class="hljs-number">1</span>];<br>                <span class="hljs-type">int</span> a = x1 - x2, b = y1 - y2;<br>                <span class="hljs-type">int</span> k = <span class="hljs-built_in">gcd</span>(a, b);<br>                string key = <span class="hljs-built_in">to_string</span>(a / k) + <span class="hljs-string">&quot;_&quot;</span> + <span class="hljs-built_in">to_string</span>(b / k);<br>                map[key]++;<br>                maxv = <span class="hljs-built_in">max</span>(maxv, map[key]);<br>            &#125;<br>            ans = <span class="hljs-built_in">max</span>(ans, maxv + <span class="hljs-number">1</span>);<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<span class="hljs-comment">// æ±‚æœ€å¤§å…¬çº¦æ•°çš„ä»£ç </span><br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">gcd</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> b == <span class="hljs-number">0</span> ? a : <span class="hljs-built_in">gcd</span>(b, a % b);<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p>æ±‚æœ€å°å…¬å€æ•°çš„ä»£ç ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">lcm</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> </span>&#123;<br>    <span class="hljs-comment">// å…ˆæ±‚æœ€å¤§å…¬çº¦æ•°</span><br>    <span class="hljs-type">int</span> num = <span class="hljs-built_in">gcd</span>(a, b);<br>    <span class="hljs-comment">// åˆ©ç”¨æœ€å¤§å…¬çº¦æ•°æ±‚æœ€å°å…¬å€æ•°</span><br>    <span class="hljs-keyword">return</span> (a * b) / num;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ï¼ˆ2ï¼‰é›¶é’±å…‘æ¢ï¼ˆä¸€ç»´åŠ¨è§„ï¼‰"><a href="#ï¼ˆ2ï¼‰é›¶é’±å…‘æ¢ï¼ˆä¸€ç»´åŠ¨è§„ï¼‰" class="headerlink" title="ï¼ˆ2ï¼‰é›¶é’±å…‘æ¢ï¼ˆä¸€ç»´åŠ¨è§„ï¼‰"></a>ï¼ˆ2ï¼‰é›¶é’±å…‘æ¢ï¼ˆä¸€ç»´åŠ¨è§„ï¼‰</h4><p><a href="https://leetcode.cn/problems/coin-change/?envType=study-plan-v2&envId=top-interview-150">322. é›¶é’±å…‘æ¢ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><p>å¾ˆå¥½çš„é¢˜ç›®ï¼Œä½¿æˆ‘å°è„‘èç¼©ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">coinChange</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; coins, <span class="hljs-type">int</span> amount)</span> </span>&#123;<br>   <span class="hljs-type">int</span> MAX=amount+<span class="hljs-number">1</span>;<br>   <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">dp</span><span class="hljs-params">(amount+<span class="hljs-number">1</span>,MAX)</span></span>;  <span class="hljs-comment">//è‹¥æœ€ådp(amount)ä¸ºmaxè¯æ˜å‡‘ä¸åˆ°</span><br>   dp[<span class="hljs-number">0</span>]=<span class="hljs-number">0</span>;<br>   <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;=amount;i++)<br>      <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">0</span>;j&lt;(<span class="hljs-type">int</span>)coins.<span class="hljs-built_in">size</span>();++j)<br>         <span class="hljs-keyword">if</span>(coins[j]&lt;=i)<br>            dp[i]=<span class="hljs-built_in">min</span>(dp[i],dp[i-coins[j]]+<span class="hljs-number">1</span>);<br>   <span class="hljs-keyword">return</span> dp[amount]==MAX?<span class="hljs-number">-1</span>:dp[amount];<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>C++</category>
      
    </categories>
    
    
    <tags>
      
      <tag>C++</tag>
      
      <tag>Leetcode</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>c++äºŒå‰æ ‘è¯¦è§£ï¼ˆæ¦‚å¿µ+ä¾‹é¢˜ï¼‰</title>
    <link href="/2024/05/20/c++%E4%BA%8C%E5%8F%89%E6%A0%91%E8%AF%A6%E8%A7%A3%EF%BC%88%E6%A6%82%E5%BF%B5+%E4%BE%8B%E9%A2%98%EF%BC%89/"/>
    <url>/2024/05/20/c++%E4%BA%8C%E5%8F%89%E6%A0%91%E8%AF%A6%E8%A7%A3%EF%BC%88%E6%A6%82%E5%BF%B5+%E4%BE%8B%E9%A2%98%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<p>äºŒå‰æ ‘çš„å­¦ä¹ è®°å½•</p><span id="more"></span><h3 id="ä¸€ã€äºŒå‰æ ‘ç›¸å…³æ¦‚å¿µ"><a href="#ä¸€ã€äºŒå‰æ ‘ç›¸å…³æ¦‚å¿µ" class="headerlink" title="ä¸€ã€äºŒå‰æ ‘ç›¸å…³æ¦‚å¿µ"></a>ä¸€ã€äºŒå‰æ ‘ç›¸å…³æ¦‚å¿µ</h3><h4 id="ï¼ˆ1ï¼‰äºŒå‰æ ‘çš„ç»“æ„ï¼ˆç…§æ¬åŠ›æ‰£ç½‘ç«™ï¼‰"><a href="#ï¼ˆ1ï¼‰äºŒå‰æ ‘çš„ç»“æ„ï¼ˆç…§æ¬åŠ›æ‰£ç½‘ç«™ï¼‰" class="headerlink" title="ï¼ˆ1ï¼‰äºŒå‰æ ‘çš„ç»“æ„ï¼ˆç…§æ¬åŠ›æ‰£ç½‘ç«™ï¼‰"></a>ï¼ˆ1ï¼‰äºŒå‰æ ‘çš„ç»“æ„ï¼ˆç…§æ¬åŠ›æ‰£ç½‘ç«™ï¼‰</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">TreeNode</span> &#123;<br><span class="hljs-type">int</span> val;<br>TreeNode *left;<br>TreeNode *right;<br><span class="hljs-built_in">TreeNode</span>() : <span class="hljs-built_in">val</span>(<span class="hljs-number">0</span>), <span class="hljs-built_in">left</span>(<span class="hljs-literal">nullptr</span>), <span class="hljs-built_in">right</span>(<span class="hljs-literal">nullptr</span>) &#123;&#125;<br><span class="hljs-built_in">TreeNode</span>(<span class="hljs-type">int</span> x) : <span class="hljs-built_in">val</span>(x), <span class="hljs-built_in">left</span>(<span class="hljs-literal">nullptr</span>), <span class="hljs-built_in">right</span>(<span class="hljs-literal">nullptr</span>) &#123;&#125;<br><span class="hljs-built_in">TreeNode</span>(<span class="hljs-type">int</span> x, TreeNode *left, TreeNode *right) : <span class="hljs-built_in">val</span>(x), <span class="hljs-built_in">left</span>(left), <span class="hljs-built_in">right</span>(right) &#123;&#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p>æ»¡äºŒå‰æ ‘&#x2F;å®Œå…¨äºŒå‰æ ‘ï¼ˆåªæœ‰æœ€åä¸€å±‚ç¼ºå¤±ï¼Œä¸”åªæœ‰å³è¾¹ç¼ºå¤±ï¼‰</p><h4 id="ï¼ˆ2ï¼‰äºŒå‰æœç´¢æ ‘"><a href="#ï¼ˆ2ï¼‰äºŒå‰æœç´¢æ ‘" class="headerlink" title="ï¼ˆ2ï¼‰äºŒå‰æœç´¢æ ‘"></a>ï¼ˆ2ï¼‰äºŒå‰æœç´¢æ ‘</h4><h4 id="1ã€ç®€å•ä»‹ç»"><a href="#1ã€ç®€å•ä»‹ç»" class="headerlink" title="1ã€ç®€å•ä»‹ç»"></a>1ã€ç®€å•ä»‹ç»</h4><p>ä¸€ä¸ªèŠ‚ç‚¹å·¦å­æ ‘ä¸Šçš„æ‰€æœ‰èŠ‚ç‚¹çš„å€¼å…¨éƒ¨å°äºè¯¥èŠ‚ç‚¹ï¼Œå³å­æ ‘ä¸Šæ‰€æœ‰ç»“ç‚¹çš„å€¼å…¨éƒ¨å¤§äºè¯¥èŠ‚ç‚¹ã€‚</p><p>ä½œç”¨ï¼šæ ‘å¦‚å…¶åï¼ŒäºŒå‰æœç´¢æ ‘åœ¨æœç´¢æŸä¸ªèŠ‚ç‚¹çš„å€¼æ—¶é€Ÿåº¦æ›´å¿«ã€‚</p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240522195705342.png" alt="image-20240522195705342" style="zoom: 67%;" /><p>å¦‚å›¾ï¼Œè‹¥æƒ³è¦æ‰¾èŠ‚ç‚¹6ï¼Œä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œå°äºæ ¹èŠ‚ç‚¹ï¼Œæ‰¾å·¦å­æ ‘ï¼›å¤§äºèŠ‚ç‚¹3ï¼Œæ‰¾å³å­æ ‘ï¼›ç­‰äºèŠ‚ç‚¹6ï¼Œæ‰¾åˆ°èŠ‚ç‚¹ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬ä¼šå‘ç°è¿™æ£µäºŒå‰æœç´¢æ ‘çš„ä¸­åºéå†ï¼š1.3.4.6.7.8.10.13.14</p><h4 id="2ã€äºŒå‰æœç´¢æ ‘çš„æ­å»º"><a href="#2ã€äºŒå‰æœç´¢æ ‘çš„æ­å»º" class="headerlink" title="2ã€äºŒå‰æœç´¢æ ‘çš„æ­å»º"></a>2ã€äºŒå‰æœç´¢æ ‘çš„æ­å»º</h4><p>(1)ç¬¨è›‹ç‰ˆ</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">insert</span><span class="hljs-params">(<span class="hljs-type">int</span> k)</span></span><br><span class="hljs-function"></span>&#123;<br>   TreeNode* temp=root;<br>   TreeNode* prev=<span class="hljs-literal">nullptr</span>;<br>   <span class="hljs-keyword">while</span>(temp)&#123;<br>      prev=temp;<br>      <span class="hljs-keyword">if</span>(k&lt;temp-&gt;val)<br>         temp=temp-&gt;next;<br>      <span class="hljs-keyword">else</span><br>         temp=temp-&gt;right;<br>   &#125;<br>   <span class="hljs-keyword">if</span>(k&lt;prev-&gt;val)&#123;<br>      TreeNode* curr=<span class="hljs-keyword">new</span> <span class="hljs-built_in">TreeNode</span>(k);<br>      prev-&gt;left=curr;<br>      curr-&gt;left=curr-&gt;right=<span class="hljs-literal">nullptr</span>;<br>   &#125;<br>   <span class="hljs-keyword">if</span>(k&gt;prev-&gt;val)&#123;<br>      TreeNode* curr=<span class="hljs-keyword">new</span> <span class="hljs-built_in">TreeNode</span>(k);<br>      prev-&gt;right=curr;<br>      curr-&gt;left=curr-&gt;right=<span class="hljs-literal">nullptr</span>;<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ï¼ˆ2ï¼‰è°ƒç”¨è‡ªèº«æ­å»º</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function">TreeNode* <span class="hljs-title">add</span><span class="hljs-params">(TreeNode* root,<span class="hljs-type">int</span> num)</span></span><br><span class="hljs-function"></span>&#123;<br>   <span class="hljs-keyword">if</span>(root=<span class="hljs-literal">nullptr</span>)<br>      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TreeNode</span>(num);<br>   <span class="hljs-keyword">if</span>(root-&gt;val&gt;num)<br>      root-&gt;left=<span class="hljs-built_in">add</span>(root-&gt;left,num);<br>   <span class="hljs-keyword">else</span><br>      root-&gt;right=<span class="hljs-built_in">add</span>(root-&gt;right,num);<br>   <span class="hljs-keyword">return</span> root;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="3ã€äºŒå‰æœç´¢æ ‘çš„ä¾‹é¢˜"><a href="#3ã€äºŒå‰æœç´¢æ ‘çš„ä¾‹é¢˜" class="headerlink" title="3ã€äºŒå‰æœç´¢æ ‘çš„ä¾‹é¢˜"></a>3ã€äºŒå‰æœç´¢æ ‘çš„ä¾‹é¢˜</h4><h5 id="1-ç”±äºŒå‰æœç´¢æ ‘çš„ä¸­åºéå†æ­å»ºäºŒå‰æœç´¢æ ‘ï¼ˆå‚»çœ¼ï¼‰"><a href="#1-ç”±äºŒå‰æœç´¢æ ‘çš„ä¸­åºéå†æ­å»ºäºŒå‰æœç´¢æ ‘ï¼ˆå‚»çœ¼ï¼‰" class="headerlink" title="1&gt;ç”±äºŒå‰æœç´¢æ ‘çš„ä¸­åºéå†æ­å»ºäºŒå‰æœç´¢æ ‘ï¼ˆå‚»çœ¼ï¼‰"></a>1&gt;ç”±äºŒå‰æœç´¢æ ‘çš„ä¸­åºéå†æ­å»ºäºŒå‰æœç´¢æ ‘ï¼ˆå‚»çœ¼ï¼‰</h5><p>æ–¹æ³•ä¸€ï¼šæ€»æ˜¯é€‰å–ä¸­åºéå†ä¸­é—´ä½ç½®å·¦è¾¹çš„æ•°å­—ä½œä¸ºæ ¹èŠ‚ç‚¹</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function">TreeNode* <span class="hljs-title">sortedArrayToBST</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; nums)</span> </span>&#123;<br><span class="hljs-keyword">return</span> <span class="hljs-built_in">helper</span>(nums, <span class="hljs-number">0</span>, nums.<span class="hljs-built_in">size</span>() - <span class="hljs-number">1</span>);<br>&#125;<br><span class="hljs-function">TreeNode* <span class="hljs-title">helper</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; nums, <span class="hljs-type">int</span> left, <span class="hljs-type">int</span> right)</span> </span>&#123;<br>   <span class="hljs-keyword">if</span>(left&gt;right)<br>      <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;<br>   <span class="hljs-type">int</span> mid=(right+left)/<span class="hljs-number">2</span>;<br>   TreeNode* root=<span class="hljs-keyword">new</span> <span class="hljs-built_in">TreeNode</span>(num[mid]);<br>   root-&gt;left=<span class="hljs-built_in">helper</span>(nums,left,mid<span class="hljs-number">-1</span>);<br>   root-&gt;right=<span class="hljs-built_in">helper</span>(nums,mid+<span class="hljs-number">1</span>,right);<br>   <span class="hljs-keyword">return</span> root;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ–¹æ³•äºŒï¼šæ€»æ˜¯é€‰å–ä¸­åºéå†ä¸­é—´ä½ç½®å·¦è¾¹çš„æ•°å­—ä½œä¸ºæ ¹èŠ‚ç‚¹ï¼ˆåªéœ€midåŠ ä¸€ï¼‰</p><h5 id="2-æ‰¾åˆ°äºŒå‰æœç´¢æ ‘ä¸­ç¬¬kå¤§çš„èŠ‚ç‚¹å€¼ï¼ˆk-cntï¼‰"><a href="#2-æ‰¾åˆ°äºŒå‰æœç´¢æ ‘ä¸­ç¬¬kå¤§çš„èŠ‚ç‚¹å€¼ï¼ˆk-cntï¼‰" class="headerlink" title="2&gt;æ‰¾åˆ°äºŒå‰æœç´¢æ ‘ä¸­ç¬¬kå¤§çš„èŠ‚ç‚¹å€¼ï¼ˆk&#x3D;cntï¼‰"></a>2&gt;æ‰¾åˆ°äºŒå‰æœç´¢æ ‘ä¸­ç¬¬kå¤§çš„èŠ‚ç‚¹å€¼ï¼ˆk&#x3D;cntï¼‰</h5><p>æ–¹æ³•ä¸€ï¼šï¼ˆè‡ªå†™ï¼‰ï¼ˆå ç”¨é¢å¤–ç©ºé—´ï¼‰</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">myinorder</span><span class="hljs-params">(TreeNode* root,vector&lt;<span class="hljs-type">int</span>&gt;&amp; nums)</span></span>&#123;<br>    <span class="hljs-keyword">if</span>(root==<span class="hljs-literal">nullptr</span>)<br>        <span class="hljs-keyword">return</span>;<br>    <span class="hljs-built_in">myinorder</span>(root-&gt;right,nums);<br>    nums.<span class="hljs-built_in">emplace_back</span>(root-&gt;val);<br>    <span class="hljs-built_in">myinorder</span>(root-&gt;left,nums);<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">findTargetNode</span><span class="hljs-params">(TreeNode* root, <span class="hljs-type">int</span> cnt)</span> </span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt; nums;<br>    <span class="hljs-built_in">myinorder</span>(root,nums);<br>    <span class="hljs-keyword">return</span> nums[cnt<span class="hljs-number">-1</span>];<br>&#125;<br></code></pre></td></tr></table></figure><p>æ–¹æ³•äºŒï¼šä¼˜åŒ–ï¼ˆç©ºé—´å¤æ‚åº¦O(1)ï¼‰</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-type">int</span> k;<span class="hljs-type">int</span> res;   <span class="hljs-comment">//å¿…é¡»æ˜¯å…¨å±€å˜é‡</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">myinorder</span><span class="hljs-params">(TreeNode* root)</span></span>&#123;<br>    <span class="hljs-keyword">if</span>(root==<span class="hljs-literal">nullptr</span>)<br>        <span class="hljs-keyword">return</span>;<br>    <span class="hljs-built_in">myinorder</span>(root-&gt;right);<br>    k--;<br>    <span class="hljs-keyword">if</span>(k==<span class="hljs-number">0</span>)&#123;  <span class="hljs-comment">//è¿­ä»£åˆ°å€’æ•°ç¬¬kèŠ‚ç‚¹ï¼Œæ˜¯ç¬¬kå¤§çš„èŠ‚ç‚¹</span><br>       res=root-&gt;val;<br>       <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-built_in">myinorder</span>(root-&gt;left);<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">findTargetNode</span><span class="hljs-params">(TreeNode* root, <span class="hljs-type">int</span> cnt)</span> </span>&#123;<br>    k=cnt;<br>    <span class="hljs-built_in">myinorder</span>(root);<br>    <span class="hljs-keyword">return</span> res;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="3-å‰åºéå†æ„é€ äºŒå‰æœç´¢æ ‘"><a href="#3-å‰åºéå†æ„é€ äºŒå‰æœç´¢æ ‘" class="headerlink" title="3&gt;å‰åºéå†æ„é€ äºŒå‰æœç´¢æ ‘"></a>3&gt;å‰åºéå†æ„é€ äºŒå‰æœç´¢æ ‘</h5><p>æ–¹æ³•ä¸€ï¼šé€šè¿‡æ„å»ºäºŒå‰æœç´¢æ ‘çš„å‡½æ•°æ¥æ„é€ </p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function">TreeNode* <span class="hljs-title">bstFromPreorder</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; preorder)</span> </span>&#123;<br>   TreeNode* root =<span class="hljs-built_in">add</span>(<span class="hljs-literal">nullptr</span>, preorder[<span class="hljs-number">0</span>]);<br>   <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; preorder.<span class="hljs-built_in">size</span>(); i++) &#123;<br>       root=<span class="hljs-built_in">add</span>(root, preorder[i]);<br>   &#125;<br>   <span class="hljs-keyword">return</span> root;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ–¹æ³•äºŒï¼šå·²çŸ¥äºŒå‰æœç´¢æ ‘çš„ä¸­åºéå†æ˜¯æœ‰åºçš„ï¼Œå› æ­¤æˆ‘ä»¬ç°åœ¨çŸ¥é“äº†äºŒå‰æ ‘çš„å‰åºå’Œä¸­åºéå†ï¼ˆä¸­åºéå†å¯ç”±å‰åºéå†æ’åºå¾—å‡ºï¼‰ï¼Œå°±å¯ä»¥æ­å»ºäº†ã€‚ï¼ˆè§ä¸‹é¢ç¬¬å…«é“ä¾‹é¢˜ï¼‰</p><p>æ–¹æ³•ä¸‰ï¼šé€’å½’ï¼ˆåˆ†æå‰åºéå†çš„ç‰¹ç‚¹ï¼šæˆ‘ä»¬ä¼šå‘ç°ï¼Œç”±æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œç¬¬ä¸€ä¸ªå¤§äºæ ¹èŠ‚ç‚¹çš„èŠ‚ç‚¹åŠå…¶åå‡ä¸ºå³å­æ ‘ï¼Œä¸­é—´çš„æ˜¯å·¦å­æ ‘ï¼Œä¾æ­¤ç±»æ¨ï¼‰</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function">TreeNode* <span class="hljs-title">bstFromPreorder</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; preorder)</span> </span>&#123;<br><span class="hljs-keyword">return</span> <span class="hljs-built_in">mybst</span>(preorder,<span class="hljs-number">0</span>,preorder.<span class="hljs-built_in">size</span>()<span class="hljs-number">-1</span>);<br>&#125;<br><span class="hljs-function">TreeNode* <span class="hljs-title">mybst</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; preorder,<span class="hljs-type">int</span> left,<span class="hljs-type">int</span> right)</span></span><br><span class="hljs-function"></span>&#123;<br>   <span class="hljs-keyword">if</span>(left&gt;right)<br>      <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;<br>   <span class="hljs-type">int</span> root=preorder[left];<br>   <span class="hljs-type">int</span> mid=left;<br>   <span class="hljs-keyword">for</span>(;mid&lt;=right+<span class="hljs-number">1</span>;mid++)<br>      <span class="hljs-keyword">if</span>(preorder[mid]&gt;root)<br>         <span class="hljs-keyword">break</span>;<br>   TreeNode* node=<span class="hljs-keyword">new</span> <span class="hljs-built_in">TreeNode</span>(root);<br>   node-&gt;left=<span class="hljs-built_in">mybst</span>(preorder,left+<span class="hljs-number">1</span>,mid<span class="hljs-number">-1</span>);<br>   node-&gt;right=<span class="hljs-built_in">mybst</span>(preorder,mid,right);<br>   <span class="hljs-keyword">return</span> node;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="4-äºŒå‰æœç´¢æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ"><a href="#4-äºŒå‰æœç´¢æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ" class="headerlink" title="4&gt;äºŒå‰æœç´¢æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ"></a>4&gt;äºŒå‰æœç´¢æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ</h5><p>ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œæ‰¾åˆ°è¯¥æ ‘ä¸­ä¸¤ä¸ªæŒ‡å®šèŠ‚ç‚¹çš„æœ€è¿‘å…¬å…±ç¥–å…ˆã€‚ï¼ˆä¸€ä¸ªèŠ‚ç‚¹ä¹Ÿå¯ä»¥æ˜¯è‡ªå·±çš„ç¥–å…ˆï¼›æœ€è¿‘ï¼šæ·±åº¦ä¹‹å·®æœ€å°ï¼‰</p><p>æ–¹æ³•ï¼šé€’å½’ï¼ˆæ€è·¯ï¼šæ‰¾åˆ°åˆ†å‰ç‚¹ã€‚ä¹Ÿå°±æ˜¯ä¸¤ä¸ªèŠ‚ç‚¹éƒ½å¤§äºæˆ–è€…å°äºæŸä¸ªèŠ‚ç‚¹æ—¶ï¼Œè¿™ä¸ªèŠ‚ç‚¹ä¸€å®šä¸æ˜¯ä»–ä»¬çš„æœ€è¿‘å…¬å…±ç¥–å…ˆï¼‰</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function">TreeNode* <span class="hljs-title">lowestCommonAncestor</span><span class="hljs-params">(TreeNode* root, TreeNode* p, TreeNode* q)</span> </span>&#123; <span class="hljs-keyword">if</span>(p-&gt;val&lt;root-&gt;val&amp;&amp;q-&gt;val&lt;root-&gt;val)<br>   <span class="hljs-keyword">return</span> <span class="hljs-built_in">lowestCommonAncestor</span>(root-&gt;left,p,q);<br>   <span class="hljs-keyword">else</span><br>      <span class="hljs-keyword">return</span> <span class="hljs-built_in">lowestCommonAncestor</span>(root-&gt;right,p,q);<br>   <span class="hljs-keyword">return</span> root;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ï¼ˆ3ï¼‰äºŒå‰æ ‘çš„å±‚æ¬¡éå†ï¼ˆè‡ªé¡¶å‘ä¸‹ï¼‰"><a href="#ï¼ˆ3ï¼‰äºŒå‰æ ‘çš„å±‚æ¬¡éå†ï¼ˆè‡ªé¡¶å‘ä¸‹ï¼‰" class="headerlink" title="ï¼ˆ3ï¼‰äºŒå‰æ ‘çš„å±‚æ¬¡éå†ï¼ˆè‡ªé¡¶å‘ä¸‹ï¼‰"></a>ï¼ˆ3ï¼‰äºŒå‰æ ‘çš„å±‚æ¬¡éå†ï¼ˆè‡ªé¡¶å‘ä¸‹ï¼‰</h4><p>åŠ›æ‰£é¢˜ç›®é“¾æ¥ï¼š<a href="https://leetcode.cn/problems/binary-tree-level-order-traversal/description/">102. äºŒå‰æ ‘çš„å±‚åºéå† - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><p>é¢˜ç›®æè¿°ï¼šç»™ä½ äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ <code>root</code> ï¼Œè¿”å›å…¶èŠ‚ç‚¹å€¼çš„å±‚åºéå†ã€‚</p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240520152406792.png" alt="image-20240520152406792" style="zoom:50%;" /><p>è¾“å…¥ï¼šroot &#x3D; [ 3 , 9 , 20 , null , null , 15 , 7 ]<br>        è¾“å‡ºï¼š[ [3] , [ 9 , 20 ] , [ 15 , 7 ] ]</p><p><strong>å¹¿åº¦ä¼˜å…ˆæœç´¢æ³•ï¼š</strong></p><p>ï¼ˆä¸€ç›´ä»¥ä¸ºå¹¿åº¦ä¼˜å…ˆæœç´¢éƒ½æ˜¯å›ºå®šçš„é‚£ç§å‡½æ•°æ¨¡æ¿ï¼Œå‡½æ•°ä½“é‡Œæ€»ä¼šè°ƒç”¨è‡ªèº«å‡½æ•°ï¼Œç°åœ¨çœ‹æ¥ä¸æ˜¯è¿™æ ·ã€‚ï¼‰</p><p>ï¼ˆå¹¿åº¦ï¼šä¸€å±‚ä¸€å±‚å…¨éƒ¨æœç´¢å®Œå†å»ä¸‹ä¸€å±‚ï¼›æ·±åº¦ï¼šèµ°åˆ°åº•å†è¿”å›ï¼‰</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs c++">vector &lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt; <span class="hljs-built_in">levelOrder</span>(TreeNode* root) &#123;<br>vector&lt;vector&lt;<span class="hljs-type">int</span>&gt; &gt; ret;  <span class="hljs-comment">//å­˜å‚¨è¿”å›å€¼</span><br>   <span class="hljs-keyword">if</span>(!root)<br>      <span class="hljs-keyword">return</span> ret;    <span class="hljs-comment">//ç©ºæ ‘ï¼Œè¿”å›ç©ºå‘é‡</span><br>   queue &lt;TreeNode*&gt; q;   <span class="hljs-comment">//å­˜å‚¨æ¯ä¸€å±‚çš„èŠ‚ç‚¹</span><br>   q.<span class="hljs-built_in">push</span>(root);    <span class="hljs-comment">//å…ˆå‹å…¥ç¬¬ä¸€å±‚ï¼ˆæ ¹èŠ‚ç‚¹ï¼‰</span><br>   <span class="hljs-keyword">while</span>(!q.<span class="hljs-built_in">empty</span>())&#123;   <span class="hljs-comment">//ç¬¬ä¸€å±‚å¾ªç¯ï¼šè¡¨ç¤ºå„å±‚çš„å­˜å‚¨è¿‡ç¨‹</span><br>      <span class="hljs-type">int</span> curl=q.<span class="hljs-built_in">size</span>();<br>      ret.<span class="hljs-built_in">push_back</span>(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;());   <span class="hljs-comment">//æ¯ä¸€å±‚éƒ½è¦å…ˆæ·»åŠ ä¸€ä¸ªç©ºçš„å‘é‡ï¼Œæ¥å­˜å‚¨è¿™ä¸€å±‚çš„èŠ‚ç‚¹å€¼</span><br>      <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=curl;++i)&#123;   <span class="hljs-comment">//ç¬¬äºŒå±‚å¾ªç¯ï¼šæŸä¸€å±‚çš„æ›´æ–°ä»¥åŠå­˜å‚¨è¿‡ç¨‹</span><br>         <span class="hljs-keyword">auto</span> node=q.<span class="hljs-built_in">front</span>();q.<span class="hljs-built_in">pop</span>();<br>         ret.<span class="hljs-built_in">back</span>().<span class="hljs-built_in">push_back</span>(node-&gt;val);  <span class="hljs-comment">//å‘æœ€åä¸€ä¸ªå‘é‡åæ·»åŠ èŠ‚ç‚¹å€¼</span><br>         <span class="hljs-keyword">if</span>(node-&gt;left) q.<span class="hljs-built_in">push</span>(node-&gt;left);  <span class="hljs-comment">//åœ¨é˜Ÿåˆ—å†…å­˜å‚¨ä¸‹å±‚çš„èŠ‚ç‚¹å€¼</span><br>         <span class="hljs-keyword">if</span>(node-&gt;right) q.<span class="hljs-built_in">push</span>(node-&gt;right);<br>      &#125;<br>   &#125;<br>   <span class="hljs-keyword">return</span> ret;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€è·¯äº¦å¯æ”¹ä¸ºæ¯æ¬¡å¾ªç¯æ–°åˆ›å»ºä¸€ä¸ªå‘é‡ï¼Œç„¶åå‹å…¥æ¯å±‚èŠ‚ç‚¹å€¼ï¼Œæœ€åå†æŠŠè¿™ä¸ªå‘é‡å‹å…¥äºŒçº§å‘é‡ä¸­ã€‚</p><p><em><strong>äºŒçº§å‘é‡æ•°ç»„</strong></em>ï¼šå†…å±‚æ˜¯å‘é‡ï¼Œå‘é‡å¤§å°ä¸å›ºå®šï¼›å¤–å±‚æ˜¯å­˜å‚¨è¿™äº›å‘é‡çš„å‘é‡ã€‚</p><p><em><strong>emplace_push</strong></em>:æ®è¯´é€Ÿåº¦è¦å¤§äºpush_backã€‚</p><h3 id="äºŒã€åŠ›æ‰£åˆ·é¢˜è®°å½•"><a href="#äºŒã€åŠ›æ‰£åˆ·é¢˜è®°å½•" class="headerlink" title="äºŒã€åŠ›æ‰£åˆ·é¢˜è®°å½•"></a>äºŒã€åŠ›æ‰£åˆ·é¢˜è®°å½•</h3><h4 id="ï¼ˆ1ï¼‰è£…é¥°æ ‘"><a href="#ï¼ˆ1ï¼‰è£…é¥°æ ‘" class="headerlink" title="ï¼ˆ1ï¼‰è£…é¥°æ ‘"></a>ï¼ˆ1ï¼‰è£…é¥°æ ‘</h4><p>è£…é¥°è¿‡ç¨‹ï¼šåœ¨æ¯ä¸ªçˆ¶èŠ‚ç‚¹ä¸å…¶å­èŠ‚ç‚¹ä¹‹é—´éƒ½æ’å…¥ä¸€ä¸ªå€¼ä¸º-1çš„èŠ‚ç‚¹ã€‚è¿”å›å®Œæˆè£…é¥°åæ ‘çš„æ ¹èŠ‚ç‚¹ã€‚<img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240520171910175.png" alt="image-20240520171910175" style="zoom:67%;" /></p><p><strong>é€’å½’æ³•ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function">TreeNode* <span class="hljs-title">expandBinaryTree</span><span class="hljs-params">(TreeNode* root)</span> </span>&#123;<br>   <span class="hljs-keyword">if</span>(root!=<span class="hljs-literal">nullptr</span>)&#123;<br>      <span class="hljs-built_in">expandBinaryTree</span>(root-&gt;left);<br>      <span class="hljs-keyword">if</span>(root-&gt;left!=<span class="hljs-literal">nullptr</span>)&#123;<br>         TreeNode* T=<span class="hljs-keyword">new</span> <span class="hljs-built_in">TreeNode</span>(<span class="hljs-number">-1</span>);<br>         T-&gt;left=root-&gt;left;<br>         root-&gt;left=T;<br>      &#125;<br>      <span class="hljs-built_in">expandBinaryTree</span>(root-&gt;right);<br>      <span class="hljs-keyword">if</span>(root-&gt;right!=<span class="hljs-literal">nullptr</span>)&#123;<br>         TreeNode* T=<span class="hljs-keyword">new</span> <span class="hljs-built_in">TreeNode</span>(<span class="hljs-number">-1</span>);<br>         T-&gt;right=root-&gt;right;<br>         root-&gt;right=T;<br>      &#125;<br>   &#125;<br>   <span class="hljs-keyword">return</span> root;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ï¼ˆ2ï¼‰æ±‚äºŒå‰æ ‘çš„æœ€å°æ·±åº¦"><a href="#ï¼ˆ2ï¼‰æ±‚äºŒå‰æ ‘çš„æœ€å°æ·±åº¦" class="headerlink" title="ï¼ˆ2ï¼‰æ±‚äºŒå‰æ ‘çš„æœ€å°æ·±åº¦"></a>ï¼ˆ2ï¼‰æ±‚äºŒå‰æ ‘çš„æœ€å°æ·±åº¦</h4><p>åŠ›æ‰£é¢˜ç›®é“¾æ¥ï¼š<a href="https://leetcode.cn/problems/minimum-depth-of-binary-tree/description/">111. äºŒå‰æ ‘çš„æœ€å°æ·±åº¦ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">minDepth</span><span class="hljs-params">(TreeNode* root)</span> </span>&#123;<br><span class="hljs-keyword">if</span>(root==<span class="hljs-literal">nullptr</span>)   <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; <br>   <span class="hljs-comment">//åªæœ‰å·¦èŠ‚ç‚¹æˆ–å³èŠ‚ç‚¹åªèƒ½è¿”å›æ­¤èŠ‚ç‚¹çš„æœ€å°æ·±åº¦äº†ï¼ˆéå¶å­èŠ‚ç‚¹ï¼‰</span><br>   <span class="hljs-keyword">if</span>(root-&gt;left==<span class="hljs-literal">nullptr</span>)  <span class="hljs-keyword">return</span> <span class="hljs-built_in">minDepth</span>(root-&gt;right)+<span class="hljs-number">1</span>;<br>   <span class="hljs-keyword">if</span>(root-&gt;right == <span class="hljs-literal">nullptr</span>) <span class="hljs-keyword">return</span> <span class="hljs-built_in">minDepth</span>(root-&gt;left) + <span class="hljs-number">1</span>;<br>   <span class="hljs-keyword">return</span> <span class="hljs-built_in">min</span>(<span class="hljs-built_in">minDepth</span>(root-&gt;left), <span class="hljs-built_in">minDepth</span>(root-&gt;right)) + <span class="hljs-number">1</span>;<br>   <span class="hljs-comment">//å¶å­èŠ‚ç‚¹æ¥é€‰æ‹©æœ€å°æ·±åº¦</span><br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ï¼ˆ3ï¼‰Nå‰æ ‘çš„å‰åºéå†"><a href="#ï¼ˆ3ï¼‰Nå‰æ ‘çš„å‰åºéå†" class="headerlink" title="ï¼ˆ3ï¼‰Nå‰æ ‘çš„å‰åºéå†"></a>ï¼ˆ3ï¼‰Nå‰æ ‘çš„å‰åºéå†</h4><p>åŠ›æ‰£é¢˜ç›®é“¾æ¥ï¼š<a href="https://leetcode.cn/problems/n-ary-tree-preorder-traversal/description/">589. N å‰æ ‘çš„å‰åºéå† - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Node</span> &#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-type">int</span> val;<br>vector&lt;Node*&gt; children;<br>&#125;;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>   <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">preorder</span><span class="hljs-params">(Node* root)</span></span>&#123;<br>      vector&lt;<span class="hljs-type">int</span>&gt; res;<br>      <span class="hljs-built_in">helper</span>(root,res);<br>      <span class="hljs-keyword">return</span> res;<br>   &#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">helper</span><span class="hljs-params">(<span class="hljs-type">const</span> Node* root, vector&lt;<span class="hljs-type">int</span>&gt; &amp; res)</span> </span>&#123;<br>   <span class="hljs-keyword">if</span>(root==<span class="hljs-literal">nullptr</span>)<br>         <span class="hljs-keyword">return</span>;<br>      res.<span class="hljs-built_in">emplace_back</span>(root-&gt;val);<br>      <span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> &amp; ch:root-&gt;children)<br>         <span class="hljs-built_in">helper</span>(ch,res);  <span class="hljs-comment">//å¯¹æ¯ä¸ªå­èŠ‚ç‚¹éƒ½è¿›è¡Œå‰åºéå†</span><br>   &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><h4 id="ï¼ˆ4ï¼‰å…‹éš†äºŒå‰æ ‘ï¼ˆé€’å½’ï¼‰ï¼ˆæ— è¿æ¥ï¼‰"><a href="#ï¼ˆ4ï¼‰å…‹éš†äºŒå‰æ ‘ï¼ˆé€’å½’ï¼‰ï¼ˆæ— è¿æ¥ï¼‰" class="headerlink" title="ï¼ˆ4ï¼‰å…‹éš†äºŒå‰æ ‘ï¼ˆé€’å½’ï¼‰ï¼ˆæ— è¿æ¥ï¼‰"></a>ï¼ˆ4ï¼‰å…‹éš†äºŒå‰æ ‘ï¼ˆé€’å½’ï¼‰ï¼ˆæ— è¿æ¥ï¼‰</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-keyword">public</span> TreeNode <span class="hljs-title">cloneTree</span><span class="hljs-params">(TreeNode root)</span></span><br><span class="hljs-function"></span>&#123;<br>   <span class="hljs-keyword">if</span>(root==null)<br>      <span class="hljs-keyword">return</span> null;<br>   <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> TreeNode&#123;root.val,<span class="hljs-built_in">cloneTree</span>(root.left),<span class="hljs-built_in">cloneTree</span>(root.right)&#125;;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ï¼ˆ5ï¼‰ç¿»è½¬äºŒå‰æ ‘-é€’å½’"><a href="#ï¼ˆ5ï¼‰ç¿»è½¬äºŒå‰æ ‘-é€’å½’" class="headerlink" title="ï¼ˆ5ï¼‰ç¿»è½¬äºŒå‰æ ‘(é€’å½’)"></a>ï¼ˆ5ï¼‰ç¿»è½¬äºŒå‰æ ‘(é€’å½’)</h4><p><a href="https://leetcode.cn/problems/invert-binary-tree/description/">226. ç¿»è½¬äºŒå‰æ ‘ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-keyword">public</span> TreeNode* <span class="hljs-title">invertTree</span><span class="hljs-params">(TreeNode* root)</span></span><br><span class="hljs-function"></span>&#123;<br>   <span class="hljs-keyword">if</span>(root==null)<br>      <span class="hljs-keyword">return</span> null;<br>   TreeNode* left=<span class="hljs-built_in">invertTree</span>(root-&gt;left);<br>   TreeNode* right=<span class="hljs-built_in">invertTree</span>(root-&gt;right);<br>   root-&gt;left=right;<br>   root-&gt;right=left;<br>   <span class="hljs-keyword">return</span> root;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ï¼ˆ6ï¼‰ç›¸åŒçš„æ ‘-ç»ˆäºè‡ªå·±å†™ä¼šçš„é€’å½’ï¼Œåªæ˜¯æœ‰ç»†èŠ‚ä¸åˆ°ä½"><a href="#ï¼ˆ6ï¼‰ç›¸åŒçš„æ ‘-ç»ˆäºè‡ªå·±å†™ä¼šçš„é€’å½’ï¼Œåªæ˜¯æœ‰ç»†èŠ‚ä¸åˆ°ä½" class="headerlink" title="ï¼ˆ6ï¼‰ç›¸åŒçš„æ ‘(ç»ˆäºè‡ªå·±å†™ä¼šçš„é€’å½’ï¼Œåªæ˜¯æœ‰ç»†èŠ‚ä¸åˆ°ä½)"></a>ï¼ˆ6ï¼‰ç›¸åŒçš„æ ‘(ç»ˆäºè‡ªå·±å†™ä¼šçš„é€’å½’ï¼Œåªæ˜¯æœ‰ç»†èŠ‚ä¸åˆ°ä½)</h4><p><a href="https://leetcode.cn/problems/same-tree/description/">100. ç›¸åŒçš„æ ‘ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><p>é”™è¯¯ç‰ˆæœ¬ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">isSameTree</span><span class="hljs-params">(TreeNode* p, TreeNode* q)</span> </span>&#123;<br><span class="hljs-keyword">if</span>(p-&gt;val!=q-&gt;val)<br>      <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>   <span class="hljs-keyword">if</span>(p==q==null)<br>      <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>   <span class="hljs-keyword">return</span> <span class="hljs-built_in">isSameTree</span>(p-&gt;left,q-&gt;left)+<span class="hljs-built_in">isSameTree</span>(p-&gt;right,q-&gt;right)==<span class="hljs-number">2</span>?<span class="hljs-number">1</span>:<span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ­£ç¡®ç‰ˆæœ¬ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">isSameTree</span><span class="hljs-params">(TreeNode* p, TreeNode* q)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span>(p==<span class="hljs-literal">nullptr</span>&amp;&amp;q==<span class="hljs-literal">nullptr</span>)<br>      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(p==<span class="hljs-literal">nullptr</span>||q==<span class="hljs-literal">nullptr</span>)  <span class="hljs-comment">//è¿™ä¸ªæƒ…å†µä¸è¦æ¼æ‰äº†</span><br>      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    <span class="hljs-keyword">if</span>(p-&gt;val!=q-&gt;val)   <span class="hljs-comment">//ä¸€å®šè¦å…ˆåˆ¤æ–­æ˜¯ä¸æ˜¯ç©ºå†å–èŠ‚ç‚¹å€¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼</span><br>      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">isSameTree</span>(p-&gt;left,q-&gt;left)&amp;&amp;<span class="hljs-built_in">isSameTree</span>(p-&gt;right,q-&gt;right);<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ï¼ˆ7ï¼‰å¯¹ç§°äºŒå‰æ ‘"><a href="#ï¼ˆ7ï¼‰å¯¹ç§°äºŒå‰æ ‘" class="headerlink" title="ï¼ˆ7ï¼‰å¯¹ç§°äºŒå‰æ ‘"></a>ï¼ˆ7ï¼‰å¯¹ç§°äºŒå‰æ ‘</h4><p><a href="https://leetcode.cn/problems/symmetric-tree/description/">101. å¯¹ç§°äºŒå‰æ ‘ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><p>æ–¹æ³•ä¸€ï¼šæ ¹æ®å‰å‡ é“é¢˜è§£æ¥åˆ¤æ–­ï¼ˆåè½¬åå¦‚æœå’ŒåŸæ ‘ç›¸åŒè¯´æ˜æ˜¯å¯¹ç§°çš„ï¼‰</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">isSymmetric</span><span class="hljs-params">(TreeNode* root)</span> </span>&#123;<br>TreeNode root1=<span class="hljs-built_in">invertTree</span>(root);<br>   <span class="hljs-keyword">return</span> <span class="hljs-built_in">isSameTree</span>(root1,root);<br>&#125;<br></code></pre></td></tr></table></figure><p>æ–¹æ³•äºŒï¼šé€’å½’ï¼ˆå’Œåˆ¤æ–­æ˜¯å¦æ˜¯ç›¸åŒæ ‘å¾ˆåƒï¼‰</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">isSymmetric</span><span class="hljs-params">(TreeNode* root)</span> </span>&#123;<br><span class="hljs-keyword">return</span> <span class="hljs-built_in">issame</span>(root,root);<br>&#125;<br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">issame</span><span class="hljs-params">(TreeNode* l,TreeNode* r)</span></span><br><span class="hljs-function"></span>&#123;<br>   <span class="hljs-keyword">if</span>(l==<span class="hljs-literal">nullptr</span>&amp;&amp;r==<span class="hljs-literal">nullptr</span>)<br>      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>   <span class="hljs-keyword">if</span>(l==<span class="hljs-literal">nullptr</span>||r==<span class="hljs-literal">nullptr</span>)<br>      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>   <span class="hljs-keyword">return</span> l-&gt;val==r-&gt;val&amp;&amp;<span class="hljs-built_in">issame</span>(l-&gt;left,r-&gt;right)&amp;&amp;<span class="hljs-built_in">issame</span>(l-&gt;right,r-&gt;left);<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ï¼ˆ8ï¼‰ç”±éå†æ„é€ äºŒå‰æ ‘"><a href="#ï¼ˆ8ï¼‰ç”±éå†æ„é€ äºŒå‰æ ‘" class="headerlink" title="ï¼ˆ8ï¼‰ç”±éå†æ„é€ äºŒå‰æ ‘"></a>ï¼ˆ8ï¼‰ç”±éå†æ„é€ äºŒå‰æ ‘</h4><h5 id="1-ç”±å‰åºéå†å’Œä¸­åºéå†æ„é€ äºŒå‰æ ‘"><a href="#1-ç”±å‰åºéå†å’Œä¸­åºéå†æ„é€ äºŒå‰æ ‘" class="headerlink" title="1&gt;ç”±å‰åºéå†å’Œä¸­åºéå†æ„é€ äºŒå‰æ ‘"></a>1&gt;ç”±å‰åºéå†å’Œä¸­åºéå†æ„é€ äºŒå‰æ ‘</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function">TreeNode* <span class="hljs-title">buildTree</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; preorder, vector&lt;<span class="hljs-type">int</span>&gt;&amp; inorder)</span> </span>&#123;<br><span class="hljs-keyword">if</span>(pre.<span class="hljs-built_in">empty</span>())<br>      <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;<br>   TreeNode* root=<span class="hljs-keyword">new</span> <span class="hljs-built_in">TreeNode</span>(pre[<span class="hljs-number">0</span>]);<br>   <span class="hljs-comment">//pre.erase(pre.begin());</span><br>   <span class="hljs-type">int</span> size=<span class="hljs-built_in">find</span>(in.<span class="hljs-built_in">begin</span>(),in.<span class="hljs-built_in">end</span>(),pre[<span class="hljs-number">0</span>]);<br>   <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">prel</span><span class="hljs-params">(pre.begin()+<span class="hljs-number">1</span>,pre.begin()+size+<span class="hljs-number">1</span>)</span></span>;<br>   <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">prer</span><span class="hljs-params">(pre.begin()+size+<span class="hljs-number">1</span>,pre.end())</span></span>;<br>   <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">inl</span><span class="hljs-params">(in.begin(),in.begin()+size)</span></span>;<br>   <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">inr</span><span class="hljs-params">(in.begin()+size+<span class="hljs-number">1</span>,in.end())</span></span>;<br>   root-&gt;left=<span class="hljs-built_in">mybuildTree</span>(prel,inl);<br>   root-&gt;right=<span class="hljs-built_in">mybuildTree</span>(prer,inr);<br>   <span class="hljs-keyword">return</span> root;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>C++</category>
      
    </categories>
    
    
    <tags>
      
      <tag>C++</tag>
      
      <tag>äºŒå‰æ ‘</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>c++é“¾è¡¨è¯¦è§£ï¼ˆæ¦‚å¿µ+ä¾‹é¢˜ï¼‰</title>
    <link href="/2024/05/14/c++%E9%93%BE%E8%A1%A8%E8%AF%A6%E8%A7%A3%EF%BC%88%E6%A6%82%E5%BF%B5+%E4%BE%8B%E9%A2%98%EF%BC%89/"/>
    <url>/2024/05/14/c++%E9%93%BE%E8%A1%A8%E8%AF%A6%E8%A7%A3%EF%BC%88%E6%A6%82%E5%BF%B5+%E4%BE%8B%E9%A2%98%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<p>å­¦ä¸æ‡‚é“¾è¡¨ï¼Œå†™ä¸ªåšå®¢æµ…æµ…è®°å½•ä¸€ä¸‹é“¾è¡¨çš„å­¦ä¹ å­ã€‚</p><span id="more"></span><h3 id="ä¸€ã€æ•°ç»„ä¸é“¾è¡¨çš„åŒºåˆ«"><a href="#ä¸€ã€æ•°ç»„ä¸é“¾è¡¨çš„åŒºåˆ«" class="headerlink" title="ä¸€ã€æ•°ç»„ä¸é“¾è¡¨çš„åŒºåˆ«"></a>ä¸€ã€æ•°ç»„ä¸é“¾è¡¨çš„åŒºåˆ«</h3><p>é¢è¯•ä¸­é™¤äº†ä¼šé—®åˆ°æ ˆå’Œé˜Ÿåˆ—çš„åŒºåˆ«ï¼Œè¿˜å¯èƒ½ä¼šè¯¢é—®æ•°ç»„ï¼ˆé¡ºåºè¡¨ï¼‰ä¸é“¾è¡¨çš„åŒºåˆ«ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥å…ˆä»ç†Ÿæ‚‰çš„æ•°æ®ç»“æ„ï¼šæ•°ç»„ï¼Œé€šè¿‡åˆ†æå®ƒå’Œé“¾è¡¨çš„åŒºåˆ«æ¥ä½“ä¼šé“¾è¡¨çš„ç‰¹å¾ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240517152625892.png" alt="image-20240517152625892"></p><h3 id="äºŒã€å•é“¾è¡¨çš„ä»‹ç»"><a href="#äºŒã€å•é“¾è¡¨çš„ä»‹ç»" class="headerlink" title="äºŒã€å•é“¾è¡¨çš„ä»‹ç»"></a>äºŒã€å•é“¾è¡¨çš„ä»‹ç»</h3><h4 id="1ã€å•é“¾è¡¨çš„ç»“æ„"><a href="#1ã€å•é“¾è¡¨çš„ç»“æ„" class="headerlink" title="1ã€å•é“¾è¡¨çš„ç»“æ„"></a>1ã€å•é“¾è¡¨çš„ç»“æ„</h4><h4 id="ï¼ˆ1ï¼‰å›¾ç¤º"><a href="#ï¼ˆ1ï¼‰å›¾ç¤º" class="headerlink" title="ï¼ˆ1ï¼‰å›¾ç¤º"></a>ï¼ˆ1ï¼‰å›¾ç¤º</h4><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240523151418436.png" alt="image-20240523151418436" style="zoom: 33%;" /><h4 id="ï¼ˆ2ï¼‰ä»£ç "><a href="#ï¼ˆ2ï¼‰ä»£ç " class="headerlink" title="ï¼ˆ2ï¼‰ä»£ç "></a>ï¼ˆ2ï¼‰ä»£ç </h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Listnode</span><br>&#123;<br>    <span class="hljs-type">int</span> data;<br>    Listnode* next;<br>&#125;;<br></code></pre></td></tr></table></figure><h4 id="2ã€å¤´æ’"><a href="#2ã€å¤´æ’" class="headerlink" title="2ã€å¤´æ’"></a>2ã€å¤´æ’</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Listcreatf</span><span class="hljs-params">(Listnode** head,<span class="hljs-type">int</span> x)</span></span><br><span class="hljs-function"></span>&#123;<br>    Listnode* newnode=<span class="hljs-keyword">new</span> Listnode &#123;x,<span class="hljs-literal">NULL</span>&#125;;<br>    newnode-&gt;next=*head;  <span class="hljs-comment">//æ–°æŒ‡é’ˆæŒ‡å‘åŸæ¥çš„å¤´æŒ‡é’ˆ</span><br>    *head=newnode;  <span class="hljs-comment">//æ–°æŒ‡é’ˆæˆä¸ºå¤´æŒ‡é’ˆ</span><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼š</strong>å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ç±»å‹åº”è¯¥ä¸º<strong>äºŒçº§æŒ‡é’ˆ</strong>ï¼Œå› ä¸ºæ¶‰åŠåˆ°æ”¹å˜&#x2F;åˆå§‹åŒ–å¤´èŠ‚ç‚¹ï¼Œè¿™ä¸ªæ“ä½œéœ€è¦ä¸ºä¸€çº§æŒ‡é’ˆçš„å€¼èµ‹å€¼ã€‚</p><h4 id="3ã€å•é“¾è¡¨çš„åˆ›å»ºï¼ˆå°¾æ’ï¼‰"><a href="#3ã€å•é“¾è¡¨çš„åˆ›å»ºï¼ˆå°¾æ’ï¼‰" class="headerlink" title="3ã€å•é“¾è¡¨çš„åˆ›å»ºï¼ˆå°¾æ’ï¼‰"></a>3ã€å•é“¾è¡¨çš„åˆ›å»ºï¼ˆå°¾æ’ï¼‰</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Listcreatb</span><span class="hljs-params">(Listnode** head,<span class="hljs-type">int</span> x)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">//ç”¨newæ¥åˆ›å»ºä¸€ä¸ªæ–°æŒ‡é’ˆï¼Œå€¼ä¸ºxï¼ŒæŒ‡å‘ä¸ºç©º   </span><br>    Listnode* newnode=<span class="hljs-keyword">new</span> Listnode &#123;x,<span class="hljs-literal">NULL</span>&#125;;<br>    <span class="hljs-keyword">if</span>(*head==<span class="hljs-literal">NULL</span>)&#123;  <span class="hljs-comment">//å¦‚æœæ˜¯ç©ºé“¾è¡¨ï¼Œå°†newnodeä½œä¸ºå¤´èŠ‚ç‚¹</span><br>        *head=newnode;<br>    &#125;<br>    <span class="hljs-keyword">else</span>&#123;<br>        Listnode* tail=*head;  <span class="hljs-comment">//æ¯æ¬¡æ’å…¥æ–°çš„èŠ‚ç‚¹éƒ½éœ€è¦ä»å¤´éå†</span><br>        <span class="hljs-keyword">while</span>(tail-&gt;next!=<span class="hljs-literal">NULL</span>)  <span class="hljs-comment">//ç›®çš„æ˜¯æ‰¾åˆ°å°¾èŠ‚ç‚¹ï¼ˆå®ƒçš„æŒ‡å‘ä¸ºç©ºï¼‰</span><br>            tail=tail-&gt;next;<br>        tail-&gt;next=newnode;  <span class="hljs-comment">//å°†æ–°èŠ‚ç‚¹è¿æ¥åœ¨å°¾èŠ‚ç‚¹åé¢ï¼Œä½œä¸ºæ–°çš„å°¾èŠ‚ç‚¹</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="4ã€é“¾è¡¨çš„é‡Šæ”¾"><a href="#4ã€é“¾è¡¨çš„é‡Šæ”¾" class="headerlink" title="4ã€é“¾è¡¨çš„é‡Šæ”¾"></a>4ã€é“¾è¡¨çš„é‡Šæ”¾</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Listfree</span><span class="hljs-params">(Listnode** head)</span></span><br><span class="hljs-function"></span>&#123;<br>Listnode* cur;  <span class="hljs-comment">//æ–°å»ºä¸€ä¸ªèŠ‚ç‚¹</span><br>    <span class="hljs-keyword">while</span>(*head)&#123;<br>        cur=*head;  <span class="hljs-comment">//curæŒ‡å‘å½“å‰çš„å¤´èŠ‚ç‚¹</span><br>        *head=cur-&gt;next;  <span class="hljs-comment">//ä¸‹ä¸€ä½èŠ‚ç‚¹æˆä¸ºå¤´èŠ‚ç‚¹</span><br>        <span class="hljs-built_in">delete</span>(cur);   <span class="hljs-comment">//åˆ é™¤å¤´èŠ‚ç‚¹</span><br>        cur=<span class="hljs-literal">nullptr</span>;  <span class="hljs-comment">//å¿…é¡»ç½®ç©ºï¼Œå¦åˆ™ä¼šæˆä¸ºé‡æŒ‡é’ˆ</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="5ã€é“¾è¡¨çš„æ‰“å°"><a href="#5ã€é“¾è¡¨çš„æ‰“å°" class="headerlink" title="5ã€é“¾è¡¨çš„æ‰“å°"></a>5ã€é“¾è¡¨çš„æ‰“å°</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Listprint</span><span class="hljs-params">(Listnode* head)</span></span><br><span class="hljs-function"></span>&#123;<br>   listnode* cur=head;  <span class="hljs-comment">//curèŠ‚ç‚¹æŒ‡å‘å¤´èŠ‚ç‚¹</span><br>   <span class="hljs-keyword">while</span>(cur)&#123;<br>      cout&lt;&lt;cur-&gt;data&lt;&lt;<span class="hljs-string">&quot;-&gt;&quot;</span>;  <span class="hljs-comment">//ä¾æ¬¡æ‰“å°</span><br>      cur=cur-&gt;next;<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="6ã€åˆ é™¤é“¾è¡¨ä¸­çš„èŠ‚ç‚¹"><a href="#6ã€åˆ é™¤é“¾è¡¨ä¸­çš„èŠ‚ç‚¹" class="headerlink" title="6ã€åˆ é™¤é“¾è¡¨ä¸­çš„èŠ‚ç‚¹"></a>6ã€åˆ é™¤é“¾è¡¨ä¸­çš„èŠ‚ç‚¹</h4><h4 id="ï¼ˆ1ï¼‰åˆ é™¤å¤´èŠ‚ç‚¹"><a href="#ï¼ˆ1ï¼‰åˆ é™¤å¤´èŠ‚ç‚¹" class="headerlink" title="ï¼ˆ1ï¼‰åˆ é™¤å¤´èŠ‚ç‚¹"></a>ï¼ˆ1ï¼‰åˆ é™¤å¤´èŠ‚ç‚¹</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Listdeletef</span><span class="hljs-params">(Listnode** head)</span></span><br><span class="hljs-function"></span>&#123;<br>   <span class="hljs-keyword">if</span>(*head==<span class="hljs-literal">NULL</span>)<br>      <span class="hljs-keyword">return</span>;<br>   <span class="hljs-keyword">else</span>&#123;<br>      Listnode* newnode=(*head)-&gt;next;<br>      <span class="hljs-built_in">delete</span>(*head);<br>      *head=newnode;<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ï¼ˆ2ï¼‰åˆ é™¤å°¾èŠ‚ç‚¹"><a href="#ï¼ˆ2ï¼‰åˆ é™¤å°¾èŠ‚ç‚¹" class="headerlink" title="ï¼ˆ2ï¼‰åˆ é™¤å°¾èŠ‚ç‚¹"></a>ï¼ˆ2ï¼‰åˆ é™¤å°¾èŠ‚ç‚¹</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Listdeleteb</span><span class="hljs-params">(Listnode** head)</span></span><br><span class="hljs-function"></span>&#123;<br>   <span class="hljs-keyword">if</span>(*head==<span class="hljs-literal">NULL</span>) <span class="hljs-comment">//ç©ºé“¾è¡¨</span><br>      <span class="hljs-keyword">return</span>;<br>   <span class="hljs-keyword">if</span>((*head)-&gt;next==<span class="hljs-literal">NULL</span>)&#123;  <span class="hljs-comment">//åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹</span><br>      <span class="hljs-built_in">delete</span>(*head);<br>      *head=<span class="hljs-literal">NULL</span>;  <span class="hljs-comment">//éœ€è¦ç½®ç©º</span><br>   &#125;<br>   <span class="hljs-keyword">else</span>&#123;<br>      Listnode* cur=*head;  <br>      Listnode* tmp=<span class="hljs-literal">NULL</span>;  <br>      <span class="hljs-keyword">while</span>(cur-&gt;next)&#123;<br>         tmp=cur;<br>         cur=cur-&gt;next;  <span class="hljs-comment">//æ‰¾åˆ°å°¾èŠ‚ç‚¹</span><br>      &#125;<br>      <span class="hljs-built_in">delete</span>(cur);<br>      cur=<span class="hljs-literal">NULL</span>;<br>      tmp-&gt;next=<span class="hljs-literal">NULL</span>;  <span class="hljs-comment">//tmpæˆä¸ºå°¾èŠ‚ç‚¹</span><br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ï¼ˆ3ï¼‰åˆ é™¤ç­‰äºç»™å®šå€¼çš„æ‰€æœ‰èŠ‚ç‚¹"><a href="#ï¼ˆ3ï¼‰åˆ é™¤ç­‰äºç»™å®šå€¼çš„æ‰€æœ‰èŠ‚ç‚¹" class="headerlink" title="ï¼ˆ3ï¼‰åˆ é™¤ç­‰äºç»™å®šå€¼çš„æ‰€æœ‰èŠ‚ç‚¹"></a>ï¼ˆ3ï¼‰åˆ é™¤ç­‰äºç»™å®šå€¼çš„æ‰€æœ‰èŠ‚ç‚¹</h4><p>æ³¨æ„è¿™ä¸ªå‡½æ•°é‡Œä¼šè¿”å›å¤´èŠ‚ç‚¹å› ä¸ºå‡½æ•°å‚æ•°åªéœ€è¦æ˜¯ä¸€çº§æŒ‡é’ˆã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function">Listnode* <span class="hljs-title">Listdelete</span><span class="hljs-params">(Listdode* head,<span class="hljs-type">int</span> x)</span>  </span><br><span class="hljs-function"></span>&#123;<br>   Listnode* tmp=<span class="hljs-literal">NULL</span>;Listnode* cur=head;<br>   <span class="hljs-keyword">while</span>(cur)&#123;<br>      <span class="hljs-keyword">if</span>(cur-&gt;data==x)&#123;<br>         <span class="hljs-keyword">if</span>(cur==head)&#123;   <span class="hljs-comment">//å¦‚æœå¤´èŠ‚ç‚¹å°±æ˜¯è¦åˆ é™¤çš„èŠ‚ç‚¹</span><br>            head=cur-&gt;next;<br>            <span class="hljs-built_in">delete</span>(cur);<br>            cur=head;<br>         &#125;<br>         <span class="hljs-keyword">else</span>&#123;<br>            tmp-&gt;next=cur-&gt;next;<br>            <span class="hljs-built_in">delete</span>(cur);<br>            cur=tmp-&gt;next;<br>         &#125;<br>      &#125;<br>      <span class="hljs-keyword">else</span>&#123;<br>         tmp=cur;<br>         cur=cur-&gt;next;<br>      &#125;<br>   &#125;<br>   <span class="hljs-keyword">return</span> head;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ï¼ˆ4ï¼‰åˆ é™¤æŒ‡å®šä½ç½®çš„èŠ‚ç‚¹"><a href="#ï¼ˆ4ï¼‰åˆ é™¤æŒ‡å®šä½ç½®çš„èŠ‚ç‚¹" class="headerlink" title="ï¼ˆ4ï¼‰åˆ é™¤æŒ‡å®šä½ç½®çš„èŠ‚ç‚¹"></a>ï¼ˆ4ï¼‰åˆ é™¤æŒ‡å®šä½ç½®çš„èŠ‚ç‚¹</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">void</span>  <span class="hljs-title">Listdeletepos</span><span class="hljs-params">(Listnode** head,Listnode* pos)</span></span><br><span class="hljs-function"></span>&#123;<br>   <span class="hljs-keyword">if</span>(*head==pos)&#123;<br>      *head=pos-&gt;next;<br>      <span class="hljs-built_in">delete</span>(pos);<br>      pos=<span class="hljs-literal">nullptr</span>;<br>   &#125;<br>   <span class="hljs-keyword">else</span>&#123;<br>      Listnode* cur=*head;<br>      <span class="hljs-keyword">while</span>(cur-&gt;next!=pos)&#123;<br>         cur=cur-&gt;next;<br>      &#125;<br>      cur-&gt;next=pos-&gt;next;<br>      <span class="hljs-built_in">delete</span>(pos);<br>      pos=<span class="hljs-literal">nullptr</span>;<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="7-é“¾è¡¨å…ƒç´ çš„æŸ¥æ‰¾"><a href="#7-é“¾è¡¨å…ƒç´ çš„æŸ¥æ‰¾" class="headerlink" title="7.é“¾è¡¨å…ƒç´ çš„æŸ¥æ‰¾"></a>7.é“¾è¡¨å…ƒç´ çš„æŸ¥æ‰¾</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function">Listnode* <span class="hljs-title">Listfind</span><span class="hljs-params">(Listnode* head,<span class="hljs-type">int</span> x)</span></span><br><span class="hljs-function"></span>&#123;<br>Listnode* cur=head;<br>   <span class="hljs-keyword">while</span>(cur)&#123;<br>      <span class="hljs-keyword">if</span>(cur-&gt;data==x)<br>         <span class="hljs-keyword">return</span> cur;<br>      <span class="hljs-keyword">else</span><br>         cur=cur-&gt;next;<br>   &#125;<br>   <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="8-åœ¨æŒ‡å®šä½ç½®åæ’å…¥èŠ‚ç‚¹"><a href="#8-åœ¨æŒ‡å®šä½ç½®åæ’å…¥èŠ‚ç‚¹" class="headerlink" title="8.åœ¨æŒ‡å®šä½ç½®åæ’å…¥èŠ‚ç‚¹"></a>8.åœ¨æŒ‡å®šä½ç½®åæ’å…¥èŠ‚ç‚¹</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Listinsertb</span><span class="hljs-params">(Listnode* pos,<span class="hljs-type">int</span> x)</span></span><br><span class="hljs-function"></span>&#123;<br>   Listnode* newnode=<span class="hljs-keyword">new</span> Listnode &#123;x,<span class="hljs-literal">NULL</span>&#125;;<br>   newnode-&gt;next=pos-&gt;next;<br>   pos-&gt;next=newnode;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ä¸‰ã€å•é“¾è¡¨çš„åº”ç”¨-ä¾‹é¢˜"><a href="#ä¸‰ã€å•é“¾è¡¨çš„åº”ç”¨-ä¾‹é¢˜" class="headerlink" title="ä¸‰ã€å•é“¾è¡¨çš„åº”ç”¨&amp;ä¾‹é¢˜"></a>ä¸‰ã€å•é“¾è¡¨çš„åº”ç”¨&amp;ä¾‹é¢˜</h3><h4 id="1-é“¾è¡¨åè½¬"><a href="#1-é“¾è¡¨åè½¬" class="headerlink" title="1.é“¾è¡¨åè½¬"></a>1.é“¾è¡¨åè½¬</h4><p>åŠ›æ‰£é¢˜ç›®è¿æ¥ï¼š<a href="https://leetcode.cn/problems/reverse-linked-list/description/">206. åè½¬é“¾è¡¨ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><img src="C:/Users/å§šå§š/AppData/Roaming/Typora/typora-user-images/image-20240518103637208.png" alt="image-20240518103637208" style="zoom: 67%;" /><p><strong>æ–¹æ³•ä¸€ï¼šè¿­ä»£</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>&#123;<br><span class="hljs-keyword">public</span>:<br>   <span class="hljs-function">ListNode* <span class="hljs-title">reverseList</span><span class="hljs-params">(ListNode* head)</span></span>&#123;<br>         ListNode* prev=<span class="hljs-literal">nullptr</span>;<br>         ListNode* curr=head;<br>         <span class="hljs-keyword">while</span>(curr)&#123;<br>            ListNode* next=curr-&gt;next;<br>            curr-&gt;next=prev;<br>            pre=curr;<br>            curr=next;<br>         &#125;<br>      &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>**-&gt;**å›¾è§£åˆ†æï¼š</p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240523151338924.png" alt="image-20240523151338924" style="zoom: 33%;" /><p><strong>æ–¹æ³•äºŒï¼šé€’å½’</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>&#123;<br><span class="hljs-keyword">public</span>:<br>   <span class="hljs-function">ListNode* <span class="hljs-title">reverseList</span><span class="hljs-params">(ListNode* head)</span></span>&#123;<br>         <span class="hljs-keyword">if</span>(!head||!head-&gt;next)<br>            <span class="hljs-keyword">return</span> head;<br>         ListNode* newhead=<span class="hljs-built_in">reverseList</span>(head-&gt;next);<br>         head-&gt;next-&gt;next=head;<br>         head-&gt;next=<span class="hljs-literal">nullptr</span>;<br>         <span class="hljs-keyword">return</span> newhead;<br>      &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="2-æ‰¾åˆ°é“¾è¡¨çš„ä¸­é—´èŠ‚ç‚¹"><a href="#2-æ‰¾åˆ°é“¾è¡¨çš„ä¸­é—´èŠ‚ç‚¹" class="headerlink" title="2.æ‰¾åˆ°é“¾è¡¨çš„ä¸­é—´èŠ‚ç‚¹"></a>2.æ‰¾åˆ°é“¾è¡¨çš„ä¸­é—´èŠ‚ç‚¹</h4><p>åŠ›æ‰£é¢˜ç›®é“¾æ¥ï¼š<a href="https://leetcode.cn/problems/middle-of-the-linked-list/description/">876. é“¾è¡¨çš„ä¸­é—´ç»“ç‚¹ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><p>é¢˜ç›®æè¿°ï¼šç»™ä½ å•é“¾è¡¨çš„å¤´ç»“ç‚¹ <code>head</code> ï¼Œè¯·ä½ æ‰¾å‡ºå¹¶è¿”å›é“¾è¡¨çš„ä¸­é—´ç»“ç‚¹ã€‚å¦‚æœæœ‰ä¸¤ä¸ªä¸­é—´ç»“ç‚¹ï¼Œåˆ™è¿”å›ç¬¬äºŒä¸ªä¸­é—´ç»“ç‚¹ã€‚</p><p><strong>æ–¹æ³•ä¸€ï¼šéå†æ³•</strong></p><p>å…ˆéå†ä¸€éæ‰¾åˆ°ä¸€å…±æœ‰å¤šå°‘ä¸ªèŠ‚ç‚¹ï¼Œå†éå†ä¸€éæ‰¾åˆ°ä¸­é—´èŠ‚ç‚¹ã€‚å½“é“¾è¡¨é•¿åº¦è¾ƒé•¿çš„æ—¶å€™ï¼Œè¿™ç§æ–¹æ³•è¾ƒä¸ºæµªè´¹æ—¶é—´ã€‚ä¸‹é¢çš„æ–¹æ³•åªéœ€è¦éå†ä¸€æ¬¡ã€‚</p><p><strong>æ–¹æ³•äºŒï¼šå¿«æ…¢æŒ‡é’ˆæ³•ï¼š</strong></p><p>å®šä¹‰ä¸¤ä¸ªæŒ‡é’ˆï¼Œæ…¢æŒ‡é’ˆä¾æ¬¡åªèµ°ä¸€æ­¥ï¼Œå¿«æŒ‡é’ˆä¸€æ¬¡èµ°ä¸¤æ­¥ã€‚å½“å¿«æŒ‡é’ˆèµ°åˆ°ç»ˆç‚¹æ—¶ï¼Œæ…¢æŒ‡é’ˆå°±åˆšå¥½èµ°åˆ°äº†ä¸­é—´èŠ‚ç‚¹ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function">ListNode* <span class="hljs-title">middleNode</span><span class="hljs-params">(ListNode* head)</span> </span>&#123;<br>ListNode* slow,ListNode* fast;<br>   slow=fast=head;<br>   <span class="hljs-keyword">while</span>(fast&amp;&amp;fast-&gt;next)&#123;<br>      slow=slow-&gt;next;<br>      fast=fast-&gt;next-&gt;next;<br>   &#125;<br>   <span class="hljs-keyword">return</span> slow;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="3-ç§»é™¤é‡å¤èŠ‚ç‚¹"><a href="#3-ç§»é™¤é‡å¤èŠ‚ç‚¹" class="headerlink" title="3.ç§»é™¤é‡å¤èŠ‚ç‚¹"></a>3.ç§»é™¤é‡å¤èŠ‚ç‚¹</h4><p>åŠ›æ‰£é¢˜ç›®é“¾æ¥ï¼š<a href="https://leetcode.cn/problems/remove-duplicate-node-lcci/description/">é¢è¯•é¢˜ 02.01. ç§»é™¤é‡å¤èŠ‚ç‚¹ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><p>é¢˜ç›®æè¿°ï¼šç¼–å†™ä»£ç ï¼Œç§»é™¤æœªæ’åºé“¾è¡¨ä¸­çš„é‡å¤èŠ‚ç‚¹ã€‚ä¿ç•™æœ€å¼€å§‹å‡ºç°çš„èŠ‚ç‚¹ã€‚</p><p><strong>å“ˆå¸Œè¡¨æ³•ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function">ListNode* <span class="hljs-title">removeDuplicateNodes</span><span class="hljs-params">(ListNode* head)</span> </span>&#123;<br>   ListNode* pre=<span class="hljs-literal">NULL</span>,*cur=head;  <span class="hljs-comment">//å‰åæŒ‡é’ˆ</span><br>   unordered_set&lt;<span class="hljs-type">int</span>&gt; list;  <span class="hljs-comment">//åˆå§‹åŒ–å“ˆå¸Œè¡¨</span><br>   <span class="hljs-keyword">while</span>(cur)&#123;  <span class="hljs-comment">//å½“æŒ‡é’ˆä¸ä¸ºç©º</span><br>      <span class="hljs-keyword">if</span>(list.<span class="hljs-built_in">find</span>(cur&gt;val)==list.<span class="hljs-built_in">end</span>())&#123;  <span class="hljs-comment">//æ²¡æœ‰è¯¥å…ƒç´ </span><br>         list.<span class="hljs-built_in">insert</span>(cur-&gt;val);  <span class="hljs-comment">//æ’å…¥</span><br>         pre=cur;<br>      &#125;     <br>      <span class="hljs-keyword">else</span><br>         pre-&gt;next=cur-&gt;next;  <span class="hljs-comment">//å¦‚æœè¡¨ä¸­å·²ç»æœ‰è¯¥å…ƒç´ ï¼Œåˆ é™¤è¯¥æŒ‡é’ˆ</span><br>      cur=cur-&gt;next;<br>   &#125;<br>   <span class="hljs-keyword">return</span> head;  <span class="hljs-comment">//è‹¥å¤´æŒ‡é’ˆå°±ä¸ºç©ºåˆ™ç›´æ¥è¿”å›</span><br>&#125;<br></code></pre></td></tr></table></figure><h4 id="4-æ‰¾åˆ°é“¾è¡¨çš„å€’æ•°ç¬¬kä¸ªæŒ‡é’ˆ"><a href="#4-æ‰¾åˆ°é“¾è¡¨çš„å€’æ•°ç¬¬kä¸ªæŒ‡é’ˆ" class="headerlink" title="4.æ‰¾åˆ°é“¾è¡¨çš„å€’æ•°ç¬¬kä¸ªæŒ‡é’ˆ"></a>4.æ‰¾åˆ°é“¾è¡¨çš„å€’æ•°ç¬¬kä¸ªæŒ‡é’ˆ</h4><p>åŠ›æ‰£é¢˜ç›®é“¾æ¥ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">kthToLast</span><span class="hljs-params">(ListNode* head, <span class="hljs-type">int</span> k)</span> </span>&#123;<br>ListNode* pre,*cur;<br>   pre=cur=head;<br>   <span class="hljs-keyword">while</span>(k--)<br>      pre=pre-&gt;next;<br>   <span class="hljs-keyword">while</span>(pre)&#123;<br>      pre=pre-&gt;next;<br>      cur=cur-&gt;next;<br>   &#125;<br>   <span class="hljs-keyword">return</span> cur.val;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="5-åˆ¤æ–­é“¾è¡¨æ˜¯å¦ä¸ºå›æ–‡é“¾è¡¨"><a href="#5-åˆ¤æ–­é“¾è¡¨æ˜¯å¦ä¸ºå›æ–‡é“¾è¡¨" class="headerlink" title="5.åˆ¤æ–­é“¾è¡¨æ˜¯å¦ä¸ºå›æ–‡é“¾è¡¨"></a>5.åˆ¤æ–­é“¾è¡¨æ˜¯å¦ä¸ºå›æ–‡é“¾è¡¨</h4><p>åŠ›æ‰£é¢˜ç›®é“¾æ¥ï¼š</p><p><strong>æ–¹æ³•ä¸€ï¼šå¤åˆ¶å…ƒç´ åˆ°æ•°ç»„ä¸­å†è¿›è¡Œåˆ¤æ–­</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">isPalindrome</span><span class="hljs-params">(ListNode* head)</span> </span>&#123;<br>vector&lt;<span class="hljs-type">int</span>&gt; list;<br>   <span class="hljs-keyword">while</span>(head!=<span class="hljs-literal">nullptr</span>)&#123;<br>      list.<span class="hljs-built_in">emplace_back</span>(head-&gt;val);<br>      head=head-&gt;next;<br>   &#125;<br>   <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>,j=list.<span class="hljs-built_in">size</span>()<span class="hljs-number">-1</span>;i&lt;j;i++,j--)&#123;<br>      <span class="hljs-keyword">if</span>(list[i]!=list[j])<br>         <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>   &#125;<br>   <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ–¹æ³•äºŒï¼šé€’å½’</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    ListNode* frontPointer;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">recursivelyCheck</span><span class="hljs-params">(ListNode* currentNode)</span> </span>&#123;<br>        <span class="hljs-keyword">if</span> (currentNode != <span class="hljs-literal">nullptr</span>) &#123;<br>            <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">recursivelyCheck</span>(currentNode-&gt;next)) &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            &#125;<br>            <span class="hljs-keyword">if</span> (currentNode-&gt;val != frontPointer-&gt;val) &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            &#125;<br>            frontPointer = frontPointer-&gt;next;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">isPalindrome</span><span class="hljs-params">(ListNode* head)</span> </span>&#123;<br>        frontPointer = head;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">recursivelyCheck</span>(head);<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><h4 id="6-ç›¸äº¤é“¾è¡¨"><a href="#6-ç›¸äº¤é“¾è¡¨" class="headerlink" title="6.ç›¸äº¤é“¾è¡¨"></a>6.ç›¸äº¤é“¾è¡¨</h4><p>åŠ›æ‰£é¢˜ç›®é“¾æ¥ï¼š<a href="https://leetcode.cn/problems/intersection-of-two-linked-lists-lcci/description/">é¢è¯•é¢˜ 02.07. é“¾è¡¨ç›¸äº¤ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><p>é¢˜ç›®æè¿°ï¼šç»™ä½ ä¸¤ä¸ªå•é“¾è¡¨çš„å¤´èŠ‚ç‚¹ <code>headA</code> å’Œ <code>headB</code> ï¼Œè¯·ä½ æ‰¾å‡ºå¹¶è¿”å›ä¸¤ä¸ªå•é“¾è¡¨ç›¸äº¤çš„èµ·å§‹èŠ‚ç‚¹ã€‚å¦‚æœä¸¤ä¸ªé“¾è¡¨æ²¡æœ‰äº¤ç‚¹ï¼Œè¿”å› <code>null</code> ã€‚é¢˜ç›®æ•°æ® ä¿è¯ æ•´ä¸ªé“¾å¼ç»“æ„ä¸­ä¸å­˜åœ¨ç¯ã€‚æ³¨æ„ï¼Œå‡½æ•°è¿”å›ç»“æœåï¼Œé“¾è¡¨å¿…é¡» ä¿æŒå…¶åŸå§‹ç»“æ„ ã€‚</p><p><strong>åŒæŒ‡é’ˆæ³•ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function">ListNode *<span class="hljs-title">getIntersectionNode</span><span class="hljs-params">(ListNode *headA, ListNode *headB)</span> </span>&#123;<br><span class="hljs-keyword">if</span>(headA==<span class="hljs-literal">nullptr</span>||headB==<span class="hljs-literal">nullptr</span>)<br>      <span class="hljs-keyword">return</span> null;<br>   ListNode* n1=headA,*n2=headB;<br>   <span class="hljs-keyword">while</span>(n1!=n2)&#123;<br>      n1=n1==<span class="hljs-literal">nullptr</span>?headB:n1-&gt;next;<br>      n2=n2==<span class="hljs-literal">nullptr</span>?headA:n2-&gt;next;<br>   &#125;<br>   <span class="hljs-keyword">return</span> n1;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="7-ç¯è·¯æ£€æµ‹"><a href="#7-ç¯è·¯æ£€æµ‹" class="headerlink" title="7.ç¯è·¯æ£€æµ‹"></a>7.ç¯è·¯æ£€æµ‹</h4><p>åŠ›æ‰£é¢˜ç›®é“¾æ¥ï¼š<a href="https://leetcode.cn/problems/linked-list-cycle-lcci/description/">é¢è¯•é¢˜ 02.08. ç¯è·¯æ£€æµ‹ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><p>é¢˜ç›®æè¿°ï¼šç»™å®šä¸€ä¸ªé“¾è¡¨ï¼Œå¦‚æœå®ƒæ˜¯æœ‰ç¯é“¾è¡¨ï¼Œå®ç°ä¸€ä¸ªç®—æ³•è¿”å›ç¯è·¯çš„å¼€å¤´èŠ‚ç‚¹ã€‚è‹¥ç¯ä¸å­˜åœ¨ï¼Œè¯·è¿”å› nullã€‚</p><p>å¦‚æœé“¾è¡¨ä¸­æœ‰æŸä¸ªèŠ‚ç‚¹ï¼Œå¯ä»¥é€šè¿‡è¿ç»­è·Ÿè¸ª <code>next</code> æŒ‡é’ˆå†æ¬¡åˆ°è¾¾ï¼Œåˆ™é“¾è¡¨ä¸­å­˜åœ¨ç¯ã€‚ ä¸ºäº†è¡¨ç¤ºç»™å®šé“¾è¡¨ä¸­çš„ç¯ï¼Œæˆ‘ä»¬ä½¿ç”¨æ•´æ•° <code>pos</code> æ¥è¡¨ç¤ºé“¾è¡¨å°¾è¿æ¥åˆ°é“¾è¡¨ä¸­çš„ä½ç½®ï¼ˆç´¢å¼•ä» 0 å¼€å§‹ï¼‰ã€‚ å¦‚æœ <code>pos</code> æ˜¯ <code>-1</code>ï¼Œåˆ™åœ¨è¯¥é“¾è¡¨ä¸­æ²¡æœ‰ç¯ã€‚æ³¨æ„ï¼š<code>pos</code> ä¸ä½œä¸ºå‚æ•°è¿›è¡Œä¼ é€’ï¼Œä»…ä»…æ˜¯ä¸ºäº†æ ‡è¯†é“¾è¡¨çš„å®é™…æƒ…å†µã€‚</p><p><strong>å“ˆå¸Œè¡¨æ³•ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function">ListNode *<span class="hljs-title">detectCycle</span><span class="hljs-params">(ListNode *head)</span> </span>&#123;<br>   unordered_set&lt;ListNode*&gt; list;<br>   <span class="hljs-keyword">while</span>(head!=<span class="hljs-literal">nullptr</span>)&#123;<br>      <span class="hljs-keyword">if</span>(list.<span class="hljs-built_in">count</span>(head))<br>         <span class="hljs-keyword">return</span> head;<br>      list.<span class="hljs-built_in">insert</span>(head);<br>      head=head-&gt;next;<br>   &#125;<br>   <span class="hljs-keyword">return</span> null;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>C++</category>
      
    </categories>
    
    
    <tags>
      
      <tag>C++</tag>
      
      <tag>é“¾è¡¨</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>è®¡ç®—æœºç½‘ç»œé¢ç»</title>
    <link href="/2024/05/09/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E9%9D%A2%E7%BB%8F/"/>
    <url>/2024/05/09/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E9%9D%A2%E7%BB%8F/</url>
    
    <content type="html"><![CDATA[<p>ä¸‰ã€ç½‘ç»œçš„ä¸ƒå±‚åè®®ï¼ŒTCP UDPçš„åŒºåˆ« ï¼Œmacåœ°å€ï¼Œip ç«¯å£ å­ç½‘æ©ç åˆ†åˆ«æ˜¯å¹²ä»€ä¹ˆç”¨çš„</p><p><strong>https æ”»å‡»æ–¹å¼</strong></p><p>1ã€æ•°æ®è¢«ç›‘å¬2ã€æ•°æ®è¢«ç¯¡æ”¹</p><p><strong>è¿›ç¨‹é—´æœ‰å“ªäº›é€šä¿¡æ–¹å¼</strong></p><p>ç®¡é“ã€å…±äº«å†…å­˜ã€æ¶ˆæ¯é˜Ÿåˆ—ã€ä¿¡å·</p><p><strong>httpsæ˜¯æ€ä¹ˆåŠ å¯†çš„</strong></p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240509223423753.png" alt="image-20240509223423753"></p><p>åŠ å¯†å°±æ˜¯æŠŠæ˜â½‚(è¦ä¼ è¾“çš„ä¿¡æ¯)è¿›è¡Œâ¼€ç³»åˆ—å˜æ¢, â½£æˆå¯†æ–‡ï¼›è§£å¯†å°±æ˜¯æŠŠå¯†â½‚å†è¿›â¾â¼€ç³»åˆ—å˜æ¢, è¿˜åŸæˆæ˜æ–‡ã€‚</p><p>å¯¹ç§°åŠ å¯†ï¼ˆç®—æ³•å…¬å¼€ã€è®¡ç®—é‡â¼©ã€åŠ å¯†é€Ÿåº¦å¿«ã€åŠ å¯†æ•ˆç‡é«˜ï¼‰ã€éå¯¹ç§°åŠ å¯†ï¼ˆç®—æ³•å¼ºåº¦å¤æ‚ã€è¿ç®—é€Ÿåº¦å¾ˆæ…¢ï¼‰ã€æ•°æ®æ‘˜è¦</p><p><strong>cpuè°ƒåº¦ç®—æ³•çš„è¯„ä»·æŒ‡æ ‡?</strong></p><p>cpuåˆ©ç”¨ç‡ã€ç³»ç»Ÿååé‡ã€å‘¨è½¬æ—¶é—´ã€ç­‰å¾…æ—¶é—´ã€å“åº”æ—¶é—´</p><p><strong>ä¸ºä»€ä¹ˆè¯´tcpæ˜¯å¯é çš„?</strong></p><p>TCPä¿è¯å¯é æ€§ä¸€èˆ¬æœ‰ä»¥ä¸‹å‡ ç§æ–¹æ³•ï¼š</p><p>æ£€éªŒå’Œï¼šåœ¨æ•°æ®ä¼ è¾“è¿‡ç¨‹ä¸­ï¼ŒæŠŠä¼ è¾“çš„æ•°æ®å½“ä½œä¸€ä¸ª16ä½æ•´æ•°ã€‚å§æ‰€æœ‰çš„æ•°æ®åŠ èµ·æ¥ï¼Œæœ€å‰é¢çš„è¿›ä½è¡¥åˆ°æœ€åä¸€ä½ï¼Œç„¶åå–åå¾—åˆ°æ ¡éªŒå’Œã€‚å‘é€æ–¹å’Œæ¥æ”¶æ–¹éªŒè¯æ ¡éªŒå’Œæ˜¯å¦ç›¸åŒã€‚ä¸ç›¸åŒåˆ™æ•°æ®ä¼ è¾“æœ‰è¯¯ï¼Œç›¸åŒä¹Ÿå¯èƒ½æœ‰é—®é¢˜ã€‚<br>ç¡®è®¤åº”ç­”ï¼šACKå’Œåºåˆ—å·ï¼ˆä¸€åº”ä¸€ç­”ï¼‰æœºåˆ¶ä¿è¯æ•°æ®çš„å®Œæ•´æ€§ï¼ˆä¸‰æ¬¡æ¡æ‰‹äºå››æ¬¡æŒ¥æ‰‹è¿‡ç¨‹ä¸­é€šè¿‡æ¯”å¯¹Seqå’ŒACKæ¥å®ç°ï¼‰<br>è¶…æ—¶é‡ä¼ ï¼šå‘é€æ•°æ®åŒ…åœ¨ä¸€å®šçš„æ—¶é—´å‘¨æœŸå†…æ²¡æœ‰æ”¶åˆ°ç›¸åº”çš„ACKï¼Œç­‰å¾…ä¸€å®šçš„æ—¶é—´ï¼Œè¶…æ—¶ä¹‹åå°±è®¤ä¸ºè¿™ä¸ªæ•°æ®åŒ…ä¸¢å¤±ï¼Œå°±ä¼šé‡æ–°å‘é€ï¼ˆä¹Ÿå°±æ˜¯å‘é€æ•°æ®åï¼Œé•¿æ—¶é—´æ²¡æ”¶åˆ°å›åº”ï¼Œä¼šæŠŠæ•°æ®å†å‘ä¸€æ¬¡ã€‚ï¼‰<br>è¿æ¥ç®¡ç†ï¼šä¸‰æ¬¡æ¡æ‰‹ï¼Œå››æ¬¡æŒ¥æ‰‹<br>æœ€å¤§æ¶ˆæ¯é•¿åº¦ï¼šç†æƒ³çš„æƒ…å†µä¸‹æ˜¯è¯¥é•¿åº¦çš„æ•°æ®åˆšå¥½ä¸è¢«ç½‘ç»œå±‚åˆ†å—ã€‚<br>æ‹¥å¡æ§åˆ¶ï¼šæ§åˆ¶ä¼ è¾“ä¸Šæµé‡ï¼ˆå‘é€æ•°æ®æ—¶å¼€å§‹æ˜¯æ…¢å¯åŠ¨ï¼Œå…ˆå‘é€ä¸€ç‚¹ç‚¹æ•°æ®å»æ¢æµ‹ç½‘ç»œæ‹¥å¡ä¸æ‹¥å¡ï¼Œå¦‚æœä¸æ‹¥å¡äº†ï¼Œåˆ™å¤§é‡çš„å‘é€æ•°æ®ã€‚å¦‚æœçªç„¶æ‹¥å¡äº†ï¼Œåˆ™åˆå¾ˆæ…¢çš„å‘é€æ•°æ®ã€‚è¿™æ ·æ˜¯ä¸ºäº†å°½å¯èƒ½å¿«çš„å‘é€æ•°æ®ï¼Œé¿å…ç½‘ç»œæ‹¥å¡é€ æˆä¸€ç³»åˆ—é—®é¢˜ï¼‰<br>æµé‡æ§åˆ¶ï¼šTCPåˆ©ç”¨æ»‘åŠ¨çª—å£å®ç°æµé‡æ§åˆ¶ï¼Œæµé‡æ§åˆ¶æ˜¯ä¸ºäº†æ§åˆ¶å‘é€æ–¹çš„å‘é€é€Ÿç‡ï¼Œä¿è¯æ¥æ”¶æ–¹å¯ä»¥åŠæ—¶æ¥æ”¶</p><p><strong>ç½‘ç»œåè®®æœ‰å“ªäº›ï¼Ÿ</strong></p><p>1ã€HTTPï¼ˆHypertext Transfer Protocolï¼‰åè®®æ˜¯ä¸€ç§ç”¨äºä¼ è¾“è¶…æ–‡æœ¬çš„åè®®ï¼Œé€šå¸¸ç”¨äºåœ¨Webæµè§ˆå™¨å’ŒWebæœåŠ¡å™¨ä¹‹é—´ä¼ é€’æ•°æ®ã€‚å®ƒåŸºäºè¯·æ±‚-å“åº”æ¨¡å‹ï¼šå®¢æˆ·ç«¯å‘é€HTTPè¯·æ±‚ï¼ŒæœåŠ¡å™¨è¿”å›HTTPå“åº”ã€‚é€šä¿¡ä½¿ç”¨æ˜æ–‡è¿›è¡Œï¼Œä¸å…·å¤‡åŠ å¯†æ€§ã€‚lHTTPå¹¿æ³›åº”ç”¨äºWebå¼€å‘ï¼Œç”¨äºè·å–ç½‘é¡µã€ä¼ è¾“HTMLã€CSSã€JavaScriptç­‰èµ„æºã€‚å®ƒçš„æ— çŠ¶æ€ç‰¹æ€§ä½¿å…¶é€‚ç”¨äºå¿«é€Ÿã€è½»é‡çº§çš„æ•°æ®ä¼ è¾“ã€‚</p><p>HTTPåè®®çš„ç‰¹ç‚¹</p><p>æ”¯æŒæœåŠ¡å™¨&#x2F;å®¢æˆ·ç«¯æ¨¡å¼</p><p>ä¼ è¾“è¾ƒå¿«é€Ÿï¼Œå®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œåªéœ€è¦ä¼ è¾“è¯·æ±‚æ–¹æ³•å’Œè·¯å¾„</p><p>çµæ´»ï¼ŒHTTPå…è®¸ä¼ è¾“ä»»æ„ç±»å‹çš„æ•°æ®å¯¹è±¡</p><p>æ— è¿æ¥ï¼Œæ¯æ¬¡è¿æ¥åªèƒ½å¤„ç†ä¸€ä¸ªè¯·æ±‚ï¼ŒæœåŠ¡å™¨å¤„ç†å®Œå®¢æˆ·ç«¯è¯·æ±‚ï¼Œå®¢æˆ·ç«¯æ”¶åˆ°å“åº”åå°±æ–­å¼€è¿æ¥</p><p>æ— çŠ¶æ€ï¼Œåè®®æœ¬èº«å¯¹äº‹åŠ¡å¤„ç†æ²¡æœ‰è®°å¿†èƒ½åŠ›ï¼Œå¦‚æœååºè¿æ¥éœ€è¦ä¹‹å‰å‘é€çš„ä¿¡æ¯æ—¶å°±éœ€è¦é‡ä¼ </p><p>(1)HTTP1.0å’ŒHTTP1.1çš„åŒºåˆ«ï¼š</p><p>é•¿è¿æ¥ï¼šHTTP1.0åªæ”¯æŒæµè§ˆå™¨ä¸æœåŠ¡å™¨çš„çŸ­è¿æ¥ï¼Œå³æ¯æ¬¡è¯·æ±‚éƒ½è¦é‡æ–°å»ºç«‹è¿æ¥ï¼ŒæœåŠ¡å™¨æ— æ³•è®°å½•æ¯ä¸ªå†å²è¯·æ±‚ï¼ŒHTTP1.1æ”¯æŒé•¿è¿æ¥å³åœ¨ä¸€æ¬¡è¿æ¥ä¸‹ï¼Œæµè§ˆå™¨å¯ä»¥å‘æœåŠ¡å™¨å‘é€å¤šæ¬¡è¯·æ±‚</p><p>å¢åŠ Hostå­—æ®µï¼šHTTP1.0ä¸­è®¤ä¸ºæ¯ä¸ªæœåŠ¡å™¨éƒ½ç»‘å®šè¿™å”¯ä¸€ä¸€ä¸ªIPï¼Œæ‰€æœ‰å‘é€çš„è¯·æ±‚å¤´URLä¸­æ²¡æœ‰hostä¿¡æ¯ï¼Œè€ŒHTTP1.1åœ¨è¯·æ±‚å’Œå“åº”ä¸­éƒ½æ”¯æŒäº†hostå¤´åŸŸï¼Œä¸”è¯·æ±‚æ¶ˆæ¯ä¸­å¦‚æœæ²¡æœ‰Hostå¤´åŸŸä¼šæŠ¥å‘Šä¸€ä¸ªé”™è¯¯(400 Bad Request)</p><p>ç¼“å­˜ï¼šHTTP1.1åœ¨1.0çš„åŸºç¡€ä¸ŠåŠ å…¥äº†ä¸€äº›cacheçš„æ–°ç‰¹æ€§ï¼Œå½“ç¼“å­˜å¯¹è±¡çš„Ageè¶…è¿‡Expireæ—¶å˜ä¸ºstaleå¯¹è±¡ï¼Œcacheä¸éœ€è¦ç›´æ¥æŠ›å¼ƒstaleå¯¹è±¡ï¼Œè€Œæ˜¯ä¸æºæœåŠ¡å™¨è¿›è¡Œé‡æ–°æ¿€æ´»ï¼ˆrevalidationï¼‰ã€‚</p><p>é”™è¯¯æç¤ºï¼šHTTP1.0ä¸­å®šä¹‰äº†16ä¸ªçŠ¶æ€ç ï¼Œå¯¹é”™è¯¯æˆ–è­¦å‘Šçš„æç¤ºä¸å¤Ÿå…·ä½“ã€‚HTTP1.1å¼•å…¥äº†ä¸€ä¸ªWarningå¤´åŸŸï¼Œå¢åŠ å¯¹é”™è¯¯æˆ–è­¦å‘Šä¿¡æ¯çš„æè¿°ï¼Œå¹¶ä¸”è¿˜æ–°å¢äº†24ä¸ªçŠ¶æ€å“åº”ç ï¼Œå¦‚409(Conflict)è¡¨ç¤ºè¯·æ±‚çš„èµ„æºä¸èµ„æºçš„å½“å‰çŠ¶æ€å‘ç”Ÿå†²çªï¼›410(Gone)è¡¨ç¤ºæœåŠ¡å™¨ä¸Šçš„æŸä¸ªèµ„æºè¢«æ°¸ä¹…æ€§çš„åˆ é™¤</p><p>(2)HTTP1.Xå’ŒHTTP2.0çš„åŒºåˆ«</p><p>å¢åŠ äºŒè¿›åˆ¶æ ¼å¼è§£æï¼šHTTP1.Xè§£æåŸºäºæ–‡æœ¬ï¼Œè€Œæ–‡æœ¬æ ¼å¼æœ¬èº«å°±å…·æœ‰å¤šæ ·æ€§ï¼Œå¾ˆå¤šåœºæ™¯ä¸‹ä¸æ–¹ä¾¿ï¼Œè€Œå¼•å…¥äºŒè¿›åˆ¶åï¼Œåªæœ‰0å’Œ1ç»„åˆï¼Œä½¿è§£ææ›´åŠ æ–¹ä¾¿ä¹Ÿå¢å¼ºäº†å¥å£®æ€§</p><p>å¤šè·¯å¤ç”¨ï¼šå³æ¯ä¸ªrequestéƒ½æ˜¯æ˜¯ç”¨ä½œè¿æ¥å…±äº«æœºåˆ¶çš„ï¼Œæ¯ä¸ªrequestéƒ½å¯¹åº”ä¸€ä¸ªidï¼Œä½¿ä¸€ä¸ªè¿æ¥å¯ä»¥æœ‰å¤šä¸ªè¯·æ±‚ï¼Œå†æ ¹æ®idå°†requestå½’å±åˆ°ä¸åŒçš„æœåŠ¡ç«¯è¯·æ±‚é‡Œ</p><p>headerå‹ç¼©ï¼šHTTP1.Xä¸­ï¼Œæ¯æ¬¡ä¼ è¾“éƒ½è¦å†™ç‚¹headerå¤´ï¼Œå ç”¨äº†å¤§é‡æ•°æ®ï¼Œå› æ­¤HTTP2.0åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯å„ä¿å­˜äº†ä¸€ä»½header fieldsè¡¨ï¼Œæ¯æ¬¡ä¼ è¾“æ—¶åªéœ€ä¼ è¾“headerçš„æ›´æ–°ä¿¡æ¯ï¼Œå°†header fieldsè¡¨æ›´æ–°å³å¯å®ç°headerä¼ è¾“</p><p>2ã€SMTPï¼ˆSimple Mail Transfer Protocolï¼‰æ˜¯ä¸€ç§ç”µå­é‚®ä»¶ä¼ è¾“åè®®ï¼Œç”¨äºåœ¨é‚®ä»¶å®¢æˆ·ç«¯å’Œé‚®ä»¶æœåŠ¡å™¨ä¹‹é—´ä¼ é€’ç”µå­é‚®ä»¶ã€‚å®ƒå®šä¹‰äº†é‚®ä»¶çš„æ ¼å¼ä»¥åŠåœ¨ä¸åŒè®¾å¤‡ä¹‹é—´çš„ä¼ é€’æ–¹å¼ã€‚</p><p>3ã€FTPï¼ˆFile Transfer Protocolï¼‰æ˜¯ä¸€ç§ç”¨äºåœ¨è®¡ç®—æœºä¹‹é—´ä¼ è¾“æ–‡ä»¶çš„åè®®ã€‚å®ƒæ”¯æŒç”¨æˆ·é€šè¿‡ç”¨æˆ·åå’Œå¯†ç è¿›è¡Œèº«ä»½éªŒè¯ï¼Œå¹¶æä¾›æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½åŠŸèƒ½ã€‚</p><p>4ã€DNSï¼ˆDomain Name Systemï¼‰æ˜¯ä¸€ç§å°†åŸŸåæ˜ å°„åˆ°IPåœ°å€çš„åˆ†å¸ƒå¼æ•°æ®åº“ç³»ç»Ÿã€‚å®ƒå…è®¸ç”¨æˆ·ä½¿ç”¨æ˜“è®°çš„åŸŸåè€Œä¸æ˜¯å¤æ‚çš„IPåœ°å€è®¿é—®äº’è”ç½‘èµ„æºã€‚</p><p><strong>é¿å…ç¼“å­˜é›ªå´©å¦‚ä½•å®ç°</strong></p><p>ç¼“å­˜é›ªå´©æ˜¯æŒ‡åœ¨æŸä¸ªæ—¶é—´ç‚¹ï¼Œå¤§é‡ç¼“å­˜åŒæ—¶å¤±æ•ˆï¼Œå¯¼è‡´å¤§é‡è¯·æ±‚ç›´æ¥è½åˆ°<a href="https://so.csdn.net/so/search?q=%E6%95%B0%E6%8D%AE%E5%BA%93&spm=1001.2101.3001.7020">æ•°æ®åº“</a>ä¸Šï¼Œé€ æˆæ•°æ®åº“è´Ÿè½½æ¿€å¢çš„ç°è±¡ã€‚</p><p>1 åˆç†è®¾ç½®ç¼“å­˜å¤±æ•ˆæ—¶é—´ï¼š<br>å°†ç¼“å­˜çš„å¤±æ•ˆæ—¶é—´åˆ†æ•£å¼€ï¼Œé¿å…åŒæ—¶å¤±æ•ˆã€‚å¯ä»¥åœ¨åŸæœ‰çš„å¤±æ•ˆæ—¶é—´åŸºç¡€ä¸Šï¼ŒåŠ ä¸Šä¸€ä¸ªéšæœºçš„æ—¶é—´åç§»ï¼Œæˆ–è€…ä½¿ç”¨å¸¦æœ‰èŒƒå›´çš„å¤±æ•ˆæ—¶é—´ã€‚</p><p>2 é‡‡ç”¨æ°¸ä¸è¿‡æœŸç­–ç•¥ï¼š<br>å¯¹äºçƒ­ç‚¹æ•°æ®ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨æ°¸ä¸è¿‡æœŸçš„ç­–ç•¥ï¼Œå³åœ¨ç¼“å­˜ä¸­æ°¸è¿œä¸ä¸»åŠ¨åˆ é™¤ï¼Œè€Œåœ¨æ•°æ®æ›´æ–°æ—¶æ‰‹åŠ¨åˆ·æ–°ç¼“å­˜ã€‚è¿™æ ·å¯ä»¥é¿å…å¤§é‡ç¼“å­˜åŒæ—¶å¤±æ•ˆçš„æƒ…å†µã€‚</p><p>3 ä½¿ç”¨å¤šçº§ç¼“å­˜ï¼š<br>å¼•å…¥å¤šçº§ç¼“å­˜æ¶æ„ï¼Œä¾‹å¦‚æœ¬åœ°ç¼“å­˜ã€åˆ†å¸ƒå¼ç¼“å­˜ï¼ˆå¦‚Redisï¼‰ã€å…¨å±€ç¼“å­˜ï¼ˆå¦‚CDNï¼‰ï¼Œè¿™æ ·å³ä½¿ä¸€ä¸ªçº§åˆ«çš„ç¼“å­˜å¤±æ•ˆï¼Œå…¶ä»–çº§åˆ«çš„ç¼“å­˜ä»ç„¶å¯ä»¥æä¾›æœåŠ¡ï¼Œé™ä½ç¼“å­˜é›ªå´©çš„é£é™©ã€‚</p><p>4 ç¼“å­˜é¢„çƒ­ï¼š<br>åœ¨ç³»ç»Ÿå¯åŠ¨æˆ–ä½å³°æœŸï¼Œæå‰åŠ è½½çƒ­é—¨æ•°æ®åˆ°ç¼“å­˜ä¸­ï¼Œé¿å…åœ¨é«˜å³°æœŸå¤§é‡è¯·æ±‚æ¶Œå…¥æ—¶è§¦å‘ç¼“å­˜å¤±æ•ˆã€‚</p><p>5 é™æµå’Œç†”æ–­ï¼š<br>å®æ–½é™æµå’Œç†”æ–­æœºåˆ¶ï¼Œæ§åˆ¶å¹¶å‘è®¿é—®çš„æ•°é‡ï¼Œé˜²æ­¢ç¬æ—¶è¯·æ±‚è¿‡å¤šå¯¼è‡´ç¼“å­˜é›ªå´©ã€‚</p><p>6 ç¼“å­˜ç©¿é€ä¿æŠ¤ï¼š<br>ä½¿ç”¨ç±»ä¼¼å¸ƒéš†è¿‡æ»¤å™¨ç®—æ³•ï¼Œé˜²æ­¢ç¼“å­˜ç©¿é€ï¼Œå³æŸ¥è¯¢ä¸€ä¸ªä¸å­˜åœ¨çš„æ•°æ®å¯¼è‡´ç¼“å­˜å’Œæ•°æ®åº“éƒ½ä¸å‘½ä¸­ã€‚</p><p>7 ç¾å¤‡æœºåˆ¶ï¼š<br>éƒ¨ç½²ç¾å¤‡æœºåˆ¶ï¼Œå½“ä¸»ç¼“å­˜å‡ºç°é—®é¢˜æ—¶ï¼Œå¯ä»¥åˆ‡æ¢åˆ°å¤‡ç”¨ç¼“å­˜ï¼Œä¿éšœç³»ç»Ÿçš„å¯ç”¨æ€§ã€‚</p><p>8 åˆ†æ‰¹æ›´æ–°ç¼“å­˜ï¼š<br>å½“å¤§é‡æ•°æ®éœ€è¦æ›´æ–°æ—¶ï¼Œé‡‡ç”¨åˆ†æ‰¹æ›´æ–°çš„æ–¹å¼ï¼Œé¿å…ä¸€æ¬¡æ€§å¤§è§„æ¨¡çš„ç¼“å­˜æ›´æ–°ã€‚</p><p><strong>protocol buffer</strong></p><p><strong>Speedåè®®</strong></p><p><strong>2.TCPå’ŒUDPåŒºåˆ«</strong><br>â‘  TCPåè®®æ˜¯æœ‰è¿æ¥çš„ï¼Œå³åœ¨ä¼ è¾“å®é™…æ•°æ®ä¹‹å‰TCPçš„å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯å¿…é¡»é€šè¿‡ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥ï¼Œä¼šè¯ç»“æŸåè¿˜è¦ç»“æŸè¿æ¥ã€‚è€ŒUDPæ˜¯æ— è¿æ¥çš„ã€‚<br>â‘¡TCPåè®®ä¿è¯æ•°æ®æŒ‰åºå‘é€ä»¥åŠåˆ°è¾¾ï¼Œè¶…æ—¶é‡ä¼ æ¥ä¿è¯å¯é æ€§ï¼Œä½†æ˜¯UDPä¸ä¿è¯æŒ‰åºåˆ°è¾¾ï¼Œä¸ä¿è¯åˆ°è¾¾ï¼Œåªæ˜¯åŠªåŠ›äº¤ä»˜ï¼Œå³ä½¿æ˜¯æŒ‰åºå‘é€çš„åºåˆ—ï¼Œä¹Ÿä¸ä¿å‡†æŒ‰åºé€åˆ°ã€‚<br>â‘¢TCPåè®®æ‰€éœ€çš„èµ„æºå¤šï¼Œé¦–éƒ¨éœ€è¦20ä¸ªå­—èŠ‚ï¼ŒUDPé¦–éƒ¨åªéœ€è¦8ä¸ªå­—èŠ‚<br>â‘£TCPæœ‰æµé‡æ§åˆ¶å’Œæ‹¥å¡æ§åˆ¶ï¼ŒUDPæœ‰æ²¡æœ‰ç½‘ç»œå µå¡ä¸ä¼šå½±å“å‘é€ç«¯çš„å‘é€é€Ÿç‡ã€‚<br>â‘¤TCPæ˜¯ä¸€å¯¹ä¸€è¿æ¥ï¼Œè€ŒUDPæ˜¯ä¸€å¯¹ä¸€ ä¸€å¯¹å¤š å¤šå¯¹å¤šçš„é€šä¿¡<br>â‘¥TCPé¢å‘çš„æ˜¯å­—èŠ‚æµçš„æœåŠ¡ï¼ŒUDPé¢å‘çš„æ˜¯æŠ¥æ–‡çš„æœåŠ¡ã€‚</p><p>4.<strong>è¿›ç¨‹å’Œç¨‹åºçš„åŒºåˆ«</strong><br>â‘ è¿›ç¨‹æ˜¯ç¨‹åºçš„ä¸€æ¬¡æ‰§è¡Œã€‚<br>â‘¡è¿›ç¨‹æ˜¯å¯ä»¥å¹¶è¡Œæ‰§è¡Œçš„è®¡ç®—<br>â‘¢è¿›ç¨‹æ˜¯ä¸€ä¸ªç¨‹åºä¸å…¶ä½¿ç”¨çš„æ•°æ®åœ¨å¤„ç†æœºä¸Šé¡ºåºæ‰§è¡Œæ—¶å‘ç”Ÿçš„æ´»åŠ¨ã€‚<br>â‘£è¿›ç¨‹æ˜¯ç³»ç»Ÿè¿›è¡Œèµ„æºåˆ†é…å’Œè°ƒåº¦çš„ä¸€ä¸ªç‹¬ç«‹å•ä½<br>æœ¬è´¨åŒºåˆ«ï¼š<br>â‘ ç¨‹åºæ˜¯æ°¸å­˜çš„ï¼Œè¿›ç¨‹æ˜¯æš‚æ—¶çš„<br>â‘¡è¿›ç¨‹æœ‰å¹¶å‘æ€§ï¼Œç¨‹åºæ²¡æœ‰<br>â‘¢äºŒè€…ä¸æ˜¯ä¸€ä¸€å¯¹åº”å…³ç³»ï¼Œä¸€ä¸ªç¨‹åºå¯ä»¥å¯¹åº”å¤šä¸ªè¿›ç¨‹ï¼Œå¤šä¸ªè¿›ç¨‹å¯æ‰§è¡ŒåŒä¸€ä¸ªç¨‹åºï¼Œä¸€ä¸ªè¿›ç¨‹å¯æ‰§è¡Œä¸€ä¸ªæˆ–è€…å‡ ä¸ªç¨‹åº<br>â‘£è¿›ç¨‹æ˜¯ç«äº‰è®¡ç®—æœºèµ„æºçš„åŸºæœ¬å•ä½ï¼Œä½†æ˜¯ç¨‹åºä¸æ˜¯ã€‚</p><h5 id="ä¸ºå•¥ä¸å¤šè¿›ç¨‹è€Œæ˜¯å¤šçº¿ç¨‹å‘¢ï¼Ÿ"><a href="#ä¸ºå•¥ä¸å¤šè¿›ç¨‹è€Œæ˜¯å¤šçº¿ç¨‹å‘¢ï¼Ÿ" class="headerlink" title="ä¸ºå•¥ä¸å¤šè¿›ç¨‹è€Œæ˜¯å¤šçº¿ç¨‹å‘¢ï¼Ÿ"></a>ä¸ºå•¥ä¸å¤šè¿›ç¨‹è€Œæ˜¯å¤šçº¿ç¨‹å‘¢ï¼Ÿ</h5><p>ç­”ï¼šçº¿ç¨‹å»‰ä»·ä¸”å¯åŠ¨è¾ƒå¿«ï¼Œå¯¹ç³»ç»Ÿèµ„æºçš„å†²å‡»æ¯”è¾ƒå°ï¼Œå¤šè¿›ç¨‹ä¸å¯é¢„æµ‹ä¸”æµ‹è¯•å›°éš¾ã€‚</p><p>7.è¯»å†™é”ï¼ˆè¿™ä¸ªä¸ä¼šï¼Œä½†å¥½åƒä¹ŸæŒºåŸºç¡€çš„ï¼‰<br>è¯»é”æ˜¯å…±äº«çš„<br>ã€€å†™é”æ˜¯æ’ä»–çš„<br>ã€€<br>è¯»-è¯»èƒ½å…±å­˜ï¼Œ<br>è¯»-å†™ä¸èƒ½å…±å­˜ï¼Œ<br>å†™-å†™ä¸èƒ½å…±å­˜ã€‚</p><p>8.å †å’Œæ ˆ<br>æ ˆå†…å­˜ï¼šå­˜å‚¨å±€éƒ¨å˜é‡ï¼Œæ›´æ–°é€Ÿåº¦å¿«ï¼Œå£°æ˜å‘¨æœŸçŸ­<br>å †å†…å­˜ï¼šå­˜å‚¨æ•°ç»„å’Œå¯¹è±¡ï¼Œå‡¡æ˜¯newå»ºç«‹çš„éƒ½æ˜¯åœ¨å †ä¸­ï¼Œå †ä¸­å­˜æ”¾çš„æ˜¯å®ä½“ï¼Œå®ä½“ç”¨äºå°è£…æ•°æ®ï¼Œjavaåƒåœ¾å›æ”¶ï¼ˆä¸å®šæ—¶ï¼‰ã€‚</p><p>9.è™šæ‹Ÿå†…å­˜å’Œå®é™…å†…å­˜ï¼ˆæ“ä½œç³»ç»Ÿå­¦çš„ï¼Œæœ‰ç‚¹ä¹…è¿œï¼‰<br>å½“è™šæ‹Ÿå†…å­˜ä¸­çš„å€¼çœŸæ­£éœ€è¦ç”¨çš„æ—¶å€™ï¼Œç‰©ç†å†…å­˜æ‰ä¼šå¼€è¾Ÿä¸€æ®µåœ°å€æ¥å­˜å‚¨è™šæ‹Ÿå†…å­˜ä¸­çš„å€¼<br>æ‰€ä»¥çœŸæ­£èƒ½ä½¿ç”¨çš„ç‰©ç†å†…å­˜çš„å¤§å°åˆ™ä¸ºï¼šè™šæ‹Ÿå†…å­˜(pagefile.sys) + ç‰©ç†å†…å­˜</p><p>10.æŠ¢å å¼è¿›ç¨‹è°ƒåº¦ï¼ˆè¿™ä¸ªä¹Ÿä¸ä¼šï¼Œèœå“­äº†ï¼‰<br>æœ€å¸¸è§çš„ç°è±¡æ˜¯ä½ è¿™ä¸ªè¿›ç¨‹è¿è¡Œæ—¶é—´å¤ªé•¿äº†ï¼Œæ˜¯æ—¶å€™åˆ‡æ¢åˆ°å¦ä¸€ä¸ªè¿›ç¨‹äº†</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240509221747850.png" alt="image-20240509221747850"></p><h6 id="tcpå’Œudpåº”ç”¨åœºæ™¯"><a href="#tcpå’Œudpåº”ç”¨åœºæ™¯" class="headerlink" title="tcpå’Œudpåº”ç”¨åœºæ™¯"></a>tcpå’Œudpåº”ç”¨åœºæ™¯</h6><p>tcpï¼šæ–‡ä»¶ä¼ è¾“ã€æ¥æ”¶é‚®ä»¶ã€è¿œç¨‹ç™»å½•<br>udpï¼šåœ¨çº¿è§†é¢‘ã€qqèŠå¤©ã€å¹¿æ’­é€šä¿¡</p><p>å¯¹äº3æ¬¡æ¡æ‰‹ï¼šä¸»è¦æ˜¯è¦åˆå§‹åŒ–Sequence Number çš„åˆå§‹å€¼ã€‚é€šä¿¡çš„åŒæ–¹è¦äº’ç›¸é€šçŸ¥å¯¹æ–¹è‡ªå·±çš„åˆå§‹åŒ–çš„Sequence Numberï¼ˆç¼©å†™ä¸ºISNï¼šInital Sequence Numberï¼‰â€”â€”æ‰€ä»¥å«SYNï¼Œå…¨ç§°Synchronize Sequence Numbersã€‚ä¹Ÿå°±ä¸Šå›¾ä¸­çš„ x å’Œ yã€‚è¿™ä¸ªå·è¦ä½œä¸ºä»¥åçš„æ•°æ®é€šä¿¡çš„åºå·ï¼Œä»¥ä¿è¯åº”ç”¨å±‚æ¥æ”¶åˆ°çš„æ•°æ®ä¸ä¼šå› ä¸ºç½‘ç»œä¸Šçš„ä¼ è¾“çš„é—®é¢˜è€Œä¹±åºï¼ˆTCPä¼šç”¨è¿™ä¸ªåºå·æ¥æ‹¼æ¥æ•°æ®ï¼‰ã€‚<br>å¯¹äº4æ¬¡æŒ¥æ‰‹ï¼šå…¶å®ä½ ä»”ç»†çœ‹æ˜¯2æ¬¡ï¼Œå› ä¸ºTCPæ˜¯å…¨åŒå·¥çš„ï¼Œæ‰€ä»¥ï¼Œå‘é€æ–¹å’Œæ¥æ”¶æ–¹éƒ½éœ€è¦Finå’ŒAckã€‚åªä¸è¿‡ï¼Œæœ‰ä¸€æ–¹æ˜¯è¢«åŠ¨çš„ï¼Œæ‰€ä»¥çœ‹ä¸Šå»å°±æˆäº†æ‰€è°“çš„4æ¬¡æŒ¥æ‰‹ã€‚å¦‚æœä¸¤è¾¹åŒæ—¶æ–­è¿æ¥ï¼Œé‚£å°±ä¼šå°±è¿›å…¥åˆ°CLOSINGçŠ¶æ€ï¼Œç„¶ååˆ°è¾¾TIME_WAITçŠ¶æ€ã€‚</p><p>æ‹¥å¡æ§åˆ¶ä¸»è¦æ˜¯å››ä¸ªç®—æ³•ï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs">æ…¢å¯åŠ¨<br>æ‹¥å¡é¿å…<br>æ‹¥å¡å‘ç”Ÿ<br>å¿«é€Ÿæ¢å¤<br></code></pre></td></tr></table></figure><p><strong>æµè§ˆå™¨è¾“å…¥ä¸€ä¸ªURLæŒ‰ä¸‹å›è½¦åï¼Œå…¶æµç¨‹æ˜¯ï¼Ÿ</strong></p><p>åˆ†æï¼šå¦‚æœè¦è¿æ¥åˆ°è¿œç¨‹æœåŠ¡å™¨ï¼Œé¦–å…ˆè¦çŸ¥é“æœåŠ¡å™¨çš„IPåœ°å€å’Œç«¯å£ï¼Œç„¶åå‘é€è¯·æ±‚åˆ°æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å†å“åº”ã€‚å› æ­¤å¯»å€å’Œå¦‚ä½•å»ºç«‹è¿æ¥æ˜¯å…³é”®ã€‚</p><p>æ­¥éª¤ï¼š</p><p>ï¼ˆ1ï¼‰è¿›è¡Œå¯»å€ï¼šè‹¥æµè§ˆå™¨ç¼“å­˜ä¸­å­˜æœ‰URLçš„å¯¹åº”IPï¼Œåˆ™ç›´æ¥æŸ¥è¯¢IPï¼›å¦åˆ™è®¿é—®DNSï¼ˆDomain Name Systemï¼‰è¿›è¡Œå¯»å€ï¼ˆDomain Name Resolutionï¼‰ã€‚</p><p>ï¼ˆ2ï¼‰ DNSæˆ–è€…URL Cacheè¿”å›ç½‘é¡µæœåŠ¡å™¨çš„IPåœ°å€ã€‚</p><p>ï¼ˆ3ï¼‰æµè§ˆå™¨ä¸ç½‘é¡µæœåŠ¡å™¨è¿›è¡Œä¸‰æ¬¡æ¡æ‰‹å»ºç«‹TCPè¿æ¥ã€‚ç”±äºæ˜¯ç½‘é¡µæµè§ˆæœåŠ¡ï¼Œæ•…è¿æ¥åˆ°æœåŠ¡å™¨çš„80ç«¯å£ã€‚</p><p>ï¼ˆ4ï¼‰æµè§ˆå™¨ä¸æœåŠ¡å™¨å»ºç«‹HTTPä¼šè¯ï¼ˆSessionï¼‰ï¼Œæ¥æ”¶æ¥è‡ªæœåŠ¡å™¨çš„HTTPæ•°æ®ã€‚</p><p>ï¼ˆ5ï¼‰æµè§ˆå™¨è§£æHTTPæ•°æ®ï¼Œåœ¨æœ¬åœ°çª—å£å†…æ¸²æŸ“å¹¶æ˜¾ç¤ºç½‘é¡µã€‚</p><p>ï¼ˆ6ï¼‰å½“æµè§ˆå™¨é¡µé¢è¢«å…³é—­æ—¶ï¼Œç»ˆæ­¢HTTPä¼šè¯å¹¶å…³é—­è¿æ¥ã€‚</p><p><strong>å¤šçº¿ç¨‹å»ºç«‹æœ‰å“ªå‡ ç§æ–¹æ³•</strong></p><p>ç»§æ‰¿threadã€å»ºç«‹çº¿ç¨‹æ± ã€å®ç°Runnableã€å®ç°Callable</p><p><strong>å¤šçº¿ç¨‹å¹¶å‘çš„ä¸‰å¤§ç‰¹æ€§</strong></p><p>å¯è§æ€§ã€åŸå­æ€§ï¼ˆè¦ä¹ˆå…¨éƒ¨æ‰§è¡Œä¸”ä¸ä¼šè¢«æ‰“ä¹±è¦ä¹ˆå…¨éƒ¨ä¸æ‰§è¡Œï¼‰ã€æœ‰åºæ€§</p><h3 id="PCç«¯"><a href="#PCç«¯" class="headerlink" title="PCç«¯"></a>PCç«¯</h3><p>æµè§ˆå™¨å¤šæ ·åŒ–ï¼Œéœ€è¦è€ƒè™‘å…¼å®¹æ€§çš„é—®é¢˜ï¼Œä¼ ç»Ÿæ–¹å¼å¸ƒå±€æ¯”è¾ƒç¹æ‚</p><h3 id="ç§»åŠ¨ç«¯"><a href="#ç§»åŠ¨ç«¯" class="headerlink" title="ç§»åŠ¨ç«¯"></a>ç§»åŠ¨ç«¯</h3><p>ç§»åŠ¨ç«¯æµè§ˆå™¨å¤§éƒ¨åˆ†å†…æ ¸ä¸º<a href="https://so.csdn.net/so/search?q=webkit&spm=1001.2101.3001.7020">webkit</a>ï¼Œä¸éœ€è¦è€ƒè™‘å…¼å®¹æ€§çš„é—®é¢˜ï¼Œä¸”ç§»åŠ¨ç«¯å¯ä»¥æ”¾å¿ƒä½¿ç”¨flexå¼¹æ€§å¸ƒå±€</p><p>ç§»åŠ¨ç«¯æŠ€æœ¯è§£å†³æ–¹æ¡ˆ</p><p>ç§»åŠ¨ç«¯æµè§ˆå™¨<br>ç§»åŠ¨ç«¯æµè§ˆå™¨åŸºæœ¬ä»¥webkitå†…æ ¸ä¸ºä¸»,å› æ­¤æˆ‘ä»¬å°±è€ƒè™‘webkitå…¼å®¹æ€§é—®é¢˜<br>æˆ‘ä»¬å¯ä»¥æ”¾å¿ƒä½¿ç”¨H5æ ‡ç­¾å’Œcss3æ ·å¼<br>åŒæ—¶æˆ‘ä»¬æµè§ˆå™¨çš„ç§æœ‰å‰ç¼€æˆ‘ä»¬åªéœ€è¦è€ƒè™‘æ·»åŠ webkitå³å¯</p><p>cssåˆå§‹åŒ– normalize.css<br>ç§»åŠ¨ç«¯cssåˆå§‹åŒ–æ¨èä½¿ç”¨normalize.css<br>å¥½å¤„<br>ä¿æŠ¤äº†æœ‰ä»·å€¼çš„é»˜è®¤å€¼<br>ä¿®å¤äº†æµè§ˆå™¨çš„bug<br>æ˜¯æ¨¡å—åŒ–çš„<br>æ‹¥æœ‰è¯¦ç»†çš„æ–‡æ¡£<br>ç½‘å€ : <a href="http://necolas.github.io/normalize.css/">http://necolas.github.io/normalize.css/</a></p><p>css3 ç›’å­æ¨¡å‹ box-sizing<br>box-sizing:border-box<br>paddingå’Œborderä¸ä¼šåœ¨æ’‘å¤§ç›’å­äº†<br>é»˜è®¤å€¼<br>box-sizing:content-box<br>paddingå’Œborderå’ŒåŸæ¥ä¸€æ ·ä¼šåœ¨æ’‘å¤§ç›’å­</p>]]></content>
    
    
    <categories>
      
      <category>å…«è‚¡é¢ç»</category>
      
    </categories>
    
    
    <tags>
      
      <tag>C++</tag>
      
      <tag>è®¡ç½‘</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>cppé¢ç»ï¼ˆæ‚ä¹±ç‰ˆï¼‰</title>
    <link href="/2024/05/09/cpp%E9%9D%A2%E7%BB%8F/"/>
    <url>/2024/05/09/cpp%E9%9D%A2%E7%BB%8F/</url>
    
    <content type="html"><![CDATA[<p><strong>ä»€ä¹ˆæ˜¯è™šå‡½æ•°ï¼Ÿ</strong><br>è¢« <a href="https://so.csdn.net/so/search?q=virtual&spm=1001.2101.3001.7020">virtual</a> å…³é”®å­—ä¿®é¥°çš„æˆå‘˜å‡½æ•°ç§°ä¸ºè™šå‡½æ•°ã€‚<br><a href="https://so.csdn.net/so/search?q=%E8%99%9A%E5%87%BD%E6%95%B0&spm=1001.2101.3001.7020">è™šå‡½æ•°</a>çš„ä½œç”¨æ˜¯å®ç°å¤šæ€æ€§ï¼Œå³é€šè¿‡åŸºç±»è®¿é—®æ´¾ç”Ÿç±»çš„å‡½æ•°ã€‚<br><strong>ä»€ä¹ˆæ˜¯çº¯è™šå‡½æ•°ï¼Ÿ</strong><br>åœ¨è™šå‡½æ•°åé¢æ·»åŠ  &#x3D;0 ï¼Œè™šå‡½æ•°å°±æˆä¸º<a href="https://so.csdn.net/so/search?q=%E7%BA%AF%E8%99%9A%E5%87%BD%E6%95%B0&spm=1001.2101.3001.7020">çº¯è™šå‡½æ•°</a>ï¼Œ<br>åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼ŒåŸºç±»ç”Ÿæˆå¯¹è±¡å¾ˆä¸åˆç†ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¼•å…¥äº†çº¯è™šå‡½æ•°çš„æ¦‚å¿µï¼Œå°†å‡½æ•°å®šä¹‰ä¸ºçº¯è™šå‡½æ•°ï¼Œæ´¾ç”Ÿç±»ä¸­å¿…é¡»é‡å†™å®ç°çº¯è™šå‡½æ•°ã€‚å¯¹äºå®ç°äº†çº¯è™šå‡½æ•°çš„å­ç±»ï¼Œè¯¥çº¯è™šå‡½æ•°åœ¨å­ç±»ä¸­å°±å˜æˆäº†è™šå‡½æ•°ã€‚</p><h5 id="auto-ptrèƒ½ä½œä¸ºvectorçš„å…ƒç´ å—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ"><a href="#auto-ptrèƒ½ä½œä¸ºvectorçš„å…ƒç´ å—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ" class="headerlink" title="auto_ptrèƒ½ä½œä¸ºvectorçš„å…ƒç´ å—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ"></a>auto_ptrèƒ½ä½œä¸ºvectorçš„å…ƒç´ å—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</h5><p>ç­”ï¼šä¸å¯ä»¥ã€‚<br>å½“å¤åˆ¶ä¸€ä¸ªauto_ptræ—¶ï¼Œå®ƒæ‰€æŒ‡å‘çš„å¯¹è±¡çš„æ‰€æœ‰æƒè¢«äº¤åˆ°å¤åˆ¶çš„auto_pträ¸Šé¢ï¼Œè€Œå®ƒè‡ªèº«å°†è¢«è®¾ç½®ä¸ºnullã€‚å¤åˆ¶ä¸€ä¸ªauto_ptræ„å‘³ç€æ”¹å˜å®ƒçš„å€¼ã€‚</p><p><strong>æ­»é”çš„å››ä¸ªå¿…è¦æ¡ä»¶</strong></p><p>1ã€ äº’æ–¥æ¡ä»¶ï¼šè¿›ç¨‹è¦æ±‚å¯¹æ‰€åˆ†é…çš„èµ„æºï¼ˆå¦‚æ‰“å°æœºï¼‰è¿›è¡Œæ’ä»–æ€§æ§åˆ¶ï¼Œå³åœ¨ä¸€æ®µæ—¶é—´å†…æŸèµ„æºä»…ä¸ºä¸€ä¸ªè¿›ç¨‹æ‰€å æœ‰ã€‚æ­¤æ—¶è‹¥æœ‰å…¶ä»–è¿›ç¨‹è¯·æ±‚è¯¥èµ„æºï¼Œåˆ™è¯·æ±‚è¿›ç¨‹åªèƒ½ç­‰å¾…ã€‚</p><p>2ã€ä¸å¯å‰¥å¤ºæ¡ä»¶:è¿›ç¨‹æ‰€è·å¾—çš„èµ„æºåœ¨æœªä½¿ç”¨å®Œæ¯•ä¹‹å‰ï¼Œä¸èƒ½è¢«å…¶ä»–è¿›ç¨‹å¼ºè¡Œå¤ºèµ°ï¼Œå³åªèƒ½ç”±è·å¾—è¯¥èµ„æºçš„è¿›ç¨‹è‡ªå·±æ¥é‡Šæ”¾ï¼ˆåªèƒ½æ˜¯ä¸»åŠ¨é‡Šæ”¾)ã€‚</p><p>3ã€ è¯·æ±‚ä¸ä¿æŒæ¡ä»¶ï¼šè¿›ç¨‹å·²ç»ä¿æŒäº†è‡³å°‘ä¸€ä¸ªèµ„æºï¼Œä½†åˆæå‡ºäº†æ–°çš„èµ„æºè¯·æ±‚ï¼Œè€Œè¯¥èµ„æºå·²è¢«å…¶ä»–è¿›ç¨‹å æœ‰ï¼Œæ­¤æ—¶è¯·æ±‚è¿›ç¨‹è¢«é˜»å¡ï¼Œä½†å¯¹è‡ªå·±å·²è·å¾—çš„èµ„æºä¿æŒä¸æ”¾ã€‚</p><p>4ã€å¾ªç¯ç­‰å¾…æ¡ä»¶ï¼šå­˜åœ¨ä¸€ç§è¿›ç¨‹èµ„æºçš„å¾ªç¯ç­‰å¾…é“¾ï¼Œé“¾ä¸­æ¯ä¸€ä¸ªè¿›ç¨‹å·²è·å¾—çš„èµ„æºåŒæ—¶è¢«é“¾ä¸­ä¸‹ä¸€ä¸ªè¿›ç¨‹æ‰€è¯·æ±‚ã€‚</p><pre><code class="hljs">é¢„é˜²ï¼šé€šè¿‡è®¾ç½®æŸäº›é™åˆ¶æ¡ä»¶ï¼Œä»¥ç ´åäº§ç”Ÿæ­»é”çš„æ¡ä»¶ï¼Œæ¥é˜²æ­¢å‘ç”Ÿæ­»é”ã€‚é¿å…ï¼šç³»ç»Ÿåœ¨åˆ†é…èµ„æºæ—¶æ ¹æ®èµ„æºçš„ä½¿ç”¨æƒ…å†µæå‰ä½œå‡ºé¢„æµ‹ï¼Œä»è€Œé¿å…æ­»é”çš„å‘ç”Ÿã€‚æ£€æµ‹ï¼šå…è®¸ç³»ç»Ÿåœ¨è¿è¡Œçš„è¿‡ç¨‹ä¸­äº§ç”Ÿæ­»é”ï¼Œä½†æ˜¯ï¼Œç³»ç»Ÿä¸­æœ‰ç›¸åº”çš„ç®¡ç†æ¨¡å—å¯ä»¥åŠæ—¶æ£€æµ‹å‡ºå·²ç»äº§ç”Ÿçš„æ­»é”ï¼Œå¹¶ä¸”ç²¾ç¡®åœ°ç¡®å®šä¸æ­»é”æœ‰å…³çš„è¿›ç¨‹å’Œèµ„æºï¼Œç„¶åé‡‡å–é€‚å½“æªæ–½ï¼Œæ¸…é™¤ç³»ç»Ÿä¸­å·²ç»äº§ç”Ÿçš„æ­»é”ã€‚è§£é™¤ï¼šä¸æ£€æµ‹æ­»é”ç›¸é…å¥—çš„ä¸€ç§æªæ–½ï¼Œç”¨äºå°†è¿›ç¨‹ä»æ­»é”çŠ¶æ€ä¸‹è§£è„±å‡ºæ¥ã€‚</code></pre><p><strong>è¿›ç¨‹è°ƒåº¦</strong></p><p>åœ¨å¤šé“ç¨‹åºç³»ç»Ÿä¸­ï¼Œè¿›ç¨‹çš„æ•°é‡å¾€å¾€å¤šäºå¤„ç†æœºçš„ä¸ªæ•°ï¼Œå› æ­¤è¿›ç¨‹äº‰ç”¨å¤„ç†æœºçš„æƒ…å†µåœ¨æ‰€éš¾å…ã€‚å¤„ç†æœºè°ƒåº¦æ˜¯å¯¹å¤„ç†æœºè¿›è¡Œåˆ†é…ï¼Œå³ä»å°±ç»ªé˜Ÿåˆ—ä¸­æŒ‰ç…§ä¸€å®šçš„ç®—æ³•ï¼ˆå…¬å¹³ã€é«˜æ•ˆï¼‰é€‰æ‹©ä¸€ä¸ªè¿›ç¨‹å¹¶å°†å¤„ç†æœºåˆ†é…ç»™å®ƒè¿è¡Œï¼Œä»¥å®ç°è¿›ç¨‹å¹¶å‘æ‰§è¡Œã€‚</p><p>å…ˆæ¥å…ˆæœåŠ¡ï¼ˆFCFSï¼‰è°ƒåº¦ç®—æ³•ã€çŸ­ä½œä¸šä¼˜å…ˆï¼ˆSJFï¼‰è°ƒåº¦ç®—æ³•ã€ä¼˜å…ˆçº§è°ƒåº¦ç®—æ³•ã€é«˜å“åº”æ¯”ä¼˜å…ˆè°ƒåº¦ç®—æ³•</p><p><strong>è¿›ç¨‹ä¸çº¿ç¨‹çš„åŒºåˆ«</strong></p><p>æœ¬è´¨åŒºåˆ«ï¼šè¿›ç¨‹æ˜¯æ“ä½œç³»ç»Ÿèµ„æºåˆ†é…çš„åŸºæœ¬å•ä½ï¼Œè€Œçº¿ç¨‹æ˜¯å¤„ç†å™¨ä»»åŠ¡è°ƒåº¦å’Œæ‰§è¡Œçš„åŸºæœ¬å•ä½ã€‚</p><p>åŒ…å«å…³ç³»ï¼šä¸€ä¸ªè¿›ç¨‹è‡³å°‘æœ‰ä¸€ä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹æ˜¯è¿›ç¨‹çš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥çº¿ç¨‹ä¹Ÿè¢«ç§°ä¸ºè½»æƒè¿›ç¨‹æˆ–è€…è½»é‡çº§è¿›ç¨‹ã€‚</p><p>èµ„æºå¼€é”€ï¼šæ¯ä¸ªè¿›ç¨‹éƒ½æœ‰ç‹¬ç«‹çš„åœ°å€ç©ºé—´ï¼Œè¿›ç¨‹ä¹‹é—´çš„åˆ‡æ¢ä¼šæœ‰è¾ƒå¤§çš„å¼€é”€ï¼›çº¿ç¨‹å¯ä»¥çœ‹åšè½»é‡çº§çš„è¿›ç¨‹ï¼ŒåŒä¸€ä¸ªè¿›ç¨‹å†…çš„çº¿ç¨‹å…±äº«è¿›ç¨‹çš„åœ°å€ç©ºé—´ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„è¿è¡Œæ ˆå’Œç¨‹åºè®¡æ•°å™¨ï¼Œçº¿ç¨‹ä¹‹é—´åˆ‡æ¢çš„å¼€é”€å°ã€‚</p><p>å½±å“å…³ç³»ï¼šä¸€ä¸ªè¿›ç¨‹å´©æºƒåï¼Œåœ¨ä¿æŠ¤æ¨¡å¼ä¸‹å…¶ä»–è¿›ç¨‹ä¸ä¼šè¢«å½±å“ï¼Œä½†æ˜¯ä¸€ä¸ªçº¿ç¨‹å´©æºƒå¯èƒ½å¯¼è‡´æ•´ä¸ªè¿›ç¨‹è¢«æ“ä½œç³»ç»Ÿæ€æ‰ï¼Œæ‰€ä»¥å¤šè¿›ç¨‹è¦æ¯”å¤šçº¿ç¨‹å¥å£®ã€‚</p><p><strong>ä¸€ä¸ªåŸºæœ¬çš„äº‹å®å‰æ</strong>ï¼š<strong>ä¸€ä¸ªCPUåœ¨ä¸€ä¸ªç¬é—´åªèƒ½å¤„ç†ä¸€ä¸ªä»»åŠ¡</strong>ã€‚</p><p>å¹¶å‘ï¼ˆConcurrentï¼‰ï¼šåœ¨æ“ä½œç³»ç»Ÿä¸­ï¼Œæ˜¯æŒ‡ä¸€ä¸ªæ—¶é—´æ®µä¸­æœ‰å‡ ä¸ªç¨‹åºéƒ½å¤„äºå·²å¯åŠ¨è¿è¡Œåˆ°è¿è¡Œå®Œæ¯•ä¹‹é—´ï¼Œä¸”è¿™å‡ ä¸ªç¨‹åºéƒ½æ˜¯åœ¨åŒä¸€ä¸ªå¤„ç†æœºä¸Šè¿è¡Œã€‚<br>åŒä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€æ¡æŒ‡ä»¤æ‰§è¡Œï¼Œä½†å¤šä¸ªè¿›ç¨‹æŒ‡ä»¤è¢«å¿«é€Ÿçš„è½®æ¢æ‰§è¡Œï¼Œä½¿å¾—åœ¨å®è§‚ä¸Šå…·æœ‰å¤šä¸ªè¿›ç¨‹åŒæ—¶æ‰§è¡Œçš„æ•ˆæœï¼Œä½†åœ¨å¾®è§‚ä¸Šå¹¶ä¸æ˜¯åŒæ—¶æ‰§è¡Œçš„ï¼Œåªæ˜¯æŠŠæ—¶é—´åˆ†æˆè‹¥å¹²æ®µï¼Œä½¿å¤šä¸ªè¿›ç¨‹å¿«é€Ÿäº¤æ›¿çš„æ‰§è¡Œã€‚</p><p>å¹¶è¡Œï¼ˆParallelï¼‰ï¼šå½“ç³»ç»Ÿæœ‰ä¸€ä¸ªä»¥ä¸ŠCPUæ—¶ï¼Œå½“ä¸€ä¸ªCPUæ‰§è¡Œä¸€ä¸ªè¿›ç¨‹æ—¶ï¼Œå¦ä¸€ä¸ªCPUå¯ä»¥æ‰§è¡Œå¦ä¸€ä¸ªè¿›ç¨‹ï¼Œä¸¤ä¸ªè¿›ç¨‹äº’ä¸æŠ¢å CPUèµ„æºï¼Œå¯ä»¥åŒæ—¶è¿›è¡Œï¼Œè¿™ç§æ–¹å¼æˆ‘ä»¬ç§°ä¹‹ä¸ºå¹¶è¡Œ(Parallel)ã€‚å…¶å®å†³å®šå¹¶è¡Œçš„å› ç´ ä¸æ˜¯CPUçš„æ•°é‡ï¼Œè€Œæ˜¯CPUçš„æ ¸å¿ƒæ•°é‡ï¼Œæ¯”å¦‚ä¸€ä¸ªCPUå¤šä¸ªæ ¸ä¹Ÿå¯ä»¥å¹¶è¡Œã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240509203458598.png" alt="image-20240509203458598"></p><p><strong>å“ˆå¸Œå†²çª</strong></p><p>å½“ä¸¤ä¸ªä¸åŒçš„æ•°ç»è¿‡å“ˆå¸Œå‡½æ•°è®¡ç®—åå¾—åˆ°äº†åŒä¸€ä¸ªç»“æœï¼Œå³ä»–ä»¬ä¼šè¢«æ˜ å°„åˆ°å“ˆå¸Œè¡¨çš„åŒä¸€ä¸ªä½ç½®æ—¶ï¼Œå³ç§°ä¸ºå‘ç”Ÿäº†å“ˆå¸Œå†²çªã€‚ç®€å•æ¥è¯´å°±æ˜¯å“ˆå¸Œå‡½æ•°ç®—å‡ºæ¥çš„åœ°å€è¢«åˆ«çš„å…ƒç´ å ç”¨äº†ã€‚</p><h6 id="å¼€æ”¾å®šå€æ³•ï¼šæˆ‘ä»¬åœ¨é‡åˆ°å“ˆå¸Œå†²çªæ—¶ï¼Œå»å¯»æ‰¾ä¸€ä¸ªæ–°çš„ç©ºé—²çš„å“ˆå¸Œåœ°å€ã€‚ï¼ˆé“¾åœ°å€æ³•ã€å…¬å…±æº¢å‡ºåŒºæ³•ï¼‰"><a href="#å¼€æ”¾å®šå€æ³•ï¼šæˆ‘ä»¬åœ¨é‡åˆ°å“ˆå¸Œå†²çªæ—¶ï¼Œå»å¯»æ‰¾ä¸€ä¸ªæ–°çš„ç©ºé—²çš„å“ˆå¸Œåœ°å€ã€‚ï¼ˆé“¾åœ°å€æ³•ã€å…¬å…±æº¢å‡ºåŒºæ³•ï¼‰" class="headerlink" title="å¼€æ”¾å®šå€æ³•ï¼šæˆ‘ä»¬åœ¨é‡åˆ°å“ˆå¸Œå†²çªæ—¶ï¼Œå»å¯»æ‰¾ä¸€ä¸ªæ–°çš„ç©ºé—²çš„å“ˆå¸Œåœ°å€ã€‚ï¼ˆé“¾åœ°å€æ³•ã€å…¬å…±æº¢å‡ºåŒºæ³•ï¼‰"></a><strong>å¼€æ”¾å®šå€æ³•ï¼šæˆ‘ä»¬åœ¨é‡åˆ°å“ˆå¸Œå†²çªæ—¶ï¼Œå»å¯»æ‰¾ä¸€ä¸ªæ–°çš„ç©ºé—²çš„å“ˆå¸Œåœ°å€ã€‚</strong>ï¼ˆé“¾åœ°å€æ³•ã€å…¬å…±æº¢å‡ºåŒºæ³•ï¼‰</h6><p>æ•°æ®åº“ç´¢å¼•<br><strong>å †æ ˆçš„åŒºåˆ«</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs cpp">ä¸€ä¸ªç”±c/C++ç¼–è¯‘çš„ç¨‹åºå ç”¨çš„å†…å­˜åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ† <br>  <span class="hljs-number">1</span>ã€æ ˆåŒºï¼ˆstackï¼‰â€•   ç”±ç¼–è¯‘å™¨è‡ªåŠ¨åˆ†é…é‡Šæ”¾ã€‚ç”¨æ¥å­˜å‚¨å‡½æ•°è°ƒç”¨æ—¶çš„ä¸´æ—¶ä¿¡æ¯çš„ç»“æ„ï¼Œå­˜æ”¾ä¸ºè¿è¡Œæ—¶å‡½æ•°åˆ†é…çš„å±€éƒ¨å˜é‡ã€å‡½æ•°å‚æ•°ã€è¿”å›æ•°æ®ã€è¿”å›åœ°å€ç­‰ã€‚ <br>  <span class="hljs-number">2</span>ã€å †åŒºï¼ˆheapï¼‰ â€•   ä¸€èˆ¬ç”±ç¨‹åºå‘˜åˆ†é…é‡Šæ”¾ï¼Œ è‹¥ç¨‹åºå‘˜ä¸é‡Šæ”¾ï¼Œç¨‹åºç»“æŸæ—¶å¯èƒ½ç”±OSå›æ”¶ ã€‚<br>     æ³¨æ„å®ƒä¸æ•°æ®ç»“æ„ä¸­çš„å †æ˜¯ä¸¤å›äº‹ï¼Œåˆ†é…æ–¹å¼å€’æ˜¯ç±»ä¼¼äºé“¾è¡¨ï¼Œå‘µå‘µã€‚ <br>  <span class="hljs-number">3</span>ã€å…¨å±€åŒºï¼ˆé™æ€åŒºï¼‰ï¼ˆ<span class="hljs-type">static</span>ï¼‰â€•ï¼Œå…¨å±€å˜é‡å’Œé™æ€å˜é‡çš„å­˜å‚¨æ˜¯æ”¾åœ¨ä¸€å—çš„ï¼Œ<br>     åˆå§‹åŒ–çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡åœ¨ä¸€å—åŒºåŸŸï¼Œ æœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡å’Œæœªåˆå§‹åŒ–çš„é™æ€å˜é‡åœ¨ç›¸é‚»çš„å¦ä¸€å—åŒºåŸŸã€‚ - ç¨‹åºç»“æŸåæœ‰ç³»ç»Ÿé‡Šæ”¾ <br>  <span class="hljs-number">4</span>ã€æ–‡å­—å¸¸é‡åŒº  â€•å¸¸é‡å­—ç¬¦ä¸²å°±æ˜¯æ”¾åœ¨è¿™é‡Œçš„ã€‚ ç¨‹åºç»“æŸåç”±ç³»ç»Ÿé‡Šæ”¾ <br>  <span class="hljs-number">5</span>ã€ç¨‹åºä»£ç åŒºâ€•å­˜æ”¾å‡½æ•°ä½“çš„äºŒè¿›åˆ¶ä»£ç ã€‚<br></code></pre></td></tr></table></figure><p><strong>æ ˆå’Œé˜Ÿåˆ—çš„åŒºåˆ«ã€æ•°ç»„å’Œé“¾è¡¨æœ‰ä»€ä¹ˆåŒºåˆ«</strong></p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240509163720074.png" alt="image-20240509163720074"></p><p>cè¯­è¨€ä¸­å¸¸ç”¨çš„æ•°æ®ç»“æ„<br><strong>ä¸¤ä¸ªå †æ€ä¹ˆå®ç°ä¸€ä¸ªé˜Ÿåˆ—</strong><br>äºŒå‰æ ‘çš„å‰ä¸­ååºéå†è¾“å‡ºç»“æœ</p><ul><li><p>HashMapåŸç†ï¼Œä¸ºä»€ä¹ˆæ¯æ¬¡æ‰©å®¹éƒ½æ˜¯2çš„å€æ•°ï¼Œä¸ºä»€ä¹ˆç”±å¤´æ’æ”¹æˆäº†å°¾æ’ï¼Œç¯åŒ–æ˜¯æ€ä¹ˆå¼•èµ·çš„</p></li><li><p>å¿«æ’å’Œå †æ’çš„åŸç†</p><p>å½“é¢è¯•å®˜è¯¢é—® C++ ç›¸å…³çš„å¸¸è§å…«è‚¡çŸ¥è¯†æ—¶ï¼Œä»–ä»¬å¯èƒ½ä¼šæ·±å…¥ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p><ol><li><p><strong>C++ çš„ç‰¹æ€§å’Œä¼˜åŠ¿</strong>ï¼š</p><ul><li>C++ æ˜¯ä¸€ç§é€šç”¨ç¼–ç¨‹è¯­è¨€ï¼Œç»§æ‰¿äº† C è¯­è¨€çš„åŠŸèƒ½å¹¶åŠ å…¥äº†é¢å‘å¯¹è±¡ç¼–ç¨‹çš„ç‰¹æ€§ã€‚</li><li>C++ å…·æœ‰é«˜æ•ˆæ€§ã€çµæ´»æ€§å’Œå¯ç§»æ¤æ€§ç­‰ä¼˜åŠ¿ï¼Œå¯ä»¥ç›´æ¥æ“ä½œç¡¬ä»¶å¹¶å®ç°é«˜æ€§èƒ½çš„åº”ç”¨ç¨‹åºã€‚</li></ul></li><li><p><strong>ç±»ä¸å¯¹è±¡</strong>ï¼š</p><ul><li>ç±»æ˜¯ç”¨æˆ·è‡ªå®šä¹‰çš„æ•°æ®ç±»å‹ï¼Œç”¨äºæè¿°å…·æœ‰ç›¸åŒå±æ€§å’Œè¡Œä¸ºçš„å¯¹è±¡çš„é›†åˆã€‚</li><li>å¯¹è±¡æ˜¯ç±»çš„ä¸€ä¸ªå®ä¾‹ï¼Œå…·æœ‰ç±»å®šä¹‰çš„å±æ€§å’Œè¡Œä¸ºã€‚</li><li>æ„é€ å‡½æ•°ç”¨äºåˆå§‹åŒ–å¯¹è±¡çš„çŠ¶æ€ï¼Œææ„å‡½æ•°ç”¨äºæ¸…ç†å¯¹è±¡æ‰€å ç”¨çš„èµ„æºã€‚</li></ul></li><li><p><strong>ç»§æ‰¿ä¸å¤šæ€</strong>ï¼š</p><ul><li>ç»§æ‰¿æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ä¸€ç§æœºåˆ¶ï¼Œå…è®¸ä¸€ä¸ªç±»ç»§æ‰¿å¦ä¸€ä¸ªç±»çš„å±æ€§å’Œè¡Œä¸ºã€‚</li><li>å¤šæ€æ€§å…è®¸ä¸åŒå¯¹è±¡å¯¹åŒä¸€æ¶ˆæ¯åšå‡ºä¸åŒçš„å“åº”ï¼Œæé«˜äº†ä»£ç çš„çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ã€‚</li><li>è™šå‡½æ•°æ˜¯åœ¨åŸºç±»ä¸­å£°æ˜çš„å¸¦æœ‰ virtual å…³é”®å­—çš„å‡½æ•°ï¼Œæ´¾ç”Ÿç±»å¯ä»¥é‡å†™è¿™äº›å‡½æ•°ä»¥å®ç°å¤šæ€ã€‚</li></ul></li><li><p><strong>æ¨¡æ¿ä¸æ³›å‹ç¼–ç¨‹</strong>ï¼š</p><ul><li>æ¨¡æ¿æ˜¯ä¸€ç§é€šç”¨çš„ä»£ç ç»“æ„ï¼Œå¯ä»¥ç”¨äºç”Ÿæˆç‰¹å®šæ•°æ®ç±»å‹çš„å‡½æ•°æˆ–ç±»ã€‚</li><li>æ¨¡æ¿çš„ç‰¹åŒ–å’Œåç‰¹åŒ–å…è®¸é’ˆå¯¹ç‰¹å®šç±»å‹æä¾›å®šåˆ¶çš„å®ç°ã€‚</li><li>æ³›å‹ç¼–ç¨‹æ˜¯ä¸€ç§ç¼–ç¨‹èŒƒå¼ï¼Œæ—¨åœ¨ç¼–å†™ä¸ç‰¹å®šæ•°æ®ç±»å‹æ— å…³çš„ä»£ç ã€‚</li></ul></li><li><p><strong>å¼‚å¸¸å¤„ç†</strong>ï¼š</p><ul><li>å¼‚å¸¸æ˜¯ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿçš„æ„å¤–äº‹ä»¶ã€‚</li><li>å¼‚å¸¸å¤„ç†æ˜¯ä¸€ç§æœºåˆ¶ï¼Œç”¨äºåœ¨ç¨‹åºä¸­æ£€æµ‹ã€æŠ¥å‘Šå’Œå¤„ç†å¼‚å¸¸ã€‚</li><li>C++ ä¸­çš„å¼‚å¸¸å¤„ç†å…³é”®å­—åŒ…æ‹¬ tryã€catch å’Œ throwã€‚</li></ul></li><li><p><strong>å†…å­˜ç®¡ç†</strong>ï¼š</p><ul><li>æ ˆæ˜¯ä¸€ç§è‡ªåŠ¨åˆ†é…å’Œé‡Šæ”¾å†…å­˜çš„æ•°æ®ç»“æ„ï¼Œç”¨äºå­˜å‚¨å‡½æ•°è°ƒç”¨ã€å±€éƒ¨å˜é‡ç­‰ã€‚</li><li>å †æ˜¯ä¸€ç§åŠ¨æ€åˆ†é…å’Œé‡Šæ”¾å†…å­˜çš„æ•°æ®ç»“æ„ï¼Œç”¨äºå­˜å‚¨ç¨‹åºè¿è¡Œæ—¶åŠ¨æ€åˆ›å»ºçš„å¯¹è±¡ã€‚</li></ul></li><li><p><strong>STLï¼ˆæ ‡å‡†æ¨¡æ¿åº“ï¼‰</strong>ï¼š</p><ul><li>STL æä¾›äº†ä¸°å¯Œçš„æ•°æ®ç»“æ„å’Œç®—æ³•ï¼ŒåŒ…æ‹¬å‘é‡ã€é“¾è¡¨ã€æ˜ å°„ã€é›†åˆç­‰å®¹å™¨ä»¥åŠæ’åºã€æœç´¢ã€è¿­ä»£ç­‰ç®—æ³•ã€‚</li><li>è¿­ä»£å™¨æ˜¯ä¸€ç§æŠ½è±¡çš„æ•°æ®è®¿é—®æ¥å£ï¼Œç”¨äºéå†å®¹å™¨ä¸­çš„å…ƒç´ ã€‚</li></ul></li><li><p><strong>å¹¶å‘ç¼–ç¨‹</strong>ï¼š</p><ul><li>C++11 å¼•å…¥äº†ä¸€å¥—æ–°çš„å¹¶å‘ç¼–ç¨‹åº“ï¼ŒåŒ…æ‹¬çº¿ç¨‹ã€åŸå­æ“ä½œã€äº’æ–¥é‡ã€æ¡ä»¶å˜é‡ç­‰ã€‚</li><li>çº¿ç¨‹åŒæ­¥çš„æœºåˆ¶åŒ…æ‹¬äº’æ–¥é‡ã€æ¡ä»¶å˜é‡å’ŒåŸå­æ“ä½œï¼Œç”¨äºç¡®ä¿å¤šä¸ªçº¿ç¨‹ä¹‹é—´çš„æ•°æ®ä¸€è‡´æ€§å’ŒåŒæ­¥æ‰§è¡Œã€‚</li></ul></li></ol><p>ä»¥ä¸Šæ˜¯å¯¹å¸¸è§ C++ å…«è‚¡çŸ¥è¯†çš„è¯¦ç»†è§£ç­”ï¼Œä½ å¯ä»¥æ ¹æ®è‡ªå·±çš„ç†è§£å’Œç»éªŒè¿›ä¸€æ­¥æ‰©å±•å’Œå®Œå–„ã€‚</p></li><li><p><strong>é‡è½½é‡å†™éšè—</strong></p><p>ä¸€ã€é‡è½½</p><ul><li>ç›¸åŒçš„ä½œç”¨åŸŸå†…</li><li>å‚æ•°åˆ—è¡¨ä¸åŒï¼ˆå‚æ•°çš„ç±»å‹ï¼Œä¸ªæ•°ï¼Œé¡ºåºä¸åŒï¼‰</li><li>å‡½æ•°åå­—ç›¸åŒï¼›å‡½æ•°è¿”å›ç±»å‹ç›¸åŒ</li></ul><p>äºŒã€é‡å†™</p><ul><li>ä¸åœ¨åŒä¸€ä¸ªä½œç”¨åŸŸï¼ˆåˆ†åˆ«ä½äº<a href="https://so.csdn.net/so/search?q=%E6%B4%BE%E7%94%9F%E7%B1%BB&spm=1001.2101.3001.7020">æ´¾ç”Ÿç±»</a>ä¸åŸºç±»ï¼‰ ï¼›</li><li>åŸºç±»å‡½æ•°å¿…é¡»æœ‰ <strong>virtual</strong> å…³é”®å­—ï¼Œä¸èƒ½æœ‰ static ã€‚</li><li>å‡½æ•°åå­—ç›¸åŒï¼›å‚æ•°ç›¸åŒï¼›è¿”å›å€¼ç›¸åŒ</li><li>å‡½æ•°ä½“ä¸åŒ</li></ul><p>ä¸‰ã€éšè—</p><p>â€‹ä¸åœ¨åŒä¸€ä¸ªä½œç”¨åŸŸï¼ˆåˆ†åˆ«ä½äºæ´¾ç”Ÿç±»ä¸åŸºç±»ï¼‰ ï¼›</p><p>â€‹å‡½æ•°åå­—ç›¸åŒï¼›</p><p>â€‹å‚æ•°ã€è¿”å›å€¼ã€å‡½æ•°ä½“éƒ½å¯ä»¥ä¸åŒï¼›</p></li><li><p><strong>ä»€ä¹ˆå‡½æ•°å¯ä»¥&#x2F;ä¸å¯ä»¥å£°æ˜ä¸ºè™šå‡½æ•°</strong></p></li></ul><p>â€‹<a href="https://so.csdn.net/so/search?q=%E6%9E%90%E6%9E%84%E5%87%BD%E6%95%B0&spm=1001.2101.3001.7020">ææ„å‡½æ•°</a> æ™®é€šçš„æˆå‘˜å‡½æ•°</p><p>â€‹æ™®é€šå‡½æ•°ï¼ˆéæˆå‘˜å‡½æ•°ï¼‰ã€æ„é€ å‡½æ•°ã€å†…è”å‡½æ•°ã€é™æ€å‡½æ•°ã€å‹å…ƒå‡½æ•°ã€‚</p><ul><li><p><strong>vectorå’Œlistçš„ä½¿ç”¨åœºæ™¯</strong></p><p>vectoré€‚ç”¨ï¼šå¯¹è±¡æ•°é‡å˜åŒ–å°‘ï¼Œç®€å•å¯¹è±¡ï¼Œéšæœºè®¿é—®å…ƒç´ é¢‘ç¹<br>listé€‚ç”¨ï¼šå¯¹è±¡æ•°é‡å˜åŒ–å¤§ï¼Œå¯¹è±¡å¤æ‚ï¼Œæ’å…¥å’Œåˆ é™¤é¢‘ç¹<br>æœ€å¤§çš„åŒºåˆ«æ˜¯,listæ˜¯åŒå‘çš„ï¼Œè€Œvectoræ˜¯å•å‘çš„ã€‚<br>å› æ­¤åœ¨å®é™…ä½¿ç”¨æ—¶ï¼Œå¦‚ä½•é€‰æ‹©è¿™ä¸‰ä¸ªå®¹å™¨ä¸­å“ªä¸€ä¸ªï¼Œåº”æ ¹æ®ä½ çš„éœ€è¦è€Œå®šï¼Œä¸€èˆ¬åº”éµå¾ªä¸‹é¢çš„åŸåˆ™ï¼š<br>1ï¼‰ã€å¦‚æœä½ éœ€è¦é«˜æ•ˆçš„éšå³å­˜å–ï¼Œè€Œä¸åœ¨ä¹æ’å…¥å’Œåˆ é™¤çš„æ•ˆç‡ï¼Œä½¿ç”¨vector<br>2)ã€å¦‚æœä½ éœ€è¦å¤§é‡çš„æ’å…¥å’Œåˆ é™¤ï¼Œè€Œä¸å…³å¿ƒéšå³å­˜å–ï¼Œåˆ™åº”ä½¿ç”¨list<br>3)ã€å¦‚æœä½ éœ€è¦éšå³å­˜å–ï¼Œè€Œä¸”å…³å¿ƒä¸¤ç«¯æ•°æ®çš„æ’å…¥å’Œåˆ é™¤ï¼Œåˆ™åº”ä½¿ç”¨dequeã€‚</p></li><li><p><strong>stacké€‚é…å™¨çš„åº•å±‚å®¹å™¨æ˜¯ä»€ä¹ˆï¼Œèƒ½ä¸èƒ½ç”¨vectorï¼Œä¸ºä»€ä¹ˆ</strong></p></li></ul><p>1 stack å †æ ˆé€‚é…å™¨ ï¼ˆ å¯ç”¨çš„å®¹å™¨ç±»å‹ vector deque listï¼‰é»˜è®¤æ˜¯deque<br>2 queue é˜Ÿåˆ—é€‚é…å™¨ ( å¯ç”¨çš„å®¹å™¨ç±»å‹ deque list)é»˜è®¤çš„å®¹å™¨æ˜¯deque<br>3 priority_queue ä¼˜å…ˆçº§é˜Ÿåˆ— (å¯ç”¨çš„å®¹å™¨ç±»å‹ deque vector)é»˜è®¤æ˜¯vector|<br>                        åº•å±‚å®¹å™¨å¿…é¡»æ”¯æŒéšæœºè®¿é—®è¿­ä»£å™¨ï¼Œå› æ­¤åº•å±‚å®¹å™¨å¯ä»¥æ˜¯dequeï¼Œä¸èƒ½æ˜¯list</p><ul><li><strong>ä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦ä½¿ç”¨å¤šç»§æ‰¿</strong></li></ul><p>ä¸€ä¸ªå­ç±»æ‹¥æœ‰å¾ˆå¤šçˆ¶ç±» ,ä¸€èˆ¬æŒ‡ä¸€ä¸ªç±»æœ‰2ä¸ªä»¥ä¸Šçˆ¶ç±»ã€‚</p><ul><li>STLä¸­çš„å¤šç»§æ‰¿</li><li><strong>è™šç»§æ‰¿åŸç†</strong></li></ul><p>æ‰€è°“è™šç»§æ‰¿ï¼ˆvirtualï¼‰å°±æ˜¯å­ç±»ä¸­åªæœ‰ä¸€ä»½é—´æ¥çˆ¶ç±»çš„æ•°æ®ã€‚è¯¥æŠ€æœ¯ç”¨äºè§£å†³<a href="https://so.csdn.net/so/search?q=%E5%A4%9A%E7%BB%A7%E6%89%BF&spm=1001.2101.3001.7020">å¤šç»§æ‰¿</a>ä¸­çš„çˆ¶ç±»ä¸ºéè™šåŸºç±»æ—¶å‡ºç°çš„æ•°æ®å†—ä½™é—®é¢˜ï¼Œå³è±å½¢ç»§æ‰¿é—®é¢˜ã€‚</p><p>åœ¨ä¸Šå›¾ä¸­ï¼Œçˆ¶ç±»æ•°æ®å¹¶ä¸å­˜æ”¾åœ¨è™šç»§æ‰¿çš„å­ç±»ä¸­ï¼Œé‚£ä¹ˆå­ç±»æ€ä¹ˆæ‰¾åˆ°çˆ¶ç±»æ•°æ®å‘¢ï¼Ÿ</p><p>â€”â€”åœ¨è™šç»§æ‰¿çš„ç±»ä¸­ï¼Œä¼šå®šä¹‰ä¸€ä¸ª<strong>è™šåŸºè¡¨æŒ‡é’ˆvbptr</strong>ï¼Œ<strong>æŒ‡å‘è™šåŸºè¡¨</strong>ã€‚(è™šè¡¨åœ¨<strong>æ„é€ å‡½æ•°ä¹‹å‰</strong>å†™å…¥)</p><p>è€Œè™š<strong>åŸºè¡¨ä¸­ä¼šå­˜åœ¨åç§»é‡ï¼Œè¿™ä¸ªé‡å°±æ˜¯è¡¨çš„åœ°å€åˆ°çˆ¶ç±»æ•°æ®åœ°å€çš„è·ç¦»</strong>ã€‚</p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒè¯•ï¼Œæ‰¾åˆ°è™šåŸºè¡¨æŒ‡é’ˆå’Œè™šåŸºè¡¨ï¼š</p><ul><li><strong>å³å€¼å¼•ç”¨å’Œç§»åŠ¨è¯­ä¹‰</strong></li></ul><p>å¯ä»¥è¢«å–åœ°å€çš„ã€æœ‰åå­—çš„éƒ½æ˜¯å·¦å€¼ï¼Œåä¹‹ä¸èƒ½å–åœ°å€çš„ã€æ²¡æœ‰åå­—çš„å°±æ˜¯å³å€¼ã€‚</p><p>å³å€¼ï¼š<a href="https://so.csdn.net/so/search?q=%E5%AD%97%E9%9D%A2%E5%B8%B8%E9%87%8F&spm=1001.2101.3001.7020">å­—é¢å¸¸é‡</a>ï¼Œè¡¨è¾¾å¼ï¼Œå‡½æ•°çš„éå¼•ç”¨è¿”å›å€¼ï¼Œåœ¨è¡¨è¾¾å¼æ±‚å€¼è¿‡ç¨‹ä¸­ä¸´æ—¶åˆ›å»ºçš„å¯¹è±¡ï¼Œè¿™äº›ä½¿ç”¨è¿‡åå°±è¢«é”€æ¯çš„èµ„æº</p><p>åœ¨ç°æœ‰çš„ C++ æœºåˆ¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰æ‹·è´æ„é€ å‡½æ•°å’Œèµ‹å€¼å‡½æ•°ã€‚è¦å®ç°è½¬ç§»è¯­ä¹‰ï¼Œéœ€è¦å®šä¹‰è½¬ç§»æ„é€ å‡½æ•°ï¼Œè¿˜å¯ä»¥å®šä¹‰è½¬ç§»èµ‹å€¼æ“ä½œç¬¦ã€‚å¦‚æœè½¬ç§»æ„é€ å‡½æ•°å’Œè½¬ç§»æ‹·è´æ“ä½œç¬¦æ²¡æœ‰å®šä¹‰ï¼Œé‚£ä¹ˆå°±éµå¾ªç°æœ‰çš„æœºåˆ¶ï¼Œæ‹·è´æ„é€ å‡½æ•°å’Œèµ‹å€¼æ“ä½œç¬¦ä¼šè¢«è°ƒç”¨ã€‚æ™®é€šçš„å‡½æ•°å’Œæ“ä½œç¬¦ä¹Ÿå¯ä»¥åˆ©ç”¨å³å€¼å¼•ç”¨æ“ä½œç¬¦å®ç°è½¬ç§»è¯­ä¹‰ã€‚</p><ul><li><strong>C++å†…å­˜ç®¡ç†æ–¹å¼</strong></li></ul><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240509170056071.png" alt="image-20240509170056071"></p><p>ä¸€ã€è‡ªåŠ¨å­˜å‚¨</p><p>åœ¨å‡½æ•°å†…éƒ¨å®šä¹‰çš„å¸¸è§„å˜é‡ä½¿ç”¨è‡ªåŠ¨å­˜å‚¨ç©ºé—´ï¼Œè¢«ç§°ä¸º<strong>è‡ªåŠ¨å˜é‡</strong>ï¼ˆautomatic variableï¼‰ï¼Œè¿™æ„å‘³ç€å®ƒä»¬åœ¨æ‰€å±çš„å‡½æ•°è¢«è°ƒç”¨æ—¶è‡ªåŠ¨äº§ç”Ÿï¼Œåœ¨è¯¥å‡½æ•°ç»“æŸæ—¶æ¶ˆäº¡ã€‚<strong>è‡ªåŠ¨å˜é‡é€šå¸¸å­˜å‚¨åœ¨æ ˆä¸­</strong>ã€‚è¿™æ„å‘³ç€æ‰§è¡Œä»£ç å—æ—¶ï¼Œå…¶ä¸­çš„å˜é‡å°†ä¾æ¬¡åŠ å…¥åˆ°æ ˆä¸­ï¼Œè€Œåœ¨ç¦»å¼€ä»£ç å—æ—¶ï¼Œå°†æŒ‰ç›¸åçš„é¡ºåºé‡Šæ”¾ç€äº›å˜é‡ï¼Œç€è¢«ç§°ä¸º<a href="https://so.csdn.net/so/search?q=%E5%90%8E%E8%BF%9B%E5%85%88%E5%87%BA&spm=1001.2101.3001.7020">åè¿›å…ˆå‡º</a>ï¼ˆLIFOï¼‰ã€‚å› æ­¤ï¼Œåœ¨ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæ ˆå°†ä¸æ–­åœ°å¢å¤§å’Œç¼©å°ã€‚</p><p>äºŒã€é™æ€å­˜å‚¨</p><p>é™æ€å­˜å‚¨æ˜¯æ•´ä¸ªç¨‹åºæ‰§è¡ŒæœŸé—´éƒ½å­˜åœ¨çš„å­˜å‚¨æ–¹å¼ã€‚ä½¿å˜é‡ç§°ä¸ºé™æ€çš„æ–¹å¼æœ‰ä¸¤ç§ï¼šä¸€ç§æ˜¯åœ¨å‡½æ•°å¤–é¢å®šä¹‰å®ƒï¼›å¦ä¸€ç§æ˜¯åœ¨å£°æ˜å˜é‡æ—¶ä½¿ç”¨å…³é”®å­—static</p><p>ä¸‰ã€åŠ¨æ€å­˜å‚¨<br>newå’Œdeleteè¿ç®—ç¬¦æä¾›äº†ä¸€ç§æ¯”è‡ªåŠ¨å˜é‡å’Œé™æ€å˜é‡æ›´çµæ´»çš„æ–¹æ³•ã€‚å®ƒä»¬ç®¡ç†äº†ä¸€ä¸ªå†…å­˜æ± ï¼Œè¿™åœ¨C++ä¸­è¢«ç§°ä¸ºè‡ªç”±å­˜å‚¨ç©ºé—´ï¼ˆfree storeï¼‰æˆ–å †ï¼ˆheapï¼‰ã€‚è¯¥å†…å­˜æ± åŒç”¨äºé™æ€å˜é‡å’Œè‡ªåŠ¨å˜é‡çš„å†…å­˜æ˜¯åˆ†å¼€çš„ã€‚newå’Œdeleteè®©æ‚¨èƒ½å¤Ÿåœ¨ä¸€ä¸ªå‡½æ•°ä¸­åˆ†é…å†…å­˜ï¼Œè€Œåœ¨å¦ä¸€ä¸ªå‡½æ•°ä¸­é‡Šæ”¾å®ƒã€‚å› æ­¤ï¼Œæ•°æ®çš„å£°æ˜å‘¨æœŸä¸å®Œå…¨å—ç¨‹åºæˆ–å‡½æ•°çš„ç”Ÿå‘½æ—¶é—´æ§åˆ¶ã€‚ä¸ä½¿ç”¨å¸¸è§„å˜é‡ç›¸æ¯”ï¼Œä½¿ç”¨newå’Œdeleteè®©ç¨‹åºå‘˜å¯¹ç¨‹åºå¦‚ä½•ä½¿ç”¨å†…å­˜æœ‰æ›´å¤§çš„æ§åˆ¶æƒã€‚ç„¶è€Œï¼Œå†…å­˜ç®¡ç†ä¹Ÿæ›´å¤æ‚äº†ã€‚åœ¨æ ˆä¸­ï¼Œè‡ªåŠ¨æ·»åŠ å’Œåˆ é™¤æœºåˆ¶ä½¿å¾—å ç”¨çš„å†…å­˜æ€»æ˜¯è¿ç»­çš„ï¼Œå•newå’Œdeleteçš„ç›¸äº’å½±å“å¯èƒ½å¯¼è‡´å ç”¨çš„è‡ªç”±å­˜å‚¨åŒºä¸è¿ç»­ï¼Œè¿™ä½¿å¾—è·Ÿè¸ªæ–°åˆ†é…å†…å­˜çš„ä½ç½®æ›´å›°éš¾ã€‚</p><p>å››ã€çº¿ç¨‹å­˜å‚¨</p><ul><li>shared ptrçš„å…·ä½“å®ç°ï¼ˆé—®çš„å¾ˆç»†</li></ul><p><strong>æ ˆã€å †ã€å†…å­˜æ³„æ¼</strong><br>å¦‚æœä½¿ç”¨newåœ¨è‡ªç”±å­˜å‚¨ç©ºé—´ï¼ˆæˆ–å †ï¼‰ä¸Šåˆ›å»ºå˜é‡åï¼Œæ²¡æœ‰è°ƒç”¨deleteã€‚ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</p><p>å³ä½¿åŒ…å«æŒ‡é’ˆçš„å†…å­˜ï¼ˆç”±äºä½œç”¨åŸŸè§„åˆ™å’Œå¯¹è±¡ç”Ÿå‘½å‘¨æœŸçš„åŸå› è€Œï¼‰è¢«é‡Šæ”¾ï¼Œåœ¨è‡ªç”±å­˜å‚¨ç©ºé—´ä¸ŠåŠ¨æ€åˆ†é…çš„å˜é‡æˆ–ç»“æ„ä¾ç„¶å­˜åœ¨ã€‚</p><p>åˆ™å°†ä¼šæ— æ³•è®¿é—®è‡ªç”±å­˜å‚¨ç©ºé—´çš„ç»“æ„ï¼Œå› ä¸ºæŒ‡å‘è¿™äº›å†…å­˜çš„æŒ‡é’ˆæ— æ•ˆã€‚</p><p>è¿™å°†å¯¼è‡´<strong>å†…å­˜æ³„éœ²</strong>ï¼Œè¢«æ³„æ¼çš„å†…å­˜åœ¨ç¨‹åºçš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå°†ä¸å¯ä½¿ç”¨ï¼Œè¿™äº›å†…å­˜è¢«åˆ†é…ï¼Œä½†æ— æ³•è¢«ä½¿ç”¨ã€‚</p><p><strong>å¼•ç”¨å’ŒæŒ‡é’ˆçš„åŒºåˆ«</strong></p><p>\1. æŒ‡é’ˆæ˜¯ä¸€ä¸ªå˜é‡ï¼Œåªä¸è¿‡è¿™ä¸ªå˜é‡å­˜å‚¨çš„æ˜¯ä¸€ä¸ªåœ°å€ï¼ŒæŒ‡å‘å†…å­˜çš„ä¸€ä¸ªå­˜å‚¨å•å…ƒï¼›è€Œå¼•ç”¨ä»…æ˜¯ä¸ªåˆ«åï¼›</p><p>\2. å¼•ç”¨ä½¿ç”¨æ—¶æ— éœ€è§£å¼•ç”¨(*)ï¼ŒæŒ‡é’ˆéœ€è¦è§£å¼•ç”¨ï¼›</p><p>\3. å¼•ç”¨åªèƒ½åœ¨å®šä¹‰æ—¶è¢«åˆå§‹åŒ–ä¸€æ¬¡ï¼Œä¹‹åä¸å¯å˜ï¼›æŒ‡é’ˆå¯å˜ï¼›</p><p>\4. å¼•ç”¨æ²¡æœ‰ constï¼ŒæŒ‡é’ˆæœ‰ constï¼›</p><p>\5. å¼•ç”¨ä¸èƒ½ä¸ºç©ºï¼ŒæŒ‡é’ˆå¯ä»¥ä¸ºç©ºï¼›</p><p>\6. â€œsizeof å¼•ç”¨â€å¾—åˆ°çš„æ˜¯æ‰€æŒ‡å‘çš„å˜é‡(å¯¹è±¡)çš„å¤§å°ï¼Œè€Œâ€œsizeof æŒ‡é’ˆâ€å¾—åˆ°çš„æ˜¯æŒ‡é’ˆæœ¬èº«çš„å¤§å°ï¼›</p><p>\7. æŒ‡é’ˆå’Œå¼•ç”¨çš„è‡ªå¢(++)è¿ç®—æ„ä¹‰ä¸ä¸€æ ·ï¼›</p><p>\8. æŒ‡é’ˆå¯ä»¥æœ‰å¤šçº§ï¼Œä½†æ˜¯å¼•ç”¨åªèƒ½æ˜¯ä¸€çº§ï¼ˆint **pï¼›åˆæ³• è€Œ int &amp;&amp;aæ˜¯ä¸åˆæ³•çš„ï¼‰</p><p>9.ä»å†…å­˜åˆ†é…ä¸Šçœ‹ï¼šç¨‹åºä¸ºæŒ‡é’ˆå˜é‡åˆ†é…å†…å­˜åŒºåŸŸï¼Œè€Œå¼•ç”¨ä¸éœ€è¦åˆ†é…å†…å­˜åŒºåŸŸã€‚</p><p><strong>tcpæ»‘åŠ¨çª—å£</strong></p><p>æ»‘åŠ¨çª—å£æœºåˆ¶æ˜¯TCPåè®®ä¸­å®ç°æµé‡æ§åˆ¶å’Œå¯é ä¼ è¾“çš„å…³é”®æŠ€æœ¯ã€‚å®ƒçš„ä¸»è¦å·¥ä½œåŸç†å¦‚ä¸‹ï¼š</p><ol><li>å‘é€æ–¹ç»´æŠ¤ä¸€ä¸ªå‘é€çª—å£ï¼Œè¿™æ˜¯ä¸€ä¸ªè¿ç»­çš„å­—èŠ‚åºåˆ—ï¼Œè¡¨ç¤ºå‘é€æ–¹å¯ä»¥å‘é€çš„å­—èŠ‚æ•°èŒƒå›´ã€‚å‘é€çª—å£ç”±ä¸¤ä¸ªå‚æ•°å®šä¹‰ï¼šçª—å£çš„èµ·å§‹å­—èŠ‚å’Œçª—å£çš„å¤§å°ã€‚å‘é€æ–¹å°†æ•°æ®åˆ†æˆå¤šä¸ªæ•°æ®æ®µï¼Œå¹¶æŒ‰é¡ºåºå‘é€åˆ°æ¥æ”¶æ–¹ã€‚</li><li>æ¥æ”¶æ–¹ä½¿ç”¨ç¡®è®¤å·æ¥é€šçŸ¥å‘é€æ–¹å·²æˆåŠŸæ¥æ”¶åˆ°çš„æ•°æ®ã€‚ç¡®è®¤å·è¡¨ç¤ºæ¥æ”¶æ–¹æœŸæœ›æ¥æ”¶çš„ä¸‹ä¸€ä¸ªå­—èŠ‚çš„åºåˆ—å·ã€‚åŒæ—¶ï¼Œæ¥æ”¶æ–¹è¿˜ä¼šé€šå‘Šä¸€ä¸ªçª—å£å¤§å°ï¼Œå‘Šè¯‰å‘é€æ–¹è‡ªå·±çš„æ¥æ”¶ç¼“å†²åŒºè¿˜èƒ½å®¹çº³å¤šå°‘å­—èŠ‚çš„æ•°æ®ã€‚</li><li>å‘é€æ–¹æ ¹æ®æ¥æ”¶æ–¹é€šå‘Šçš„çª—å£å¤§å°è¿›è¡Œæ•°æ®å‘é€æ§åˆ¶ã€‚å¦‚æœæ¥æ”¶æ–¹çš„çª—å£å˜å¤§ï¼Œå‘é€æ–¹å¯ä»¥å‘é€æ›´å¤šçš„æ•°æ®ï¼›å¦‚æœæ¥æ”¶æ–¹çš„çª—å£å˜å°ï¼Œå‘é€æ–¹éœ€è¦é€‚åº”å‡å°‘çš„çª—å£å¤§å°ã€‚è¿™æ ·ï¼Œå‘é€æ–¹å¯ä»¥æŒç»­å‘é€æ•°æ®è€Œä¸éœ€è¦ç­‰å¾…æ¯ä¸ªæ•°æ®æ®µçš„ç¡®è®¤ï¼Œä»è€Œæé«˜äº†ä¼ è¾“æ•ˆç‡ã€‚</li></ol><p>æ»‘åŠ¨çª—å£æœºåˆ¶åœ¨æ•°æ®ä¼ è¾“ä¸­èµ·åˆ°äº†æµé‡æ§åˆ¶å’Œå¯é æ€§ä¼ è¾“çš„é‡è¦ä½œç”¨ã€‚é€šè¿‡åŠ¨æ€è°ƒæ•´çª—å£å¤§å°ï¼Œæ¥æ”¶æ–¹å¯ä»¥æ§åˆ¶å‘é€æ–¹çš„æ•°æ®å‘é€é€Ÿç‡ï¼Œé¿å…ç½‘ç»œæ‹¥å¡å’Œæ•°æ®ä¸¢å¤±ã€‚åŒæ—¶ï¼Œæ»‘åŠ¨çª—å£æœºåˆ¶è¿˜ç¡®ä¿äº†æ•°æ®çš„é¡ºåºä¼ è¾“å’Œå¯é æ¥æ”¶ï¼Œä¸ºTCPåè®®æä¾›äº†å¯é çš„ä¼ è¾“æœåŠ¡ã€‚</p><p><strong>äºŒåˆ†æŸ¥æ‰¾çš„æ—¶é—´å¤æ‚åº¦ã€äºŒåˆ†æŸ¥æ‰¾çš„å…·ä½“æ“ä½œ</strong></p><p>O(logn)</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">while</span> (L &lt; R)&#123;                      <span class="hljs-comment">//ä¸€ç›´äºŒåˆ†ï¼Œç›´åˆ°åŒºé—´[L,R]ç¼©å°åˆ°L=R</span><br>    <span class="hljs-type">int</span> mid = (L + R) / <span class="hljs-number">2</span>;          <span class="hljs-comment">//midæ˜¯Lã€Rçš„ä¸­é—´å€¼</span><br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">check</span>(mid))  R = mid;       <span class="hljs-comment">//ç­”æ¡ˆåœ¨å·¦åŠéƒ¨åˆ†[L,mid]ï¼Œæ›´æ–°R=mid</span><br>    <span class="hljs-keyword">else</span>             L = mid + <span class="hljs-number">1</span>;   <span class="hljs-comment">//ç­”æ¡ˆåœ¨å³åŠéƒ¨åˆ†[mid+1, R]ï¼Œæ›´æ–°L=mid+1</span><br>&#125;<br><br></code></pre></td></tr></table></figure><p><strong>11.nä¸ªæ•°ä¸­æ‰¾å‡ºæœ€å°çš„kä¸ªæ•°</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">GetLeastNumbers_Solution</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt; input, <span class="hljs-type">int</span> k)</span> </span>&#123;<br>        vector&lt;<span class="hljs-type">int</span>&gt; ret;<br>        <span class="hljs-keyword">if</span>(k == <span class="hljs-number">0</span> || input.<span class="hljs-built_in">size</span>() &lt; k)<br>            <span class="hljs-keyword">return</span> ret;<br>        priority_queue&lt;<span class="hljs-type">int</span>,vector&lt;<span class="hljs-type">int</span>&gt; &gt; pq;(å¤§æ ¹å †)<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>; i&lt; input.<span class="hljs-built_in">size</span>(); i++)&#123;<br>            <span class="hljs-keyword">if</span>(pq.<span class="hljs-built_in">size</span>() &lt; k)<br>                pq.<span class="hljs-built_in">push</span>(input[i]);<br>            <span class="hljs-keyword">else</span>&#123;<br>                <span class="hljs-keyword">if</span>(input[i] &lt; pq.<span class="hljs-built_in">top</span>())&#123;<br>                    pq.<span class="hljs-built_in">pop</span>();<br>                    pq.<span class="hljs-built_in">push</span>(input[i]);<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">while</span>(!pq.<span class="hljs-built_in">empty</span>())&#123;<br>            ret.<span class="hljs-built_in">push_back</span>(pq.<span class="hljs-built_in">top</span>());<br>            pq.<span class="hljs-built_in">pop</span>();<br>        &#125;<br>        <span class="hljs-keyword">return</span> ret;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p>priority_queue&lt;int,vector<int>,greater<int> &gt;q;  (å°æ ¹å †)</p><p><strong>ä¸ºä»€ä¹ˆçˆ¶ç±»çš„ææ„å‡½æ•°ä¸ºä»€ä¹ˆä¸è°ƒç”¨å­ç±»çš„è™šå‡½æ•°</strong>ï¼ˆå› ä¸ºå­ç±»æ—©å°±è¢«ææ„äº†ï¼‰<br>IOå¤šè·¯å¤ç”¨select&#x2F;poll&#x2F;epoll<br>ä»€ä¹ˆæƒ…å†µä¸‹selectæ¯”epollå¥½</p><p><strong>å…¨å±€å˜é‡å’Œstaticå…¨å±€å˜é‡æœ‰å•¥ä¸åŒ</strong></p><p>1.ä¸¤è€…<a href="https://so.csdn.net/so/search?q=%E4%BD%9C%E7%94%A8%E5%9F%9F&spm=1001.2101.3001.7020">ä½œç”¨åŸŸ</a>ä¸åŒï¼Œå…¨å±€å˜é‡çš„ä½œç”¨åŸŸæ˜¯æ•´ä¸ªå·¥ç¨‹é¡¹ç›®ï¼Œé™æ€å…¨å±€å˜é‡ä½œç”¨åŸŸåªåœ¨å½“å‰æ–‡ä»¶</p><p>2.å…¨å±€å˜é‡åœ¨å…¶ä»–æ–‡ä»¶å¼•ç”¨æ—¶ï¼Œéœ€ä½¿ç”¨<a href="https://so.csdn.net/so/search?q=extern&spm=1001.2101.3001.7020">extern</a>å£°æ˜</p><p>3.å…¨å±€å˜é‡å’Œé™æ€å…¨å±€å˜é‡éƒ½å­˜å‚¨åœ¨é™æ€å­˜å‚¨åŒº</p><p>4.å…¨å±€å˜é‡å’Œé™æ€å…¨å±€å˜é‡éƒ½æ˜¯å®šä¹‰åœ¨å‡½æ•°å¤–æˆ–ç±»å¤–</p><p><strong>defineå’Œtype defineçš„ä¸åŒ</strong></p><p>1ã€ä½œç”¨åŸŸä¸åŒ<br>#defineæ²¡æœ‰ä½œç”¨åŸŸçš„é™åˆ¶ï¼Œåªè¦æ˜¯ä¹‹å‰é¢„å®šä¹‰è¿‡çš„å®ï¼Œåœ¨ä»¥åçš„ç¨‹åºä¸­éƒ½å¯ä»¥ä½¿ç”¨ã€‚<br>typedefæœ‰è‡ªå·±çš„ä½œç”¨åŸŸï¼Œåªèƒ½åœ¨ä½œç”¨åŸŸå†…ä½¿ç”¨ã€‚</p><p>2ã€å¯¹æŒ‡é’ˆçš„æ“ä½œä¸åŒ<br>ä¾‹å¦‚ï¼š</p><p>typedef    int*      INTp1 ;</p><p>#define    INTp2    int* ;<br>ä¸Šé¢ä¸¤ç§çœ‹ä¼¼æ•ˆæœä¸€æ ·ï¼Œå®åˆ™ä¸åŒï¼å…·ä½“åŒºåˆ«å¦‚ä¸‹ï¼š<br>INTp1 a,bç­‰åŒäºint *a; int *b;è¡¨ç¤ºå®šä¹‰äº†ä¸¤ä¸ªæ•´å‹æŒ‡é’ˆå˜é‡ã€‚<br>è€ŒINTp2 a,bç­‰åŒäºint *a, b; è¡¨ç¤ºå®šä¹‰äº†ä¸€ä¸ªæ•´å‹æŒ‡é’ˆå˜é‡aå’Œæ•´å‹å˜é‡bã€‚</p><p>3ã€ åŠŸèƒ½ä¸åŒ<br>#define è™½ç„¶åªæ˜¯ç®€å•çš„æ›¿æ¢ï¼Œä½†æ˜¯ä¹Ÿå¯ä¸ºä¸ºç±»å‹å–åˆ«åï¼Œè¿˜å¯ä»¥å®šä¹‰å¸¸é‡ã€å˜é‡å’Œç¼–è¯‘å¼€å…³ç­‰ï¼›<br>typedefå¯ç”¨æ¥å®šä¹‰ç±»å‹çš„åˆ«åï¼Œè¿™äº›ç±»å‹ä¸åªåŒ…å«å†…éƒ¨ç±»å‹ï¼ˆintï¼Œdoubleï¼Œlong long,charç­‰ï¼‰ï¼Œè¿˜åŒ…æ‹¬è‡ªå®šä¹‰ç±»å‹ï¼ˆå¦‚structï¼‰ï¼Œå¯ä»¥èµ·åˆ°ä½¿ç±»å‹æ˜“äºè®°å¿†çš„åŠŸèƒ½,å¢å¼ºç¨‹åºçš„å¯è¯»æ€§ã€‚</p><p>4ã€åŸç†ä¸åŒ<br>defineä¸åˆ†é…å†…å­˜ï¼Œç»™å‡ºçš„æ˜¯â½´å³æ•°ï¼Œæœ‰å¤šå°‘æ¬¡ä½¿â½¤å°±è¿›â¾å¤šå°‘æ¬¡æ›¿æ¢ã€‚</p><p>typedefåœ¨é™æ€å­˜å‚¨åŒºä¸­åˆ†é…ç©ºé—´ï¼Œåœ¨ç¨‹åºè¿â¾è¿‡ç¨‹ä¸­å†…å­˜ä¸­åªæœ‰â¼€ä¸ªæ‹·è´ã€‚</p><p><strong>äº’æ–¥é”</strong></p><p>äº’æ–¥é”ã€è‡ªæ—‹é”å’Œè¯»å†™é”ç”¨äºè§£å†³å¤šçº¿ç¨‹åŒæ­¥çš„é—®é¢˜</p><p>sizeofå’Œstrlençš„åŒºåˆ«</p><p>violateå…³é”®å­—</p><h5 id="14-setçš„ä½¿ç”¨åœºæ™¯ï¼Œmapä½¿ç”¨åœºæ™¯"><a href="#14-setçš„ä½¿ç”¨åœºæ™¯ï¼Œmapä½¿ç”¨åœºæ™¯" class="headerlink" title="14.setçš„ä½¿ç”¨åœºæ™¯ï¼Œmapä½¿ç”¨åœºæ™¯"></a>14.setçš„ä½¿ç”¨åœºæ™¯ï¼Œmapä½¿ç”¨åœºæ™¯</h5><p>setå¯ä»¥åšåˆ°æ•´æ•°æ•°ç»„çš„å»é‡ï¼Œä½†æ˜¯å¯¹è±¡å°±ä¸å¯ä»¥ã€‚<br>mapä¸­çš„é›†åˆï¼Œå…ƒç´ æˆå¯¹å­˜åœ¨ï¼Œæ¯ä¸ªå…ƒç´ ç”±é”®å’Œå€¼ä¸¤éƒ¨åˆ†ç»„æˆã€‚</p><p><strong>é—®2ï¼šCå’ŒC++çš„åŒºåˆ«ï¼Ÿ</strong></p><p>ç­”ï¼šc++åœ¨cçš„åŸºç¡€ä¸Šå¢æ·»ç±»ï¼ŒCæ˜¯ä¸€ä¸ªç»“æ„åŒ–è¯­è¨€ï¼Œå®ƒçš„é‡ç‚¹åœ¨äºç®—æ³•å’Œæ•°æ®ç»“æ„ã€‚Cç¨‹åºçš„è®¾è®¡é¦–è¦è€ƒè™‘çš„æ˜¯å¦‚ä½•é€šè¿‡ä¸€ä¸ªè¿‡ç¨‹ï¼Œå¯¹è¾“å…¥ï¼ˆæˆ–ç¯å¢ƒæ¡ä»¶ï¼‰è¿›è¡Œè¿ç®—å¤„ç†å¾—åˆ°è¾“å‡ºï¼ˆæˆ–å®ç°è¿‡ç¨‹ï¼ˆäº‹åŠ¡ï¼‰æ§åˆ¶ï¼‰ï¼Œè€Œå¯¹äºC++ï¼Œé¦–è¦è€ƒè™‘çš„æ˜¯å¦‚ä½•æ„é€ ä¸€ä¸ªå¯¹è±¡æ¨¡å‹ï¼Œè®©è¿™ä¸ªæ¨¡å‹èƒ½å¤Ÿå¥‘åˆä¸ä¹‹å¯¹åº”çš„é—®é¢˜åŸŸï¼Œè¿™æ ·å°±å¯ä»¥é€šè¿‡è·å–å¯¹è±¡çš„çŠ¶æ€ä¿¡æ¯å¾—åˆ°è¾“å‡ºæˆ–å®ç°è¿‡ç¨‹ï¼ˆäº‹åŠ¡ï¼‰æ§åˆ¶ã€‚</p><p>1.<br>   è¯­è¨€æœ¬èº«ï¼š</p><ol><li>C++æ˜¯é¢å‘å¯¹è±¡è¯­è¨€ï¼ŒCæ˜¯é¢å‘è¿‡ç¨‹è¯­è¨€ã€‚</li><li>ç»“æ„ï¼šCä»¥ç»“æ„ä½“structä¸ºæ ¸å¿ƒç»“æ„ï¼›C++ä»¥ç±»classä¸ºæ ¸å¿ƒç»“æ„ã€‚</li><li>å¤šæ€ï¼šCå¯ä»¥ä»¥å®å®šä¹‰çš„æ–¹å¼â€œè‡ªå®šä¹‰â€éƒ¨åˆ†åœ°æ”¯æŒå¤šæ€ï¼›C++è‡ªèº«æä¾›å¤šæ€ï¼Œå¹¶ä»¥æ¨¡æ¿templatesæ”¯æŒç¼–è¯‘æœŸå¤šæ€ï¼Œä»¥è™šå‡½æ•°virtual functionæ”¯æŒè¿è¡ŒæœŸå¤šæ€ã€‚</li><li>å¤´æ–‡ä»¶çš„è°ƒç”¨ï¼šC++ç”¨&lt; &gt;ä»£æ›¿â€ â€œä»£è¡¨ç³»ç»Ÿå¤´æ–‡ä»¶ï¼›ä¸”å¤ç”¨Cçš„å¤´æ–‡ä»¶æ—¶ï¼Œå»æ‰â€.hâ€åœ¨å¼€å¤´åŠ ä¸Šâ€Câ€ã€‚</li><li>è¾“å…¥è¾“å‡ºï¼šé‰´äºC++ä¸­ä»¥å¯¹è±¡ä½œä¸ºæ ¸å¿ƒï¼Œè¾“å…¥å’Œè¾“å‡ºéƒ½æ˜¯åœ¨æµå¯¹è±¡ä¸Šçš„æ“ä½œã€‚</li><li>å°è£…ï¼šCä¸­çš„å°è£…ç”±äºstructçš„ç‰¹æ€§å…¨éƒ¨ä¸ºå…¬æœ‰å°è£…ï¼ŒC++ä¸­çš„å°è£…ç”±äºclassçš„ç‰¹æ€§æ›´åŠ å®Œå–„ã€å®‰å…¨ã€‚</li><li>å¸¸è§é£æ ¼ï¼šCä¸­å¸¸ç”¨å®å®šä¹‰æ¥è¿›è¡Œæ–‡æœ¬æ›¿æ¢ï¼Œä¸å…·æœ‰ç±»å‹å®‰å…¨æ€§ï¼›C++ä¸­å¸¸å»ºè®®é‡‡ç”¨å¸¸é‡å®šä¹‰ï¼Œå…·æœ‰ç±»å‹å®‰å…¨æ€§ã€‚</li><li>æ•ˆç‡ï¼šå¸¸è§çš„è¯´æ³•æ˜¯åŒç­‰ç›®çš„Cé€šå¸¸æ¯”C++æ›´å¯Œæœ‰æ•ˆç‡(è¿™å…¶å®æœ‰ä¸€å®šçš„è¯¯è§£ï¼Œä¸»è¦åœ¨äºC++ä»£ç æ›´éš¾äºä¼˜åŒ–ä¸”å°‘æœ‰äººä½¿ç”¨ç¼–è¯‘æœŸæ±‚å€¼çš„ç‰¹æ€§)ã€‚</li><li>å¸¸ç”¨è¯­è¨€&#x2F;åº“ç‰¹æ€§ï¼š<ol><li>æ•°ç»„ï¼šCä¸­é‡‡ç”¨å†…å»ºæ•°ç»„ï¼ŒC++ä¸­å»ºè®®é‡‡ç”¨vectorã€‚ç›¸æ¯”ä¹‹ä¸‹vectorçš„å¤§å°å¯ä»¥åŠ¨æ€å¢é•¿ï¼Œä¸”ä½¿ç”¨ä¸€äº›æŠ€å·§åå¢é•¿å¹¶ä¸ä½æ•ˆï¼Œä¸”æˆå‘˜å‡½æ•°ä¸°å¯Œã€‚</li><li>å­—ç¬¦ä¸² Cä¸­é‡‡ç”¨Cé£æ ¼çš„string(å®åˆ™ä¸ºå­—ç¬¦ä¸²æ•°ç»„)ï¼ŒC++ä¸­å»ºè®®é‡‡ç”¨stringï¼Œå¯¹æ¯”ä¸ä¸Šä¸€æ¡ç±»ä¼¼ã€‚</li><li>å†…å­˜åˆ†é…ï¼šCä¸­ä½¿ç”¨mallocä¸freeï¼Œå®ƒä»¬æ˜¯æ˜¯Cæ ‡å‡†åº“å‡½æ•°ï¼ŒC++ä¸­å»ºè®®ä½¿ç”¨new&#x2F;deleteä»£æ›¿å‰è€…ï¼Œä»–ä»¬è¯´æ˜¯C++çš„è¿ç®—ç¬¦(è¿™æ˜¯ç¬”è¯•é¢è¯•å¸¸è€ƒç‚¹)ä»¥C++ä¸­çš„newä¸ºä¾‹ï¼Œnewå¯åˆ†ä¸ºoperator new(new æ“ä½œ)ã€new operator(new æ“ä½œç¬¦)å’Œplacement new(å®šä½ new)ã€‚å…¶ä¸­operator newæ‰§è¡Œå’Œmallocç›¸åŒçš„ä»»åŠ¡ï¼Œå³åˆ†é…å†…å­˜ï¼Œä½†å¯¹æ„é€ å‡½æ•°ä¸€æ— æ‰€çŸ¥ï¼›è€Œ new operatoråˆ™è°ƒç”¨operator newï¼Œåˆ†é…å†…å­˜åå†è°ƒç”¨å¯¹è±¡æ„é€ å‡½æ•°è¿›è¡Œå¯¹è±¡çš„æ„é€ ã€‚å…¶ä¸­operator newæ˜¯å¯ä»¥é‡è½½çš„ã€‚placement newï¼Œå°±æ˜¯operator newçš„ä¸€ä¸ªé‡è½½ç‰ˆæœ¬ï¼Œå…è®¸ä½ åœ¨ä¸€ä¸ªå·²ç»åˆ†é…å¥½çš„å†…å­˜ä¸­æ„é€ ä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚</li><li>æŒ‡é’ˆï¼šCä¸­é€šå¸¸ä½¿ç”¨çš„æ˜¯åŸç”ŸæŒ‡é’ˆ(raw pointer)ï¼Œç”±äºå¸¸å‡ºç°ç¨‹åºå‘˜åœ¨ç”³è¯·åå¿˜è®°é‡Šæ”¾é€ æˆèµ„æºæ³„æ¼çš„é—®é¢˜ï¼Œåœ¨C++98ä¸­åŠ å…¥äº†â€œç¬¬ä¸€ä»£â€åŸºäºå¼•ç”¨è®¡æ•°çš„æ™ºèƒ½æŒ‡é’ˆauto_ptrï¼Œç”±äºåˆä»£çš„å„ç§é—®é¢˜(ä¸»è¦æ˜¯æ— æ³•è§£å†³å¾ªç¯æŒ‡é’ˆ)ï¼Œåœ¨03æ ‡å‡†ä¹Ÿå°±æ˜¯TR1ä¸­å¼•å…¥äº†shared_ptr,weak_ptrå’Œunique_ptrè¿™ä¸‰ä¸ªåŠŸèƒ½å„å¼‚çš„æ™ºèƒ½æŒ‡é’ˆï¼Œå¹¶ä¸11æ ‡å‡†ä¸­æ­£å¼ç¡®å®šï¼Œè¾ƒå¥½çš„è§£å†³äº†ä¸Šè¿°é—®é¢˜ã€‚</li></ol></li><li>ä»…æœ‰C++æ‰æœ‰çš„å¸¸ç”¨ç‰¹æ€§ï¼š<ol><li>è¯­è¨€(èŒƒå¼)ç‰¹æ€§ï¼š<ol><li>é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼šC++ä¸­ä»¥å…³é”®å­—classå’Œå¤šæ€ç‰¹æ€§æ”¯æŒçš„ä¸€ç§ç¼–ç¨‹èŒƒå¼ï¼›</li><li>æ³›å‹ç¼–ç¨‹ï¼šC++ä¸­ä»¥å…³é”®å­—templateæ”¯æŒçš„ä¸€ç§ç¼–ç¨‹èŒƒå¼ï¼›</li><li>æ¨¡æ¿å…ƒç¼–ç¨‹ ï¼šC++ä¸­ä»¥æ¨¡æ¿ç‰¹åŒ–å’Œæ¨¡æ¿é€’å½’è°ƒç”¨æœºåˆ¶æ”¯æŒçš„ä¸€ç§ç¼–ç¨‹èŒƒå¼ã€‚</li><li>C++ä¸­ä»¥å¯¹è±¡å’Œç±»å‹ä½œä¸ºæ•´ä¸ªç¨‹åºçš„æ ¸å¿ƒï¼Œåœ¨å¯¹è±¡æ–¹é¢ï¼Œæ—¶åˆ»æ³¨æ„å¯¹è±¡åˆ›å»ºå’Œææ„çš„æˆæœ¬ï¼Œä¾‹å¦‚æœ‰ä¸€ä¸ªå¾ˆå¸¸ç”¨çš„(å…·å)è¿”å›å€¼ä¼˜åŒ–((N)RVO);<br>åœ¨ç±»å‹æ–¹é¢ï¼Œæœ‰è¿è¡Œæ—¶ç±»å‹ä¿¡æ¯(RTTI)ç­‰æŠ€æœ¯ä½œä¸ºC++ç±»å‹æŠ€æœ¯çš„æ”¯æ’‘ã€‚</li><li>å‡½æ•°é‡è½½ï¼šC++å…è®¸æ‹¥æœ‰ä¸åŒå˜é‡ä½†å…·æœ‰ç›¸åŒå‡½æ•°åçš„å‡½æ•°(å‡½æ•°é‡è½½çš„ç¼–è¯‘å™¨å®ç°æ–¹å¼ã€å‡½æ•°é‡è½½å’Œ(ä¸»)æ¨¡æ¿ç‰¹åŒ–çš„åŒºåˆ«éƒ½æ›¾è€ƒè¿‡)ã€‚</li><li>å¼‚å¸¸ï¼šä»¥catchã€throwã€tryç­‰å…³é”®å­—æ”¯æŒçš„ä¸€ç§æœºåˆ¶ã€‚</li><li>åå­—ç©ºé—´ï¼šnamespaceï¼Œå¯ä»¥é¿å…å’Œå‡å°‘å‘½åå†²çªä¸”è®©ä»£ç å…·æœ‰æ›´å¼ºçš„å¯è¯»æ€§ã€‚</li><li>è°“è¯ç”¨æ³•ï¼šé€šå¸¸ä»¥boolå‡½æ•°æˆ–ä»¿å‡½æ•°(functor)æˆ–lambdaå‡½æ•°çš„å½¢å¼ï¼Œå‡ºç°åœ¨STLçš„å¤§å¤šæ•°ç®—æ³•çš„ç¬¬ä¸‰ä¸ªå…ƒç´ ã€‚</li></ol></li><li>å¸¸è§å…³é”®å­—(æ“ä½œç¬¦)ç‰¹æ€§ï¼š<ol><li>autoï¼šåœ¨Cä¸­ï¼Œautoä»£è¡¨è‡ªåŠ¨ç±»å‹é€šå¸¸éƒ½å¯çœç•¥ï¼›è€Œåœ¨C++11æ–°æ ‡å‡†ä¸­ï¼Œåˆ™èµ·åˆ°ä¸€ç§â€œåŠ¨æ€ç±»å‹â€çš„ä½œç”¨â€”â€”é€šå¸¸åœ¨è‡ªåŠ¨ç±»å‹æ¨å¯¼å’Œdecltypeæ­é…ä½¿ç”¨ã€‚</li><li>ç©ºæŒ‡é’ˆï¼šåœ¨Cä¸­å¸¸ä»¥NULLä»£è¡¨ç©ºæŒ‡é’ˆï¼Œåœ¨C++ä¸­æ ¹æ®æ–°æ ‡å‡†ç”¨nullptræ¥ä»£è¡¨ç©ºæŒ‡é’ˆã€‚</li><li>&amp;: åœ¨Cä¸­ä»…ä»£è¡¨å–æŸä¸ªå·¦å€¼(lvalue)çš„åœ°å€ï¼Œåœ¨C++ä¸­è¿˜å¯ä»¥è¡¨ç¤ºå¼•ç”¨(åˆ«å)ã€‚</li><li>&amp;&amp;ï¼šåœ¨Cä¸­ä»…èƒ½è¡¨ç¤ºé€»è¾‘ä¸ï¼Œåœ¨C++ä¸­è¿˜å¯ä»¥è¡¨ç¤ºå³å€¼å¼•ç”¨ã€‚</li><li>[]ï¼šåœ¨Cä¸­ä»…èƒ½è¡¨ç¤ºä¸‹æ ‡æ“ä½œç¬¦ï¼Œåœ¨C++ä¸­è¿˜å¯ä»¥è¡¨ç¤ºlambdaå‡½æ•°çš„æ•æ‰åˆ—è¡¨ã€‚</li><li>{}ï¼šåœ¨Cä¸­ä»…èƒ½ç”¨äºæ•°ç»„çš„åˆå§‹åŒ–ï¼Œåœ¨C++ä¸­ç”±äºå¼•å…¥äº†åˆå§‹åŒ–åˆ—è¡¨(initializer_list)ï¼Œå¯ç”¨äºä»»ä½•ç±»å‹ã€å®¹å™¨ç­‰çš„åˆå§‹åŒ–ã€‚</li><li>å¸¸é‡å®šä¹‰ï¼šCä¸­å¸¸ä»¥defineæ¥å®šä¹‰å¸¸é‡ï¼ŒC++ä¸­ç”¨constæ¥å®šä¹‰è¿è¡ŒæœŸå¸¸é‡ï¼Œç”¨constexpræ¥å®šä¹‰ç¼–è¯‘å™¨å¸¸é‡ã€‚</li></ol></li><li>å¸¸ç”¨æ–°ç‰¹æ€§ï¼š<ol><li>å³å€¼å¼•ç”¨å’Œmoveè¯­ä¹‰(å¤ªå¤šå†…å®¹ï¼Œå»ºè®®è‡ªæŸ¥)ã€‚</li><li>åŸºäºèŒƒå›´çš„forå¾ªç¯(ä¸pythonä¸­çš„å†™æ³•ç±»ä¼¼ï¼Œå¸¸ç”¨äºå®¹å™¨)ã€‚</li><li>åŸºäºautoâ€”â€”decltypeçš„è‡ªåŠ¨ç±»å‹æ¨å¯¼ã€‚</li><li>lambdaå‡½æ•°(ä¸€ç§å±€éƒ¨ã€åŒ¿åå‡½æ•°ï¼Œé«˜æ•ˆæ–¹ä¾¿åœ°å‡ºç°åœ¨éœ€è¦å±€éƒ¨ã€åŒ¿åè¯­ä¹‰çš„åœ°æ–¹)ã€‚</li><li>æ ‡å‡†è§„èŒƒåçš„å¤šçº¿ç¨‹åº“ã€‚</li></ol></li></ol></li></ol><p><strong>é—®3ï¼šä»€ä¹ˆæ˜¯é¢å‘å¯¹è±¡ï¼ˆOOPï¼‰ï¼Ÿ</strong></p><p>ç­”ï¼šé¢å‘å¯¹è±¡æ˜¯ä¸€ç§å¯¹ç°å®ä¸–ç•Œç†è§£å’ŒæŠ½è±¡çš„æ–¹æ³•ã€æ€æƒ³ï¼Œé€šè¿‡å°†éœ€æ±‚è¦ç´ è½¬åŒ–ä¸ºå¯¹è±¡è¿›è¡Œé—®é¢˜å¤„ç†çš„ä¸€ç§æ€æƒ³ã€‚é¢å‘å¯¹è±¡å°±æ˜¯æŠŠç°å®é—®é¢˜æŠ½è±¡ä¸ºå¯¹è±¡ï¼Œé€šè¿‡è°ƒç”¨æ¯ä¸ªå¯¹è±¡çš„å±æ€§æˆ–åŠŸèƒ½å»è§£å†³é—®é¢˜ã€‚</p><p>å¯¹è±¡<br>å¯¹è±¡æ˜¯ç”±æ•°æ®ï¼ˆæè¿°äº‹ç‰©çš„å±æ€§ï¼‰å’Œä½œç”¨äºæ•°æ®çš„æ“ä½œï¼ˆä½“ç°äº‹ç‰©çš„è¡Œä¸ºï¼‰ç»„æˆçš„å°è£…ä½“ï¼Œæè¿°å®¢è§‚äº‹ç‰©çš„ä¸€ä¸ªå®ä½“ï¼Œæ˜¯æ„æˆç³»ç»Ÿçš„åŸºæœ¬å•å…ƒã€‚</p><p>ç±»<br>ç±»æ˜¯å¯¹ä¸€ç»„æœ‰ç›¸åŒæ•°æ®å’Œç›¸åŒæ“ä½œçš„å¯¹è±¡çš„å®šä¹‰ï¼Œæ˜¯å¯¹è±¡çš„æ¨¡æ¿ï¼Œå…¶åŒ…å«çš„æ–¹æ³•å’Œæ•°æ®æè¿°ä¸€ç»„å¯¹è±¡çš„å…±åŒè¡Œä¸ºå’Œå±æ€§ã€‚ç±»æ˜¯åœ¨å¯¹è±¡ä¹‹ä¸Šçš„æŠ½è±¡ï¼Œå¯¹è±¡åˆ™æ˜¯ç±»çš„å…·ä½“åŒ–ï¼Œæ˜¯ç±»çš„å®ä¾‹ã€‚ç±»å¯æœ‰å…¶å­ç±»ï¼Œä¹Ÿå¯æœ‰å…¶ä»–ç±»ï¼Œå½¢æˆç±»å±‚æ¬¡ç»“æ„ã€‚1ï¼‰ç±»æ˜¯å¯¹è±¡çš„æŠ½è±¡ï¼Œè€Œå¯¹è±¡æ˜¯ç±»çš„å…·ä½“å®ä¾‹ã€‚ç±»æ˜¯æŠ½è±¡çš„ï¼Œä¸å ç”¨å†…å­˜ï¼Œè€Œå¯¹è±¡æ˜¯å…·ä½“çš„ï¼Œå ç”¨å­˜å‚¨ç©ºé—´ã€‚</p><p>2ï¼‰ç±»æ˜¯ä¸€ç»„å…·æœ‰ç›¸åŒå±æ€§å’Œè¡Œä¸ºçš„å¯¹è±¡çš„æŠ½è±¡ã€‚æˆ‘ä»¬å¯ä»¥å°†ç±»çœ‹åšæ˜¯åˆ›å»ºå¯¹è±¡<strong>è“å›¾</strong>ï¼Œå¯¹è±¡æ ¹æ®è¿™ä¸ªè“å›¾å»å…·ä½“å®ç°æŸä¸ªä¸œè¥¿ã€‚</p><p><strong>é—®4ï¼šä»€ä¹ˆæ˜¯å¤šæ€ï¼Ÿ</strong></p><p>ç­”ï¼šå¤šæ€æ˜¯æŒ‡ç›¸åŒçš„æ“ä½œæˆ–å‡½æ•°ã€è¿‡ç¨‹å¯ä½œç”¨äºå¤šç§ç±»å‹çš„å¯¹è±¡ä¸Šå¹¶è·å¾—ä¸åŒçš„ç»“æœã€‚ä¸åŒçš„å¯¹è±¡ï¼Œæ”¶åˆ°åŒä¸€æ¶ˆæ¯å¯ä»¥äº§ç”Ÿä¸åŒçš„ç»“æœï¼Œè¿™ç§ç°è±¡ç§°ä¸ºå¤šæ€ã€‚</p><p><strong>é—®5ï¼šè®¾è®¡æ¨¡å¼æ‡‚å˜›ï¼Œç®€å•ä¸¾ä¸ªä¾‹å­ï¼Ÿ</strong></p><p>ç­”ï¼šè®¾è®¡æ¨¡å¼ï¼ˆDesign patternï¼‰æ˜¯ä¸€å¥—è¢«åå¤ä½¿ç”¨ã€å¤šæ•°äººçŸ¥æ™“çš„ã€ç»è¿‡åˆ†ç±»ç¼–ç›®çš„ã€ä»£ç è®¾è®¡ç»éªŒçš„æ€»ç»“ã€‚</p><p>æ¯”å¦‚å•ä¾‹æ¨¡å¼ï¼Œä¿è¯ä¸€ä¸ªç±»ä»…æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªè®¿é—®å®ƒçš„å…¨å±€è®¿é—®ç‚¹ã€‚å°†æ„é€ å‡½æ•°ã€ææ„å‡½æ•°ã€å¤åˆ¶æ„é€ å‡½æ•°ã€èµ‹å€¼æ“ä½œç¬¦å£°æ˜ä¸ºç§æœ‰ï¼Œå³å¯å®ç°å•ä¾‹æ¨¡å¼</p><p>é€‚ç”¨äºï¼šå½“ç±»åªèƒ½æœ‰ä¸€ä¸ªå®ä¾‹è€Œä¸”å®¢æˆ·å¯ä»¥ä»ä¸€ä¸ªä¼—æ‰€å‘¨çŸ¥çš„è®¿é—®ç‚¹è®¿é—®å®ƒæ—¶ï¼›å½“è¿™ä¸ªå”¯ä¸€å®ä¾‹åº”è¯¥æ˜¯é€šè¿‡å­ç±»åŒ–å¯æ‰©å±•çš„ï¼Œå¹¶ä¸”å®¢æˆ·åº”è¯¥æ— éœ€æ›´æ”¹ä»£ç å°±èƒ½ä½¿ç”¨ä¸€ä¸ªæ‰©å±•çš„å®ä¾‹æ—¶ã€‚</p><p>æ¯”å¦‚å·¥å‚æ¨¡å¼ï¼Œå®šä¹‰ä¸€ä¸ªç”¨äºåˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œè®©å­ç±»å†³å®šå®ä¾‹åŒ–å“ªä¸€ä¸ªç±»ã€‚Factory Method ä½¿ä¸€ä¸ªç±»çš„å®ä¾‹åŒ–å»¶è¿Ÿåˆ°å…¶å­ç±»ã€‚</p><p>é€‚ç”¨äºï¼šå½“ä¸€ä¸ªç±»ä¸çŸ¥é“å®ƒæ‰€å¿…é¡»åˆ›å»ºçš„å¯¹è±¡çš„ç±»çš„æ—¶å€™ï¼›å½“ä¸€ä¸ªç±»å¸Œæœ›ç”±å®ƒçš„å­ç±»æ¥æŒ‡å®šå®ƒæ‰€åˆ›å»ºçš„å¯¹è±¡çš„æ—¶å€™ï¼›å½“ç±»å°†åˆ›å»ºå¯¹è±¡çš„èŒè´£å§”æ‰˜ç»™å¤šä¸ªå¸®åŠ©å­ç±»ä¸­çš„æŸä¸€ä¸ªï¼Œå¹¶ä¸”ä½ å¸Œæœ›å°†å“ªä¸€ä¸ªå¸®åŠ©å­ç±»æ˜¯ä»£ç†è€…è¿™ä¸€ä¿¡æ¯å±€éƒ¨åŒ–çš„æ—¶å€™ã€‚</p><p><strong>é—®8ï¼šconstçŸ¥é“å—ï¼Ÿè§£é‡Šå…¶ä½œç”¨ã€‚</strong></p><p>ç­”ï¼š</p><p>1.const ä¿®é¥°ç±»çš„æˆå‘˜å˜é‡ï¼Œè¡¨ç¤ºæˆå‘˜å¸¸é‡ï¼Œä¸èƒ½è¢«ä¿®æ”¹ã€‚</p><p>2.constä¿®é¥°å‡½æ•°æ‰¿è¯ºåœ¨æœ¬å‡½æ•°å†…éƒ¨ä¸ä¼šä¿®æ”¹ç±»å†…çš„æ•°æ®æˆå‘˜ï¼Œä¸ä¼šè°ƒç”¨å…¶å®ƒé const æˆå‘˜å‡½æ•°ã€‚</p><p>3.å¦‚æœ const æ„æˆå‡½æ•°é‡è½½ï¼Œconst å¯¹è±¡åªèƒ½è°ƒç”¨ const å‡½æ•°ï¼Œé const å¯¹è±¡ä¼˜å…ˆè°ƒç”¨é const å‡½æ•°ã€‚</p><p>4.const å‡½æ•°åªèƒ½è°ƒç”¨ const å‡½æ•°ã€‚é const å‡½æ•°å¯ä»¥è°ƒç”¨ const å‡½æ•°ã€‚</p><p>5.ç±»ä½“å¤–å®šä¹‰çš„ const æˆå‘˜å‡½æ•°ï¼Œåœ¨å®šä¹‰å’Œå£°æ˜å¤„éƒ½éœ€è¦ const ä¿®é¥°ç¬¦ã€‚ã€‚</p><p><strong>é—®12ï¼šè§£é‡Šä¸‹å°è£…ã€ç»§æ‰¿å’Œå¤šæ€ï¼Ÿ</strong></p><p>ç­”ï¼š</p><p><strong>ä¸€ã€å°è£…ï¼š</strong></p><p>å°è£…æ˜¯å®ç°é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡çš„ç¬¬ä¸€æ­¥ï¼Œå°è£…å°±æ˜¯å°†æ•°æ®æˆ–å‡½æ•°ç­‰é›†åˆåœ¨ä¸€ä¸ªä¸ªçš„å•å…ƒä¸­ï¼ˆæˆ‘ä»¬ç§°ä¹‹ä¸ºç±»ï¼‰ã€‚å°è£…(encapsulation)å³ä¿¡æ¯éšè”½ã€‚å®ƒæ˜¯æŒ‡åœ¨ç¡®å®šç³»ç»Ÿçš„æŸä¸€éƒ¨åˆ†å†…å®¹æ—¶ï¼Œåº”è€ƒè™‘åˆ°å…¶å®ƒéƒ¨åˆ†çš„ä¿¡æ¯åŠè”ç³»éƒ½åœ¨è¿™ä¸€éƒ¨åˆ†çš„å†…éƒ¨è¿›è¡Œï¼Œå¤–éƒ¨å„éƒ¨åˆ†ä¹‹é—´çš„ä¿¡æ¯è”ç³»åº”å°½å¯èƒ½çš„å°‘ã€‚</p><p>å°è£…çš„æ„ä¹‰åœ¨äºä¿æŠ¤æˆ–è€…é˜²æ­¢ä»£ç ï¼ˆæ•°æ®ï¼‰è¢«æˆ‘ä»¬æ— æ„ä¸­ç ´åã€‚</p><ul><li>publicï¼šå¯¹å¤–å…¬å¼€ï¼Œè®¿é—®çº§åˆ«æœ€é«˜</li><li>protectedï¼šåªå¯¹åŒä¸€ä¸ªåŒ…ä¸­çš„ç±»æˆ–è€…å­ç±»å…¬å¼€</li><li>é»˜è®¤ï¼šåªå¯¹åŒä¸€ä¸ªåŒ…ä¸­çš„ç±»å…¬å¼€</li><li>privateï¼šä¸å¯¹å¤–å…¬å¼€ï¼Œåªèƒ½åœ¨å¯¹è±¡å†…éƒ¨è®¿é—®ï¼Œè®¿é—®çº§åˆ«æœ€ä½</li></ul><p><strong>äºŒã€ç»§æ‰¿ï¼š</strong></p><p>è®©æŸä¸ªç±»å‹çš„å¯¹è±¡è·å¾—å¦ä¸€ä¸ªç±»å‹çš„å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ã€‚ç»§æ‰¿å°±æ˜¯<a href="https://so.csdn.net/so/search?q=%E5%AD%90%E7%B1%BB%E7%BB%A7%E6%89%BF%E7%88%B6%E7%B1%BB&spm=1001.2101.3001.7020">å­ç±»ç»§æ‰¿çˆ¶ç±»</a>çš„ç‰¹å¾å’Œè¡Œä¸ºï¼Œä½¿å¾—å­ç±»å¯¹è±¡ï¼ˆå®ä¾‹ï¼‰å…·æœ‰çˆ¶ç±»çš„å®ä¾‹åŸŸå’Œæ–¹æ³•ï¼Œæˆ–å­ç±»ä»çˆ¶ç±»ç»§æ‰¿æ–¹æ³•ï¼Œä½¿å¾—å­ç±»å…·æœ‰çˆ¶ç±»ç›¸åŒçš„è¡Œä¸ºã€‚</p><p>ç»§æ‰¿ä¸»è¦å®ç°<strong>é‡ç”¨ä»£ç </strong>ï¼ŒèŠ‚çœå¼€å‘æ—¶é—´ã€‚</p><p>å­ç±»å¯ä»¥ç»§æ‰¿çˆ¶ç±»çš„ä¸€äº›ä¸œè¥¿ã€‚</p><p><strong>ä¸‰ã€å¤šæ€</strong></p><p>å¤šæ€ï¼šåŒä¸€æ“ä½œä½œç”¨äºä¸åŒçš„å¯¹è±¡ï¼Œå¯ä»¥æœ‰ä¸åŒçš„è§£é‡Šï¼Œäº§ç”Ÿä¸åŒçš„æ‰§è¡Œç»“æœã€‚åœ¨è¿è¡Œæ—¶ï¼Œå¯ä»¥é€šè¿‡æŒ‡å‘åŸºç±»çš„æŒ‡é’ˆï¼Œæ¥è°ƒç”¨å®ç°æ´¾ç”Ÿç±»ä¸­çš„æ–¹æ³•ã€‚å¤šæ€ï¼šå¯¹äºåŒä¸€ä¸ªè¡Œä¸ºï¼Œä¸åŒçš„å­ç±»å¯¹è±¡å…·æœ‰ä¸åŒçš„è¡¨ç°å½¢å¼ã€‚å¤šæ€å­˜åœ¨çš„3ä¸ªæ¡ä»¶ï¼š<br>1ï¼‰ç»§æ‰¿ 2ï¼‰é‡å†™ 3ï¼‰çˆ¶ç±»å¼•ç”¨æŒ‡å‘å­ç±»å¯¹è±¡ã€‚</p><p><strong>é—®15ï¼šå¸¸ç”¨çš„æ’åºç®—æ³•æœ‰å“ªäº›ï¼Ÿç®€å•æè¿°å‡ ä¸ªæ’åºç®—æ³•çš„ä¼˜ç¼ºç‚¹ï¼Ÿ</strong></p><p>ç­”ï¼šé€‰æ‹©ã€å†’æ³¡ã€å¿«é€Ÿã€**ã€å¸Œå°”ã€å½’å¹¶ã€å †æ’ç­‰ã€‚</p><p>1.å¿«æ’ï¼šæ˜¯å†’æ³¡æ’åºçš„ä¸€ç§æ”¹è¿›ã€‚</p><p>ä¼˜ç‚¹ï¼šå¿«ï¼Œæ•°æ®ç§»åŠ¨å°‘</p><p>ç¼ºç‚¹ï¼šç¨³å®šæ€§ä¸è¶³</p><p>2.å½’å¹¶ï¼šåˆ†æ²»æ³•æ’åºï¼Œç¨³å®šçš„æ’åºç®—æ³•ï¼Œä¸€èˆ¬ç”¨äºå¯¹æ€»ä½“æ— åºï¼Œä½†å±€éƒ¨æœ‰åºçš„æ•°åˆ—ã€‚</p><p>ä¼˜ç‚¹ï¼šæ•ˆç‡é«˜O(n)ï¼Œç¨³å®š</p><p>ç¼ºç‚¹ï¼šæ¯”è¾ƒå ç”¨å†…å­˜</p><p><strong>é—®16ï¼šnewå’Œmallocçš„åŒºåˆ«ï¼Ÿ</strong></p><p>ç­”ï¼š</p><p>1ã€newæ˜¯å…³é”®å­—ï¼Œéœ€è¦ç¼–è¯‘å™¨æ”¯æŒï¼›mallocæ˜¯åº“å‡½æ•°ï¼Œéœ€è¦å¤´æ–‡ä»¶æ”¯æŒã€‚</p><p>2ã€newç”³è¯·å†…å­˜æ— éœ€æŒ‡å®šå†…å­˜å¤§å°ï¼Œç¼–è¯‘å™¨ä¼šæ ¹æ®ç±»å‹ä¿¡æ¯è‡ªè¡Œè®¡ç®—ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œnewä¼šè°ƒç”¨æ„é€ å‡½æ•°ã€‚mallocå¿…é¡»ç”±æˆ‘ä»¬è®¡ç®—éœ€è¦ç”³è¯·çš„å­—èŠ‚æ•°ï¼Œéœ€è¦æ˜¾å¼æŒ‡å‡ºæ‰€éœ€å†…å­˜çš„å°ºå¯¸ï¼Œå¹¶ä¸”è¿”å›åå¼ºè¡Œè½¬æ¢ä¸ºå®é™…ç±»å‹çš„æŒ‡é’ˆã€‚è€Œä¸”mallocåªç®¡åˆ†é…å†…å­˜ï¼Œå¹¶ä¸èƒ½å¯¹æ‰€å¾—çš„å†…å­˜è¿›è¡Œåˆå§‹åŒ–ï¼Œæ‰€ä»¥å¾—åˆ°çš„ä¸€ç‰‡æ–°å†…å­˜ä¸­ï¼Œå…¶å€¼æ˜¯éšæœºçš„ã€‚</p><p>3ã€newå¯ä»¥é‡è½½ï¼Œmallocä¸å¯ä»¥é‡è½½ã€‚</p><p>4ã€newæ˜¯å…³é”®å­—ï¼Œmallocæ˜¯åº“å‡½æ•°ï¼Œnewçš„æ•ˆç‡é«˜äºmallocã€‚<br>newå’Œmallocéƒ½å¯ç”¨äºç”³è¯·åŠ¨æ€å†…å­˜å’Œé‡Šæ”¾å†…å­˜ã€‚å¯¹äº<strong>éå†…éƒ¨æ•°æ®ç±»å‹</strong>çš„å¯¹è±¡è€Œè¨€ï¼Œå…‰ç”¨maloc&#x2F;freeæ— æ³•æ»¡è¶³åŠ¨æ€å¯¹è±¡çš„è¦æ±‚ã€‚å¯¹è±¡åœ¨åˆ›å»ºçš„åŒæ—¶è¦è‡ªåŠ¨æ‰§è¡Œæ„é€ å‡½æ•°ï¼Œå¯¹è±¡åœ¨æ¶ˆäº¡ä¹‹å‰è¦è‡ªåŠ¨æ‰§è¡Œææ„å‡½æ•°ã€‚ç”±äºmalloc&#x2F;freeæ˜¯åº“å‡½æ•°è€Œä¸æ˜¯è¿ç®—ç¬¦ï¼Œä¸åœ¨ç¼–è¯‘å™¨æ§åˆ¶æƒé™ä¹‹å†…ï¼Œä¸èƒ½å¤ŸæŠŠæ‰§è¡Œæ„é€ å‡½æ•°å’Œææ„å‡½æ•°çš„ä»»åŠ¡å¼ºåŠ äºmalloc&#x2F;freeã€‚ C++è¯­è¨€éœ€è¦ä¸€ä¸ªèƒ½å®ŒæˆåŠ¨æ€å†…å­˜åˆ†é…å’Œåˆå§‹åŒ–å·¥ä½œçš„è¿ç®—ç¬¦newï¼Œä»¥åŠä¸€ä¸ªèƒ½å®Œæˆæ¸…ç†ä¸é‡Šæ”¾å†…å­˜å·¥ä½œçš„è¿ç®—ç¬¦deleteã€‚æ‰€ä»¥è¯´newçš„æ•ˆç‡é«˜äºmallocã€‚</p><p>5ã€newå‡ºæ¥çš„æŒ‡é’ˆæ˜¯ç›´æ¥å¸¦ç±»å‹ä¿¡æ¯çš„ã€‚è€Œmallocè¿”å›çš„éƒ½æ˜¯voidæŒ‡é’ˆã€‚</p><p><strong>é—®18ï¼šåŒæ­¥IOå’Œå¼‚æ­¥IOçš„åŒºåˆ«ï¼Ÿ</strong></p><p>ç­”ï¼š</p><p><strong>A. åŒæ­¥</strong></p><p>æ‰€è°“åŒæ­¥ï¼Œå°±æ˜¯åœ¨å‘å‡ºä¸€ä¸ªåŠŸèƒ½è°ƒç”¨æ—¶ï¼Œåœ¨æ²¡æœ‰å¾—åˆ°ç»“æœä¹‹å‰ï¼Œè¯¥è°ƒç”¨å°±ä¸è¿”å›ã€‚</p><p>æŒ‰ç…§è¿™ä¸ªå®šä¹‰ï¼Œå…¶å®ç»å¤§å¤šæ•°å‡½æ•°éƒ½æ˜¯åŒæ­¥è°ƒç”¨ï¼ˆä¾‹å¦‚sin isdigitç­‰ï¼‰ã€‚</p><p>ä½†æ˜¯ä¸€èˆ¬è€Œè¨€ï¼Œæˆ‘ä»¬åœ¨è¯´åŒæ­¥ã€å¼‚æ­¥çš„æ—¶å€™ï¼Œç‰¹æŒ‡é‚£äº›éœ€è¦å…¶ä»–éƒ¨ä»¶åä½œæˆ–è€…éœ€è¦ä¸€å®šæ—¶é—´å®Œæˆçš„ä»»åŠ¡ã€‚</p><p>æœ€å¸¸è§çš„ä¾‹å­å°±æ˜¯ SendMessageã€‚</p><p>è¯¥å‡½æ•°å‘é€ä¸€ä¸ªæ¶ˆæ¯ç»™æŸä¸ªçª—å£ï¼Œåœ¨å¯¹æ–¹å¤„ç†å®Œæ¶ˆæ¯ä¹‹å‰ï¼Œè¿™ä¸ªå‡½æ•°ä¸è¿”å›ã€‚</p><p>å½“å¯¹æ–¹å¤„ç†å®Œæ¯•ä»¥åï¼Œè¯¥å‡½æ•°æ‰æŠŠæ¶ˆæ¯å¤„ç†å‡½æ•°æ‰€è¿”å›çš„å€¼è¿”å›ç»™è°ƒç”¨è€…ã€‚</p><p><strong>B. å¼‚æ­¥</strong></p><p>å¼‚æ­¥çš„æ¦‚å¿µå’ŒåŒæ­¥ç›¸å¯¹ã€‚</p><p>å½“ä¸€ä¸ªå¼‚æ­¥è¿‡ç¨‹è°ƒç”¨å‘å‡ºåï¼Œè°ƒç”¨è€…ä¸ä¼šç«‹åˆ»å¾—åˆ°ç»“æœã€‚</p><p>å®é™…å¤„ç†è¿™ä¸ªè°ƒç”¨çš„éƒ¨ä»¶æ˜¯åœ¨è°ƒç”¨å‘å‡ºåï¼Œé€šè¿‡çŠ¶æ€ã€é€šçŸ¥æ¥é€šçŸ¥è°ƒç”¨è€…ï¼Œæˆ–é€šè¿‡å›è°ƒå‡½æ•°å¤„ç†è¿™ä¸ªè°ƒç”¨ã€‚</p><h5 id="C-æ˜¯ä¸æ˜¯ç±»å‹å®‰å…¨çš„ï¼Ÿ"><a href="#C-æ˜¯ä¸æ˜¯ç±»å‹å®‰å…¨çš„ï¼Ÿ" class="headerlink" title="C++æ˜¯ä¸æ˜¯ç±»å‹å®‰å…¨çš„ï¼Ÿ"></a>C++æ˜¯ä¸æ˜¯ç±»å‹å®‰å…¨çš„ï¼Ÿ</h5><p>ç­”æ¡ˆï¼šä¸æ˜¯ã€‚ä¸¤ä¸ªä¸åŒç±»å‹çš„æŒ‡é’ˆä¹‹é—´å¯ä»¥å¼ºåˆ¶è½¬æ¢ï¼ˆç”¨reinterpret cast)ã€‚C#æ˜¯ç±»å‹å®‰å…¨çš„ã€‚</p><h5 id="main-å‡½æ•°æ‰§è¡Œä»¥å‰ï¼Œè¿˜ä¼šæ‰§è¡Œä»€ä¹ˆä»£ç ï¼Ÿ"><a href="#main-å‡½æ•°æ‰§è¡Œä»¥å‰ï¼Œè¿˜ä¼šæ‰§è¡Œä»€ä¹ˆä»£ç ï¼Ÿ" class="headerlink" title="main å‡½æ•°æ‰§è¡Œä»¥å‰ï¼Œè¿˜ä¼šæ‰§è¡Œä»€ä¹ˆä»£ç ï¼Ÿ"></a>main å‡½æ•°æ‰§è¡Œä»¥å‰ï¼Œè¿˜ä¼šæ‰§è¡Œä»€ä¹ˆä»£ç ï¼Ÿ</h5><p>ç­”æ¡ˆï¼šå…¨å±€å¯¹è±¡çš„æ„é€ å‡½æ•°ä¼šåœ¨main å‡½æ•°ä¹‹å‰æ‰§è¡Œã€‚</p><p><strong>è¯·è¯´å‡ºconstä¸#define ç›¸æ¯”ï¼Œæœ‰ä½•ä¼˜ç‚¹ï¼Ÿ</strong><br>ç­”æ¡ˆï¼š</p><p>constä½œç”¨ï¼šå®šä¹‰å¸¸é‡ã€ä¿®é¥°å‡½æ•°å‚æ•°ã€ä¿®é¥°å‡½æ•°è¿”å›å€¼ä¸‰ä¸ªä½œç”¨ã€‚è¢«Constä¿®é¥°çš„ä¸œè¥¿éƒ½å—åˆ°å¼ºåˆ¶ä¿æŠ¤ï¼Œå¯ä»¥é¢„é˜²æ„å¤–çš„å˜åŠ¨ï¼Œèƒ½æé«˜ç¨‹åºçš„å¥å£®æ€§ã€‚</p><p>1ï¼‰ const å¸¸é‡æœ‰æ•°æ®ç±»å‹ï¼Œè€Œå®å¸¸é‡æ²¡æœ‰æ•°æ®ç±»å‹ã€‚ç¼–è¯‘å™¨å¯ä»¥å¯¹å‰è€…è¿›è¡Œç±»å‹å®‰å…¨æ£€æŸ¥ã€‚è€Œå¯¹åè€…åªè¿›è¡Œå­—ç¬¦æ›¿æ¢ï¼Œæ²¡æœ‰ç±»å‹å®‰å…¨æ£€æŸ¥ï¼Œå¹¶ä¸”åœ¨å­—ç¬¦æ›¿æ¢å¯èƒ½ä¼šäº§ç”Ÿæ„æ–™ä¸åˆ°çš„é”™è¯¯ã€‚</p><p>2ï¼‰ æœ‰äº›é›†æˆåŒ–çš„è°ƒè¯•å·¥å…·å¯ä»¥å¯¹const å¸¸é‡è¿›è¡Œè°ƒè¯•ï¼Œä½†æ˜¯ä¸èƒ½å¯¹å®å¸¸é‡è¿›è¡Œè°ƒè¯•ã€‚</p><h5 id="vectorçš„reserveå’Œcapacityçš„åŒºåˆ«"><a href="#vectorçš„reserveå’Œcapacityçš„åŒºåˆ«" class="headerlink" title="vectorçš„reserveå’Œcapacityçš„åŒºåˆ«?"></a>vectorçš„reserveå’Œcapacityçš„åŒºåˆ«?</h5><p>ç­”ï¼šreserve()ç”¨äºè®©å®¹å™¨é¢„ç•™ç©ºé—´ï¼Œé¿å…å†æ¬¡å†…å­˜åˆ†é…ï¼›capacity() è¿”å›åœ¨é‡æ–°è¿›è¡Œå†…å­˜åˆ†é…ä»¥å‰æ‰€èƒ½å®¹çº³çš„å…ƒç´ æ•°é‡ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>å…«è‚¡é¢ç»</category>
      
    </categories>
    
    
    <tags>
      
      <tag>C++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰ç«¯/ç§»åŠ¨ç«¯é¢ç»</title>
    <link href="/2024/05/09/%E5%89%8D%E7%AB%AF%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%9D%A2%E7%BB%8F/"/>
    <url>/2024/05/09/%E5%89%8D%E7%AB%AF%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%9D%A2%E7%BB%8F/</url>
    
    <content type="html"><![CDATA[<p><strong>cookie</strong></p><p>cookieå…¶å®å°±æ˜¯ä¸€äº›æ•°æ®ä¿¡æ¯ï¼Œç±»å‹ä¸ºâ€œ<strong>å°å‹æ–‡æœ¬æ–‡ä»¶</strong>â€ï¼Œå­˜å‚¨äºç”µè„‘ä¸Šçš„æ–‡æœ¬æ–‡ä»¶ä¸­ã€‚æ¸¸è§ˆå™¨ä¿å­˜äº†æˆ‘ä»¬çš„cookieï¼Œé‡Œé¢è®°å½•äº†ä¸€äº›ä¿¡æ¯ã€‚å½“æˆ‘ä»¬æ‰“å¼€ä¸€ä¸ªç½‘ç«™æ—¶ï¼Œå¦‚æœè¿™ä¸ªç½‘ç«™æˆ‘ä»¬æ›¾ç»ç™»å½•è¿‡ï¼Œé‚£ä¹ˆå½“æˆ‘ä»¬å†æ¬¡æ‰“å¼€ç½‘ç«™æ—¶ï¼Œå‘ç°å°±ä¸éœ€è¦å†æ¬¡ç™»å½•äº†ï¼Œè€Œæ˜¯ç›´æ¥è¿›å…¥äº†é¦–é¡µã€‚</p><p>ï¼ˆåå­—ã€å€¼ã€å¯è®¿é—®ç›®å½•ã€æœ‰æ•ˆæ—¶é—´ã€å¤§å°ï¼‰</p><p> cookieæœ‰2ç§å­˜å‚¨æ–¹å¼ï¼Œä¸€ç§æ˜¯ä¼šè¯æ€§ï¼Œä¸€ç§æ˜¯æŒä¹…æ€§ã€‚ï¼ˆå¯ä»¥äººä¸ºè®¾ç½®ï¼‰</p><p><strong>sessionå’Œcookieçš„åŒºåˆ«</strong></p><p><strong>2.1ã€</strong>ä¿å­˜çš„ä½ç½®ä¸åŒ<br>cookieä¿å­˜åœ¨æµè§ˆå™¨ç«¯ï¼Œsessionä¿å­˜åœ¨æœåŠ¡ç«¯ã€‚<br><strong>2.2ã€</strong>ä½¿ç”¨æ–¹å¼ä¸åŒ<br>cookieå¦‚æœåœ¨æµè§ˆå™¨ç«¯å¯¹cookieè¿›è¡Œè®¾ç½®å¯¹åº”çš„æ—¶é—´ï¼Œåˆ™cookieä¿å­˜åœ¨æœ¬åœ°ç¡¬ç›˜ä¸­ï¼Œæ­¤æ—¶å¦‚æœæ²¡æœ‰è¿‡æœŸï¼Œåˆ™å°±å¯ä»¥ä½¿ç”¨ï¼Œå¦‚æœè¿‡æœŸåˆ™å°±åˆ é™¤ã€‚å¦‚æœæ²¡æœ‰å¯¹cookieè®¾ç½®æ—¶é—´ï¼Œåˆ™é»˜è®¤å…³é—­æµè§ˆå™¨ï¼Œåˆ™cookieå°±ä¼šåˆ é™¤ã€‚<br>sessionï¼šæˆ‘ä»¬åœ¨è¯·æ±‚ä¸­ï¼Œå¦‚æœå‘é€çš„è¯·æ±‚ä¸­å­˜åœ¨sessionIdï¼Œåˆ™å°±ä¼šæ‰¾åˆ°å¯¹åº”çš„sessionå¯¹è±¡ï¼Œå¦‚æœä¸å­˜åœ¨sessionId,åˆ™åœ¨æœåŠ¡å™¨ç«¯å°±ä¼šåˆ›å»ºä¸€ä¸ªsessionå¯¹è±¡ï¼Œå¹¶ä¸”å°†sessionIdè¿”å›ç»™æµè§ˆå™¨ï¼Œå¯ä»¥å°†å…¶æ”¾åˆ°cookieä¸­ï¼Œè¿›è¡Œä¼ è¾“ï¼Œå¦‚æœæµè§ˆå™¨ä¸æ”¯æŒcookieï¼Œåˆ™åº”è¯¥å°†å…¶é€šè¿‡encodeURL(sessionID)è¿›è¡Œè°ƒç”¨ï¼Œç„¶åæ”¾åˆ°urlä¸­ã€‚<br><strong>2.3ã€</strong>å­˜å‚¨å†…å®¹ä¸åŒï¼šcookieåªèƒ½å­˜å‚¨å­—ç¬¦ä¸²ï¼Œè€Œsessionå­˜å‚¨ç»“æ„ç±»ä¼¼äºhashtableçš„ç»“æ„ï¼Œå¯ä»¥å­˜æ”¾ä»»ä½•ç±»å‹ã€‚<br><strong>2.4</strong>ã€å­˜å‚¨å¤§å°ï¼š&#96;&#96;cookieæœ€å¤šå¯ä»¥å­˜æ”¾4kå¤§å°çš„å†…å®¹ï¼Œsessionåˆ™æ²¡æœ‰é™åˆ¶ã€‚<br><strong>2.5ã€</strong>sessionçš„å®‰å…¨æ€§è¦é«˜äºcooKie<br><strong>2.6ã€</strong>cookieçš„sessionçš„åº”ç”¨åœºæ™¯ï¼šcookieå¯ä»¥ç”¨æ¥ä¿å­˜ç”¨æˆ·çš„ç™»é™†ä¿¡æ¯ï¼Œå¦‚æœåˆ é™¤cookieåˆ™ä¸‹ä¸€æ¬¡ç”¨æˆ·ä»éœ€è¦é‡æ–°ç™»å½•<br>sessionå°±ç±»ä¼¼äºæˆ‘ä»¬æ‹¿åˆ°é’¥åŒ™å»å¼€é”ï¼Œæ‹¿åˆ°çš„å°±æ˜¯æˆ‘ä»¬ä¸ªäººçš„ä¿¡æ¯ï¼Œä¸€èˆ¬æˆ‘ä»¬å¯ä»¥åœ¨sessionä¸­å­˜æ”¾ä¸ªäººçš„ä¿¡æ¯æˆ–è€…è´­ç‰©è½¦çš„ä¿¡æ¯ã€‚<br><strong>2.7ã€</strong>sessionå’Œcookieçš„å¼Šç«¯ï¼šcookieçš„å¤§å°å—é™åˆ¶ï¼Œcookieä¸å®‰å…¨ï¼Œå¦‚æœç”¨æˆ·ç¦ç”¨cookieåˆ™æ— æ³•ä½¿ç”¨cookieã€‚å¦‚æœè¿‡å¤šçš„ä¾èµ–sessionï¼Œå½“å¾ˆå¤šç”¨æˆ·åŒæ—¶ç™»é™†çš„æ—¶å€™ï¼Œæ­¤æ—¶æœåŠ¡å™¨å‹åŠ›è¿‡å¤§ã€‚sessionIdå­˜æ”¾åœ¨cookieä¸­ï¼Œæ­¤æ—¶å¦‚æœå¯¹äºä¸€äº›æµè§ˆå™¨ä¸æ”¯æŒcookieï¼Œæ­¤æ—¶è¿˜éœ€è¦æ”¹å†™ä»£ç ï¼Œå°†sessionIDæ”¾åˆ°urlä¸­ï¼Œä¹Ÿæ˜¯ä¸å®‰å…¨ã€‚</p><p><strong>localstorageå’Œsessionstorageçš„åŒºåˆ«</strong></p><p>1ã€localStorageå­˜å‚¨åœ¨ç¡¬ç›˜é‡Œï¼ŒsessionStorageå­˜å‚¨åœ¨å†…å­˜é‡Œï¼›</p><p>2ã€æ•°æ®å¤§å°ä¸åŒï¼›</p><p>3ã€localStorageçš„ç”Ÿå‘½å‘¨æœŸæ˜¯æ°¸ä¹…çš„ï¼Œé™¤éä¸»åŠ¨åˆ é™¤ï¼ŒsessionStorageçš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä¸´æ—¶çš„ï¼Œå½“å…³é—­å½“å‰çª—å£æˆ–æ ‡ç­¾é¡µï¼Œæ•°æ®å°±ä¼šè¢«æ¸…ç©ºï¼›</p><p>4ã€localStorageå¯ä»¥è·¨é¡µé¢ä½¿ç”¨ï¼ŒsessionStorageåªèƒ½åœ¨å½“å‰çª—å£ä½¿ç”¨ã€‚</p><p><strong>cssé€‰æ‹©å™¨</strong></p><p>1.ï¼important ä¼˜å…ˆçº§10000<br>2.å†…è”é€‰æ‹©å™¨ ä¼˜å…ˆçº§1000<br>3.IDé€‰æ‹©å™¨ ä¼˜å…ˆçº§100<br>4.ç±»åˆ«é€‰æ‹©å™¨ ä¼˜å…ˆçº§10<br>5.å±æ€§é€‰æ‹©å™¨ ä¼˜å…ˆçº§10<br>6.ä¼ªç±» ä¼˜å…ˆçº§10<br>7.å…ƒç´ é€‰æ‹©å™¨ ä¼˜å…ˆçº§1<br>8.é€šé…ç¬¦é€‰æ‹©å™¨ ä¼˜å…ˆçº§0<br>9.ç»§æ‰¿é€‰æ‹©å™¨ æ²¡æœ‰ä¼˜å…ˆçº§</p><p>1ã€æ ‡ç­¾é€‰æ‹©å™¨ï¼š**æ ‡ç­¾å{csså±æ€§åï¼šå±æ€§å€¼}**é€šè¿‡æ ‡ç­¾åæ‰¾åˆ°é¡µé¢ä¸­çš„è¿™ç±»æ ‡ç­¾ï¼Œè®¾ç½®æ ·å¼</p><p>2ã€ç±»é€‰æ‹©å™¨ï¼š **.ç±»å{csså±æ€§åï¼šå±æ€§å€¼ï¼›}**é€šè¿‡ç±»åæ‰¾åˆ°é¡µé¢ä¸­çš„å¸¦æœ‰è¿™ä¸ªç±»åçš„æ ‡ç­¾ï¼Œè®¾ç½®æ ·å¼</p><p>3ã€idé€‰æ‹©å™¨ï¼š**#idå±æ€§å€¼{csså±æ€§åï¼šå±æ€§å€¼;}**é€šè¿‡idå±æ€§å€¼ï¼Œæ‰¾åˆ°é¡µé¢ä¸­å¸¦æœ‰è¿™ä¸ªidå±æ€§å€¼çš„æ ‡ç­¾ï¼Œè®¾ç½®æ ·å¼</p><p>4ã€é€šé…ç¬¦é€‰æ‹©å™¨ï¼š***{csså±æ€§åï¼šå±æ€§å€¼}**æ‰¾åˆ°é¡µé¢ä¸­æ‰€æœ‰çš„æ ‡ç­¾ï¼Œç„¶åè®¾ç½®æ ·å¼ï¼ˆå¼€å‘ä¸­åº”ç”¨æœ€å°‘ï¼‰</p><p><strong>cssæƒé‡</strong></p><p>1.ä»0å¼€å§‹ï¼Œä¸€ä¸ª<a href="https://so.csdn.net/so/search?q=%E8%A1%8C%E5%86%85%E6%A0%B7%E5%BC%8F&spm=1001.2101.3001.7020">è¡Œå†…æ ·å¼</a>+1000<br>2.ä¸€ä¸ªidé€‰æ‹©å™¨+100<br>3.ä¸€ä¸ªå±æ€§é€‰æ‹©å™¨ã€classæˆ–è€…ä¼ªç±»+10<br>4.ä¸€ä¸ªå…ƒç´ é€‰æ‹©å™¨ï¼Œæˆ–è€…ä¼ªå…ƒç´ +1ï¼Œé€šé…ç¬¦+0ã€‚</p><p>æƒé‡å†³å®šäº†ä½ cssè§„åˆ™æ€æ ·è¢«æµè§ˆå™¨è§£æç›´åˆ°ç”Ÿæ•ˆã€‚â€œcssæƒé‡å…³ç³»åˆ°ä½ çš„cssè§„åˆ™æ˜¯æ€æ ·æ˜¾ç¤ºçš„â€ã€‚ å½“å¾ˆå¤šçš„æ ·å¼è¢«åº”ç”¨åˆ°æŸä¸€ä¸ªå…ƒç´ ä¸Šæ—¶ï¼Œæƒé‡æ˜¯ä¸€ä¸ªå†³å®šå“ªç§æ ·å¼ç”Ÿæ•ˆï¼Œæˆ–è€…æ˜¯ä¼˜å…ˆçº§çš„è¿‡ç¨‹ã€‚</p><p>!important &gt; è¡Œå†…æ ·å¼ &gt; å†…è”æ ·å¼ and å¤–è”æ ·å¼</p><p><strong>cssç›’æ¨¡å‹</strong></p><p>htmlä¸­çš„å„ä¸ªå…ƒç´ éƒ½ç±»ä¼¼ä¸€ä¸ªä¸€ä¸ªçš„ç›’å­é‡Œé¢çš„ç‰©å“ï¼Œä½†æ˜¯å´å«åšcssç›’æ¨¡å‹ï¼Œæ˜¯å› ä¸ºcssç›’æ¨¡å‹åƒä¸€ä¸ªç›’å­ï¼ŒæŠŠå„ç§htmlå…ƒç´ åŒ…èµ·æ¥ï¼Œå°†htmlå…ƒç´ è¿›è¡Œå°è£…ï¼Œä»¥ä¾¿äºç½‘é¡µå¸ƒå±€ä¸æ’ç‰ˆã€‚</p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240513102005071.png" alt="image-20240513102005071" style="zoom: 33%;" /><pre><code class="hljs">    1ï¼Œä¸Šé¢å›¾ä¸­è“è‰²æ–¹æ¡†æŒ‡çš„æ˜¯htmlå…ƒç´ ï¼Œä¹Ÿæ˜¯å†…å®¹éƒ¨åˆ†contextï¼Œå¯ä»¥æ˜¯ä¸€å¼ å›¾ç‰‡ã€ä¸€ä¸ªh1æ ‡é¢˜ã€ä¸€ä¸ªè¡¨æ ¼ã€ä¸€ä¸ªè¡¨å•ç­‰ã€‚ä½†æ˜¯ä»–çš„å¤§å°å¹¶ä¸ä¸€å®šæ˜¯100Ã—100ï¼Œè€Œæ˜¯å¯ä»¥ä¿®æ”¹çš„ã€‚å±æ€§widthå’Œheightç”¨äºä¿®æ”¹å†…å®¹éƒ¨åˆ†çš„å¤§å°ã€‚    2ï¼Œç»¿è‰²éƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯paddingéƒ¨åˆ†ï¼ŒæŒ‡çš„æ˜¯å†…è¾¹è·ï¼Œæ˜¯å…ƒç´ å†…å®¹ä¸å…¶æœ€è¿‘ä¸€å±‚æŸç¼šæ¡†çš„è·ç¦»ï¼Œç±»ä¼¼äºåœ¨ä¸€ä¸ªæ–¹æ ¼é‡Œå†™å­—æˆ‘ä»¬å†™åœ¨æ–¹æ ¼çš„ä¸­é—´ï¼Œè€Œä¸è¾¹æ¡†ä¿æŒä¸€å®šè·ç¦»ä¸€æ ·ã€‚    3ï¼Œæµ…æ©˜è‰²éƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯borderéƒ¨åˆ†ï¼ŒæŒ‡çš„æ˜¯è¿™ä¸ªè¾¹æ¡†çš„å®½åº¦ï¼Œæˆ‘ä»¬å¸¸è§çš„å°±æ˜¯å®½åº¦ä¸º1ï¼Œä¹Ÿå°±æ˜¯ä¸€æ¡çº¿ã€‚    4ï¼Œæ·±æ©˜è‰²éƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯marginéƒ¨åˆ†ï¼Œä¹Ÿå«è¾¹ç¼˜éƒ¨åˆ†ï¼Œç±»ä¼¼äºäººä¸äººä¹‹é—´ä¿æŒä¸€å®šçš„è·ç¦»ä¸€æ ·ï¼Œä»–çš„ä½œç”¨æ˜¯ä¿è¯htmlå…ƒç´ ä¹‹é—´çš„è·ç¦»ï¼Œæ¯”å¦‚ç½‘é¡µä¸Šçš„ä¸¤ç§å›¾ç‰‡éœ€è¦ä¿æŒä¸€å®šçš„é—´è·æ‰æ˜¾å¾—å¥½çœ‹ã€‚    5ï¼Œpaddingï¼Œborderï¼Œmarginå®é™…ä¸Šæ˜¯æ¯ä¸ªhtmlå…ƒç´ éƒ½å­˜åœ¨çš„csså±æ€§ã€‚ä»–ä»¬å¯ä»¥å¯¹å…ƒç´ çš„ä¸Šä¸‹å·¦å³å››ä¸ªæ–¹å‘è¿›è¡Œé™åˆ¶ã€‚    6ï¼Œå½“å­˜åœ¨ç›’å­é‡ŒåµŒå¥—ç›’å­æ—¶ï¼Œä¹Ÿå°±æ˜¯htmlçš„æ ‡ç­¾åµŒå¥—æ—¶ï¼Œé‡Œé¢çš„å…ƒç´ é»˜è®¤ä»¥å·¦ä¸Šè§’ä½œä¸ºåœé ç‚¹ã€‚    7ï¼Œç›’å­æ¨¡å‹å¯ç”¨ç®€è®°ä¸ºï¼š4ä¸ªçŸ©å½¢å¥—å¨ƒã€‚</code></pre><p><strong>css æœ‰å“ªå‡ ç§å®šä½</strong></p><p><strong>1ã€</strong>é™æ€å®šä½ï¼šé»˜è®¤å€¼ã€‚ï¼ˆæ²¡æœ‰æŒ‡å®šå®šä½æ–¹å¼æ—¶ï¼‰æŒ‰ç…§æ–‡æ¡£çš„ä¹¦å†™å¸ƒå±€è‡ªåŠ¨åˆ†é…åœ¨ä¸€ä¸ªåˆé€‚çš„åœ°æ–¹ï¼Œç”¨marginæ”¹å˜ä½ç½®ã€‚</p><p><strong>2ã€</strong>ç›¸å¯¹å®šä½ï¼šè„±ç¦»æ­£å¸¸çš„æ–‡æ¡£æµï¼Œä½†æ˜¯å…¶åœ¨æ–‡æ¡£æµä¸­çš„ä½ç½®ä¾ç„¶å­˜åœ¨ï¼Œè§†è§‰ä¸Šç›¸å¯¹åŸæ¥çš„ä½ç½®æœ‰ç§»åŠ¨ã€‚ï¼ˆè®¾ç½®leftã€topç­‰å€¼ï¼‰</p><p><strong>3ã€</strong>ç»å¯¹å®šä½ï¼šé»˜è®¤æƒ…å†µä¸‹ä¾èµ–æµè§ˆå™¨çš„å·¦ä¸Šè§’ä¸ºå®šä½åŸºå‡†;å¦‚æœç»å¯¹å®šä½çš„å…ƒç´ å­˜åœ¨çˆ¶ã€ç¥–å…ˆå…ƒç´ ä¸”å­˜åœ¨ç›¸å¯¹å®šä½çš„æ—¶å€™è¯¥å…ƒç´ å°†ä¾èµ–å…·å¤‡ç›¸å¯¹å®šä½çš„å…ƒç´ æ¥è¿›è¡Œå®šä½ï¼Œè€Œä¸æ˜¯å·¦ä¸Šè§’ã€‚ï¼ˆè®¾ç½®topã€rightã€bottomã€leftè¿™äº›åç§»å€¼ï¼Œç›¸å¯¹äº static å®šä½ä»¥å¤–çš„ç¬¬ä¸€ä¸ªçˆ¶å…ƒç´ è¿›è¡Œå®šä½ï¼‰åœ¨æ²¡æœ‰çˆ¶å…ƒç´ çš„æ¡ä»¶ä¸‹ï¼Œå®ƒçš„å‚ç…§ä¸ºbodyï¼Œè¯¥æ–¹å¼è„±ç¦»æ–‡æ¡£æµ</p><p><strong>4ã€</strong>å›ºå®šå®šä½ï¼šç”Ÿæˆç»å¯¹å®šä½çš„å…ƒç´ ï¼Œç›¸å¯¹äºæµè§ˆå™¨çª—å£è¿›è¡Œå®šä½ã€‚åªéœ€è®¾ç½®å®ƒç›¸å¯¹äºå„ä¸ªæ–¹å‘çš„åç§»å€¼ï¼Œå°±å¯ä»¥å°†è¯¥å…ƒç´ å›ºå®šåœ¨é¡µé¢å›ºå®šçš„ä½ç½®ï¼Œé€šå¸¸ç”¨æ¥æ˜¾ç¤ºä¸€äº›æç¤ºä¿¡æ¯ï¼Œè„±ç¦»æ–‡æ¡£æµï¼›</p><h5 id="æ ‡å‡†æµ"><a href="#æ ‡å‡†æµ" class="headerlink" title="æ ‡å‡†æµ"></a>æ ‡å‡†æµ</h5><ol><li>å—çº§å…ƒç´ ä¼šç‹¬å ä¸€è¡Œï¼Œä»ä¸Šå‘ä¸‹é¡ºåºæ’åˆ—ã€‚</li><li>è¡Œå†…å…ƒç´ ä¼šæŒ‰ç…§é¡ºåºï¼Œä»å·¦åˆ°å³é¡ºåºæ’åˆ—ï¼Œç¢°åˆ°çˆ¶å…ƒç´ è¾¹ç¼˜åˆ™è‡ªåŠ¨æ¢è¡Œã€‚</li></ol><p><strong>12. å¦‚æœåˆ¶ä½œä¸€ä¸ªè®¿é—®é‡å¾ˆå¤§çš„ç½‘ç«™ï¼Œå¯¹cssï¼Œjså’Œå›¾ç‰‡åº”è¯¥æ€ä¹ˆå¤„ç†?</strong></p><p>æ–¹æ³•1ï¼šèµ„æºæ–‡ä»¶æŒ‰æ¨¡å—è¿›è¡Œæ”¾ç½®ï¼Œæœ‰åˆ©äºå›¢é˜Ÿå¼€å‘</p><p>æ–¹æ³•2ï¼šå›¾ç‰‡å°½é‡é‡‡å–èšåˆæŠ€æœ¯</p><p>æ–¹æ³•3ï¼šç²¾ç®€å‹ç¼©csså’Œjsæ–‡ä»¶ï¼Œå‡å°‘æ–‡ä»¶å¤§å°</p><p>æ–¹æ³•4ï¼šç±»åº“ã€åª’ä½“ä½¿ç”¨CDNåŠ é€Ÿï¼Œå‡è½»æœåŠ¡å™¨å‹åŠ›</p><p><strong>è§£é‡Šjsonpçš„åŸç†</strong></p><p>JSONPæ˜¯ä¸€ç§éæ­£å¼ä¼ è¾“åè®®ï¼Œè¯¥åè®®çš„ä¸€ä¸ªè¦ç‚¹å°±æ˜¯å…è®¸ç”¨æˆ·ä¼ é€’ä¸€ä¸ªcallbackå‚æ•°ç»™æœåŠ¡ç«¯ï¼Œç„¶åæœåŠ¡ç«¯è¿”å›æ•°æ®æ—¶ä¼šå°†è¿™ä¸ªcallbackå‚æ•°ä½œä¸ºå‡½æ•°åæ¥åŒ…è£¹ä½JSONæ•°æ®ï¼Œè¿™æ ·å®¢æˆ·ç«¯å°±å¯ä»¥éšæ„å®šåˆ¶è‡ªå·±çš„å‡½æ•°æ¥è‡ªåŠ¨å¤„ç†è¿”å›æ•°æ®äº†ã€‚</p><p><strong>JSæ€ä¹ˆåˆ›å»ºä¸€ä¸ªç±»?</strong></p><p>æ–¹å¼1 : var obj &#x3D; new Object();</p><p>æ–¹å¼2 : var obj &#x3D; {};</p><p><strong>ajaxåŸç†ï¼Œä»€ä¹ˆæ˜¯åŒæ­¥å¼‚æ­¥(ä¸»è§‚é¢˜ï¼Œç­”æ¡ˆä¸å”¯ä¸€)?</strong></p><p>Ajaxçš„å·¥ä½œåŸç†ï¼šç›¸å½“äºåœ¨ç”¨æˆ·å’ŒæœåŠ¡å™¨ä¹‹é—´åŠ äº†â€”ä¸ªä¸­é—´å±‚ï¼Œä½¿ç”¨æˆ·æ“ä½œä¸æœåŠ¡å™¨å“åº”å¼‚æ­¥åŒ–ã€‚è¿™æ ·æŠŠä»¥å‰çš„ä¸€äº›æœåŠ¡å™¨è´Ÿæ‹…çš„å·¥ä½œè½¬å«åˆ°å®¢æˆ·ç«¯ï¼Œåˆ©äºå®¢æˆ·ç«¯é—²ç½®çš„å¤„ç†èƒ½åŠ›æ¥å¤„ç†ï¼Œå‡è½»æœåŠ¡å™¨å’Œå¸¦å®½çš„è´Ÿæ‹…ï¼Œä»è€Œè¾¾åˆ°èŠ‚çº¦ISPçš„ç©ºé—´åŠå¸¦å®½ç§Ÿç”¨æˆæœ¬çš„ç›®çš„ã€‚</p><p><strong>xmlå’Œjson</strong></p><p>jsonç›¸æ¯”xmlå¯è¯»æ€§å’Œå¯æ‰©å¼ æ€§å¥½ã€ç¼–ç åŠè§£ç éš¾åº¦è¾ƒä½ã€åœ¨æ•°æ®äº¤äº’ä¸­å¸¦å®½å ç”¨å°‘ï¼Œå¹¶ä¸”åœ¨å½“ä¸‹æ˜¯æœ€æµè¡Œçš„æ•°æ®äº¤äº’æ ¼å¼ã€‚</p><p><strong>cssæ€ä¹ˆæ¸…é™¤æµ®åŠ¨</strong></p><p>1ã€ç»™çˆ¶å…ƒç´ å•ç‹¬å®šä¹‰é«˜åº¦</p><p>2ã€åœ¨æ ‡ç­¾ç»“å°¾å¤„(å‰)åŠ ç©ºæ ‡ç­¾å¹¶è®¾ç½®<code>clear:both;</code></p><p>3ã€çˆ¶å…ƒç´ divå®šä¹‰ ä¼ªå…ƒç´ :after</p><p>4ã€çˆ¶å…ƒç´ å®šä¹‰ <code>overflow:hidden;</code></p><p>5ã€çˆ¶å…ƒç´ å®šä¹‰ <code>overflow:auto;</code></p><p><strong>æµ®åŠ¨çš„ä½œç”¨</strong>ï¼šå¯ä»¥è®©å¤šä¸ªå—çº§å…ƒç´ ä¸€è¡Œå†…æ’åˆ—æ˜¾ç¤ºã€‚æµ®åŠ¨å¯ä»¥æ”¹å˜å…ƒç´ æ ‡ç­¾é»˜è®¤çš„æ’åˆ—æ–¹å¼ã€‚</p><p><code>float</code> å±æ€§ç”¨äºåˆ›å»ºæµ®åŠ¨æ¡†ï¼Œå°†å…¶ç§»åŠ¨åˆ°ä¸€è¾¹ï¼Œç›´åˆ°å·¦è¾¹ç¼˜æˆ–å³è¾¹ç¼˜è§¦åŠåŒ…å«å—æˆ–å¦ä¸€ä¸ªæµ®åŠ¨æ¡†çš„è¾¹ç¼˜ã€‚</p><p><strong>jsæ•°æ®ç±»å‹</strong></p><p>æœªå®šä¹‰ (Undefined)ï¼Œç©º (Null)ï¼Œæ•°å­— (Number)ï¼Œå­—ç¬¦ä¸² (String)ï¼Œå¸ƒå°”å€¼ (Boolean)ï¼Œç¬¦å· (Symbol)ï¼Œä»»æ„å¤§æ•´æ•° (BigInt)ï¼Œå¯¹è±¡ (Object)ã€‚</p><p> <strong>js çš„ä½œç”¨åŸŸé“¾</strong></p><p>å„ä¸ªä½œç”¨åŸŸçš„åµŒå¥—å…³ç³»ç»„æˆä¸€æ¡ä½œç”¨åŸŸé“¾ã€‚</p><p>ä½œç”¨åŸŸé“¾ä¸»è¦æ˜¯è¿›è¡Œæ ‡è¯†ç¬¦ï¼ˆå˜é‡å’Œå‡½æ•°ï¼‰çš„æŸ¥è¯¢ï¼Œæ ‡è¯†ç¬¦è§£æå°±æ˜¯æ²¿ç€ä½œç”¨åŸŸé“¾ä¸€çº§ä¸€çº§çš„æœç´¢æ ‡è¯†ç¬¦çš„è¿‡ç¨‹ï¼Œè€Œä½œç”¨åŸŸé“¾å°±æ˜¯ä¿è¯å¯¹å˜é‡å’Œå‡½æ•°çš„æœ‰åºè®¿é—®ã€‚<br>ï¼ˆ1ï¼‰å¦‚æœè‡ªèº«ä½œç”¨åŸŸä¸­å£°æ˜è¯¥å˜é‡ï¼Œåˆ™æ— éœ€ä½¿ç”¨ä½œç”¨åŸŸé“¾<br>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå¦‚æœè¦åœ¨ bar å‡½æ•°ä¸­æŸ¥è¯¢å˜é‡ a ï¼Œåˆ™ç›´æ¥ä½¿ç”¨ LHS æŸ¥è¯¢ï¼Œèµ‹å€¼ä¸º 100 å³å¯ã€‚<br>ï¼ˆ2ï¼‰å¦‚æœè‡ªèº«ä½œç”¨åŸŸä¸­æœªå£°æ˜è¯¥å˜é‡ï¼Œåˆ™éœ€è¦ä½¿ç”¨ä½œç”¨åŸŸé“¾è¿›è¡ŒæŸ¥æ‰¾</p><p><strong>js çš„ä½œç”¨åŸŸï¼Œå—çº§ä½œç”¨åŸŸï¼Œå‡½æ•°ä½œç”¨åŸŸ</strong></p><p>ï¼ˆç”±äº JavaScript å­˜åœ¨å˜é‡æå‡è¿™ç§ç‰¹æ€§ï¼Œä»è€Œå¯¼è‡´å¾ˆå¤šä¸ç›´è§‰ä¸ç¬¦çš„ä»£ç ï¼Œè¿™ä¹Ÿæ˜¯ JavaScript çš„ä¸€ä¸ªé‡è¦è®¾è®¡ç¼ºé™·ï¼Œè¿™ç§è®¾è®¡ç¼ºé™·å¸¦æ¥çš„é—®é¢˜å¯ä»¥å»çœ‹çœ‹JSå˜é‡å’Œå‡½æ•°æå‡ã€‚æ‰€ä»¥ ES6 é€šè¿‡å¼•å…¥å—çº§ä½œç”¨åŸŸå¹¶é…åˆ letã€const å…³é”®å­—æ¥é¿å¼€äº†è¿™ç§è®¾è®¡ç¼ºé™·ï¼Œä½†æ˜¯ç”±äº JavaScript éœ€è¦å‘ä¸‹å…¼å®¹ï¼Œæ‰€ä»¥å˜é‡æå‡åœ¨ç›¸å½“é•¿ä¸€æ®µæ—¶é—´å†…è¿˜ä¼šç»§ç»­å­˜åœ¨ã€‚ï¼‰</p><p>ä½œç”¨åŸŸæ˜¯æŒ‡åœ¨ç¨‹åºä¸­å®šä¹‰å˜é‡çš„åŒºåŸŸï¼Œè¯¥ä½ç½®å†³å®šäº†å˜é‡çš„ç”Ÿå‘½å‘¨æœŸã€‚åœ¨ JS ä¸­ä½œç”¨åŸŸåˆ†ä¸ºå…¨å±€ä½œç”¨åŸŸå’Œå‡½æ•°ä½œç”¨åŸŸï¼Œå¦å¤–å‡½æ•°ä½œç”¨åŸŸå¯ä»¥äº’ç›¸åµŒå¥—ã€‚ï¼ˆES6å¢åŠ äº†å—çº§ä½œç”¨åŸŸï¼‰</p><p>1ã€å…¨å±€ä½œç”¨åŸŸï¼šå…¨å±€ä½œç”¨åŸŸä¸­çš„å¯¹è±¡åœ¨ä»£ç ä¸­çš„ä»»ä½•åœ°æ–¹éƒ½èƒ½è®¿é—®ï¼Œå…¶ç”Ÿå‘½å‘¨æœŸä¼´éšç€é¡µé¢çš„ç”Ÿå‘½å‘¨æœŸã€‚</p><p>2ã€å‡½æ•°ä½œç”¨åŸŸï¼šå‡½æ•°ä½œç”¨åŸŸå°±æ˜¯åœ¨å‡½æ•°å†…éƒ¨å®šä¹‰çš„å˜é‡æˆ–å‡½æ•°ï¼Œå¹¶ä¸”å®šä¹‰çš„å˜é‡æˆ–å‡½æ•°åªèƒ½åœ¨å‡½æ•°å†…éƒ¨è¢«è®¿é—®ï¼Œå‡½æ•°æ‰§è¡Œç»“æŸåï¼Œå‡½æ•°å†…éƒ¨å®šä¹‰çš„å˜é‡å°±ä¼šè¢«é”€æ¯ã€‚</p><p>3ã€å—çº§ä½œç”¨åŸŸï¼šES6 ä¸­ç»™ JavaScript æ–°å¢äº†å—çº§ä½œç”¨åŸŸ</p><ul><li><p>å—çº§ä½œç”¨åŸŸç”±<code>&#123;&#125;</code>åŒ…æ‹¬ï¼Œ<code>if</code>è¯­å¥å’Œ<code>for</code>è¯­å¥é‡Œé¢çš„<code>&#123;&#125;</code>éƒ½å±äºå—çº§ä½œç”¨åŸŸ</p></li><li><p><code>var</code>å®šä¹‰çš„å˜é‡æ²¡æœ‰å—çº§ä½œç”¨åŸŸæ¦‚å¿µï¼Œå¯ä»¥è·¨å—çº§ä½œç”¨åŸŸè®¿é—®</p></li><li><p><code>let</code>å’Œ<code>const</code>å®šä¹‰çš„å˜é‡åªèƒ½åœ¨å—çº§ä½œç”¨åŸŸé‡Œè®¿é—®</p><p>å—çº§ä½œç”¨åŸŸæ˜¯é€šè¿‡è¯æ³•ç¯å¢ƒçš„æ ˆç»“æ„æ¥å®ç°çš„ï¼Œè€Œå˜é‡æå‡æ˜¯é€šè¿‡å˜é‡ç¯å¢ƒæ¥å®ç°çš„ï¼Œé€šè¿‡ä¸¤è€…çš„ç»“åˆï¼ŒJavaScript å¼•æ“ä¹Ÿå°±åŒæ—¶æ”¯æŒäº†å˜é‡æå‡å’Œå—çº§ä½œç”¨åŸŸäº†ã€‚</p></li></ul><p><strong>åŒæºå’Œè·¨åŸŸï¼Œè·¨åŸŸé—®é¢˜æ€ä¹ˆè§£å†³</strong></p><p><strong>1ã€</strong>åŒæºç­–ç•¥ï¼šå®ƒæ˜¯æµè§ˆå™¨æœ€æ ¸å¿ƒä¹Ÿæœ€åŸºæœ¬çš„å®‰å…¨åŠŸèƒ½ã€‚å¦‚æœç¼ºå°‘äº†åŒæºç­–ç•¥ï¼Œæµè§ˆå™¨å¾ˆå®¹æ˜“å—åˆ° XSSã€ CSFR ç­‰æ”»å‡»ã€‚åŒæºæ˜¯æŒ‡â€åè®®+åŸŸå+ç«¯å£â€ä¸‰è€…ç›¸åŒï¼Œå³ä¾¿ä¸¤ä¸ªä¸åŒçš„åŸŸåæŒ‡å‘åŒä¸€ä¸ª ip åœ°å€ï¼Œä¹ŸéåŒæºã€‚</p><p><strong>2ã€</strong>è·¨åŸŸï¼šå½“æµè§ˆå™¨ä¸­ä¸€ä¸ªè¯·æ±‚urlçš„åè®®ã€åŸŸåã€ç«¯å£ä¸‰è€…ä¹‹é—´ä»»æ„ä¸€ä¸ªä¸å½“å‰é¡µé¢urlä¸åŒå³ä¸ºè·¨åŸŸã€‚ï¼ˆä»€ä¹ˆæƒ…å†µä¸‹è§¦å‘åŒæºç­–ç•¥ï¼‰</p><p>ï¼ˆ1ï¼‰CORSæŠ€æœ¯ï¼ˆè·¨æºèµ„æºå…±äº«ï¼‰ï¼šæœåŠ¡å™¨åœ¨è¿”å›å“åº”æŠ¥æ–‡çš„æ—¶å€™ï¼Œåœ¨å“åº”å¤´ä¸­è®¾ç½®ä¸€ä¸ªå…è®¸çš„header</p><p>ï¼ˆ2ï¼‰åŸç”Ÿ<a href="https://so.csdn.net/so/search?q=jsonp&spm=1001.2101.3001.7020">jsonp</a>ï¼šé€šè¿‡åŠ¨æ€åˆ›å»ºscriptæ ‡ç­¾,é€šè¿‡scriptæ ‡ç­¾çš„src,å‘ä¸€ä¸ªä¸åŒæºçš„æ¥å£å‘é€ä¸€ä¸ªgetè¯·æ±‚ï¼ˆjsonpä¸æ”¯æŒpostï¼‰</p><ul><li>è·å–å®¢æˆ·ç«¯å‘é€è¿‡æ¥çš„å›è°ƒå‡½æ•°çš„åå­—</li><li>å¾—åˆ°è¦é€šè¿‡JSONPå½¢å¼å‘é€ç»™å®¢æˆ·ç«¯çš„æ•°æ®</li><li>æ ¹æ®å‰ä¸¤æ­¥å¾—åˆ°çš„æ•°æ®ï¼Œæ‹¼æ¥å‡ºä¸€ä¸€ä¸ªå‡½æ•°è°ƒç”¨çš„å­—ç¬¦ä¸²</li><li>æŠŠä¸Šä¸€æ­¥æ‹¼æ¥å¾—åˆ°çš„å­—ç¬¦ä¸²ï¼Œå“åº”ç»™å®¢æˆ·ç«¯çš„<code>&lt;script&gt;</code>æ ‡ç­¾è¿›è¡Œè§£ææ‰§è¡Œ</li></ul><p>å…·æœ‰å±€é™æ€§ï¼Œä¸å®‰å…¨ï¼Œå¯èƒ½ä¼šå—åˆ°XSSæ”»å‡»ï¼›åªæ”¯æŒè·¨åŸŸ HTTP è¯·æ±‚è¿™ç§æƒ…å†µï¼Œä¸èƒ½è§£å†³ä¸åŒåŸŸçš„ä¸¤ä¸ªé¡µé¢ä¹‹é—´å¦‚ä½•è¿›è¡Œ Javascript è°ƒç”¨çš„é—®é¢˜</p><p>ï¼ˆ3ï¼‰jQueryä¸­çš„jsonpï¼šè®¾ç½®dataTypeä¸ºjsonpï¼Œ<a href="https://so.csdn.net/so/search?q=jq&spm=1001.2101.3001.7020">jq</a>ä¼šè‡ªåŠ¨åŠ¨æ€å¸®æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªscriptæ ‡ç­¾ï¼Œå°†urlæ”¾åˆ°srcå±æ€§ä¸­ã€‚<em>ç»†èŠ‚æ³¨æ„ç‚¹</em>ï¼šjqä½¿ç”¨jsonpä¸éœ€è¦è‡ªå·±è®¾ç½®callbackï¼Œjqä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬å‘é€callbackå‚æ•°ï¼Œå‚æ•°å€¼å°±æ˜¯jqçš„successå›è°ƒå‡½æ•°</p><p>ï¼ˆ4ï¼‰æµè§ˆå™¨è®¾ç½®è·¨åŸŸï¼šé€šè¿‡ä¿®æ”¹ä¸€äº›è®¾ç½®ï¼Œè®©è¢«è®¾ç½®çš„æµè§ˆå™¨æ²¡æœ‰åŒæºçš„é™åˆ¶,è‡ªç„¶å¯ä»¥å®ç°è·¨åŸŸ</p><p><strong>PNGæ ¼å¼å’ŒJPGæ ¼å¼çš„åŒºåˆ«</strong></p><p>1ã€JPG ä½¿ç”¨çš„æ˜¯æœ‰æŸå‹ç¼©â€”â€”è¿™æ„å‘³ç€å½“å›¾åƒå˜å°æ—¶ï¼Œå›¾åƒä¸­çš„æŸäº›æ•°æ®ä¼šè¢«æ°¸ä¹…åˆ é™¤ã€‚ä»é•¿è¿œæ¥çœ‹ï¼Œè¿™å¯èƒ½ä¼šå½±å“æ–‡ä»¶çš„è´¨é‡ï¼Œå› ä¸ºæ¯æ¬¡ç¼–è¾‘å’Œä¿å­˜æ–‡ä»¶æ—¶ï¼Œéƒ½ä¼šä¸¢å¤±æ›´å¤šæ•°æ®ã€‚<br>PNG ä½¿ç”¨æ— æŸå‹ç¼©ã€‚è¿™æ„å‘³ç€å‹ç¼©å›¾åƒæ—¶ä¸ä¼šä¸¢å¤±ä»»ä½•æ•°æ®â€”â€”æ— è®ºç¼–è¾‘ä¿å­˜æ–‡ä»¶å¤šå°‘æ¬¡ï¼Œè´¨é‡éƒ½ä¿æŒä¸å˜ã€‚å›¾åƒä¸ä¼šå˜å¾—æ¨¡ç³Šæˆ–æ‰­æ›²ã€‚</p><p>2ã€æœ€å¥½ä»¥ PNG æ ¼å¼åˆ›å»ºå±å¹•æˆªå›¾ï¼Œè¿™æ˜¯å‡ ä¹æ‰€æœ‰å±å¹•æˆªå›¾å·¥å…·çš„é»˜è®¤è®¾ç½®ã€‚æ‰‹æœºç«¯ä¸€èˆ¬ä¼šè‡ªåŠ¨å°†å±å¹•æˆªå›¾ä¿å­˜ä¸º PNG æ ¼å¼ã€‚ä¸»è¦æ˜¯å› ä¸ºå±å¹•æˆªå›¾ä¸€èˆ¬åŒ…å«å…·æœ‰æ¸…æ™°å¯¹æ¯”åº¦çš„ç²¾ç¡®ç›´çº¿å’Œæ²¡æœ‰é¢œè‰²æ¸å˜çš„å•è‰²åŒºåŸŸã€‚è¿™äº›éƒ½æ˜¯JPG æ ¼å¼çš„ä¸»è¦å¼±ç‚¹ã€‚</p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240513111239223.png" alt="image-20240513111239223" style="zoom: 67%;" /><p>JPGé€‚åˆç”¨äºç…§ç‰‡ï¼Œåœ¨é£æ™¯æˆ–äººç‰©å›¾ç‰‡ä¸­å‡ ä¹çœ‹ä¸åˆ°å‹ç¼©ä¼ªåƒã€‚ç”±äºå°ºå¯¸å°ï¼Œé€‚åˆåœ¨ç½‘ç«™ä¸­ä½¿ç”¨å’Œç½‘ç»œä¼ è¾“ã€‚PNGé€‚ç”¨äºæ‰€æœ‰åŒ…å«é”è¾¹å’Œçº¯è‰²çš„å›¾å½¢ã€‚ç”¨äºä¿å­˜å±å¹•æˆªå›¾ã€å›¾æ ‡å’Œéœ€è¦é€æ˜èƒŒæ™¯çš„å›¾ç‰‡ã€‚</p><p>åå•†ç¼“å­˜å’Œå¼ºç¼“å­˜</p><p><strong>æ‡’åŠ è½½çš„åŸç†å’Œä½ æ˜¯æ€ä¹ˆå®ç°çš„</strong></p><p>1ã€å¯¹äºé¡µé¢æœ‰å¾ˆå¤šé™æ€èµ„æºçš„æƒ…å†µä¸‹ï¼ˆæ¯”å¦‚ç½‘å•†è´­ç‰©é¡µé¢ï¼‰ï¼Œä¸ºäº†èŠ‚çœç”¨æˆ·æµé‡å’Œæé«˜é¡µé¢æ€§èƒ½ï¼Œå¯ä»¥åœ¨ç”¨æˆ·æµè§ˆåˆ°å½“å‰èµ„æºçš„æ—¶å€™ï¼Œå†å¯¹èµ„æºè¿›è¡Œè¯·æ±‚å’ŒåŠ è½½ã€‚</p><p>2ã€åŸç†ï¼šç›‘å¬onscrolläº‹ä»¶åˆ¤æ–­èµ„æºä½ç½®</p><p>é¦–å…ˆä¸ºæ‰€æœ‰æ‡’åŠ è½½çš„é™æ€èµ„æºæ·»åŠ è‡ªå®šä¹‰å±æ€§å­—æ®µï¼Œæ¯”å¦‚å¦‚æœæ˜¯å›¾ç‰‡ï¼Œå¯ä»¥æŒ‡å®šdata-srcä¸ºçœŸå®çš„å›¾ç‰‡åœ°å€ï¼ŒsrcæŒ‡å‘loadingçš„å›¾ç‰‡ã€‚<br>ç„¶åå½“èµ„æºè¿›å…¥è§†å£çš„æ—¶å€™ï¼Œå°†srcå±æ€§å€¼æ›¿æ¢æˆdata-srcçš„å€¼ã€‚<br>å¯ä»¥ä½¿ç”¨å…ƒç´ çš„getBoundingRect().topåˆ¤æ–­æ˜¯å¦åœ¨è§†å£å†…ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å…ƒç´ è·ç¦»æ–‡æ¡£é¡¶éƒ¨çš„è·ç¦»offsetTopå’ŒscrollTopæ˜¯å¦å°äºè§†å£é«˜åº¦æ¥åˆ¤æ–­ï¼š</p><p>React setStateä¹‹åçš„æµç¨‹</p><p><strong>æœ‰ä»€ä¹ˆåŠæ³•å®ç°æ·±æ‹·è´ï¼Ÿ</strong></p><p>1ã€æµ…æ‹·è´æ˜¯åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æœ‰ç€åŸå§‹å¯¹è±¡å±æ€§å€¼çš„ä¸€ä»½ç²¾ç¡®æ‹·è´ã€‚å¦‚æœå±æ€§æ˜¯åŸºæœ¬ç±»å‹ï¼Œæ‹·è´çš„å°±æ˜¯åŸºæœ¬ç±»å‹çš„å€¼ï¼Œå¦‚æœå±æ€§æ˜¯å¼•ç”¨ç±»å‹ï¼Œæ‹·è´çš„å°±æ˜¯æŒ‡å‘å†…å­˜çš„åœ°å€ ï¼Œæ‰€ä»¥å¦‚æœå…¶ä¸­ä¸€ä¸ªå¯¹è±¡æ”¹å˜äº†è¿™ä¸ªå¼•ç”¨ç±»å‹çš„å€¼ï¼Œå°±ä¼šå½±å“åˆ°å¦ä¸€ä¸ªå¯¹è±¡ã€‚<br>æ·±æ‹·è´æ˜¯å°†ä¸€ä¸ªå¯¹è±¡ä»å†…å­˜ä¸­å®Œæ•´çš„æ‹·è´ä¸€ä»½å‡ºæ¥,ä»å †å†…å­˜ä¸­å¼€è¾Ÿä¸€ä¸ªæ–°çš„åŒºåŸŸå­˜æ”¾æ–°å¯¹è±¡,ä¸”ä¿®æ”¹æ–°å¯¹è±¡ä¸ä¼šå½±å“åŸå¯¹è±¡ã€‚<br>2ã€æ–¹æ³•ï¼šé€’å½’è°ƒç”¨ã€lodashå‡½æ•°åº“ï¼ˆ**lodash.cloneDeep()**ï¼‰å®ç°æ·±æ‹·è´ã€é€šè¿‡jsçš„å†…ç½®å¯¹è±¡JSONæ¥è¿›è¡Œæ·±æ‹·è´ã€é€šè¿‡jQueryçš„extendæ–¹æ³•å®ç°æ·±æ‹·è´ã€Object.assign()æ‹·è´</p><p><strong>æ€ä¹ˆè°ƒè¯• JS ä»£ç </strong></p><p>1ã€ç›´æ¥åœ¨jsä»£ç ä¸­åŠ å…¥æ–­ç‚¹è¿›è¡Œè°ƒè¯•</p><p>2ã€åœ¨äº‹ä»¶ç›‘å¬å™¨ä¸Šè®¾ç½®æ–­ç‚¹</p><p>3ã€åœ¨DOMèŠ‚ç‚¹ä¸­è®¾ç½®æ–­ç‚¹</p><p>ï¼ˆä¸‹ä¸€æ­¥ã€è·³è¿‡ä¸€äº›ä»£ç ã€è¿›å…¥å‡½æ•°ã€è·³å‡ºå‡½æ•°ã€è·³åˆ°ä¸‹ä¸€ä¸ªæ–­ç‚¹ï¼‰</p><p>4ã€ä½¿ç”¨vs codeï¼ˆå®‰è£…æŸäº›æ’ä»¶ï¼‰</p><p>webå®‰å…¨é—®é¢˜ï¼Œç­”äº†ï¼ˆxssã€csrfï¼‰ï¼Œæ€ä¹ˆé˜²å¾¡æ”»å‡»</p><p>\1. åœ°å›¾å±•ç¤ºä¸ºä»€ä¹ˆä¸ç”¨ Google<br>\2. å°ç¨‹åºä¸ºä»€ä¹ˆä¸ä½¿ç”¨æ¡†æ¶<br>\3. æ²¡æœ‰å­¦ react å—<br><strong>å‰åç«¯åˆ†ç¦»æ˜¯ä»€ä¹ˆ</strong></p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240513113123476.png" alt="image-20240513113123476" style="zoom:67%;" /><p>1ã€â€å‰â€ç‰¹æŒ‡æµè§ˆå™¨ç«¯(æˆ–å®¢æˆ·ç«¯)ï¼Œç›´æ¥å‘ˆç°ç»™ç”¨æˆ·çš„ï¼›åç«¯æ˜¯æœåŠ¡å™¨ç«¯ï¼Œå¤„ç†ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®ï¼Œä¸å‘ˆç°ç»™ç”¨æˆ·ï¼ˆJSPä¸æ˜¯å‰ç«¯æŠ€æœ¯ï¼‰</p><p>2ã€é™æ€èµ„æºå’ŒæœåŠ¡(å®ç°æ¥å£çš„ä¸šåŠ¡é€»è¾‘)ï¼Œåœ¨å¼€å‘é˜¶æ®µå°±åˆ†ç¦»å¼€å‘ï¼Œè€Œéƒ¨ç½²é˜¶æ®µåˆ†ç¦»éƒ¨ç½²åœ¨ä¸åŒæœåŠ¡å™¨ä¸Šï¼Œç®—æ˜¯ä¸¥æ ¼æ„ä¹‰ä¸Šçš„å‰åç«¯åˆ†ç¦»ã€‚</p><p>3ã€å‰ç«¯äººå‘˜å’Œåç«¯äººå‘˜çº¦å®šå¥½æ¥å£åï¼Œå‰ç«¯äººå‘˜å½»åº•ä¸ç”¨å†å…³å¿ƒä¸šåŠ¡å¤„ç†æ˜¯æ€ä¹ˆå›äº‹ï¼Œä»–åªéœ€è¦æŠŠç•Œé¢åšå¥½å°±å¯ä»¥äº†ï¼Œåç«¯äººå‘˜ä¹Ÿä¸ç”¨å†å…³ç³»å‰ç«¯ç•Œé¢æ˜¯ä»€ä¹ˆæ ·çš„ï¼Œä»–åªéœ€è¦åšå¥½ä¸šåŠ¡é€»è¾‘å¤„ç†å³å¯ã€‚æœåŠ¡çš„åˆ‡ç¦»ï¼Œä»£ç ç®¡ç†ï¼ŒæœåŠ¡éƒ¨ç½²ä¹Ÿéƒ½ç‹¬ç«‹å‡ºæ¥åˆ†åˆ«ç®¡ç†ï¼Œç³»ç»Ÿçš„çµæ´»æ€§ä¹Ÿè·å¾—äº†æå¤§çš„æå‡ã€‚</p><p>4ã€æœ€æ ¸å¿ƒçš„å°±æ˜¯æ— è®ºä½ åç«¯æ¢äº†ä»€ä¹ˆè¯­è¨€ï¼Œæ¢äº†ä»€ä¹ˆäººå»ç¼–å†™ï¼Œæ¢äº†ä»€ä¹ˆæ ·çš„æœåŠ¡å™¨ï¼Œåªè¦ä½ ä»¬å®šä¹‰çš„ä¸€ä¸ªæ¥å£è§„åˆ™ä¸å˜ï¼Œç„¶åä¸ä¼šå½±å“åˆ°ç”¨æˆ·çš„ä½¿ç”¨ï¼Œæ•°æ®çš„ä¸€ä¸ªå±•ç¤ºã€‚åŒæ—¶åè¿‡æ¥ä¹Ÿä¸€æ ·ï¼Œæ— è®ºä½ å‰ç«¯æ¢äº†ä»€ä¹ˆUIæ¡†æ¶ï¼Œæ¬¸ï¼Œæˆ‘ä»Šå¤©ç”¨easyuiï¼Œæ˜å¤©æˆ‘ç”¨layuiï¼Œåå¤©æˆ‘ç”¨bootstrapï¼Œä½ ä¹Ÿèƒ½å¤Ÿæ ¹æ®å®šä¹‰çš„æ¥å£æ–‡æ¡£å»å±•ç¤ºç›¸å…³æ•°æ®å’Œæ•ˆæœï¼Œé‚£ä¹ˆå°±æ˜¯å‰åç«¯åˆ†ç¦»ã€‚</p><p><strong>é—­åŒ…æ˜¯ä»€ä¹ˆ</strong></p><p>é—­åŒ…æ˜¯æŒ‡æœ‰æƒè®¿é—®å¦ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸­å˜é‡çš„å‡½æ•°ï¼Œåˆ›å»ºé—­åŒ…çš„æœ€å¸¸è§çš„æ–¹å¼å°±æ˜¯åœ¨ä¸€ä¸ªå‡½æ•°å†…åˆ›å»ºå¦ä¸€ä¸ªå‡½æ•°ï¼Œåˆ›å»ºçš„å‡½æ•°å¯ä»¥è®¿é—®åˆ°å½“å‰å‡½æ•°çš„å±€éƒ¨å˜é‡ã€‚</p><p>1.è®©å¤–éƒ¨è®¿é—®å‡½æ•°å†…éƒ¨å˜é‡å˜æˆå¯èƒ½</p><p>2.å˜é‡ä¼šå¸¸é©»åœ¨å†…å­˜ä¸­</p><p>3.å¯ä»¥é¿å…ä½¿ç”¨å…¨å±€å˜é‡,é˜²æ­¢å…¨å±€å˜é‡æ±¡æŸ“;</p><p>4.å¯èƒ½ä¼šé€ æˆ<a href="https://so.csdn.net/so/search?q=%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F&spm=1001.2101.3001.7020">å†…å­˜æ³„æ¼</a>æˆ–æº¢å‡ºã€‚</p><p><strong>é—­åŒ…è¦æ³¨æ„ä»€ä¹ˆ</strong></p><p>1ï¼‰ç”±äºé—­åŒ…ä¼šä½¿å¾—å‡½æ•°ä¸­çš„å˜é‡éƒ½è¢«ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œå†…å­˜æ¶ˆè€—å¾ˆå¤§ï¼Œæ‰€ä»¥ä¸èƒ½æ»¥ç”¨é—­åŒ…ï¼Œå¦åˆ™ä¼šé€ æˆç½‘é¡µçš„æ€§èƒ½é—®é¢˜ï¼Œåœ¨IEä¸­å¯èƒ½å¯¼è‡´å†…å­˜æ³„éœ²ã€‚è§£å†³æ–¹æ³•æ˜¯ï¼Œ<strong>åœ¨é€€å‡ºå‡½æ•°ä¹‹å‰ï¼Œå°†ä¸ä½¿ç”¨çš„å±€éƒ¨å˜é‡å…¨éƒ¨åˆ é™¤ã€‚</strong></p><p>2ï¼‰é—­åŒ…ä¼šåœ¨çˆ¶å‡½æ•°å¤–éƒ¨ï¼Œæ”¹å˜çˆ¶å‡½æ•°å†…éƒ¨å˜é‡çš„å€¼ã€‚æ‰€ä»¥ï¼Œå¦‚æœä½ æŠŠçˆ¶å‡½æ•°å½“ä½œå¯¹è±¡ï¼ˆobjectï¼‰ä½¿ç”¨ï¼ŒæŠŠé—­åŒ…å½“ä½œå®ƒçš„å…¬ç”¨æ–¹æ³•ï¼ˆPublic Methodï¼‰ï¼ŒæŠŠå†…éƒ¨å˜é‡å½“ä½œå®ƒçš„ç§æœ‰å±æ€§ï¼ˆprivate valueï¼‰ï¼Œè¿™æ—¶ä¸€å®šè¦å°å¿ƒï¼Œä¸è¦éšä¾¿æ”¹å˜çˆ¶å‡½æ•°å†…éƒ¨å˜é‡çš„å€¼ã€‚</p><p>\12. this æŒ‡å‘<br>\13. varã€constã€let<br>\14.</p><p> <strong>flex å¸ƒå±€</strong></p><p>flexæ˜¯Flexible Boxçš„ç¼©å†™ï¼Œæ„ä¸ºå¼¹æ€§å¸ƒå±€ï¼Œç”¨æ¥ä¸º<a href="https://so.csdn.net/so/search?q=%E7%9B%92%E6%A8%A1%E5%9E%8B&spm=1001.2101.3001.7020">ç›’æ¨¡å‹</a>æä¾›æœ€å¤§çš„çµæ´»æ€§</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240513135451485.png" alt="image-20240513135451485"></p><p>ï¼ˆä¸»è½´æ–¹å‘ã€å¦‚ä½•æ¢è¡Œã€å¦‚ä½•å¯¹é½ã€é¡¹ç›®æ”¾å¤§ã€ç¼©å°æ¯”ä¾‹ï¼‰</p><p><strong>CSSå¼•å…¥çš„æ–¹å¼æœ‰å“ªäº›?linkå’Œ@importçš„åŒºåˆ«æ˜¯?</strong></p><p>å†…è” å†…åµŒ å¤–é“¾ å¯¼å…¥<br>åŒºåˆ« ï¼šåŒæ—¶åŠ è½½<br>å‰è€…æ— å…¼å®¹æ€§ï¼Œåè€…CSS2.1ä»¥ä¸‹æµè§ˆå™¨ä¸æ”¯æŒ<br>Link æ”¯æŒä½¿ç”¨javascriptæ”¹å˜æ ·å¼ï¼Œåè€…ä¸å¯</p><p><strong>XSS</strong>(åå°„å‹ã€å­˜å‚¨å‹ã€DOMå‹)</p><ul><li>æ”»å‡»è€…å¯¹å«æœ‰æ¼æ´çš„æœåŠ¡å™¨å‘èµ·XSSæ”»å‡»ï¼ˆæ³¨å…¥JSä»£ç ï¼‰ã€‚</li><li>è¯±ä½¿å—å®³è€…æ‰“å¼€å—åˆ°æ”»å‡»çš„æœåŠ¡å™¨URLã€‚</li><li>å—å®³è€…åœ¨Webæµè§ˆå™¨ä¸­æ‰“å¼€URLï¼Œæ¶æ„è„šæœ¬æ‰§è¡Œã€‚</li></ul><p>é˜²èŒƒï¼š</p><p>ï¼ˆ1ï¼‰ç¼–ç ï¼šå¯¹ç”¨æˆ·è¾“å…¥çš„æ•°æ®è¿›è¡ŒHTML Entityç¼–ç </p><p>ï¼ˆ2ï¼‰è¿‡æ»¤ï¼šç§»é™¤ç”¨æˆ·ä¸Šä¼ çš„DOMå±æ€§ï¼Œå¦‚onerrorç­‰ï¼Œç§»é™¤ç”¨æˆ·ä¸Šä¼ çš„styleèŠ‚ç‚¹ï¼ŒscriptèŠ‚ç‚¹ï¼ŒiframeèŠ‚ç‚¹ç­‰ã€‚</p><p>ï¼ˆ3ï¼‰æ ¡æ­£ï¼šé¿å…ç›´æ¥å¯¹HTML Entityç¼–ç ï¼Œä½¿ç”¨DOM Praseè½¬æ¢ï¼Œæ ¡æ­£ä¸é…å¯¹çš„DOMæ ‡ç­¾ã€‚</p><p><strong>CSRF</strong></p><p>è·¨ç«™è¯·æ±‚ä¼ªé€ </p><p>æ”»å‡»è€…ç›—ç”¨äº†ä½ çš„èº«ä»½ï¼Œä»¥ä½ çš„åä¹‰å‘é€æ¶æ„è¯·æ±‚ã€‚CSRFèƒ½å¤Ÿåšçš„äº‹æƒ…åŒ…æ‹¬ï¼šä»¥ä½ åä¹‰å‘é€é‚®ä»¶ï¼Œå‘æ¶ˆæ¯ï¼Œç›—å–ä½ çš„è´¦å·ï¼Œç”šè‡³äºè´­ä¹°å•†å“ï¼Œè™šæ‹Ÿè´§å¸è½¬è´¦â€¦é€ æˆçš„é—®é¢˜åŒ…æ‹¬ï¼šä¸ªäººéšç§æ³„éœ²ä»¥åŠè´¢äº§å®‰å…¨ã€‚</p><ol><li>ç™»å½•å—ä¿¡ä»»ç½‘ç«™Aï¼Œå¹¶åœ¨æœ¬åœ°ç”ŸæˆCookie</li><li>åœ¨ä¸ç™»å‡ºAçš„æƒ…å†µä¸‹ï¼Œè®¿é—®å±é™©ç½‘ç«™B</li></ol><p><strong>Node.jsçš„é€‚ç”¨åœºæ™¯ï¼Ÿ</strong></p><p>é«˜å¹¶å‘ã€èŠå¤©ã€å®æ—¶æ¶ˆæ¯æ¨é€</p><p> <strong>404ã€500ã€301 åˆ†åˆ«æ˜¯ä»€ä¹ˆ</strong></p><p>100-199 ç”¨äºæŒ‡å®šå®¢æˆ·ç«¯åº”ç›¸åº”çš„æŸäº›åŠ¨ä½œã€‚</p><p>   200-299 ç”¨äºè¡¨ç¤ºè¯·æ±‚æˆåŠŸã€‚</p><p>   300-399 ç”¨äºå·²ç»ç§»åŠ¨çš„æ–‡ä»¶å¹¶ä¸”å¸¸è¢«åŒ…å«åœ¨å®šä½å¤´ä¿¡æ¯ä¸­æŒ‡å®šæ–°çš„åœ°å€ä¿¡æ¯ã€‚</p><p>   400-499 ç”¨äºæŒ‡å‡ºå®¢æˆ·ç«¯çš„é”™è¯¯ã€‚400    1ã€è¯­ä¹‰æœ‰è¯¯ï¼Œå½“å‰è¯·æ±‚æ— æ³•è¢«æœåŠ¡å™¨ç†è§£ã€‚401   å½“å‰è¯·æ±‚éœ€è¦ç”¨æˆ·éªŒè¯ 403  æœåŠ¡å™¨å·²ç»ç†è§£è¯·æ±‚ï¼Œä½†æ˜¯æ‹’ç»æ‰§è¡Œå®ƒã€‚</p><p>   500-599 ç”¨äºæ”¯æŒæœåŠ¡å™¨é”™è¯¯ã€‚ 503 â€“ æœåŠ¡ä¸å¯ç”¨</p><p>301ï¼šæ°¸ä¹…ç§»åŠ¨ï¼ˆç½‘é¡µç§»åŠ¨åˆ°æ–°çš„ä½ç½®ï¼‰</p><p>302ï¼šä¸´æ—¶ç§»åŠ¨</p><p>400ï¼šé”™è¯¯è¯·æ±‚ï¼ˆæœåŠ¡å™¨ä¸ç†è§£è¯·æ±‚çš„è¯­æ³•ï¼‰</p><p>403ï¼šæœåŠ¡å™¨æ‹’ç»è¯·æ±‚</p><p>404ï¼šæœåŠ¡å™¨æ‰¾ä¸åˆ°è¯·æ±‚çš„ç½‘é¡µ</p><p>500ï¼šæœåŠ¡å™¨å†…éƒ¨é”™è¯¯ï¼Œæ— æ³•å®Œæˆè¯·æ±‚</p><p>502ï¼šé”™è¯¯ç½‘å…³</p><p><strong>å‡ ç§CSSå¸ƒå±€æ–¹å¼åŠå…¶ç‰¹ç‚¹</strong>ã€‚ </p><p>ç­”æ¡ˆï¼šå¸¸è§çš„CSSå¸ƒå±€æ–¹å¼åŒ…æ‹¬æµ®åŠ¨ã€å®šä½ã€å¼¹æ€§å¸ƒå±€å’Œç½‘æ ¼å¸ƒå±€ã€‚</p><p> <strong>404ã€500 é”™è¯¯å¦‚ä½•æ£€æŸ¥</strong></p><p>\21. ä¸´æ—¶é‡å®šå‘æ˜¯ä»€ä¹ˆï¼ŒäºŒè€…åŒºåˆ«<br>\22. http 2.0<br>\23. React æ²¡å­¦è¿‡å—<br>\24. vue å¦‚ä½•å®ç°å“åº”å¼<br>\25. v-if å’Œ v-show åŒºåˆ«<br>\26. ç»„ä»¶é—´é€šä¿¡æ–¹å¼<br>\27. æ€§èƒ½ä¼˜åŒ–ï¼ˆä½¿ç”¨å¼‚æ­¥è¯·æ±‚)<br>\28. ç»™è¯·æ±‚æ’åº</p><p><strong>æ¡†æ¶ vueå’Œreactçš„å¼‚åŒ</strong></p><p>ä¸€ã€åŒ</p><p>â‘ éƒ½ä½¿ç”¨è™šæ‹Ÿdomã€‚<br>â‘¡æä¾›äº†å“åº”å¼å’Œç»„ä»¶åŒ–çš„è§†å›¾ç»„ä»¶ã€‚<br>â‘¢æŠŠæ³¨æ„åŠ›é›†ä¸­ä¿æŒåœ¨æ ¸å¿ƒåº“ï¼Œè€Œå°†å…¶ä»–åŠŸèƒ½å¦‚è·¯ç”±å’Œå…¨å±€çŠ¶æ€ç®¡ç†äº¤ç»™ç›¸å…³çš„åº“ã€‚</p><p>äºŒã€å¼‚</p><p>vueï¼š1ã€æ¸è¿›å¼æ¡†æ¶ã€è‡ªåº•å‘ä¸Šå¢é‡å¼€å‘</p><p>â€‹          2ã€å¯ä»¥åœ¨ä»»æ„å…¶ä»–ç±»å‹çš„é¡¹ç›®ä¸­ä½¿ç”¨ï¼Œä½¿ç”¨æˆæœ¬è¾ƒä½ï¼Œæ›´çµæ´»ï¼Œä¸»å¼ è¾ƒå¼±</p><p>3ã€æ˜“ç”¨ï¼ˆä½¿ç”¨æˆæœ¬ä½ï¼‰ï¼Œçµæ´»ï¼ˆç”Ÿæ€ç³»ç»Ÿå®Œå–„ï¼Œé€‚ç”¨äºä»»ä½•è§„æ¨¡çš„é¡¹ç›®ï¼‰ï¼Œé«˜æ•ˆï¼ˆä½“ç§¯å°ï¼Œä¼˜åŒ–å¥½ï¼Œæ€§èƒ½å¥½ï¼‰</p><p>reactï¼šä¸»å¼ æ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„ç†å¿µï¼Œ å®ç°äº†å‰ç«¯ç•Œé¢çš„é«˜æ€§èƒ½é«˜æ•ˆç‡å¼€å‘ï¼Œreactå¾ˆæ“…é•¿å¤„ç†ç»„ä»¶åŒ–çš„é¡µé¢ã€‚åœ¨ React ä¸­ï¼Œæ‰€æœ‰çš„ç»„ä»¶çš„æ¸²æŸ“åŠŸèƒ½éƒ½ä¾é  JSXï¼Œå®ƒæ˜¯JavaScriptçš„è¯­æ³•æ‰©å±•ï¼Œå®ƒåœ¨åˆ›å»ºUIç»„ä»¶å’Œè°ƒè¯•æ—¶éå¸¸ç®€å•æœ‰ç”¨ã€‚</p><p>ä¸‰ã€æ€»ç»“</p><p>1ã€Reactï¼šæ•´ä½“æ˜¯å‡½æ•°å¼çš„æ€æƒ³ï¼Œåœ¨reactä¸­ï¼Œæ˜¯å•å‘æ•°æ®æµï¼Œæ¨å´‡ç»“åˆimmutableæ¥å®ç°æ•°æ®ä¸å¯å˜ã€‚<br>Vueï¼šçš„æ€æƒ³æ˜¯å“åº”å¼çš„ï¼Œä¹Ÿå°±æ˜¯åŸºäºæ˜¯æ•°æ®å¯å˜çš„ï¼Œé€šè¿‡å¯¹æ¯ä¸€ä¸ªå±æ€§å»ºç«‹Watcheræ¥ç›‘å¬ï¼Œå½“å±æ€§å˜åŒ–çš„æ—¶å€™ï¼Œå“åº”å¼çš„æ›´æ–°å¯¹åº”çš„è™šæ‹Ÿdomã€‚</p><p>2ã€Reactï¼šæ€è·¯æ˜¯all in jsï¼Œé€šè¿‡jsæ¥ç”Ÿæˆhtmlï¼Œæ‰€ä»¥è®¾è®¡äº†jsxï¼Œè¿˜æœ‰é€šè¿‡jsæ¥æ“ä½œcssï¼Œç¤¾åŒºçš„styled-componentã€jssç­‰ã€‚<br>Vueï¼šæŠŠhtmlï¼Œcssï¼Œjsç»„åˆåˆ°ä¸€èµ·ï¼Œç”¨å„è‡ªçš„å¤„ç†æ–¹å¼ï¼ŒVueæœ‰å•æ–‡ä»¶ç»„ä»¶ï¼Œå¯ä»¥æŠŠhtmlã€cssã€jså†™åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œhtmlæä¾›äº†æ¨¡æ¿å¼•æ“æ¥å¤„ç†ã€‚</p><p>3ã€å½“ç»„ä»¶çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒReactçš„æœºåˆ¶ä¼šè§¦å‘æ•´ä¸ªç»„ä»¶æ ‘çš„é‡æ–°å‘ˆç°ã€‚æ‚¨å¯èƒ½éœ€è¦ä½¿ç”¨é¢å¤–çš„å±æ€§æ¥é¿å…ä¸å¿…è¦åœ°é‡æ–°æ¸²æŸ“å­ç»„ä»¶ã€‚è™½ç„¶Vueçš„é‡æ–°æ¸²æŸ“åŠŸèƒ½æ˜¯å¼€ç®±å³ç”¨çš„ï¼Œä½†Vueæä¾›äº†ä¼˜åŒ–çš„é‡æ–°æ¸²æŸ“ï¼Œå…¶ä¸­ç³»ç»Ÿåœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­è·Ÿè¸ªä¾èµ–å…³ç³»å¹¶ç›¸åº”åœ°å·¥ä½œã€‚é‡æ–°æ¸²æŸ“æ˜¯Vueæœ€æ˜¾ç€çš„ç‰¹å¾ï¼Œä¹Ÿä½¿å…¶æˆä¸ºå…¨ä¸–ç•Œå¼€å‘äººå‘˜å¹¿æ³›æ¥å—çš„æ¡†æ¶ã€‚</p><p>4ã€reactæ˜¯ç±»å¼çš„å†™æ³•ï¼Œapiå¾ˆå°‘ï¼Œè€ŒVueæ˜¯å£°æ˜å¼çš„å†™æ³•ï¼Œé€šè¿‡ä¼ å…¥å„ç§optionsï¼Œapiå’Œå‚æ•°éƒ½å¾ˆå¤šã€‚æ‰€ä»¥reactç»“åˆtypescriptæ›´å®¹æ˜“ä¸€èµ·å†™ï¼ŒVueç¨å¾®å¤æ‚ã€‚</p><p>æ‰‹å†™é˜²æŠ–èŠ‚æµ</p><p><strong>æµè§ˆå™¨æ€§èƒ½ä¼˜åŒ–ç­–ç•¥</strong></p><p>ä¸€ã€æ„ŸçŸ¥æ€§èƒ½ä¼˜åŒ–ï¼ˆloadingå›¾æ ‡æˆ–è€…éª¨æ¶å±ï¼‰</p><p>å¦‚æœä¸€ä¸ªé¡µé¢çš„åŠ è½½æ—¶é—´å¾ˆé•¿ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ä¸€äº›æ–¹å¼è®©ç”¨æˆ·è§‰å¾—æ²¡æœ‰é‚£ä¹ˆæ…¢ã€‚</p><p>äºŒã€HTMLä¼˜åŒ–</p><p>1ã€HTMLä»£ç å‹ç¼©ï¼Œå°†æ³¨é‡Šã€ç©ºæ ¼å’Œæ–°è¡Œä»ç”Ÿäº§æ–‡ä»¶ä¸­åˆ é™¤ã€‚å‡å°‘HTMLçš„å¤§å°ï¼ŒåŠ å¿«ç½‘ç«™çš„é¡µé¢åŠ è½½æ—¶é—´ï¼Œå¹¶æ˜¾è‘—å‡å°‘ç”¨æˆ·çš„ä¸‹è½½æ—¶é—´ã€‚ </p><p>2ã€åˆ é™¤ä¸å¿…è¦çš„æ³¨é‡Š</p><p>3ã€åˆ é™¤ä¸å¿…è¦çš„å±æ€§ï¼š <code>type=&quot;text/javascript&quot;</code> or <code>type=&quot;text/css&quot;</code> </p><p>4ã€ä½¿ç”¨è¯­ä¹‰åŒ–æ ‡ç­¾<img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240513150309276.png" alt="image-20240513150309276" style="zoom:33%;" /></p><p>æ˜“äºç”¨æˆ·é˜…è¯»ï¼Œæ ·å¼ä¸¢å¤±çš„æ—¶å€™èƒ½è®©é¡µé¢å‘ˆç°æ¸…æ™°çš„ç»“æ„ã€‚</p><p>æœ‰åˆ©äºSEOï¼Œæœç´¢å¼•æ“æ ¹æ®æ ‡ç­¾æ¥ç¡®å®šä¸Šä¸‹æ–‡å’Œå„ä¸ªå…³é”®å­—çš„æƒé‡ã€‚</p><p>æ–¹ä¾¿å…¶ä»–è®¾å¤‡è§£æï¼Œå¦‚ç›²äººé˜…è¯»å™¨æ ¹æ®è¯­ä¹‰æ¸²æŸ“ç½‘é¡µ</p><p>æœ‰åˆ©äºå¼€å‘å’Œç»´æŠ¤ï¼Œè¯­ä¹‰åŒ–æ›´å…·å¯è¯»æ€§ï¼Œä»£ç æ›´å¥½ç»´æŠ¤ï¼Œä¸CSS3å…³ç³»æ›´å’Œè°ã€‚</p><p>5ã€å‡å°‘iframeæ•°é‡</p><p>6ã€å‰Šå‡DOMæ•°é‡å’Œå±‚çº§æ•°é‡</p><p>7ã€å‡å°‘HTTPè¯·æ±‚æ¬¡æ•°ï¼ˆå°†å¤šä¸ª CSS å’Œ JavaScript æ–‡ä»¶åˆå¹¶ä¸ºä¸€ä¸ªæ–‡ä»¶ï¼‰</p><p>ä¸‰ã€JSä¼˜åŒ–</p><p>1ã€<script>æ ‡ç­¾å°½é‡å°½å¯èƒ½æ”¾åˆ°<body>æ ‡ç­¾çš„åº•éƒ¨ã€‚</p><p>2ã€å°½é‡å‡å°‘ DOM æ“ä½œçš„æ¬¡æ•°å’Œå¤æ‚åº¦ï¼Œå¯ä»¥æé«˜é¡µé¢çš„å“åº”é€Ÿåº¦å’Œæ€§èƒ½ã€‚</p><p>3ã€åˆ é™¤é‡å¤çš„è„šæœ¬</p><p>4ã€èŠ‚æµä¸é˜²æŠ–ï¼šæ—¥å¸¸å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæ»šåŠ¨äº‹ä»¶åšå¤æ‚è®¡ç®—é¢‘ç¹è°ƒç”¨å›è°ƒå‡½æ•°å¾ˆå¯èƒ½ä¼šé€ æˆé¡µé¢çš„å¡é¡¿ï¼Œè¿™æ—¶å€™æˆ‘ä»¬æ›´å¸Œæœ›æŠŠå¤šæ¬¡è®¡ç®—åˆå¹¶æˆä¸€æ¬¡ï¼Œåªæ“ä½œä¸€ä¸ªç²¾ç¡®ç‚¹ï¼ŒJSæŠŠè¿™ç§æ–¹å¼ç§°ä¸ºdebounceï¼ˆé˜²æŠ–ï¼‰å’Œthrottleï¼ˆèŠ‚æµï¼‰ã€‚</p><p>5ã€</p><p>å››ã€CSSä¼˜åŒ–</p><p>1ã€å°‘ç”¨@importï¼ˆå½±å“æµè§ˆå™¨çš„å¹¶è¡Œä¸‹è½½ã€å¯¼è‡´ä¸‹è½½é¡ºåºç´Šä¹±ï¼‰</p><p>2ã€é¿å…ï¼importanté€‰æ‹©å™¨ï¼ˆç ´åäº†æ ·å¼è¡¨ä¸­å›ºæœ‰çš„çº§è”è§„åˆ™ã€å°½é‡é è¿‘htmlæˆ–bodyå…ƒç´ ï¼‰</p><p>3ã€ä¸åœ¨idé€‰æ‹©å™¨ä¹‹å‰åµŒå¥—å…¶ä»–çš„é€‰æ‹©å™¨</p><p>4ã€å‹ç¼©CSSæ–‡ä»¶</p><p>5ã€CSSå±‚çº§åµŒå¥—å°½é‡ä¸è¶…è¿‡ä¸‰å±‚</p><p>äº”ã€å›¾ç‰‡ä¼˜åŒ–</p><p>1ã€æ ¹æ®å®é™…éœ€è¦å‹ç¼©ç…§ç‰‡</p><p>2ã€å°å›¾ç‰‡å¼•å…¥é›ªç¢§å›¾</p><p>3ã€å›¾ç‰‡æ‡’åŠ è½½</p><p><strong>React</strong>ä¸­çš„ç»„ä»¶ç”Ÿå‘½å‘¨æœŸæœ‰å“ªäº›é˜¶æ®µï¼Ÿ ç­”æ¡ˆï¼šåœ¨Reactä¸­ï¼Œç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸåˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼šæŒ‚è½½é˜¶æ®µã€æ›´æ–°é˜¶æ®µå’Œå¸è½½é˜¶æ®µã€‚</p><p><strong>vue ç”Ÿå‘½å‘¨æœŸ</strong></p><p>Vue å®ä¾‹æœ‰â¼€ä¸ªå®Œæ•´çš„â½£å‘½å‘¨æœŸï¼Œä¹Ÿå°±æ˜¯ä»å¼€å§‹åˆ›å»ºã€åˆå§‹åŒ–æ•°æ®ã€ç¼–è¯‘æ¨¡ç‰ˆã€æŒ‚è½½Dom -> æ¸²æŸ“ã€æ›´æ–° -> æ¸²æŸ“ã€å¸è½½ ç­‰â¼€ç³»åˆ—è¿‡ç¨‹ï¼Œç§°è¿™æ˜¯Vueçš„â½£å‘½å‘¨æœŸã€‚</p><p>ä»€ä¹ˆæ˜¯äº‹ä»¶ä»£ç†</p><p>vue2å’Œvue3å“åº”å¼çš„åŒºåˆ«</p><p>vue2ç»„ä»¶é—´é€šä¿¡æ–¹å¼</p>]]></content>
    
    
    <categories>
      
      <category>å…«è‚¡é¢ç»</category>
      
    </categories>
    
    
    <tags>
      
      <tag>C++</tag>
      
      <tag>å‰ç«¯</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>DFSåˆ·é¢˜è®°å½•</title>
    <link href="/2024/05/04/DFS%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/"/>
    <url>/2024/05/04/DFS%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<p>DFSï¼šå¹¿åº¦ä¼˜å…ˆæœç´¢</p><span id="more"></span><h3 id="ä¸€ã€åˆ†ç³–æœ"><a href="#ä¸€ã€åˆ†ç³–æœ" class="headerlink" title="ä¸€ã€åˆ†ç³–æœ"></a>ä¸€ã€åˆ†ç³–æœ</h3><p>â€‹       å‡å¦‚æœ‰æœ‰ä¸¤ç§ç³–æœï¼Œæ¯ç§åˆ†åˆ«æœ‰må’Œqä¸ªï¼Œè¦åˆ†ç»™kä¸ªäººï¼Œå¹¶ä¸”æ¯ä¸ªäººæ‰‹ä¸Šçš„ç³–æœä¸å°‘äº2ä¸ªä¸å¤šäº5ä¸ªï¼Œä¸€å…±æœ‰å¤šå°‘ç§åˆ†æ³•ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-type">int</span> res;<br><span class="hljs-type">int</span> k,m,q;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> n,<span class="hljs-type">int</span> a,<span class="hljs-type">int</span> b)</span></span><br><span class="hljs-function"></span>&#123;<br>  <span class="hljs-keyword">if</span>(n==k)<br>    <span class="hljs-keyword">if</span>(a==m&amp;&amp;b==q)  res++;  <span class="hljs-comment">//åˆ†å¥½äº†</span><br>    <span class="hljs-keyword">return</span>;  <span class="hljs-comment">//nè‹¥å·²è¾¾åˆ°kï¼Œä¸ç®¡æœ‰æ²¡æœ‰åˆ†å¥½éƒ½éœ€è¦return</span><br>  <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;=m;i++)<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">0</span>;j&lt;=q;j++)<br>      <span class="hljs-keyword">if</span>(i+j&gt;=<span class="hljs-number">2</span>&amp;&amp;i+j&lt;=<span class="hljs-number">5</span>)<br>        <span class="hljs-built_in">dfs</span>(n+<span class="hljs-number">1</span>,a+i,b+j);<br>  <span class="hljs-keyword">return</span>;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>  cin&gt;&gt;k&gt;&gt;m&gt;&gt;q;<br>  <span class="hljs-built_in">dfs</span>(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>);<br>  cout&lt;&lt;res&lt;&lt;endl;<br>&#125;<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>C++</category>
      
    </categories>
    
    
    <tags>
      
      <tag>C++</tag>
      
      <tag>DFS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>KMPç®—æ³•è¯¦è§£+å›¾ç¤ºï¼ˆé™„ä¼˜åŒ–ç‰ˆï¼‰</title>
    <link href="/2024/04/25/KMP%E7%AE%97%E6%B3%95%E8%AF%A6%E8%A7%A3+%E5%9B%BE%E7%A4%BA%EF%BC%88%E9%99%84%E4%BC%98%E5%8C%96%E7%89%88%EF%BC%89/"/>
    <url>/2024/04/25/KMP%E7%AE%97%E6%B3%95%E8%AF%A6%E8%A7%A3+%E5%9B%BE%E7%A4%BA%EF%BC%88%E9%99%84%E4%BC%98%E5%8C%96%E7%89%88%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h3 id="ä¸€ã€KMPç®—æ³•çš„æ„ä¹‰"><a href="#ä¸€ã€KMPç®—æ³•çš„æ„ä¹‰" class="headerlink" title="ä¸€ã€KMPç®—æ³•çš„æ„ä¹‰"></a>ä¸€ã€KMPç®—æ³•çš„æ„ä¹‰</h3><p>â€‹åœ¨æ±‚è§£è¿™æ ·çš„ç®—æ³•é—®é¢˜æ—¶ï¼šå·²çŸ¥ä¸¤ä¸ªå­—ç¬¦ä¸²s1å’Œs2ï¼Œå…¶ä¸­s2æ˜¯s1çš„å­—ä¸²ï¼Œè¯·æ‰¾åˆ°s2åœ¨s1ä¸­çš„ä½ç½®ã€‚ä¼ ç»Ÿçš„å¯»æ‰¾æ–¹æ³•å³æš´åŠ›è§£æ³•ï¼šåˆ†åˆ«ä»ä¸¤ä¸ªå­—ä¸²çš„ç¬¬ä¸€ä¸ªå­—ç¬¦å¼€å§‹æ‰¾èµ·ï¼Œè‹¥å¯ä»¥åŒ¹é…å°±ç»§ç»­ä¸‹ä¸€ä¸ªå­—ç¬¦ï¼›è‹¥åŒ¹é…å¤±è´¥ï¼Œs1å›æº¯åˆ°ç¬¬äºŒä¸ªå­—ç¬¦ï¼Œs2å›æº¯åˆ°ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼Œä¾æ­¤ç±»æ¨â€¦â€¦</p><p>â€‹æš´åŠ›è§£æ³•åœ¨å­—ä¸²é•¿åº¦è¿‡å¤§æ—¶å¾€å¾€æ—¶é—´å¤æ‚åº¦å¾ˆé«˜ï¼Œè€Œå…¶ä¸»è¦åŸå› æ˜¯å› ä¸ºå›æº¯çš„æ¬¡æ•°å¤ªå¤šï¼Œè€ŒKMPç®—æ³•çš„ä½œç”¨å°±æ˜¯ç”¨å·²çŸ¥çš„ä¿¡æ¯é‡å»å°½å¯èƒ½å‡å°‘å›æº¯æ¬¡æ•°ï¼Œè¾¾åˆ°ç®€æ´ä¸”è¿…é€Ÿçš„æ•ˆæœã€‚</p><h3 id="äºŒã€KMPç®—æ³•çš„æ­¥éª¤"><a href="#äºŒã€KMPç®—æ³•çš„æ­¥éª¤" class="headerlink" title="äºŒã€KMPç®—æ³•çš„æ­¥éª¤"></a>äºŒã€KMPç®—æ³•çš„æ­¥éª¤</h3><h4 id="1-è®¡ç®—å­—ç¬¦ä¸²ä¸­æ¯ä¸ªä½ç½®ä¹‹å‰å­—ä¸²çš„æœ€é•¿ç›¸ç­‰å‰åç¼€é•¿åº¦"><a href="#1-è®¡ç®—å­—ç¬¦ä¸²ä¸­æ¯ä¸ªä½ç½®ä¹‹å‰å­—ä¸²çš„æœ€é•¿ç›¸ç­‰å‰åç¼€é•¿åº¦" class="headerlink" title="1.è®¡ç®—å­—ç¬¦ä¸²ä¸­æ¯ä¸ªä½ç½®ä¹‹å‰å­—ä¸²çš„æœ€é•¿ç›¸ç­‰å‰åç¼€é•¿åº¦"></a>1.è®¡ç®—å­—ç¬¦ä¸²ä¸­æ¯ä¸ªä½ç½®ä¹‹å‰å­—ä¸²çš„æœ€é•¿ç›¸ç­‰å‰åç¼€é•¿åº¦</h4><p>ï¼ˆ1ï¼‰æœ€é•¿ç›¸ç­‰å‰åç¼€çš„æ¦‚å¿µ</p><p>â€‹å·²çŸ¥ä¸€ä¸ªå­—ç¬¦ä¸²abaaba,å®ƒçš„å‰ç¼€å­—ä¸²å’Œåç¼€å­—ä¸²åˆ†åˆ«ä¸ºï¼š</p><p>å‰ç¼€ï¼ša,ab,<strong>aba</strong>,abaa,abaab;</p><p>åç¼€ï¼ša,ba,<strong>aba</strong>,aaba,baaba;</p><p>â€‹é‚£ä¹ˆå¾ˆæ˜æ˜¾ï¼Œabaæ˜¯å®ƒçš„æœ€é•¿ç›¸ç­‰å‰åç¼€ï¼Œå³è¿™ä¸ªå­—ç¬¦ä¸²çš„æœ€é•¿ç›¸ç­‰å‰åç¼€é•¿åº¦ä¸º3ã€‚</p><p>ï¼ˆ2ï¼‰next[n]æ•°ç»„</p><p>â€‹å¯¹äºå­—ç¬¦ä¸²abaabacï¼Œæˆ‘ä»¬æƒ³è¦ç”¨æ•°ç»„next[n]ä¸­çš„å…ƒç´ next[i]æ¥ä¿å­˜å­—ç¬¦ä¸²ç¬¬iä¸ªå­—ç¬¦å‰çš„å­—ä¸²çš„æœ€é•¿ç›¸ç­‰å‰åç¼€çš„é•¿åº¦ã€‚</p><p>â€‹é¦–å…ˆï¼Œæˆ‘ä»¬è§„å®šnext[0]&#x3D;-1ï¼ˆå‰é¢æ²¡æœ‰å­—ä¸²ï¼‰ï¼Œnext[1]&#x3D;0(å­—ä¸²æ²¡æœ‰å‰åç¼€)ã€‚é‚£ä¹ˆå°±å¯ä»¥å¾—åˆ°next[n]çš„å€¼ï¼š</p><p>â€‹ abaabac</p><p>next[0]  [1] [2]      [3]     [4]      [5]     [6]</p><p>â€‹    -1    0    0    1    1    2        3</p><h4 id="2-æ ¹æ®nextæ•°ç»„ï¼Œå¯¹å­—ä¸²è¿›è¡ŒåŒ¹é…"><a href="#2-æ ¹æ®nextæ•°ç»„ï¼Œå¯¹å­—ä¸²è¿›è¡ŒåŒ¹é…" class="headerlink" title="2.æ ¹æ®nextæ•°ç»„ï¼Œå¯¹å­—ä¸²è¿›è¡ŒåŒ¹é…"></a>2.æ ¹æ®nextæ•°ç»„ï¼Œå¯¹å­—ä¸²è¿›è¡ŒåŒ¹é…</h4><p>â€‹åˆ›å»ºå¦‚ä¸‹å›¾æ‰€ç¤ºçš„ä¸¤ä¸ªå­—ç¬¦ä¸²ã€‚</p><p>â€‹å·²çŸ¥åœ¨è¿›è¡Œå‰å…­ä¸ªå­—ç¬¦çš„åŒ¹é…æ—¶ï¼Œç”±äºéƒ½èƒ½å¤ŸåŒ¹é…æˆåŠŸï¼Œå› æ­¤ç®­å¤´åŒæ­¥å‘å³ç§»åŠ¨ã€‚å½“åŒ¹é…åˆ°å¦‚å›¾æ‰€ç¤ºçš„ä½ç½®æ—¶ï¼ŒåŒ¹é…å¤±è´¥äº†ã€‚å¦‚æœæŒ‰ç…§æš´åŠ›è§£æ³•ï¼Œé‚£ä¹ˆä¸Šé¢çš„å­—ç¬¦ä¸²åº”è¯¥ä»ç¬¬ä¸€ä¸ªbå¼€å§‹åŒ¹é…ï¼Œè€Œå­ä¸²éœ€è¦ä»å¤´åŒ¹é…ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240425170716134.png" alt="image-20240425170716134"></p><p>â€‹è€ŒKMPç®—æ³•åˆ™åˆ©ç”¨ä¸Šä¸€æ­¥æˆ‘ä»¬æ±‚è§£çš„nextæ•°ç»„ï¼Œå·²çŸ¥å­ä¸²ä¸­å­—ç¬¦<strong>c</strong>çš„ä½ç½®æ˜¯6ï¼Œè€Œ<strong>next[6]&#x3D;3</strong>ã€‚å› æ­¤ä¸‹ä¸€æ¬¡åŒ¹é…æ—¶ï¼Œæˆ‘ä»¬ç›´æ¥ç§»åŠ¨å­ä¸²ï¼Œä½¿å¾—å­ä¸²ä½ç½®ä¸º<strong>3</strong>çš„å­—ç¬¦<strong>a</strong>å¯¹å‡†ç®­å¤´æ‰€åœ¨çš„åœ°æ–¹ï¼Œå¦‚å›¾ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240425171406127.png" alt="image-20240425171406127"></p><p>â€‹æ¥ä¸‹æ¥è®©æˆ‘ä»¬ç†è§£ä¸€ä¸‹è¿™ä¸€æ­¥çš„åŸç†æ˜¯ä»€ä¹ˆã€‚æˆ‘ä¼šè®²è§£åœ°é€šä¿—ä¸€ç‚¹ï¼ˆå¯èƒ½æˆ‘çš„ç†è§£æ¯”è¾ƒæµ…æ˜¾ï¼Œä½†æ˜¯è¿™ä¸ªæ€è·¯æ˜¯å¯ä»¥å¼„æ¸…æ¥šè¿™ä¸ªç®—æ³•çš„ï¼‰ã€‚</p><p>â€‹æˆ‘ä»¬çŸ¥é“KMPç®—æ³•çš„ä½œç”¨æ˜¯è¦å‡å°‘å›æº¯çš„æ¬¡æ•°ï¼Œé‚£ä¹ˆå¦‚ä½•å‡å°‘å‘¢ï¼Ÿå½“æˆ‘ä»¬å·²ç»èµ°åˆ°å›¾ä¸€çš„ä½ç½®æ—¶ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“å‘ç°æŒ‰ç…§æš´åŠ›æ–¹æ³•å¾ˆæµªè´¹æ—¶é—´ï¼Œå› ä¸ºå¾ˆæ˜æ˜¾ç›´æ¥æŒ‰å›¾äºŒç§»åŠ¨æ˜¯æœ€æ–¹ä¾¿å¿«æ·çš„ã€‚ç”±äºå­—ç¬¦ä¸²çš„åŒ¹é…ä¸å¯èƒ½æ¯æ¬¡éƒ½è®©æˆ‘ä»¬ç”¨çœ¼ç›çœ‹åˆ°ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å°†ä¿¡æ¯å­˜å‚¨åœ¨æ•°ç»„é‡Œï¼Œéœ€è¦çš„æ—¶å€™å°±å¯ä»¥ä½¿ç”¨ã€‚è€Œnextæ•°ç»„å°±æ˜¯å­˜å‚¨è¿™ä¸ªé‡è¦ä¿¡æ¯çš„æ•°ç»„ã€‚æ¯”å¦‚åœ¨å›¾ä¸€çš„ä½ç½®ï¼Œnextæ•°ç»„å¯ä»¥å‘Šè¯‰ç¨‹åºï¼Œåœ¨å·²çŸ¥åŒ¹é…çš„å­—ç¬¦ä¸²ä¸­ï¼Œå‰ä¸‰ä½å­—ç¬¦å’Œåä¸‰ä½å­—ç¬¦æ˜¯ç›¸ç­‰çš„ã€‚è€Œæ­¤æ—¶åªæœ‰æœ€åä¸€ä½æ˜¯ä¸åŒ¹é…çš„ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠå‰ä¸‰ä½å¹³ç§»è¿‡æ¥ï¼Œé‚£ä¹ˆå°±å¯ä»¥å¾—åˆ°å›¾äºŒçš„ç»“æœï¼šæœ‰ä¸‰ä½å­—ç¬¦æ˜¯åŒ¹é…çš„ï¼Œç„¶åæˆ‘ä»¬ç»§ç»­åˆ¤æ–­ä¸‹ä¸€ä½æ˜¯å¦å’ŒpåŒ¹é…ã€‚æ—¢ç„¶æœ€å¤§ç›¸ç­‰å‰åç¼€å­—ç¬¦ä¸²çš„é•¿åº¦ä¸º3ï¼Œé‚£ä¹ˆå¯¹åº”çš„ï¼Œç®­å¤´å°±åº”è¯¥æŒ‡å‘å­ä¸²ä½ç½®ä¸º3çš„å­—ç¬¦ï¼ˆä»0è®¡ï¼‰ã€‚</p><p>â€‹ä»¥æ­¤ç±»æ¨ï¼Œç”±äºnext[3]&#x3D;1,é‚£ä¹ˆç›¸åº”çš„ï¼Œç®­å¤´åº”è¯¥æŒ‡å‘ç¬¬äºŒä¸ªå­—ç¬¦bã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240425172526743.png" alt="image-20240425172526743"></p><p>â€‹æ¥ä¸‹æ¥ï¼Œèªæ˜çš„ä½ åº”è¯¥çŸ¥é“ï¼Œç®­å¤´åº”è¯¥æŒ‡å‘aäº†ã€‚å¯æ˜¯è¿™æ—¶å€™ä»ç„¶æ˜¯ä¸åŒ¹é…çš„ï¼Œè€Œä¸”next[0]&#x3D;-1ï¼Œè¿™æ—¶å€™åº”è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿå¾ˆç®€å•ï¼Œè¿™æ—¶å€™åº”è¯¥å°†å­—ç¬¦ä¸²çš„ç®­å¤´å‘å³ç§»åŠ¨äº†ï¼Œè€Œå­ä¸²çš„ç®­å¤´ä½ç½®ä¸å˜ï¼Œå› ä¸ºå®ƒå·²ç»æŒ‡å‘å­—ä¸²çš„ç¬¬0ä¸ªå­—ç¬¦äº†ã€‚</p><h3 id="ä¸‰ã€KMPç®—æ³•çš„ä»£ç å®ç°"><a href="#ä¸‰ã€KMPç®—æ³•çš„ä»£ç å®ç°" class="headerlink" title="ä¸‰ã€KMPç®—æ³•çš„ä»£ç å®ç°"></a>ä¸‰ã€KMPç®—æ³•çš„ä»£ç å®ç°</h3><h4 id="1-è®¡ç®—nextæ•°ç»„"><a href="#1-è®¡ç®—nextæ•°ç»„" class="headerlink" title="1.è®¡ç®—nextæ•°ç»„"></a>1.è®¡ç®—nextæ•°ç»„</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">getnext</span><span class="hljs-params">(string s,<span class="hljs-type">int</span> next[])</span></span><br><span class="hljs-function"></span>&#123;<br>    next[<span class="hljs-number">0</span>]=<span class="hljs-number">-1</span>;<br>    <span class="hljs-type">int</span> i=<span class="hljs-number">0</span>,k=<span class="hljs-number">-1</span>;<br><span class="hljs-keyword">while</span>(i&lt;s.<span class="hljs-built_in">size</span>()<span class="hljs-number">-1</span>)&#123;<br>        <span class="hljs-keyword">if</span>(k==<span class="hljs-number">-1</span>||s[i]==s[k])&#123;<br>            i++,k++;<br>            next[i]=k;<br>        &#125;<br>        <span class="hljs-keyword">else</span>&#123;<br>            k=next[k];<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>â€‹è¿™ä¸ªå‡½æ•°çœŸçš„å¾ˆä¸å¥½ç†è§£ã€‚å¦‚æœè®©æˆ‘ç›´æ¥å»æƒ³è¿™ä¸ªä»£ç æˆ‘æ˜¯è‚¯å®šæƒ³ä¸åˆ°çš„ï¼Œå› æ­¤åªèƒ½å°±ç€ä»£ç ç†æ¸…æ€è·¯ï¼Œè¿™æ ·åšé¢˜çš„æ—¶å€™ä¸è‡³äºå¿˜è®°ã€‚</p><p>â€‹é¦–å…ˆï¼Œç”±äºkçš„åˆå§‹å€¼æ˜¯-1ï¼Œæ‰€ä»¥ä¸€å®šä¼šè¿›å…¥ifå‡½æ•°é‡Œï¼Œè¿™æ ·ä¸€æ¥ï¼Œnext[1]å°±è¢«èµ‹ä¸º0äº†ã€‚</p><p>â€‹å½“k&#x3D;-1æˆ–è€…s[i]&#x3D;s[k]çš„æ—¶å€™ï¼Œä¼šå°†iå’ŒkåŒæ—¶å³ç§»ã€‚æˆ‘ä»¬å…ˆåˆ†æï¼Œä»€ä¹ˆæ—¶å€™k&#x3D;-1å‘¢ï¼Ÿåªæœ‰ä¸Šä¸€æ¬¡å¾ªç¯æ—¶k&#x3D;0ï¼Œå¹¶ä¸”s[0]!&#x3D;s[i]æ—¶ï¼Œåœ¨k&#x3D;next[k]è¿™ä¸ªå…¬å¼é‡Œï¼Œæ‰ä¼šå°†kåˆèµ‹ä¸º-1ã€‚æ•…è€Œæ­¤æ—¶ï¼Œi+1å‰å¹¶æ— ç›¸ç­‰å‰åç¼€ï¼Œä¹Ÿå°±åˆå°†next[i+1]èµ‹ä¸º0ã€‚æ¥ç€ï¼Œåˆä¼šåˆ¤æ–­s[i+1]ä¸s[0]æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰ï¼Œåˆ™i+2å‰æœ€å¤§ç›¸ç­‰å‰åç¼€é•¿åº¦å°±ä¸º1äº†ã€‚</p><p>â€‹è‹¥å‰é¢å·²ç»æœ‰ç›¸ç­‰å‰åç¼€ï¼Œæ­¤æ—¶s[i]&#x3D;s[k]ï¼Œé‚£ä¹ˆç›¸å½“äºç›¸ç­‰å‰åç¼€çš„å»¶é•¿ï¼Œå› æ­¤så’Œkä¼šåŒæ—¶åç§»è§‚å¯Ÿä¸‹ä¸€ä½æ˜¯å¦ä¹Ÿç›¸ç­‰ã€‚</p><p>â€‹æ¯”è¾ƒå¤æ‚çš„æƒ…å†µå¦‚ä¸‹å›¾ï¼ˆç†è§£k&#x3D;next[k]ï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240425211350229.png" alt="image-20240425211350229"></p><p>â€‹å¦‚å›¾æ˜¯ä¸€ä¸²å­—ç¬¦ä¸²ï¼Œä¸‹æ ‡iå’Œnext[i]çš„å€¼åˆ†åˆ«åœ¨å…¶ä¸Šä¸‹æ ‡å‡ºã€‚åœ¨i&#x3D;6ï¼Œk&#x3D;3ä¹‹å‰ï¼Œå¯ä»¥å‘ç°æœ€å¤§å‰åç¼€æ˜¯3ï¼Œè€Œæ­¤æ—¶s[i]&#x3D;s[k]ä¸ç›¸ç­‰ã€‚è€Œè¿™ä¸ªå‡½æ•°çš„å…³é”®ä¹‹å¤„ï¼šk&#x3D;next[k]ï¼Œå°†kçš„å€¼æ”¹å˜æˆäº†1ï¼ˆnext[3]&#x3D;1)ã€‚æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œå¦‚æœå°†kå’Œiåˆ†åˆ«å‘å‰ç§»ä¸€ä½ï¼Œæ­¤æ—¶k&#x3D;0ï¼Œi&#x3D;5ï¼Œè€Œs[i]çš„å€¼åˆšå¥½ç­‰äºs[k]ã€‚è¿™å¹¶ä¸æ˜¯å·§åˆã€‚å› ä¸ºi&#x3D;6ä¹‹å‰æœ€å¤§å‰åç¼€é•¿åº¦ä¸º3ï¼Œä¹Ÿå°±æ˜¯è¯´æ˜å­—ç¬¦ä¸²å‰ä¸‰ä½å’Œi&#x3D;6ä¹‹å‰çš„ä¸‰ä½æ˜¯ç›¸ç­‰çš„ã€‚è€Œä¸‹æ ‡i&#x3D;3ä¹‹å‰çš„æœ€å¤§å‰åç¼€é•¿åº¦ä¸º1ï¼Œä¹Ÿå°±æ˜¯è¯´æ˜i&#x3D;0ã€i&#x3D;2ã€i&#x3D;3ã€i&#x3D;5è¿™å‡ ä¸ªæ•°çš„å€¼ä¹Ÿæ˜¯ç›¸ç­‰çš„ã€‚æ‰€ä»¥ç°åœ¨æˆ‘ä»¬å‘å‰å›æº¯åˆ°ï¼Œä¸i&#x3D;6ä¸ç›¸ç­‰çš„é‚£ä¸ªä¸‹æ ‡ï¼ˆæ­¤å¤„ä¸º3ï¼‰ä¹‹å‰çš„å­ä¸²ä¸­çš„ç›¸ç­‰å‰åç¼€ï¼Œå®ƒçš„é•¿åº¦å¯¹åº”çš„ä¸‹æ ‡å‰çš„å­ä¸²ä¸€å®šå’Œi&#x3D;6å‰çš„æŸä¸ªåç¼€ç›¸ç­‰ã€‚ç„¶åæˆ‘ä»¬ç»§ç»­æ¯”è¾ƒè¯¥ä¸‹æ ‡çš„å€¼å’Œi&#x3D;6å¤„çš„å€¼æ˜¯å¦ç›¸ç­‰ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p><p>â€‹å¦‚æœè¿˜æ˜¯ä¸å¤ªæ˜ç™½å¯ä»¥å¤šè¯•å‡ ä¸ªå­—ç¬¦ä¸²å¤šå¤šéªŒè¯å‡ æ¬¡ï¼Œæ¨å¯¼å‡ éï¼Œå°±ä¼šæ¸æ¸æ€è·¯æ¸…æ™°ã€‚ï¼ˆå…¶å®æˆ‘ä»¬ä¼šå‘ç°è¿™ä¸ªæ€æƒ³å’Œå‰é¢è®²åˆ°çš„KMPæ€æƒ³å¾ˆç±»ä¼¼ï¼‰</p><p>â€‹ps:whileå‡½æ•°ä¸­ä¹‹æ‰€ä»¥i&lt;s.size()-1ï¼Œæ˜¯å› ä¸ºæ¯æ¬¡éƒ½æ˜¯å…ˆi++å†èµ‹å€¼çš„ã€‚</p><h4 id="2-KMPç®—æ³•çš„ä»£ç "><a href="#2-KMPç®—æ³•çš„ä»£ç " class="headerlink" title="2.KMPç®—æ³•çš„ä»£ç "></a>2.KMPç®—æ³•çš„ä»£ç </h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">KMPinit</span><span class="hljs-params">(string s,string p)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">int</span> len=p.<span class="hljs-built_in">size</span>();<br>    <span class="hljs-type">int</span> next[len],i=<span class="hljs-number">0</span>,j=<span class="hljs-number">0</span>;<span class="hljs-comment">//åˆå§‹åŒ–</span><br>    <span class="hljs-built_in">getnext</span>(p,next);<span class="hljs-comment">//æ±‚å‡ºnextæ•°ç»„</span><br>    <span class="hljs-keyword">while</span>(i&lt;s.<span class="hljs-built_in">size</span>()&amp;&amp;j&lt;len)&#123;<span class="hljs-comment">//è·³å‡ºå¾ªç¯è¦ä¹ˆæ‰¾å®Œså­—ç¬¦ä¸²éƒ½æ²¡æ‰¾åˆ°ï¼Œè¦ä¹ˆå·²ç»æ‰¾å®Œäº†</span><br>        <span class="hljs-keyword">if</span>(j==<span class="hljs-number">-1</span>||s[i]==s[j])&#123;<span class="hljs-comment">//æ ¹æ®å›¾ç¤ºç†è§£</span><br>            i++,j++;<br>        &#125;<br>        <span class="hljs-keyword">else</span>&#123;<br>            j=next[j];<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">if</span>(j&gt;=len)&#123;<span class="hljs-comment">//å¦‚æœè·³å‡ºå¾ªç¯æ˜¯å› ä¸ºå·²ç»åŒ¹é…å®Œæ¯•ï¼Œé‚£ä¹ˆå°±å¯ä»¥è¿”å›ä½ç½®äº†</span><br>        <span class="hljs-type">int</span> index=i-len;<br>        <span class="hljs-keyword">return</span> index;<br>    &#125;<br>    <span class="hljs-keyword">else</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<span class="hljs-comment">//æ‰¾ä¸åˆ°åŒ¹é…é¡¹</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å››ã€KMPä»£ç çš„ä¼˜åŒ–"><a href="#å››ã€KMPä»£ç çš„ä¼˜åŒ–" class="headerlink" title="å››ã€KMPä»£ç çš„ä¼˜åŒ–"></a>å››ã€KMPä»£ç çš„ä¼˜åŒ–</h3><p>â€‹å‡è®¾å­ä¸²ä¸ºaaaaaabï¼Œå¹¶ä¸”å­—ç¬¦ä¸²ä¸ºaaaaaaccccã€‚æˆ‘ä»¬ä¼šå‘ç°bä¸cä¸åŒ¹é…ï¼Œæ¥ç€ä¾¿æ˜¯å‰ä¸€ä½çš„aä¸cè¿›è¡ŒåŒ¹é…ï¼Œä½†æ˜¯ä¾æ—§ä¸åŒ¹é…ï¼Œè€Œç´§æ¥ç€ä¼šå°†å‰é¢çš„aä¾æ¬¡ä¸cåŒ¹é…ï¼Œå¾—åˆ°çš„ç»“æœä»æ—§æ˜¯ä¸åŒ¹é…ï¼Œå› æ­¤å½“nextæ•°ç»„æŒ‡å‘çš„å­—ç¬¦å’Œå®ƒæœ¬èº«ç›¸ç­‰æ—¶ï¼Œä¾¿æ²¡æœ‰å¿…è¦å†åŒ¹é…ä¸‹å»ã€‚</p><p>â€‹æ‰€ä»¥æˆ‘ä»¬å¯ä»¥æŠŠnextå‡½æ•°åšä»¥ä¸‹ä¿®æ­£(KMPå‡½æ•°æ— éœ€æ”¹å˜)</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">getnext</span><span class="hljs-params">(string s,<span class="hljs-type">int</span> next[])</span></span><br><span class="hljs-function"></span>&#123;<br>    next[<span class="hljs-number">0</span>]=<span class="hljs-number">-1</span>;<br>    <span class="hljs-type">int</span> i=<span class="hljs-number">0</span>,k=<span class="hljs-number">-1</span>;<br><span class="hljs-keyword">while</span>(i&lt;s.<span class="hljs-built_in">size</span>()<span class="hljs-number">-1</span>)&#123;<br>        <span class="hljs-keyword">if</span>(k==<span class="hljs-number">-1</span>||s[i]==s[k])&#123;<br>            i++,k++;<br>            <span class="hljs-keyword">if</span>(s[i]!=s[k])<br>            next[i]=k;<br>            <span class="hljs-keyword">else</span><br>                next[i]=next[k];<br>        &#125;<br>        <span class="hljs-keyword">else</span>&#123;<br>            k=next[k];<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å‚è€ƒåšå®¢ï¼šCSDNï¼ˆå“ˆé¡¿ä¹‹å…‰ï¼‰</p>]]></content>
    
    
    <categories>
      
      <category>C++</category>
      
    </categories>
    
    
    <tags>
      
      <tag>C++</tag>
      
      <tag>KMP</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä¸ºåšå®¢é…ç½®walineè¯„è®ºæ¨¡å—éœ€è¦æ³¨æ„ä»€ä¹ˆ</title>
    <link href="/2024/04/22/%E4%B8%BA%E5%8D%9A%E5%AE%A2%E9%85%8D%E7%BD%AEwaline%E8%AF%84%E8%AE%BA%E6%A8%A1%E5%9D%97%E9%9C%80%E8%A6%81%E6%B3%A8%E6%84%8F%E4%BB%80%E4%B9%88/"/>
    <url>/2024/04/22/%E4%B8%BA%E5%8D%9A%E5%AE%A2%E9%85%8D%E7%BD%AEwaline%E8%AF%84%E8%AE%BA%E6%A8%A1%E5%9D%97%E9%9C%80%E8%A6%81%E6%B3%A8%E6%84%8F%E4%BB%80%E4%B9%88/</url>
    
    <content type="html"><![CDATA[<p>â€‹æƒ³è¦åœ¨Githubåšå®¢ä¸­éƒ¨ç½²ä¸€ä¸ªè¯„è®ºæ¨¡å—æœ‰è®¸å¤šé€‰æ‹©ï¼Œå…¶ä¸­walineæ˜¯åœ¨valineçš„åŸºç¡€ä¸Šè¡åŒ–è€Œæ¥ï¼Œå› æ­¤åŠŸèƒ½ä¹Ÿä¼šæ›´å¤šã€‚ä½†æ˜¯åœ¨è·Ÿç€å®˜æ–¹æ–‡æ¡£é…ç½®çš„æ—¶å€™éœ€è¦æ³¨æ„ä¸€äº›é—®é¢˜ï¼Œå¦åˆ™ä¼šä¸€ç›´å‡ºé”™ğŸ˜¿â€¦â€¦ï¼ˆå¦‚æœä½ å› fail to fetchè¿™ä¸ªé”™è¯¯è€Œæ¥ï¼Œé‚£çœŸæ˜¯æ‰¾å¯¹äººäº†ï¼‰</p><span id="more"></span><p>â€‹å…ˆé™„ä¸Šå®˜æ–¹æ•™ç¨‹æ–‡æ¡£ï¼š<a href="https://waline.js.org/guide/get-started/#vercel-%E9%83%A8%E7%BD%B2-%E6%9C%8D%E5%8A%A1%E7%AB%AF">å¿«é€Ÿä¸Šæ‰‹ | Waline</a></p><p>â€‹é¦–å…ˆè¦æ³¨æ„çš„æ˜¯åœ¨æ³¨å†ŒLeanCloudè´¦å·æ—¶æœ€å¥½æ³¨å†Œå›½é™…ç‰ˆï¼Œè¿™æ ·æ¯”è¾ƒæ–¹ä¾¿ã€‚</p><h3 id="ä¸€ã€verceléƒ¨ç½²éƒ¨åˆ†"><a href="#ä¸€ã€verceléƒ¨ç½²éƒ¨åˆ†" class="headerlink" title="ä¸€ã€verceléƒ¨ç½²éƒ¨åˆ†"></a>ä¸€ã€verceléƒ¨ç½²éƒ¨åˆ†</h3><h5 id="1-åˆ›å»ºé¡¹ç›®"><a href="#1-åˆ›å»ºé¡¹ç›®" class="headerlink" title="1.åˆ›å»ºé¡¹ç›®"></a>1.åˆ›å»ºé¡¹ç›®</h5><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240422144225513.png" alt="image-20240422144225513"></p><p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œé¦–å…ˆéœ€è¦ç‚¹å‡»Deployç„¶åè¿›è¡Œç™»å½•ï¼Œç™»é™†å®Œæˆä¹‹åï¼Œä¼šæ˜¾ç¤ºè¿™ä¸ªç•Œé¢ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240422144718930.png" alt="image-20240422144718930"></p><p>è¿™æ—¶æˆ‘ä¸€è„¸è’™ï¼Œäºæ˜¯å°±çœŸçš„éšä¾¿æ‰¾äº†ä¸€ä¸ªé¡¹ç›®creatäº†ï¼ˆé¡µé¢å’Œæ•™ç¨‹ä¸ä¸€æ ·ä½†æˆ‘å¹¶æœªåœ¨æ„ï¼‰â€¦â€¦</p><p>å…¶å®åº”è¯¥é€€å›åˆ°æ•™ç¨‹é¡µï¼Œå†ç‚¹ä¸€édeployï¼Œå°±å¯ä»¥å’Œæ•™ç¨‹ä¸€è‡´äº†ã€‚</p><h5 id="2-ç¯å¢ƒå˜é‡é…ç½®"><a href="#2-ç¯å¢ƒå˜é‡é…ç½®" class="headerlink" title="2.ç¯å¢ƒå˜é‡é…ç½®"></a>2.ç¯å¢ƒå˜é‡é…ç½®</h5><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240422145045708.png" alt="image-20240422145045708"></p><p>â€‹ç¬¬ä¸€æ¬¡çœ‹è¿™æ®µè¯çš„æ—¶å€™æˆ‘æœ‰ç‚¹ç–‘æƒ‘ï¼ŒåŠ ä¸Šè¿™æ—¶å€™è®¾ç½®çš„ç•Œé¢å’Œæ•™ç¨‹æœ‰ç»†å¾®å·®åˆ«ï¼Œæ‰€ä»¥æˆ‘çš„é…ç½®ä¹Ÿå‡ºé”™äº†ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæ­£ç¡®çš„é…ç½®åº”è¯¥æ˜¯KEYæ åˆ†åˆ«å†™å…¥LEAN_ID<code>, </code>LEAN_KEYå’ŒLEAN_MASTER_KEYï¼ŒValueæ åˆ†åˆ«å†™å…¥å®ƒä»¬ä¸‰ä¸ªçš„å€¼ã€‚ï¼ˆéœ€è¦add moreæ–°åˆ›å»ºä¸¤ä¸ªæ ï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240422145236754.png" alt="image-20240422145236754"></p><h5 id="3-è·å–æœåŠ¡ç«¯åœ°å€"><a href="#3-è·å–æœåŠ¡ç«¯åœ°å€" class="headerlink" title="3.è·å–æœåŠ¡ç«¯åœ°å€"></a>3.è·å–æœåŠ¡ç«¯åœ°å€</h5><p>â€‹æ•™ç¨‹ä¸­å†™åˆ°ï¼Œéƒ¨ç½²ç»“æŸåç‚¹å‡»visitåè·³è½¬åˆ°çš„ç½‘é¡µçš„ç½‘å€å³æ˜¯æœåŠ¡å™¨åœ°å€ï¼Œä¹Ÿå°±æ˜¯åé¢çš„serverURLï¼Œåœ¨HTMLæ–‡ä»¶éƒ¨ç½²çš„æ—¶å€™ä¹Ÿéœ€è¦ç”¨åˆ°ã€‚</p><p>â€‹é‡ç‚¹æ¥äº†ï¼ï¼ï¼ï¼åœ¨æˆ‘æŠŠæ‰€æœ‰ä¸œè¥¿å…¨éƒ¨éƒ¨ç½²ç»“æŸï¼Œä¸”ä¿è¯ç»å¯¹æ— è¯¯çš„æƒ…å†µä¸‹ï¼Œè™½ç„¶æˆ‘çš„åšå®¢ç½‘é¡µä¸Šå·²ç»å±•ç°å‡ºäº†è¯„è®ºçš„æ¨¡å—ï¼Œæˆ‘å±…ç„¶è¿˜æ˜¯è¯„è®ºä¸äº†ï¼ˆä¼šæ˜¾ç¤ºfail to fetchï¼‰â€¦â€¦ï¼ˆæ­¤æ—¶å¿ƒæ€å·²å´©ğŸ¤¯ï¼‰æˆ‘ååå¤å¤æ‰¾äº†å¾ˆä¹…çš„é”™è¯¯ï¼Œç¿»çœ‹äº†è§†é¢‘æ•™ç¨‹ä¸‹çš„è¯„è®ºï¼Œç»ˆäºå‘ç°äº†å’Œæˆ‘ä¸€æ ·é”™è¯¯çš„å‹å‹ã€‚ä»–è¯´åŸå› æ˜¯â€œ<strong>å®Œæˆåè®¿é—®çš„visitåœ°å€å’Œç¬¬äºŒæ¬¡åœ¨veré¡¹ç›®ä¸­æ‰“å¼€çš„serveråœ°å€ä¸ä¸€æ ·</strong>â€ã€‚æˆ‘åå¤ç¢ç£¨äº†å¾ˆä¹…ï¼Œå› ä¸ºæˆ‘åå¤ç‚¹å¼€visitï¼Œè¿™ä¸ªç½‘å€ä¸€ç›´ä¸å˜å•Šã€‚ã€‚ã€‚çªç„¶ï¼Œä¸€åˆ‡éƒ½å˜äº†ï¼ŒæŸä¸ªç¬é—´å½“æˆ‘ç‚¹å¼€visitæ—¶ï¼Œå®ƒå±…ç„¶æ˜¾ç¤ºç½‘é¡µåœæ­¢è®¿é—®ğŸ˜¨ã€‚æˆ‘ä¸‰åˆ†ç–‘æƒ‘å››åˆ†æ„¤æ€’åœ°åˆç‚¹å¼€äº†å¾ˆå¤šæ¬¡ï¼Œç»ˆäºå®ƒåŠ è½½å‡ºæ¥äº†ï¼Œå®šç›ä¸€çœ‹ç½‘é¡µçš„åŸŸåå±…ç„¶å˜äº†ğŸ˜‡ğŸ˜‡ğŸ˜‡ğŸ˜‡ğŸ˜‡ğŸ˜‡ğŸ˜‡</p><p>â€‹å½“æˆ‘æŠŠå˜åŒ–åçš„åŸŸåä»£æ›¿å…ˆå‰çš„åŸŸååï¼Œé”™è¯¯å°±è§£å†³äº†ï¼</p><h3 id="äºŒã€HTMLå¼•å…¥"><a href="#äºŒã€HTMLå¼•å…¥" class="headerlink" title="äºŒã€HTMLå¼•å…¥"></a>äºŒã€HTMLå¼•å…¥</h3><h5 id="1-æ‰¾åˆ°index-html"><a href="#1-æ‰¾åˆ°index-html" class="headerlink" title="1.æ‰¾åˆ°index.html"></a>1.æ‰¾åˆ°index.html</h5><p>â€‹ï¼ˆpsï¼šä¸çŸ¥é“ä¸åŒä¸»é¢˜æ˜¯å¦å¯¹è¿™ä¸ªé…ç½®æ–‡ä»¶åæœ‰å½±å“ï¼Œæˆ‘æ‰€ç”¨çš„æ˜¯fluidè¿™ä¸ªä¸»é¢˜ï¼‰</p><p>â€‹è¿™é‡Œæˆ‘åˆçŠ¯é”™äº†ï¼Œå› ä¸ºæˆ‘å‘ç°.deploy_gitå’Œpublicæ–‡ä»¶å¤¹ä¸‹éƒ½æœ‰ä¸€ä¸ªè¿™æ ·çš„æ–‡ä»¶ã€‚ç”±äºå…ˆå‰æˆ‘çŸ¥é“äº†æ¯æ¬¡hexo cleanåéƒ½ä¼šåˆ æ‰publicæ–‡ä»¶å¤¹ï¼Œå› æ­¤æˆ‘æ¯…ç„¶å†³ç„¶åœ°é€‰æ‹©ä¿®æ”¹äº†.deploy_gité‡Œçš„æ–‡ä»¶ã€‚äºæ˜¯æ¯æ¬¡éƒ¨ç½²ç½‘é¡µä¹‹åï¼Œæˆ‘éƒ½æƒŠå¥‡åœ°å‘ç°å›åˆ°è¿™ä¸ªæ–‡ä»¶åæˆ‘åšçš„ä¿®æ”¹éƒ½ç¦»å¥‡æ¶ˆå¤±äº†ã€‚ç›´åˆ°æˆ‘åœ¨hexo dæ—¶ä»”ç»†åœ°çœ‹äº†ä¸€çœ¼è¿è¡Œç»“æœï¼Œå‘ç°å®ƒèµ«ç„¶å†™ç€delete  .deploy_gitä»¥åŠä¿ç•™publicï¼Œæˆ‘çš„å°è„‘éƒ½èç¼©äº†ğŸ« ã€‚</p><p>â€‹å› æ­¤ç»“è®ºå°±æ˜¯ï¼Œä¸€å®šè¦<strong>ä¿®æ”¹publicæ–‡ä»¶å¤¹ä¸‹çš„index.htmlæ–‡ä»¶</strong>ï¼Œè¿™æ ·æ‰èƒ½ç”Ÿæ•ˆã€‚</p><h5 id="2-å¦‚ä½•ä¿®æ”¹"><a href="#2-å¦‚ä½•ä¿®æ”¹" class="headerlink" title="2.å¦‚ä½•ä¿®æ”¹"></a>2.å¦‚ä½•ä¿®æ”¹</h5><p>â€‹æ³¨æ„åœ¨ä¿®æ”¹çš„æ—¶å€™ä¸è¦æŠŠæ•™ç¨‹æ–‡æ¡£çš„æ‰€æœ‰ä»£ç å…¨éƒ¨ç²˜è´´è¿›htmlæ–‡ä»¶ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240422151514648.png" alt="image-20240422151514648"></p><p>â€‹ç¬¬ä¸€éƒ¨åˆ†ï¼šheadéƒ¨åˆ†ï¼Œåªå°†ä¸­é—´çš„é‚£ä¸€éƒ¨åˆ†æ·»åŠ å…¥è‡ªå·±htmlæ–‡ä»¶çš„headéƒ¨åˆ†é‡Œã€‚è®°å¾—ç¼©è¿›ä¸€å®šè¦è§„èŒƒã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240422151659178.png" alt="image-20240422151659178"></p><p>â€‹ç¬¬äºŒéƒ¨åˆ†ï¼šbodyéƒ¨åˆ†ã€‚æˆ‘ä»¬åœ¨htmlæ–‡ä»¶ä¸­æ‰¾åˆ°<body>åç‚¹å¼€æ–¹ä¾¿çš„ç¬¦å·å°±å¯ä»¥æŠ˜å ï¼Œè¿™æ ·å°±å¯ä»¥æ‰¾åˆ°bodyéƒ¨åˆ†çš„æœ«å°¾åœ¨å“ªé‡Œ<img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240422151922923.png" alt="image-20240422151922923"></p><p>è€Œç¬¬äºŒéƒ¨åˆ†æœ€å¥½æ·»åŠ è¿›bodyéƒ¨åˆ†çš„æœ€åé¢ã€‚ç”±äºæˆ‘çš„æ–‡ä»¶é‡Œå†™é“è¦æŠŠæŸéƒ¨åˆ†ä¿ç•™åœ¨æœ€åï¼Œå› æ­¤è¿™ä¸€éƒ¨åˆ†ä»£ç æˆ‘å°±æ”¾åœ¨é‚£éƒ¨åˆ†å‰é¢äº†ã€‚ä»ç„¶è¦æ³¨æ„ç¼©è¿›çš„æ ¼å¼ï¼ä½†æ˜¯å› ä¸ºæˆ‘çš„æ–‡ä»¶ä¸­ï¼Œbodyå†…çš„å¾ˆå¤šä»£ç éƒ½æ²¡æœ‰ç¼©è¿›ï¼Œå› æ­¤è¿™ä¸€éƒ¨åˆ†ä»£ç æˆ‘ä¹Ÿæ²¡æœ‰ç¼©è¿›ä¸€æ ¼ã€‚</p><h3 id="ä¸‰ã€å…¶ä»–"><a href="#ä¸‰ã€å…¶ä»–" class="headerlink" title="ä¸‰ã€å…¶ä»–"></a>ä¸‰ã€å…¶ä»–</h3><h5 id="1-éƒ¨ç½²åšå®¢ä¸»é¢˜é…ç½®æ–‡ä»¶"><a href="#1-éƒ¨ç½²åšå®¢ä¸»é¢˜é…ç½®æ–‡ä»¶" class="headerlink" title="1.éƒ¨ç½²åšå®¢ä¸»é¢˜é…ç½®æ–‡ä»¶"></a>1.éƒ¨ç½²åšå®¢ä¸»é¢˜é…ç½®æ–‡ä»¶</h5><p>â€‹åœ¨æˆ‘é…ç½®è¯„è®ºåŠŸèƒ½çš„æ—¶å€™ï¼Œä¸ä»…éƒ¨ç½²äº†htmlæ–‡ä»¶ï¼Œè¿˜éƒ¨ç½²äº†ymlæ–‡ä»¶ã€‚å…·ä½“çš„éƒ¨ç½²è¦è§†å„ä¸»é¢˜è€Œå®šã€‚å› ä¸ºä¸»é¢˜éƒ¨ç½²æ–‡ä»¶å¯èƒ½å¹¶æœªé»˜è®¤å¼€å¯è¯„è®ºåŠŸèƒ½ï¼Œå› æ­¤è¦å»æ–‡ä»¶ä¸­æ‰¾åˆ°â€œcommentâ€éƒ¨åˆ†ï¼Œæ‰“å¼€è¯„è®ºåŠŸèƒ½ï¼Œå¹¶é…ç½®å…¶ä»–ç›¸åº”å¿…è¦ä»£ç ã€‚</p><h5 id="2-é‡æ–°åˆ›å»ºé¡¹ç›®"><a href="#2-é‡æ–°åˆ›å»ºé¡¹ç›®" class="headerlink" title="2.é‡æ–°åˆ›å»ºé¡¹ç›®"></a>2.é‡æ–°åˆ›å»ºé¡¹ç›®</h5><p>â€‹å¦‚æœåœ¨ç¬¬ä¸€æ¬¡é…ç½®æ—¶å‡ºé”™äº†ï¼Œæƒ³è¦å†æ¬¡é…ç½®ï¼Œä¸€å®šè¦å…ˆåˆ æ‰ä¹‹å‰çš„é¡¹ç›®ï¼Œåˆ é™¤æ–¹æ³•å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œç‚¹å¼€Geberalä¸‹æ»‘åˆ°æœ€ä¸‹é¢å°±å¯ä»¥åˆ æ‰äº†ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240422152645310.png" alt="image-20240422152645310"></p><p>â€‹ä½†æ˜¯ä»…ä»…åœ¨è¿™é‡Œåˆ æ‰æ˜¯æ²¡æœ‰ç”¨çš„ã€‚è¿˜éœ€è¦è¿›å…¥è‡ªå·±çš„GitHubç½‘ç«™ï¼Œä½ ä¼šå‘ç°é‚£é‡Œä¹Ÿåˆ›å»ºäº†ä¸€ä¸ªåŒåé¡¹ç›®ï¼Œéœ€è¦å°†å®ƒä¹Ÿåˆ é™¤ã€‚</p><p>â€‹ï¼ˆè¿™ä¸ªé”™è¯¯ä¹Ÿç¡¬æ§æˆ‘åŠå°æ—¶ğŸ˜¾ï¼‰</p><p>â€‹å¦‚æœè·Ÿç€æ•™ç¨‹æ–‡æ¡£é…ç½®ç»“æŸåï¼Œä¹Ÿæ’é™¤äº†æˆ‘çš„æ–‡ç« é‡Œçš„é—®é¢˜ï¼Œè¿˜æ˜¯æ²¡æœ‰æˆåŠŸï¼Œå¯ä»¥åœ¨è¿™é‡Œæˆ–æ•™ç¨‹ä¸‹ç•™ä¸‹è¯„è®ºï¼Œè®©å¤§å®¶ä¸€èµ·æ‰¾æ‰¾ã€‚å¬è¯´æœ‰å®˜æ–¹QQç¾¤ï¼Œä½†æ˜¯ä¸çŸ¥é“æ˜¯å“ªä¸ªğŸ˜´</p>]]></content>
    
    
    <categories>
      
      <category>Github</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Github</tag>
      
      <tag>waline</tag>
      
      <tag>comments</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>TyporaåŸºæœ¬ä½¿ç”¨æ•™ç¨‹</title>
    <link href="/2024/04/21/Typora%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/"/>
    <url>/2024/04/21/Typora%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡æ—¨åœ¨å¸®åŠ©åˆšåˆšå…¥é—¨Typoraçš„å¤§å®¶å†™åšæ–‡ğŸ‘»ã€‚</p><span id="more"></span><p>â€‹æ‰“å¼€Typoraåï¼Œçœ‹åˆ°ä¸€ç‰‡ç©ºç™½ä¸€å®šæœ‰äº›è’™åœˆã€‚ä¸è¦å®³æ€•ï¼å­¦ä¼šæ–‡ä¸­çš„å‡ ä¸ªæŒ‡ä»¤åå°±èƒ½ä¸æ»‘å†™å‡ºåƒæ ·çš„æ–‡ç« å•¦ï¼Œå…¶å®Typoraå’Œwordç›¸å·®ä¹Ÿæ²¡æœ‰å¤ªå¤§ã€‚</p><h4 id="ä¸€ã€å¦‚ä½•å†™Frontmatterï¼Ÿ"><a href="#ä¸€ã€å¦‚ä½•å†™Frontmatterï¼Ÿ" class="headerlink" title="ä¸€ã€å¦‚ä½•å†™Frontmatterï¼Ÿ"></a>ä¸€ã€å¦‚ä½•å†™Frontmatterï¼Ÿ</h4><h5 id="1-ä½•ä¸ºfrontmatterï¼Ÿ"><a href="#1-ä½•ä¸ºfrontmatterï¼Ÿ" class="headerlink" title="1.ä½•ä¸ºfrontmatterï¼Ÿ"></a>1.ä½•ä¸ºfrontmatterï¼Ÿ</h5><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240421141453727.png" alt="image-20240421141453727"></p><p>å®ƒå®šä¹‰äº†ä½ çš„åšæ–‡æ ‡é¢˜ã€è¿™ç¯‡åšæ–‡çš„åˆ†ç±»ã€æ ‡ç­¾å’Œä½œè€…åç­‰ã€‚</p><p>å¯¹äºæˆ‘çš„åšå®¢æ¥è¯´ï¼Œä½œè€…ä¸€èˆ¬éƒ½æ˜¯æˆ‘è‡ªå·±ï¼Œåœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¿®æ”¹è¿‡åå°±ä¸ç”¨æ¯æ¬¡éƒ½å†™ä¸€éäº†ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæ—¶é—´ä¸€èˆ¬ä¼šé»˜è®¤ä¸ºåˆ›å»ºåšæ–‡æ–‡æ¡£çš„æ—¶é—´ï¼Œä¹Ÿå¯è‡ªè¡Œä¿®æ”¹ã€‚</p><h5 id="2-å†™frontmatterçš„æ ¼å¼æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#2-å†™frontmatterçš„æ ¼å¼æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="2.å†™frontmatterçš„æ ¼å¼æ˜¯ä»€ä¹ˆï¼Ÿ"></a>2.å†™frontmatterçš„æ ¼å¼æ˜¯ä»€ä¹ˆï¼Ÿ</h5><p>è‹¥æƒ³åœ¨åšæ–‡ä¸­æ’å…¥frontmatterï¼Œéœ€è¦æ‰“å‡ºä¸‰ä¸ªçŸ­æ¨ªçº¿â€œâ€”â€ï¼Œå†Enterï¼Œå¯ä»¥çœ‹åˆ°</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240421142133810.png" alt="image-20240421142133810"></p><p>ç¤ºä¾‹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240421142500459.png" alt="image-20240421142500459"></p><p>æ³¨æ„ï¼š1.åªæœ‰åœ¨åšæ–‡æœ€ä¸Šæ–¹æ‰“frontmatteræ‰ä¼šç”Ÿæ•ˆ</p><p>â€‹2.è¦ä½¿ç”¨è‹±æ–‡å†’å·ï¼Œå†’å·åéœ€è¦æœ‰ç©ºæ ¼ã€‚</p><p>â€‹3.è‹¥éœ€è¦æ‰“å¤šä¸ªæ ‡ç­¾ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š<img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240421142627174.png" alt="image-20240421142627174"></p><h5 id="3-å¸¸è§çš„frontmatter"><a href="#3-å¸¸è§çš„frontmatter" class="headerlink" title="3.å¸¸è§çš„frontmatter"></a>3.å¸¸è§çš„frontmatter</h5><p>titleï¼šæ ‡é¢˜</p><p>autherï¼šä½œè€…</p><p>dateï¼šå»ºç«‹æ—¥æœŸ</p><p>updatedï¼šæ›´æ–°æ—¥æœŸ</p><p>commentsï¼šæ˜¯å¦å¼€å¯æ–‡ç« è¯„è®ºåŠŸèƒ½ï¼ˆé»˜è®¤å€¼trueï¼‰</p><p>tagsï¼šæ ‡ç­¾</p><p>categoriesï¼šåˆ†ç±»</p><p>permalinkï¼šè¦†ç›–æ–‡ç« çš„æ°¸ä¹…é“¾æ¥ï¼Œæ°¸ä¹…é“¾æ¥åº”è¯¥ä»¥ <code>/</code> æˆ– <code>.html</code> ç»“å°¾</p><p>publishedï¼šæ–‡ç« æ˜¯å¦å‘å¸ƒ</p><h4 id="äºŒã€å†™æ–‡ç« å¸¸ç”¨æŒ‡ä»¤"><a href="#äºŒã€å†™æ–‡ç« å¸¸ç”¨æŒ‡ä»¤" class="headerlink" title="äºŒã€å†™æ–‡ç« å¸¸ç”¨æŒ‡ä»¤"></a>äºŒã€å†™æ–‡ç« å¸¸ç”¨æŒ‡ä»¤</h4><h5 id="1-å¤šçº§æ ‡é¢˜"><a href="#1-å¤šçº§æ ‡é¢˜" class="headerlink" title="1.å¤šçº§æ ‡é¢˜"></a>1.å¤šçº§æ ‡é¢˜</h5><p>åœ¨å†™æ–‡ç« æ—¶ï¼Œå¾€å¾€éœ€è¦ç”¨åˆ°å¤šçº§æ ‡é¢˜ã€‚åœ¨Typoraé‡Œï¼Œä¸€çº§æ ‡é¢˜çš„å­—å¤§å°æœ€å¤§ã€‚</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs clean"># ä¸€çº§æ ‡é¢˜<br>## äºŒçº§æ ‡é¢˜<br></code></pre></td></tr></table></figure><p>ä¾æ¬¡ç±»æ¨ã€‚#åè¦åŠ ç©ºæ ¼æ‰ä¼šç”Ÿæ•ˆã€‚</p><h5 id="2-ä»£ç å—"><a href="#2-ä»£ç å—" class="headerlink" title="2.ä»£ç å—"></a>2.ä»£ç å—</h5><p>å¦‚æœæƒ³è¦åœ¨æ–‡ä¸­åŠ å…¥å¯ç›´æ¥å¤åˆ¶çš„ä»£ç å—ï¼Œåªéœ€è¦æ‰“å‡ºâ€&#96;&#96;&#96;â€œå†Enterã€‚</p><p>ä»£ç å—å³ä¸‹æ–¹å¯ä»¥è°ƒæ•´ä»£ç è¯­è¨€ã€‚</p><h5 id="3-emjoy"><a href="#3-emjoy" class="headerlink" title="3.emjoy"></a>3.emjoy</h5><p>å¾ˆå¤šå¥½çœ‹çš„emjoyéƒ½åœ¨è¿™ä¸ªç½‘é¡µï¼š<a href="https://www.webfx.com/tools/emoji-cheat-sheet/">ğŸ Emoji cheat sheet for GitHub, Basecamp, Slack &amp; more (webfx.com)</a></p><p>ä¸‹æ»‘æ‰¾åˆ°å–œæ¬¢çš„emjoyç‚¹å‡»å°±èƒ½å¤Ÿå¤åˆ¶äº†å“¦ğŸ˜‹ã€‚</p><h5 id="4-åŠ ç²—å­—ä½“-æ–œä½“ç­‰"><a href="#4-åŠ ç²—å­—ä½“-æ–œä½“ç­‰" class="headerlink" title="4.åŠ ç²—å­—ä½“&#x2F;æ–œä½“ç­‰"></a>4.åŠ ç²—å­—ä½“&#x2F;æ–œä½“ç­‰</h5><p>åªè¦é¼ æ ‡åœˆå‡ºæƒ³è¦ä¿®æ”¹çš„æ–‡æœ¬ï¼Œå³é”®å°±å¯ä»¥ä¿®æ”¹å•¦ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Typora</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Typora</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Githubå›¾åºŠé…ç½®æ•™ç¨‹</title>
    <link href="/2024/04/15/Typora%E5%9B%BE%E5%BA%8A%E9%85%8D%E7%BD%AE%E6%95%99%E7%A8%8B/"/>
    <url>/2024/04/15/Typora%E5%9B%BE%E5%BA%8A%E9%85%8D%E7%BD%AE%E6%95%99%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡è¯¦ç»†åœ°æè¿°äº†å¦‚ä½•åˆ©ç”¨Typora+PicGo+Githubå»ºç«‹å›¾åºŠï¼Œå¹¶ä¸”åˆ—å‡ºäº†å¾ˆå¤šæ–°æ‰‹å®¹æ˜“è¸©çš„å‘ï¼ˆè‡ªå·±æ·‹è¿‡é›¨è¦ä¸ºå¤§å®¶æ’‘ä¼ï¼‰ã€‚å¦‚æœå¯¹äºæŸäº›æ­¥éª¤æœ‰ç–‘æƒ‘æˆ–è€…å‡ºé”™äº†å¯ä»¥ç•™ä¸‹è¯„è®ºã€‚</p><span id="more"></span><h3 id="ä¸€ã€å»ºç«‹Githubä»“åº“"><a href="#ä¸€ã€å»ºç«‹Githubä»“åº“" class="headerlink" title="ä¸€ã€å»ºç«‹Githubä»“åº“"></a>ä¸€ã€å»ºç«‹Githubä»“åº“</h3><h5 id="1-æ–°å»ºä»“åº“"><a href="#1-æ–°å»ºä»“åº“" class="headerlink" title="1.æ–°å»ºä»“åº“"></a>1.æ–°å»ºä»“åº“</h5><p>å…ˆç™»å½•è¿›è‡ªå·±çš„Githubè´¦å·ï¼ŒæŒ‰å›¾ç¤ºä¾æ¬¡ç‚¹å‡»ï¼Œå°±èƒ½æ–°å»ºä¸€ä¸ªä»“åº“äº†ã€‚</p><p>ï¼ˆ1ï¼‰<img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240415201356717.png" alt="image-20240415201356717"></p><p>ï¼ˆ2ï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240415201449418.png" alt="image-20240415201449418"></p><p>ï¼ˆ3ï¼‰å¡«å†™ä»“åº“åï¼Œè®¾ç½®ä¸ºå…¬å¼€ï¼Œè®°å¾—è¦å‹¾é€‰æ·»åŠ READMEæ–‡ä»¶ï¼Œè¿™æ ·æ‰èƒ½åœ¨ä»“åº“ä¸­ç›´æ¥åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„mainåˆ†æ”¯ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240415202107013.png" alt="image-20240415202107013"></p><h5 id="2-ç”Ÿæˆä¸€ä¸ªtokenï¼Œç”¨äºPicGoè®¿é—®Github"><a href="#2-ç”Ÿæˆä¸€ä¸ªtokenï¼Œç”¨äºPicGoè®¿é—®Github" class="headerlink" title="2.ç”Ÿæˆä¸€ä¸ªtokenï¼Œç”¨äºPicGoè®¿é—®Github"></a>2.ç”Ÿæˆä¸€ä¸ªtokenï¼Œç”¨äºPicGoè®¿é—®Github</h5><p>ï¼ˆ1ï¼‰ä¾æ¬¡è¿›å…¥settings&#x2F;Developer settings&#x2F;Personal access tokens</p><p>ï¼ˆåæ­£ä½œè€…çš„Githubä¸ŠçœŸçš„æ‰¾ä¸åˆ°è¿™æ ·ä¸€ä¸ªè·¯å¾„ï¼Œæ‰€ä»¥ä»¥ä¸Šå·¥ä½œåšå¥½åï¼Œå¯ä»¥ç›´æ¥è®¿é—®å¦‚ä¸‹ç½‘ç«™è¿›å…¥è¿™ä¸ªç•Œé¢ï¼Œäº²æµ‹æ— è¯¯ã€‚ç½‘å€ï¼š<a href="https://github.com/settings/tokens">Personal Access Tokens (Classic) (github.com)</a>ï¼‰</p><p>ï¼ˆ2ï¼‰ï¼ˆæ®è¯´é€‰ä¸Šé¢çš„Betaé€‰é¡¹ä¼šå˜å¾—ä¸å¹¸ï¼Œè™½ç„¶ä½œè€…ç¬¬ä¸€æ¬¡å¤±è´¥æ—¶ä¹Ÿæ˜¯é€‰äº†ä¸Šé¢çš„Betaé€‰é¡¹ï¼Œä½†æ˜¯ç”±äºè¿˜å­˜åœ¨å…¶ä»–æ¼æ´ï¼Œæ‰€ä»¥å®ƒç©¶ç«Ÿå¯ä¸å¯ç”¨ä¸å¾—è€ŒçŸ¥ï¼‰<img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240415203006752.png" alt="image-20240415203006752"></p><p>ï¼ˆ3ï¼‰Noteéšä¾¿å†™å°±è¡Œï¼Œæ—¶é—´é™åº¦æˆ‘é€‰äº†æ°¸ä¹…ï¼Œå› ä¸ºå®³æ€•tokenå¤±æ•ˆï¼›</p><p>ä¸‹é¢çš„å…¶ä»–é€‰é¡¹éƒ½ä¸ç”¨ç®¡ï¼Œåªè¦å°†repoå‹¾é€‰ä¸Šå°±å¥½ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240415203417667.png" alt="image-20240415203417667"></p><p>ï¼ˆ4ï¼‰å¾—åˆ°tokenåå¥½å¥½ä¿å­˜ï¼ˆå®ƒåªä¼šåœ¨è¿™é‡Œæ˜¾ç¤ºä¸€æ¬¡ï¼‰ï¼Œç­‰ä¼šè¿˜éœ€è¦ç”¨ä¸Šã€‚</p><p>tipsï¼šå¦‚æœå› ä¸ºæŸäº›æ­¥éª¤å¤±è¯¯ï¼Œéœ€è¦é‡æ–°ç”Ÿæˆtokenï¼Œè®°å¾—æŠŠå…ˆå‰ç”Ÿæˆçš„tokenåˆ æ‰ã€‚</p><h3 id="äºŒã€PicGoé…ç½®"><a href="#äºŒã€PicGoé…ç½®" class="headerlink" title="äºŒã€PicGoé…ç½®"></a>äºŒã€PicGoé…ç½®</h3><h5 id="1-ä¸‹è½½PicGo"><a href="#1-ä¸‹è½½PicGo" class="headerlink" title="1.ä¸‹è½½PicGo"></a>1.ä¸‹è½½PicGo</h5><p>ï¼ˆ1ï¼‰ç‚¹å‡»é“¾æ¥ï¼Œç›´è¾¾ï¼š<a href="https://github.com/Molunerfinn/PicGo/releases/tag/v2.3.1">Release 2.3.1 Â· Molunerfinn&#x2F;PicGo (github.com)</a></p><p>ï¼ˆ2ï¼‰æˆ‘æ‰€ç»™å‡ºçš„é“¾æ¥æ˜¯2.3.1æ­£å¼ç‰ˆï¼Œå¦‚æœéœ€è¦æœ€æ–°ç‰ˆï¼Œå¯ä»¥ç‚¹å‡»releasesï¼Œå¦‚å›¾<img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240415204546713.png" alt="image-20240415204546713"></p><p>ï¼ˆ3ï¼‰åœ¨2.3.1è¿™ä¸ªç‰ˆæœ¬ç•Œé¢ä¸€ç›´ä¸‹æ»‘ï¼Œç›´åˆ°å¦‚å›¾ï¼Œç‚¹å‡»Assetsä¼šå‡ºç°ä»¥ä¸‹ç‰ˆæœ¬ï¼Œå¯æ ¹æ®éœ€æ±‚ä¸‹è½½ã€‚æ¯”å¦‚æˆ‘çš„è®¾å¤‡æ˜¯Windows11ï¼Œæˆ‘ä¸‹è½½çš„ç‰ˆæœ¬å·²åœ¨å›¾ä¸­åœˆå‡ºã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240415204936447.png" alt="image-20240415204936447"></p><p>ï¼ˆ4ï¼‰ä¸‹è½½åè¿›è¡Œå®‰è£…ï¼Œæ­¥éª¤æ¯”è¾ƒç®€å•å°±çœç•¥äº†ã€‚è®°ä½å®‰è£…æ—¶çš„è·¯å¾„ï¼Œåé¢ä¼šéœ€è¦ã€‚</p><p>ï¼ˆ5ï¼‰ç„¶åï¼æ˜¯ä½œè€…è¸©å¾—ä¸€ä¸ªå¤§å‘ã€‚åœ¨å®‰è£…åï¼Œæˆ‘æ€ä¹ˆéƒ½æ— æ³•æ‰“å¼€è¿™ä¸ªè½¯ä»¶ã€‚ä¸€å¼€å§‹æˆ‘ä»¥ä¸ºæ˜¯ç‰ˆæœ¬ä¸å…¼å®¹ç­‰é—®é¢˜ï¼Œä½†æ˜¯è®¾ç½®ä¹‹åä»æ—§æ— æ³•æ‰“å¼€ã€‚ä½†æ˜¯ä»»åŠ¡ç®¡ç†å™¨ä¸Šå®ƒæ˜æ˜å°±åœ¨è¿è¡Œâ€¦â€¦æˆ‘è¿˜å¸è½½é‡æ–°å®‰è£…äº†å¾ˆå¤šæ¬¡ã€‚åæ¥æ‰å‘ç°ï¼Œç‚¹å¼€å¦‚å›¾çš„åœ°æ–¹ï¼Œæ‰å‘ç°å®ƒåœ¨å·å·è¿è¡Œå‘¢ï¼ä¸çŸ¥é“ä¸ºä»€ä¹ˆå®ƒè¿è¡Œæ—¶å±…ç„¶ä¸æ˜¾ç¤ºç•Œé¢ï¼Œéœ€è¦ç‚¹ä¸€ä¸‹æ‰ä¼šæ˜¾ç¤ºã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240415205718027.png" alt="image-20240415205718027"></p><h5 id="2-PicGoé…ç½®"><a href="#2-PicGoé…ç½®" class="headerlink" title="2.PicGoé…ç½®"></a>2.PicGoé…ç½®</h5><p>ï¼ˆ1ï¼‰è¿›å…¥PicGoåï¼Œå°†æ¡†ä½çš„åœ°æ–¹ä¿®æ”¹ä¸ºGithub</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240415205845506.png" alt="image-20240415205845506"></p><p>ï¼ˆ2ï¼‰ç‚¹å‡»å›¾åºŠè®¾ç½®ï¼Œé€‰æ‹©Githubè®¾ç½®ï¼Œè¿›å…¥å¦‚ä¸‹ç•Œé¢ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240415210205262.png" alt="image-20240415210205262"></p><p>ä»“åº“åæ ¼å¼ï¼šâ€œGithubç”¨æˆ·å&#x2F;ä»“åº“åâ€</p><p>åˆ†æ”¯åï¼šmainï¼ˆä¸è¦ç”¨masterï¼‰</p><p>tokenï¼šåœ¨ç¬¬ä¸€æ­¥ä¿å­˜çš„tokenç›´æ¥ç²˜è´´è¿›æ¥</p><p>å­˜å‚¨è·¯å¾„ï¼šå¯è®¾å¯ä¸è®¾</p><p>è‡ªå®šä¹‰åŸŸåæ ¼å¼ï¼š<a href="https://cdn.jsdelivr.net/gh/[Github%E7%94%A8%E6%88%B7%E5%90%8D]/[%E4%BB%93%E5%BA%93%E5%90%8D]@main">https://cdn.jsdelivr.net/gh/[Githubç”¨æˆ·å]/[ä»“åº“å]@main</a></p><p>ï¼ˆè¿™ä¸ªåŸŸåæ®è¯´å¯ä»¥åŠ å¿«è®¿é—®å›¾ç‰‡çš„é€Ÿåº¦ï¼Œä¸çŸ¥é“æ—¥åä¼šä¸ä¼šå¤±æ•ˆï¼Œä½†æ˜¯æš‚æ—¶æ˜¯å¯ä»¥ç”¨çš„ï¼‰</p><p>ç‚¹å‡»ç¡®å®šï¼ŒPicGoå°±é…ç½®å¥½å•¦ã€‚</p><p>ï¼ˆ3ï¼‰è¡¥å……ï¼šç‚¹å‡»PicGoè®¾ç½®ä¸­çš„è®¾ç½®severï¼Œå¦‚æœä¸‹å›¾å¤„ä¸æ˜¯36677è¦ä¿®æ”¹ä¸º36677ï¼Œå¦åˆ™ä¼šå‡ºé”™</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240415210909195.png" alt="image-20240415210909195"></p><h3 id="ä¸‰ã€Typoraé…ç½®"><a href="#ä¸‰ã€Typoraé…ç½®" class="headerlink" title="ä¸‰ã€Typoraé…ç½®"></a>ä¸‰ã€Typoraé…ç½®</h3><p>ï¼ˆ1ï¼‰ç‚¹å‡»å³ä¸Šè§’æ–‡ä»¶ï¼Œè¿›å…¥åå¥½è®¾ç½®</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240415211109267.png" alt="image-20240415211109267"></p><p>ï¼ˆ2ï¼‰è¿›å…¥å›¾åƒè®¾ç½®ï¼Œæ’å…¥å›¾ç‰‡æ—¶é€‰æ‹©ä¸Šä¼ å›¾ç‰‡ï¼Œå¹¶å°†å¦‚å›¾æ‰€ç¤ºçš„é€‰é¡¹æ‰“å‹¾ï¼›</p><p>ä¸Šä¼ æœåŠ¡è®¾å®šè®¾ç½®ä¸ºPicGoï¼ˆappï¼‰ï¼Œä¸‹é¢å¡«å†™PicGoå®‰è£…çš„è·¯å¾„ï¼Œä¸€å®šè¦å¡«å†™å®Œæ•´ï¼ŒæŠŠPicGo.exeä¹Ÿè¦æ”¾åˆ°è·¯å¾„é‡Œã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240415211453817.png" alt="image-20240415211453817"></p><p>ï¼ˆ3ï¼‰è‡³æ­¤æ‰€æœ‰çš„é…ç½®å·²ç»å®Œæˆã€‚</p><p>ç¡®ä¿ç½‘ç»œå·²ç»è¿æ¥å¥½ï¼Œç‚¹å‡»ä¸Šå›¾å·¦ä¸‹è§’çš„éªŒè¯å›¾ç‰‡ä¸Šä¼ é€‰é¡¹ï¼Œè‹¥å‡ºç°å¦‚ä¸‹å›¾çš„ç•Œé¢ï¼Œè¯æ˜ä¸Šä¼ æˆåŠŸï¼ŒPicGoåº”ç”¨ä¹Ÿä¼šå‘æ¥é€šçŸ¥è¯´ä¸Šä¼ æˆåŠŸã€‚æ­¤æ—¶åœ¨è‡ªå·±çš„Githubä»“åº“é‡Œä¹Ÿèƒ½å¤Ÿæ‰¾åˆ°ç›¸åº”å›¾ç‰‡ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240415211851779.png" alt="image-20240415211851779"></p><p>å¦‚æœä»ç„¶ä¸æˆåŠŸä¹Ÿä¸è¦æ°”é¦å‘€ã€‚ä½œè€…é…ç½®äº†å¿«ä¸€å¤©æ‰æˆåŠŸâ€¦â€¦â€¦â€¦å› ä¸ºå…ˆé…ç½®äº†Giteeç»“æœå‘ç°å®ƒå¤±æ•ˆäº†ï¼ˆå¤±æ•ˆäº†è¿˜ä¸åˆ æ•™ç¨‹ï¼Œå¤ªè¿‡åˆ†äº†ï¼ï¼ï¼ï¼ï¼‰</p><p>å¦‚æœé…ç½®æˆåŠŸå•¦å°±æ­å–œä½ å•¦ï¼Œä»æ­¤ä»¥åå°±å¯ä»¥ä¸æ»‘åœ°åœ¨Typoraé‡Œç²˜è´´å›¾ç‰‡äº†~</p>]]></content>
    
    
    <categories>
      
      <category>Typora</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Typora</tag>
      
      <tag>Github</tag>
      
      <tag>PicGo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€è¸©é›·åˆè¾‘ã€‘åˆ©ç”¨Hexoæ­å»ºä»¥fluidä¸ºä¸»é¢˜çš„Githubåšå®¢éœ€è¦æ³¨æ„ä»€ä¹ˆï¼Ÿ</title>
    <link href="/2024/04/13/github%E5%8D%9A%E5%AE%A2%E5%BB%BA%E7%AB%8B%E6%95%99%E7%A8%8B/"/>
    <url>/2024/04/13/github%E5%8D%9A%E5%AE%A2%E5%BB%BA%E7%AB%8B%E6%95%99%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<p>â€‹æ­å»ºåšå®¢æ˜¯ä¸€ä¸ªéå¸¸æ¼«é•¿çš„è¿‡ç¨‹ï¼Œåœ¨æœŸé—´æˆ‘å‚ç…§è¿‡å‡ åç¯‡æ•™ç¨‹ï¼Œåœ¨éå¸¸å‰å®³çš„GinaåŒå­¦çš„å¸®åŠ©ä¸‹ï¼Œååå¤å¤è¯•éªŒäº†å¾ˆå¤šå¾ˆå¤šæ¬¡ï¼Œç»è¿‡å¾ˆå¤šå¤©åæ‰ç»ˆäºèƒ½é€šè¿‡æˆ‘çš„åšå®¢ç½‘å€è®¿é—®æˆ‘çš„åšå®¢ä¸»é¡µå•¦ã€‚<span id="more"></span>ä¸­é—´è¸©è¿‡ä¸å°‘é›·ï¼Œæœ‰æ—¶å€™ä¸€åº¦ç»æœ›è¿‡ï¼ˆå› ä¸ºåœ¨ç½‘ä¸Šæ ¹æœ¬æœä¸åˆ°å’Œæˆ‘ä¸€æ ·çš„é”™è¯¯QAQï¼‰ï¼Œå¥½åœ¨æœ€ç»ˆåšæŒä¸‹æ¥äº†ã€‚</p><p>â€‹å…ˆé™„ä¸Šfluidä¸»é¢˜çš„å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://github.com/fluid-dev/hexo-theme-fluid">fluid-dev&#x2F;hexo-theme-fluid: :ocean: ä¸€æ¬¾ Material Design é£æ ¼çš„ Hexo ä¸»é¢˜ &#x2F; An elegant Material-Design theme for Hexo (github.com)</a>é‡Œé¢æœ‰å¾ˆè¯¦ç»†çš„é…ç½®æ•™ç¨‹å“¦ã€‚</p><h4 id="ä¸€ã€-config-ymlé…ç½®æ–‡ä»¶æ’°å†™"><a href="#ä¸€ã€-config-ymlé…ç½®æ–‡ä»¶æ’°å†™" class="headerlink" title="ä¸€ã€_config.ymlé…ç½®æ–‡ä»¶æ’°å†™"></a>ä¸€ã€_config.ymlé…ç½®æ–‡ä»¶æ’°å†™</h4><p>â€‹å®ƒå°±åœ¨ä½ æ‰€æ­å»ºçš„åšå®¢æ–‡æ¡£çš„æ ¹ç›®å½•é‡Œï¼Œæ˜¯éå¸¸é‡è¦çš„é…ç½®æ–‡æ¡£ã€‚</p><h5 id="1-åšå®¢ä¸»é¢˜ä¿®æ”¹"><a href="#1-åšå®¢ä¸»é¢˜ä¿®æ”¹" class="headerlink" title="1.åšå®¢ä¸»é¢˜ä¿®æ”¹"></a>1.åšå®¢ä¸»é¢˜ä¿®æ”¹</h5><p>â€‹æ‰“å¼€æ–‡æ¡£åæ‹‰åˆ°ä¸‹é¢ï¼Œæ‰¾åˆ°<img src="https://cdn.jsdelivr.net/gh/Yaodeer/pict@main/image-20240416163624718.png" alt="image-20240416163624718"></p><p>â€‹å°†themeåæ”¹ä¸ºfluidï¼Œæ³¨æ„fluidä¸»é¢˜çš„æ–‡ä»¶è¦æ”¾å…¥themesæ–‡ä»¶å¤¹é‡Œã€‚å¦‚æœæ˜¯ä¸‹è½½äº†zipå‹ç¼©åŒ…ï¼Œéœ€è¦å°†å…¶è§£å‹åˆ°è¯¥æ–‡ä»¶å¤¹é‡Œå¹¶ä¿®æ”¹åå­—ä¸ºfluidã€‚</p><h5 id="2-deployé…ç½®"><a href="#2-deployé…ç½®" class="headerlink" title="2.deployé…ç½®"></a>2.deployé…ç½®</h5><p>â€‹è¿™ä¸ªä»£ç å—å°±åœ¨ä¸»é¢˜é…ç½®çš„ä¸‹æ–¹ã€‚æ³¨æ„ä¸è¦æŒ‰ç…§ç½‘ä¸Šæœç´¢çš„æ•™ç¨‹é…ç½®ï¼Œå› ä¸ºå¾ˆå¤šæ•™ç¨‹éƒ½å·²ç»å¾ˆè€äº†ï¼Œæ‰€ä»¥å¯èƒ½ä¼šå‡ºé—®é¢˜ã€‚æŒ‰ç…§ä¸‹é¢çš„æ ¼å¼é…ç½®æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚ï¼ˆåˆ†æ”¯å¿…é¡»æ˜¯mainï¼‰</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"># <span class="hljs-title class_">Deployment</span><br>## <span class="hljs-title class_">Docs</span>: <span class="hljs-attr">https</span>:<span class="hljs-comment">//hexo.io/docs/one-command-deployment</span><br><span class="hljs-attr">deploy</span>:<br>  <span class="hljs-attr">type</span>: git<br>  <span class="hljs-attr">repo</span>: git@github.<span class="hljs-property">com</span>:[åšå®¢å]/[ä»“åº“å].<span class="hljs-property">github</span>.<span class="hljs-property">io</span>.<span class="hljs-property">git</span><br>  <span class="hljs-attr">branch</span>: main<br></code></pre></td></tr></table></figure><p>æ³¨æ„ï¼šæ¯ä¸ªå†’å·åéƒ½æœ‰ä¸€ä¸ªç©ºæ ¼ã€‚</p><h5 id="3-è®°å¾—ä¿å­˜ä¿®æ”¹"><a href="#3-è®°å¾—ä¿å­˜ä¿®æ”¹" class="headerlink" title="3.è®°å¾—ä¿å­˜ä¿®æ”¹"></a>3.è®°å¾—ä¿å­˜ä¿®æ”¹</h5><p>â€‹æˆ‘æ‰€ç”¨çš„ç¼–è¯‘è½¯ä»¶æ˜¯vscodeï¼Œè¿™ä¸ªè½¯ä»¶ç›´æ¥é€€å‡ºæ˜¯ä¸ä¼šä¿å­˜çš„ã€‚å¿«æ·é”®Ctrl+så¯ä»¥ä¿å­˜ä¿®æ”¹ï¼Œç„¶åä¸ç”¨é€€å‡ºå°±å¯ä»¥ç»§ç»­hexo g+hexo sä¸¤æ­¥èµ°è¯•çœ‹ç½‘é¡µæ•ˆæœå•¦ã€‚</p><h4 id="äºŒã€åšå®¢éƒ¨ç½²çš„é—®é¢˜"><a href="#äºŒã€åšå®¢éƒ¨ç½²çš„é—®é¢˜" class="headerlink" title="äºŒã€åšå®¢éƒ¨ç½²çš„é—®é¢˜"></a>äºŒã€åšå®¢éƒ¨ç½²çš„é—®é¢˜</h4><p>â€‹æˆ‘ä»¬çŸ¥é“è¦æ­å»ºåšå®¢ï¼Œå°±è¦å»Githubå®˜ç½‘åˆ›å»ºä¸€ä¸ªåšå®¢ï¼Œç„¶åå†å»ºç«‹ä¸€ä¸ªä»“åº“ç”¨äºä¿å­˜æˆ‘ä»¬çš„ç½‘é¡µã€‚åšå®¢çš„åå­—å¯ä»¥éšæ„å–ï¼Œä½†æ˜¯ä»“åº“åï¼Œå¦‚æœä½ å’Œæˆ‘ä¸€æ ·å–çš„æ˜¯è‹±æ–‡åï¼Œ<strong>ç¬¬ä¸€ä¸ªå­—æ¯ä¸€å®šè¦å°å†™ï¼ï¼ï¼ï¼ï¼</strong></p><p>â€‹å› ä¸ºæˆ‘ä»¬ä¼šå‘ç°ï¼Œå½“æˆ‘ä»¬æƒ³è¦è¿›å…¥è‡ªå·±çš„åšå®¢å®˜ç½‘æ—¶ï¼Œè¾“å…¥çš„ç½‘å€æ ¼å¼å¦‚ä¸‹ï¼šhttps:&#x2F;&#x2F;[ä»“åº“å].github.io&#x2F;ï¼Œè€Œæ¯æ¬¡è¿›å…¥ç½‘å€æ—¶ï¼Œä»“åº“åçš„ç¬¬ä¸€ä¸ªå­—æ¯å°±ä¼šè‡ªåŠ¨ä»å¤§å†™å˜æˆå°å†™ï¼Œå› æ­¤è®¿é—®æ—¶å°±ä¼šæ˜¾ç¤º404ã€‚</p><p>â€‹ä¸çŸ¥é“æ˜¯ä¸»é¢˜çš„é—®é¢˜è¿˜æ˜¯ä»€ä¹ˆï¼Œåæ­£è¿™ä¸ªé—®é¢˜å®³æˆ‘æ‰¾bugæ‰¾äº†å¿«ä¸¤ä¸ªå°æ—¶â€¦â€¦</p><h5 id="1-é…ç½®å®‰è£…ç¼ºå¤±"><a href="#1-é…ç½®å®‰è£…ç¼ºå¤±" class="headerlink" title="1.é…ç½®å®‰è£…ç¼ºå¤±"></a>1.é…ç½®å®‰è£…ç¼ºå¤±</h5><p>æœ‰æ—¶å€™hexo dåæŠ¥é”™æ˜¯å› ä¸ºæœ‰äº›é…ç½®æ²¡æœ‰å®‰è£…,ç”¨ä¸‹é¢çš„æŒ‡ä»¤å®‰è£…å¥½å°±å¯</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">npm install hexo-deployer-git <span class="hljs-comment">--save</span><br></code></pre></td></tr></table></figure><h5 id="2-åœ¨æ ¹ç›®å½•ä¸‹éƒ¨ç½²"><a href="#2-åœ¨æ ¹ç›®å½•ä¸‹éƒ¨ç½²" class="headerlink" title="2.åœ¨æ ¹ç›®å½•ä¸‹éƒ¨ç½²"></a>2.åœ¨æ ¹ç›®å½•ä¸‹éƒ¨ç½²</h5><p>æœ‰æ—¶å€™æ­å»ºåšå®¢åœ¨éƒ¨ç½²æ—¶ä¼šå¿˜è®°é€€å‡ºåˆ°æ ¹ç›®å½•ï¼Œæ­¤æ—¶ä¹Ÿä¼šå‡ºé”™ã€‚</p><h4 id="ä¸‰ã€å…¶ä»–"><a href="#ä¸‰ã€å…¶ä»–" class="headerlink" title="ä¸‰ã€å…¶ä»–"></a>ä¸‰ã€å…¶ä»–</h4><p>1.åœ¨éƒ¨ç½²åšå®¢æ—¶æœ€å¥½hexo cleanåå†hexo g+hexo dã€‚</p><p>2.åšæ–‡çš„æ–‡ä»¶æ”¾ç½®åœ¨sourceæ–‡ä»¶å¤¹ä¸‹çš„_postsæ–‡ä»¶å¤¹å†…ã€‚ï¼ˆfluidä¸»é¢˜é…ç½®åéƒ½ä¼šé»˜è®¤åˆ›å»ºä¸€ä¸ªè¿™æ ·çš„æ–‡ä»¶ï¼Œé‡Œé¢æœ‰ä¸€ç¯‡é»˜è®¤çš„æ–‡æ¡£ï¼‰</p><p>3.åšå®¢ä¸»é¢˜æ–‡æ¡£çš„é…ç½®éœ€è¦å¾ˆå¤šå›¾ç‰‡ï¼Œåƒä¸‡ä¸è¦æŠŠä»–ä»¬æ”¾åœ¨publicæ–‡ä»¶å¤¹ä¸‹ã€‚å› ä¸ºpublicæ˜¯æ¯æ¬¡éƒ¨ç½²åšå®¢ç”Ÿæˆçš„é™æ€æ–‡ä»¶ï¼Œæ¯æ¬¡hexo cleanä¹‹åå°±ä¼šå°†å…¶åˆ é™¤ã€‚ä½†æ˜¯åšå®¢æ–‡ä»¶æ˜¯ä¼šä¿ç•™ä¸‹æ¥çš„ï¼Œæ‰€ä»¥ä¸ç”¨æ‹…å¿ƒã€‚é‚£ä¹ˆ<strong>è¿™äº›ç…§ç‰‡ï¼Œæœ€å¥½æ”¾åœ¨sourceæ–‡ä»¶å¤¹ä¸‹çš„imgæ–‡ä»¶å¤¹å†…ä¿å­˜</strong>ï¼ˆè‹¥æ²¡æœ‰å°±æ–°å»ºä¸€ä¸ªè¿™æ ·çš„æ–‡ä»¶å¤¹ï¼‰ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Github</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Github</tag>
      
      <tag>fluid</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2024/04/12/hello-world/"/>
    <url>/2024/04/12/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo server<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo generate<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
